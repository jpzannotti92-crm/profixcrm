var ZT=Object.defineProperty;var JT=(t,e,r)=>e in t?ZT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var _e=(t,e,r)=>(JT(t,typeof e!="symbol"?e+"":e,r),r),Ix=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var G=(t,e,r)=>(Ix(t,e,"read from private field"),r?r.call(t):e.get(t)),Re=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Te=(t,e,r,s)=>(Ix(t,e,"write to private field"),s?s.call(t,r):e.set(t,r),r);var qh=(t,e,r,s)=>({set _(n){Te(t,e,n,r)},get _(){return G(t,e,s)}}),Xe=(t,e,r)=>(Ix(t,e,"access private method"),r);function e6(t,e){for(var r=0;r<e.length;r++){const s=e[r];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in t)){const i=Object.getOwnPropertyDescriptor(s,n);i&&Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();function t6(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var B4={exports:{}},Im={},$4={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wh=Symbol.for("react.element"),r6=Symbol.for("react.portal"),s6=Symbol.for("react.fragment"),n6=Symbol.for("react.strict_mode"),i6=Symbol.for("react.profiler"),a6=Symbol.for("react.provider"),o6=Symbol.for("react.context"),l6=Symbol.for("react.forward_ref"),c6=Symbol.for("react.suspense"),d6=Symbol.for("react.memo"),u6=Symbol.for("react.lazy"),zb=Symbol.iterator;function h6(t){return t===null||typeof t!="object"?null:(t=zb&&t[zb]||t["@@iterator"],typeof t=="function"?t:null)}var z4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U4=Object.assign,V4={};function Ic(t,e,r){this.props=t,this.context=e,this.refs=V4,this.updater=r||z4}Ic.prototype.isReactComponent={};Ic.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ic.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function W4(){}W4.prototype=Ic.prototype;function vv(t,e,r){this.props=t,this.context=e,this.refs=V4,this.updater=r||z4}var yv=vv.prototype=new W4;yv.constructor=vv;U4(yv,Ic.prototype);yv.isPureReactComponent=!0;var Ub=Array.isArray,H4=Object.prototype.hasOwnProperty,bv={current:null},Y4={key:!0,ref:!0,__self:!0,__source:!0};function q4(t,e,r){var s,n={},i=null,a=null;if(e!=null)for(s in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)H4.call(e,s)&&!Y4.hasOwnProperty(s)&&(n[s]=e[s]);var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];n.children=c}if(t&&t.defaultProps)for(s in l=t.defaultProps,l)n[s]===void 0&&(n[s]=l[s]);return{$$typeof:wh,type:t,key:i,ref:a,props:n,_owner:bv.current}}function f6(t,e){return{$$typeof:wh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function wv(t){return typeof t=="object"&&t!==null&&t.$$typeof===wh}function m6(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Vb=/\/+/g;function Bx(t,e){return typeof t=="object"&&t!==null&&t.key!=null?m6(""+t.key):e.toString(36)}function Q0(t,e,r,s,n){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case wh:case r6:a=!0}}if(a)return a=t,n=n(a),t=s===""?"."+Bx(a,0):s,Ub(n)?(r="",t!=null&&(r=t.replace(Vb,"$&/")+"/"),Q0(n,e,r,"",function(d){return d})):n!=null&&(wv(n)&&(n=f6(n,r+(!n.key||a&&a.key===n.key?"":(""+n.key).replace(Vb,"$&/")+"/")+t)),e.push(n)),1;if(a=0,s=s===""?".":s+":",Ub(t))for(var l=0;l<t.length;l++){i=t[l];var c=s+Bx(i,l);a+=Q0(i,e,r,c,n)}else if(c=h6(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=s+Bx(i,l++),a+=Q0(i,e,r,c,n);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Gh(t,e,r){if(t==null)return t;var s=[],n=0;return Q0(t,s,"","",function(i){return e.call(r,i,n++)}),s}function x6(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var is={current:null},Z0={transition:null},p6={ReactCurrentDispatcher:is,ReactCurrentBatchConfig:Z0,ReactCurrentOwner:bv};function G4(){throw Error("act(...) is not supported in production builds of React.")}Ze.Children={map:Gh,forEach:function(t,e,r){Gh(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Gh(t,function(){e++}),e},toArray:function(t){return Gh(t,function(e){return e})||[]},only:function(t){if(!wv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ze.Component=Ic;Ze.Fragment=s6;Ze.Profiler=i6;Ze.PureComponent=vv;Ze.StrictMode=n6;Ze.Suspense=c6;Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p6;Ze.act=G4;Ze.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=U4({},t.props),n=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=bv.current),e.key!==void 0&&(n=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)H4.call(e,c)&&!Y4.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:wh,type:t.type,key:n,ref:i,props:s,_owner:a}};Ze.createContext=function(t){return t={$$typeof:o6,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:a6,_context:t},t.Consumer=t};Ze.createElement=q4;Ze.createFactory=function(t){var e=q4.bind(null,t);return e.type=t,e};Ze.createRef=function(){return{current:null}};Ze.forwardRef=function(t){return{$$typeof:l6,render:t}};Ze.isValidElement=wv;Ze.lazy=function(t){return{$$typeof:u6,_payload:{_status:-1,_result:t},_init:x6}};Ze.memo=function(t,e){return{$$typeof:d6,type:t,compare:e===void 0?null:e}};Ze.startTransition=function(t){var e=Z0.transition;Z0.transition={};try{t()}finally{Z0.transition=e}};Ze.unstable_act=G4;Ze.useCallback=function(t,e){return is.current.useCallback(t,e)};Ze.useContext=function(t){return is.current.useContext(t)};Ze.useDebugValue=function(){};Ze.useDeferredValue=function(t){return is.current.useDeferredValue(t)};Ze.useEffect=function(t,e){return is.current.useEffect(t,e)};Ze.useId=function(){return is.current.useId()};Ze.useImperativeHandle=function(t,e,r){return is.current.useImperativeHandle(t,e,r)};Ze.useInsertionEffect=function(t,e){return is.current.useInsertionEffect(t,e)};Ze.useLayoutEffect=function(t,e){return is.current.useLayoutEffect(t,e)};Ze.useMemo=function(t,e){return is.current.useMemo(t,e)};Ze.useReducer=function(t,e,r){return is.current.useReducer(t,e,r)};Ze.useRef=function(t){return is.current.useRef(t)};Ze.useState=function(t){return is.current.useState(t)};Ze.useSyncExternalStore=function(t,e,r){return is.current.useSyncExternalStore(t,e,r)};Ze.useTransition=function(){return is.current.useTransition()};Ze.version="18.3.1";$4.exports=Ze;var w=$4.exports;const Ie=t6(w),bc=e6({__proto__:null,default:Ie},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g6=w,v6=Symbol.for("react.element"),y6=Symbol.for("react.fragment"),b6=Object.prototype.hasOwnProperty,w6=g6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,k6={key:!0,ref:!0,__self:!0,__source:!0};function K4(t,e,r){var s,n={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(s in e)b6.call(e,s)&&!k6.hasOwnProperty(s)&&(n[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)n[s]===void 0&&(n[s]=e[s]);return{$$typeof:v6,type:t,key:i,ref:a,props:n,_owner:w6.current}}Im.Fragment=y6;Im.jsx=K4;Im.jsxs=K4;B4.exports=Im;var o=B4.exports,mg={},X4={exports:{}},Ms={},Q4={exports:{}},Z4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(re,W){var K=re.length;re.push(W);e:for(;0<K;){var Z=K-1>>>1,M=re[Z];if(0<n(M,W))re[Z]=W,re[K]=M,K=Z;else break e}}function r(re){return re.length===0?null:re[0]}function s(re){if(re.length===0)return null;var W=re[0],K=re.pop();if(K!==W){re[0]=K;e:for(var Z=0,M=re.length,X=M>>>1;Z<X;){var V=2*(Z+1)-1,Y=re[V],H=V+1,ie=re[H];if(0>n(Y,K))H<M&&0>n(ie,Y)?(re[Z]=ie,re[H]=K,Z=H):(re[Z]=Y,re[V]=K,Z=V);else if(H<M&&0>n(ie,K))re[Z]=ie,re[H]=K,Z=H;else break e}}return W}function n(re,W){var K=re.sortIndex-W.sortIndex;return K!==0?K:re.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],u=1,h=null,f=3,m=!1,x=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(re){for(var W=r(d);W!==null;){if(W.callback===null)s(d);else if(W.startTime<=re)s(d),W.sortIndex=W.expirationTime,e(c,W);else break;W=r(d)}}function k(re){if(p=!1,y(re),!x)if(r(c)!==null)x=!0,I(N);else{var W=r(d);W!==null&&te(k,W.startTime-re)}}function N(re,W){x=!1,p&&(p=!1,v(_),_=-1),m=!0;var K=f;try{for(y(W),h=r(c);h!==null&&(!(h.expirationTime>W)||re&&!F());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,f=h.priorityLevel;var M=Z(h.expirationTime<=W);W=t.unstable_now(),typeof M=="function"?h.callback=M:h===r(c)&&s(c),y(W)}else s(c);h=r(c)}if(h!==null)var X=!0;else{var V=r(d);V!==null&&te(k,V.startTime-W),X=!1}return X}finally{h=null,f=K,m=!1}}var E=!1,j=null,_=-1,S=5,C=-1;function F(){return!(t.unstable_now()-C<S)}function P(){if(j!==null){var re=t.unstable_now();C=re;var W=!0;try{W=j(!0,re)}finally{W?B():(E=!1,j=null)}}else E=!1}var B;if(typeof b=="function")B=function(){b(P)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,D=Q.port2;Q.port1.onmessage=P,B=function(){D.postMessage(null)}}else B=function(){g(P,0)};function I(re){j=re,E||(E=!0,B())}function te(re,W){_=g(function(){re(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(re){re.callback=null},t.unstable_continueExecution=function(){x||m||(x=!0,I(N))},t.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<re?Math.floor(1e3/re):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(re){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var K=f;f=W;try{return re()}finally{f=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(re,W){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var K=f;f=re;try{return W()}finally{f=K}},t.unstable_scheduleCallback=function(re,W,K){var Z=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?Z+K:Z):K=Z,re){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=K+M,re={id:u++,callback:W,priorityLevel:re,startTime:K,expirationTime:M,sortIndex:-1},K>Z?(re.sortIndex=K,e(d,re),r(c)===null&&re===r(d)&&(p?(v(_),_=-1):p=!0,te(k,K-Z))):(re.sortIndex=M,e(c,re),x||m||(x=!0,I(N))),re},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(re){var W=f;return function(){var K=f;f=W;try{return re.apply(this,arguments)}finally{f=K}}}})(Z4);Q4.exports=Z4;var _6=Q4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N6=w,As=_6;function ye(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var J4=new Set,vu={};function nl(t,e){wc(t,e),wc(t+"Capture",e)}function wc(t,e){for(vu[t]=e,t=0;t<e.length;t++)J4.add(e[t])}var Ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xg=Object.prototype.hasOwnProperty,j6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wb={},Hb={};function E6(t){return xg.call(Hb,t)?!0:xg.call(Wb,t)?!1:j6.test(t)?Hb[t]=!0:(Wb[t]=!0,!1)}function S6(t,e,r,s){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function C6(t,e,r,s){if(e===null||typeof e>"u"||S6(t,e,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function as(t,e,r,s,n,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Er={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Er[t]=new as(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Er[e]=new as(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Er[t]=new as(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Er[t]=new as(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Er[t]=new as(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Er[t]=new as(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Er[t]=new as(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Er[t]=new as(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Er[t]=new as(t,5,!1,t.toLowerCase(),null,!1,!1)});var kv=/[\-:]([a-z])/g;function _v(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(kv,_v);Er[e]=new as(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(kv,_v);Er[e]=new as(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(kv,_v);Er[e]=new as(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Er[t]=new as(t,1,!1,t.toLowerCase(),null,!1,!1)});Er.xlinkHref=new as("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Er[t]=new as(t,1,!1,t.toLowerCase(),null,!0,!0)});function Nv(t,e,r,s){var n=Er.hasOwnProperty(e)?Er[e]:null;(n!==null?n.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(C6(e,r,n,s)&&(r=null),s||n===null?E6(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):n.mustUseProperty?t[n.propertyName]=r===null?n.type===3?!1:"":r:(e=n.attributeName,s=n.attributeNamespace,r===null?t.removeAttribute(e):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,s?t.setAttributeNS(s,e,r):t.setAttribute(e,r))))}var Oi=N6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kh=Symbol.for("react.element"),Tl=Symbol.for("react.portal"),Al=Symbol.for("react.fragment"),jv=Symbol.for("react.strict_mode"),pg=Symbol.for("react.profiler"),ej=Symbol.for("react.provider"),tj=Symbol.for("react.context"),Ev=Symbol.for("react.forward_ref"),gg=Symbol.for("react.suspense"),vg=Symbol.for("react.suspense_list"),Sv=Symbol.for("react.memo"),qi=Symbol.for("react.lazy"),rj=Symbol.for("react.offscreen"),Yb=Symbol.iterator;function rd(t){return t===null||typeof t!="object"?null:(t=Yb&&t[Yb]||t["@@iterator"],typeof t=="function"?t:null)}var Mt=Object.assign,$x;function Ed(t){if($x===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);$x=e&&e[1]||""}return`
`+$x+t}var zx=!1;function Ux(t,e){if(!t||zx)return"";zx=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var s=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){s=d}t.call(e.prototype)}else{try{throw Error()}catch(d){s=d}t()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),i=s.stack.split(`
`),a=n.length-1,l=i.length-1;1<=a&&0<=l&&n[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(n[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||n[a]!==i[l]){var c=`
`+n[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{zx=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Ed(t):""}function T6(t){switch(t.tag){case 5:return Ed(t.type);case 16:return Ed("Lazy");case 13:return Ed("Suspense");case 19:return Ed("SuspenseList");case 0:case 2:case 15:return t=Ux(t.type,!1),t;case 11:return t=Ux(t.type.render,!1),t;case 1:return t=Ux(t.type,!0),t;default:return""}}function yg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Al:return"Fragment";case Tl:return"Portal";case pg:return"Profiler";case jv:return"StrictMode";case gg:return"Suspense";case vg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tj:return(t.displayName||"Context")+".Consumer";case ej:return(t._context.displayName||"Context")+".Provider";case Ev:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sv:return e=t.displayName||null,e!==null?e:yg(t.type)||"Memo";case qi:e=t._payload,t=t._init;try{return yg(t(e))}catch{}}return null}function A6(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yg(e);case 8:return e===jv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Da(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function sj(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function F6(t){var e=sj(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.call(this)},set:function(a){s=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(a){s=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xh(t){t._valueTracker||(t._valueTracker=F6(t))}function nj(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),s="";return t&&(s=sj(t)?t.checked?"true":"false":t.value),t=s,t!==r?(e.setValue(t),!0):!1}function jf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bg(t,e){var r=e.checked;return Mt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function qb(t,e){var r=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;r=Da(e.value!=null?e.value:r),t._wrapperState={initialChecked:s,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ij(t,e){e=e.checked,e!=null&&Nv(t,"checked",e,!1)}function wg(t,e){ij(t,e);var r=Da(e.value),s=e.type;if(r!=null)s==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?kg(t,e.type,r):e.hasOwnProperty("defaultValue")&&kg(t,e.type,Da(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gb(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function kg(t,e,r){(e!=="number"||jf(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Sd=Array.isArray;function Wl(t,e,r,s){if(t=t.options,e){e={};for(var n=0;n<r.length;n++)e["$"+r[n]]=!0;for(r=0;r<t.length;r++)n=e.hasOwnProperty("$"+t[r].value),t[r].selected!==n&&(t[r].selected=n),n&&s&&(t[r].defaultSelected=!0)}else{for(r=""+Da(r),e=null,n=0;n<t.length;n++){if(t[n].value===r){t[n].selected=!0,s&&(t[n].defaultSelected=!0);return}e!==null||t[n].disabled||(e=t[n])}e!==null&&(e.selected=!0)}}function _g(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ye(91));return Mt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Kb(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ye(92));if(Sd(r)){if(1<r.length)throw Error(ye(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Da(r)}}function aj(t,e){var r=Da(e.value),s=Da(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),s!=null&&(t.defaultValue=""+s)}function Xb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function oj(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ng(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?oj(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qh,lj=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,s,n){MSApp.execUnsafeLocalFunction(function(){return t(e,r,s,n)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Qh=Qh||document.createElement("div"),Qh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yu(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Vd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},P6=["Webkit","ms","Moz","O"];Object.keys(Vd).forEach(function(t){P6.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vd[e]=Vd[t]})});function cj(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Vd.hasOwnProperty(t)&&Vd[t]?(""+e).trim():e+"px"}function dj(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var s=r.indexOf("--")===0,n=cj(r,e[r],s);r==="float"&&(r="cssFloat"),s?t.setProperty(r,n):t[r]=n}}var M6=Mt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jg(t,e){if(e){if(M6[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ye(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ye(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ye(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ye(62))}}function Eg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sg=null;function Cv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cg=null,Hl=null,Yl=null;function Qb(t){if(t=Nh(t)){if(typeof Cg!="function")throw Error(ye(280));var e=t.stateNode;e&&(e=Vm(e),Cg(t.stateNode,t.type,e))}}function uj(t){Hl?Yl?Yl.push(t):Yl=[t]:Hl=t}function hj(){if(Hl){var t=Hl,e=Yl;if(Yl=Hl=null,Qb(t),e)for(t=0;t<e.length;t++)Qb(e[t])}}function fj(t,e){return t(e)}function mj(){}var Vx=!1;function xj(t,e,r){if(Vx)return t(e,r);Vx=!0;try{return fj(t,e,r)}finally{Vx=!1,(Hl!==null||Yl!==null)&&(mj(),hj())}}function bu(t,e){var r=t.stateNode;if(r===null)return null;var s=Vm(r);if(s===null)return null;r=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ye(231,e,typeof r));return r}var Tg=!1;if(Ai)try{var sd={};Object.defineProperty(sd,"passive",{get:function(){Tg=!0}}),window.addEventListener("test",sd,sd),window.removeEventListener("test",sd,sd)}catch{Tg=!1}function R6(t,e,r,s,n,i,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(u){this.onError(u)}}var Wd=!1,Ef=null,Sf=!1,Ag=null,D6={onError:function(t){Wd=!0,Ef=t}};function O6(t,e,r,s,n,i,a,l,c){Wd=!1,Ef=null,R6.apply(D6,arguments)}function L6(t,e,r,s,n,i,a,l,c){if(O6.apply(this,arguments),Wd){if(Wd){var d=Ef;Wd=!1,Ef=null}else throw Error(ye(198));Sf||(Sf=!0,Ag=d)}}function il(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function pj(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zb(t){if(il(t)!==t)throw Error(ye(188))}function I6(t){var e=t.alternate;if(!e){if(e=il(t),e===null)throw Error(ye(188));return e!==t?null:t}for(var r=t,s=e;;){var n=r.return;if(n===null)break;var i=n.alternate;if(i===null){if(s=n.return,s!==null){r=s;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===r)return Zb(n),t;if(i===s)return Zb(n),e;i=i.sibling}throw Error(ye(188))}if(r.return!==s.return)r=n,s=i;else{for(var a=!1,l=n.child;l;){if(l===r){a=!0,r=n,s=i;break}if(l===s){a=!0,s=n,r=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===r){a=!0,r=i,s=n;break}if(l===s){a=!0,s=i,r=n;break}l=l.sibling}if(!a)throw Error(ye(189))}}if(r.alternate!==s)throw Error(ye(190))}if(r.tag!==3)throw Error(ye(188));return r.stateNode.current===r?t:e}function gj(t){return t=I6(t),t!==null?vj(t):null}function vj(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=vj(t);if(e!==null)return e;t=t.sibling}return null}var yj=As.unstable_scheduleCallback,Jb=As.unstable_cancelCallback,B6=As.unstable_shouldYield,$6=As.unstable_requestPaint,Vt=As.unstable_now,z6=As.unstable_getCurrentPriorityLevel,Tv=As.unstable_ImmediatePriority,bj=As.unstable_UserBlockingPriority,Cf=As.unstable_NormalPriority,U6=As.unstable_LowPriority,wj=As.unstable_IdlePriority,Bm=null,Hn=null;function V6(t){if(Hn&&typeof Hn.onCommitFiberRoot=="function")try{Hn.onCommitFiberRoot(Bm,t,void 0,(t.current.flags&128)===128)}catch{}}var bn=Math.clz32?Math.clz32:Y6,W6=Math.log,H6=Math.LN2;function Y6(t){return t>>>=0,t===0?32:31-(W6(t)/H6|0)|0}var Zh=64,Jh=4194304;function Cd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tf(t,e){var r=t.pendingLanes;if(r===0)return 0;var s=0,n=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var l=a&~n;l!==0?s=Cd(l):(i&=a,i!==0&&(s=Cd(i)))}else a=r&~n,a!==0?s=Cd(a):i!==0&&(s=Cd(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&n)&&(n=s&-s,i=e&-e,n>=i||n===16&&(i&4194240)!==0))return e;if(s&4&&(s|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)r=31-bn(e),n=1<<r,s|=t[r],e&=~n;return s}function q6(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function G6(t,e){for(var r=t.suspendedLanes,s=t.pingedLanes,n=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-bn(i),l=1<<a,c=n[a];c===-1?(!(l&r)||l&s)&&(n[a]=q6(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Fg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function kj(){var t=Zh;return Zh<<=1,!(Zh&4194240)&&(Zh=64),t}function Wx(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function kh(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-bn(e),t[e]=r}function K6(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<r;){var n=31-bn(r),i=1<<n;e[n]=0,s[n]=-1,t[n]=-1,r&=~i}}function Av(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var s=31-bn(r),n=1<<s;n&e|t[s]&e&&(t[s]|=e),r&=~n}}var dt=0;function _j(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Nj,Fv,jj,Ej,Sj,Pg=!1,e0=[],_a=null,Na=null,ja=null,wu=new Map,ku=new Map,Ki=[],X6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ew(t,e){switch(t){case"focusin":case"focusout":_a=null;break;case"dragenter":case"dragleave":Na=null;break;case"mouseover":case"mouseout":ja=null;break;case"pointerover":case"pointerout":wu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ku.delete(e.pointerId)}}function nd(t,e,r,s,n,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[n]},e!==null&&(e=Nh(e),e!==null&&Fv(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,n!==null&&e.indexOf(n)===-1&&e.push(n),t)}function Q6(t,e,r,s,n){switch(e){case"focusin":return _a=nd(_a,t,e,r,s,n),!0;case"dragenter":return Na=nd(Na,t,e,r,s,n),!0;case"mouseover":return ja=nd(ja,t,e,r,s,n),!0;case"pointerover":var i=n.pointerId;return wu.set(i,nd(wu.get(i)||null,t,e,r,s,n)),!0;case"gotpointercapture":return i=n.pointerId,ku.set(i,nd(ku.get(i)||null,t,e,r,s,n)),!0}return!1}function Cj(t){var e=co(t.target);if(e!==null){var r=il(e);if(r!==null){if(e=r.tag,e===13){if(e=pj(r),e!==null){t.blockedOn=e,Sj(t.priority,function(){jj(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function J0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Mg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var s=new r.constructor(r.type,r);Sg=s,r.target.dispatchEvent(s),Sg=null}else return e=Nh(r),e!==null&&Fv(e),t.blockedOn=r,!1;e.shift()}return!0}function tw(t,e,r){J0(t)&&r.delete(e)}function Z6(){Pg=!1,_a!==null&&J0(_a)&&(_a=null),Na!==null&&J0(Na)&&(Na=null),ja!==null&&J0(ja)&&(ja=null),wu.forEach(tw),ku.forEach(tw)}function id(t,e){t.blockedOn===e&&(t.blockedOn=null,Pg||(Pg=!0,As.unstable_scheduleCallback(As.unstable_NormalPriority,Z6)))}function _u(t){function e(n){return id(n,t)}if(0<e0.length){id(e0[0],t);for(var r=1;r<e0.length;r++){var s=e0[r];s.blockedOn===t&&(s.blockedOn=null)}}for(_a!==null&&id(_a,t),Na!==null&&id(Na,t),ja!==null&&id(ja,t),wu.forEach(e),ku.forEach(e),r=0;r<Ki.length;r++)s=Ki[r],s.blockedOn===t&&(s.blockedOn=null);for(;0<Ki.length&&(r=Ki[0],r.blockedOn===null);)Cj(r),r.blockedOn===null&&Ki.shift()}var ql=Oi.ReactCurrentBatchConfig,Af=!0;function J6(t,e,r,s){var n=dt,i=ql.transition;ql.transition=null;try{dt=1,Pv(t,e,r,s)}finally{dt=n,ql.transition=i}}function eA(t,e,r,s){var n=dt,i=ql.transition;ql.transition=null;try{dt=4,Pv(t,e,r,s)}finally{dt=n,ql.transition=i}}function Pv(t,e,r,s){if(Af){var n=Mg(t,e,r,s);if(n===null)ep(t,e,s,Ff,r),ew(t,s);else if(Q6(n,t,e,r,s))s.stopPropagation();else if(ew(t,s),e&4&&-1<X6.indexOf(t)){for(;n!==null;){var i=Nh(n);if(i!==null&&Nj(i),i=Mg(t,e,r,s),i===null&&ep(t,e,s,Ff,r),i===n)break;n=i}n!==null&&s.stopPropagation()}else ep(t,e,s,null,r)}}var Ff=null;function Mg(t,e,r,s){if(Ff=null,t=Cv(s),t=co(t),t!==null)if(e=il(t),e===null)t=null;else if(r=e.tag,r===13){if(t=pj(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ff=t,null}function Tj(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(z6()){case Tv:return 1;case bj:return 4;case Cf:case U6:return 16;case wj:return 536870912;default:return 16}default:return 16}}var ua=null,Mv=null,ef=null;function Aj(){if(ef)return ef;var t,e=Mv,r=e.length,s,n="value"in ua?ua.value:ua.textContent,i=n.length;for(t=0;t<r&&e[t]===n[t];t++);var a=r-t;for(s=1;s<=a&&e[r-s]===n[i-s];s++);return ef=n.slice(t,1<s?1-s:void 0)}function tf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function t0(){return!0}function rw(){return!1}function Rs(t){function e(r,s,n,i,a){this._reactName=r,this._targetInst=n,this.type=s,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?t0:rw,this.isPropagationStopped=rw,this}return Mt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=t0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=t0)},persist:function(){},isPersistent:t0}),e}var Bc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rv=Rs(Bc),_h=Mt({},Bc,{view:0,detail:0}),tA=Rs(_h),Hx,Yx,ad,$m=Mt({},_h,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ad&&(ad&&t.type==="mousemove"?(Hx=t.screenX-ad.screenX,Yx=t.screenY-ad.screenY):Yx=Hx=0,ad=t),Hx)},movementY:function(t){return"movementY"in t?t.movementY:Yx}}),sw=Rs($m),rA=Mt({},$m,{dataTransfer:0}),sA=Rs(rA),nA=Mt({},_h,{relatedTarget:0}),qx=Rs(nA),iA=Mt({},Bc,{animationName:0,elapsedTime:0,pseudoElement:0}),aA=Rs(iA),oA=Mt({},Bc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lA=Rs(oA),cA=Mt({},Bc,{data:0}),nw=Rs(cA),dA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hA[t])?!!e[t]:!1}function Dv(){return fA}var mA=Mt({},_h,{key:function(t){if(t.key){var e=dA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=tf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dv,charCode:function(t){return t.type==="keypress"?tf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?tf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xA=Rs(mA),pA=Mt({},$m,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iw=Rs(pA),gA=Mt({},_h,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dv}),vA=Rs(gA),yA=Mt({},Bc,{propertyName:0,elapsedTime:0,pseudoElement:0}),bA=Rs(yA),wA=Mt({},$m,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),kA=Rs(wA),_A=[9,13,27,32],Ov=Ai&&"CompositionEvent"in window,Hd=null;Ai&&"documentMode"in document&&(Hd=document.documentMode);var NA=Ai&&"TextEvent"in window&&!Hd,Fj=Ai&&(!Ov||Hd&&8<Hd&&11>=Hd),aw=String.fromCharCode(32),ow=!1;function Pj(t,e){switch(t){case"keyup":return _A.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mj(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fl=!1;function jA(t,e){switch(t){case"compositionend":return Mj(e);case"keypress":return e.which!==32?null:(ow=!0,aw);case"textInput":return t=e.data,t===aw&&ow?null:t;default:return null}}function EA(t,e){if(Fl)return t==="compositionend"||!Ov&&Pj(t,e)?(t=Aj(),ef=Mv=ua=null,Fl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fj&&e.locale!=="ko"?null:e.data;default:return null}}var SA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!SA[t.type]:e==="textarea"}function Rj(t,e,r,s){uj(s),e=Pf(e,"onChange"),0<e.length&&(r=new Rv("onChange","change",null,r,s),t.push({event:r,listeners:e}))}var Yd=null,Nu=null;function CA(t){Hj(t,0)}function zm(t){var e=Rl(t);if(nj(e))return t}function TA(t,e){if(t==="change")return e}var Dj=!1;if(Ai){var Gx;if(Ai){var Kx="oninput"in document;if(!Kx){var cw=document.createElement("div");cw.setAttribute("oninput","return;"),Kx=typeof cw.oninput=="function"}Gx=Kx}else Gx=!1;Dj=Gx&&(!document.documentMode||9<document.documentMode)}function dw(){Yd&&(Yd.detachEvent("onpropertychange",Oj),Nu=Yd=null)}function Oj(t){if(t.propertyName==="value"&&zm(Nu)){var e=[];Rj(e,Nu,t,Cv(t)),xj(CA,e)}}function AA(t,e,r){t==="focusin"?(dw(),Yd=e,Nu=r,Yd.attachEvent("onpropertychange",Oj)):t==="focusout"&&dw()}function FA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zm(Nu)}function PA(t,e){if(t==="click")return zm(e)}function MA(t,e){if(t==="input"||t==="change")return zm(e)}function RA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nn=typeof Object.is=="function"?Object.is:RA;function ju(t,e){if(Nn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var n=r[s];if(!xg.call(e,n)||!Nn(t[n],e[n]))return!1}return!0}function uw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hw(t,e){var r=uw(t);t=0;for(var s;r;){if(r.nodeType===3){if(s=t+r.textContent.length,t<=e&&s>=e)return{node:r,offset:e-t};t=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=uw(r)}}function Lj(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Lj(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ij(){for(var t=window,e=jf();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=jf(t.document)}return e}function Lv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function DA(t){var e=Ij(),r=t.focusedElem,s=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Lj(r.ownerDocument.documentElement,r)){if(s!==null&&Lv(r)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var n=r.textContent.length,i=Math.min(s.start,n);s=s.end===void 0?i:Math.min(s.end,n),!t.extend&&i>s&&(n=s,s=i,i=n),n=hw(r,i);var a=hw(r,s);n&&a&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(n.node,n.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var OA=Ai&&"documentMode"in document&&11>=document.documentMode,Pl=null,Rg=null,qd=null,Dg=!1;function fw(t,e,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Dg||Pl==null||Pl!==jf(s)||(s=Pl,"selectionStart"in s&&Lv(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),qd&&ju(qd,s)||(qd=s,s=Pf(Rg,"onSelect"),0<s.length&&(e=new Rv("onSelect","select",null,e,r),t.push({event:e,listeners:s}),e.target=Pl)))}function r0(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ml={animationend:r0("Animation","AnimationEnd"),animationiteration:r0("Animation","AnimationIteration"),animationstart:r0("Animation","AnimationStart"),transitionend:r0("Transition","TransitionEnd")},Xx={},Bj={};Ai&&(Bj=document.createElement("div").style,"AnimationEvent"in window||(delete Ml.animationend.animation,delete Ml.animationiteration.animation,delete Ml.animationstart.animation),"TransitionEvent"in window||delete Ml.transitionend.transition);function Um(t){if(Xx[t])return Xx[t];if(!Ml[t])return t;var e=Ml[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Bj)return Xx[t]=e[r];return t}var $j=Um("animationend"),zj=Um("animationiteration"),Uj=Um("animationstart"),Vj=Um("transitionend"),Wj=new Map,mw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ua(t,e){Wj.set(t,e),nl(e,[t])}for(var Qx=0;Qx<mw.length;Qx++){var Zx=mw[Qx],LA=Zx.toLowerCase(),IA=Zx[0].toUpperCase()+Zx.slice(1);Ua(LA,"on"+IA)}Ua($j,"onAnimationEnd");Ua(zj,"onAnimationIteration");Ua(Uj,"onAnimationStart");Ua("dblclick","onDoubleClick");Ua("focusin","onFocus");Ua("focusout","onBlur");Ua(Vj,"onTransitionEnd");wc("onMouseEnter",["mouseout","mouseover"]);wc("onMouseLeave",["mouseout","mouseover"]);wc("onPointerEnter",["pointerout","pointerover"]);wc("onPointerLeave",["pointerout","pointerover"]);nl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nl("onBeforeInput",["compositionend","keypress","textInput","paste"]);nl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Td="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Td));function xw(t,e,r){var s=t.type||"unknown-event";t.currentTarget=r,L6(s,e,void 0,t),t.currentTarget=null}function Hj(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var s=t[r],n=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var a=s.length-1;0<=a;a--){var l=s[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&n.isPropagationStopped())break e;xw(n,l,d),i=c}else for(a=0;a<s.length;a++){if(l=s[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&n.isPropagationStopped())break e;xw(n,l,d),i=c}}}if(Sf)throw t=Ag,Sf=!1,Ag=null,t}function bt(t,e){var r=e[$g];r===void 0&&(r=e[$g]=new Set);var s=t+"__bubble";r.has(s)||(Yj(e,t,2,!1),r.add(s))}function Jx(t,e,r){var s=0;e&&(s|=4),Yj(r,t,s,e)}var s0="_reactListening"+Math.random().toString(36).slice(2);function Eu(t){if(!t[s0]){t[s0]=!0,J4.forEach(function(r){r!=="selectionchange"&&(BA.has(r)||Jx(r,!1,t),Jx(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[s0]||(e[s0]=!0,Jx("selectionchange",!1,e))}}function Yj(t,e,r,s){switch(Tj(e)){case 1:var n=J6;break;case 4:n=eA;break;default:n=Pv}r=n.bind(null,e,r,t),n=void 0,!Tg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(n=!0),s?n!==void 0?t.addEventListener(e,r,{capture:!0,passive:n}):t.addEventListener(e,r,!0):n!==void 0?t.addEventListener(e,r,{passive:n}):t.addEventListener(e,r,!1)}function ep(t,e,r,s,n){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var l=s.stateNode.containerInfo;if(l===n||l.nodeType===8&&l.parentNode===n)break;if(a===4)for(a=s.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;a=a.return}for(;l!==null;){if(a=co(l),a===null)return;if(c=a.tag,c===5||c===6){s=i=a;continue e}l=l.parentNode}}s=s.return}xj(function(){var d=i,u=Cv(r),h=[];e:{var f=Wj.get(t);if(f!==void 0){var m=Rv,x=t;switch(t){case"keypress":if(tf(r)===0)break e;case"keydown":case"keyup":m=xA;break;case"focusin":x="focus",m=qx;break;case"focusout":x="blur",m=qx;break;case"beforeblur":case"afterblur":m=qx;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=sw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=sA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=vA;break;case $j:case zj:case Uj:m=aA;break;case Vj:m=bA;break;case"scroll":m=tA;break;case"wheel":m=kA;break;case"copy":case"cut":case"paste":m=lA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=iw}var p=(e&4)!==0,g=!p&&t==="scroll",v=p?f!==null?f+"Capture":null:f;p=[];for(var b=d,y;b!==null;){y=b;var k=y.stateNode;if(y.tag===5&&k!==null&&(y=k,v!==null&&(k=bu(b,v),k!=null&&p.push(Su(b,k,y)))),g)break;b=b.return}0<p.length&&(f=new m(f,x,null,r,u),h.push({event:f,listeners:p}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&r!==Sg&&(x=r.relatedTarget||r.fromElement)&&(co(x)||x[Fi]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(x=r.relatedTarget||r.toElement,m=d,x=x?co(x):null,x!==null&&(g=il(x),x!==g||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=d),m!==x)){if(p=sw,k="onMouseLeave",v="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(p=iw,k="onPointerLeave",v="onPointerEnter",b="pointer"),g=m==null?f:Rl(m),y=x==null?f:Rl(x),f=new p(k,b+"leave",m,r,u),f.target=g,f.relatedTarget=y,k=null,co(u)===d&&(p=new p(v,b+"enter",x,r,u),p.target=y,p.relatedTarget=g,k=p),g=k,m&&x)t:{for(p=m,v=x,b=0,y=p;y;y=vl(y))b++;for(y=0,k=v;k;k=vl(k))y++;for(;0<b-y;)p=vl(p),b--;for(;0<y-b;)v=vl(v),y--;for(;b--;){if(p===v||v!==null&&p===v.alternate)break t;p=vl(p),v=vl(v)}p=null}else p=null;m!==null&&pw(h,f,m,p,!1),x!==null&&g!==null&&pw(h,g,x,p,!0)}}e:{if(f=d?Rl(d):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var N=TA;else if(lw(f))if(Dj)N=MA;else{N=FA;var E=AA}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=PA);if(N&&(N=N(t,d))){Rj(h,N,r,u);break e}E&&E(t,f,d),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&kg(f,"number",f.value)}switch(E=d?Rl(d):window,t){case"focusin":(lw(E)||E.contentEditable==="true")&&(Pl=E,Rg=d,qd=null);break;case"focusout":qd=Rg=Pl=null;break;case"mousedown":Dg=!0;break;case"contextmenu":case"mouseup":case"dragend":Dg=!1,fw(h,r,u);break;case"selectionchange":if(OA)break;case"keydown":case"keyup":fw(h,r,u)}var j;if(Ov)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Fl?Pj(t,r)&&(_="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(Fj&&r.locale!=="ko"&&(Fl||_!=="onCompositionStart"?_==="onCompositionEnd"&&Fl&&(j=Aj()):(ua=u,Mv="value"in ua?ua.value:ua.textContent,Fl=!0)),E=Pf(d,_),0<E.length&&(_=new nw(_,t,null,r,u),h.push({event:_,listeners:E}),j?_.data=j:(j=Mj(r),j!==null&&(_.data=j)))),(j=NA?jA(t,r):EA(t,r))&&(d=Pf(d,"onBeforeInput"),0<d.length&&(u=new nw("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:d}),u.data=j))}Hj(h,e)})}function Su(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Pf(t,e){for(var r=e+"Capture",s=[];t!==null;){var n=t,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=bu(t,r),i!=null&&s.unshift(Su(t,i,n)),i=bu(t,e),i!=null&&s.push(Su(t,i,n))),t=t.return}return s}function vl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pw(t,e,r,s,n){for(var i=e._reactName,a=[];r!==null&&r!==s;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,n?(c=bu(r,i),c!=null&&a.unshift(Su(r,c,l))):n||(c=bu(r,i),c!=null&&a.push(Su(r,c,l)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var $A=/\r\n?/g,zA=/\u0000|\uFFFD/g;function gw(t){return(typeof t=="string"?t:""+t).replace($A,`
`).replace(zA,"")}function n0(t,e,r){if(e=gw(e),gw(t)!==e&&r)throw Error(ye(425))}function Mf(){}var Og=null,Lg=null;function Ig(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bg=typeof setTimeout=="function"?setTimeout:void 0,UA=typeof clearTimeout=="function"?clearTimeout:void 0,vw=typeof Promise=="function"?Promise:void 0,VA=typeof queueMicrotask=="function"?queueMicrotask:typeof vw<"u"?function(t){return vw.resolve(null).then(t).catch(WA)}:Bg;function WA(t){setTimeout(function(){throw t})}function tp(t,e){var r=e,s=0;do{var n=r.nextSibling;if(t.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(s===0){t.removeChild(n),_u(e);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=n}while(r);_u(e)}function Ea(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function yw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var $c=Math.random().toString(36).slice(2),zn="__reactFiber$"+$c,Cu="__reactProps$"+$c,Fi="__reactContainer$"+$c,$g="__reactEvents$"+$c,HA="__reactListeners$"+$c,YA="__reactHandles$"+$c;function co(t){var e=t[zn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Fi]||r[zn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=yw(t);t!==null;){if(r=t[zn])return r;t=yw(t)}return e}t=r,r=t.parentNode}return null}function Nh(t){return t=t[zn]||t[Fi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Rl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ye(33))}function Vm(t){return t[Cu]||null}var zg=[],Dl=-1;function Va(t){return{current:t}}function kt(t){0>Dl||(t.current=zg[Dl],zg[Dl]=null,Dl--)}function xt(t,e){Dl++,zg[Dl]=t.current,t.current=e}var Oa={},Vr=Va(Oa),ps=Va(!1),Bo=Oa;function kc(t,e){var r=t.type.contextTypes;if(!r)return Oa;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in r)n[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=n),n}function gs(t){return t=t.childContextTypes,t!=null}function Rf(){kt(ps),kt(Vr)}function bw(t,e,r){if(Vr.current!==Oa)throw Error(ye(168));xt(Vr,e),xt(ps,r)}function qj(t,e,r){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var n in s)if(!(n in e))throw Error(ye(108,A6(t)||"Unknown",n));return Mt({},r,s)}function Df(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Oa,Bo=Vr.current,xt(Vr,t),xt(ps,ps.current),!0}function ww(t,e,r){var s=t.stateNode;if(!s)throw Error(ye(169));r?(t=qj(t,e,Bo),s.__reactInternalMemoizedMergedChildContext=t,kt(ps),kt(Vr),xt(Vr,t)):kt(ps),xt(ps,r)}var di=null,Wm=!1,rp=!1;function Gj(t){di===null?di=[t]:di.push(t)}function qA(t){Wm=!0,Gj(t)}function Wa(){if(!rp&&di!==null){rp=!0;var t=0,e=dt;try{var r=di;for(dt=1;t<r.length;t++){var s=r[t];do s=s(!0);while(s!==null)}di=null,Wm=!1}catch(n){throw di!==null&&(di=di.slice(t+1)),yj(Tv,Wa),n}finally{dt=e,rp=!1}}return null}var Ol=[],Ll=0,Of=null,Lf=0,Us=[],Vs=0,$o=null,pi=1,gi="";function so(t,e){Ol[Ll++]=Lf,Ol[Ll++]=Of,Of=t,Lf=e}function Kj(t,e,r){Us[Vs++]=pi,Us[Vs++]=gi,Us[Vs++]=$o,$o=t;var s=pi;t=gi;var n=32-bn(s)-1;s&=~(1<<n),r+=1;var i=32-bn(e)+n;if(30<i){var a=n-n%5;i=(s&(1<<a)-1).toString(32),s>>=a,n-=a,pi=1<<32-bn(e)+n|r<<n|s,gi=i+t}else pi=1<<i|r<<n|s,gi=t}function Iv(t){t.return!==null&&(so(t,1),Kj(t,1,0))}function Bv(t){for(;t===Of;)Of=Ol[--Ll],Ol[Ll]=null,Lf=Ol[--Ll],Ol[Ll]=null;for(;t===$o;)$o=Us[--Vs],Us[Vs]=null,gi=Us[--Vs],Us[Vs]=null,pi=Us[--Vs],Us[Vs]=null}var Cs=null,Ss=null,Et=!1,fn=null;function Xj(t,e){var r=Ws(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function kw(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Cs=t,Ss=Ea(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Cs=t,Ss=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=$o!==null?{id:pi,overflow:gi}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ws(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Cs=t,Ss=null,!0):!1;default:return!1}}function Ug(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vg(t){if(Et){var e=Ss;if(e){var r=e;if(!kw(t,e)){if(Ug(t))throw Error(ye(418));e=Ea(r.nextSibling);var s=Cs;e&&kw(t,e)?Xj(s,r):(t.flags=t.flags&-4097|2,Et=!1,Cs=t)}}else{if(Ug(t))throw Error(ye(418));t.flags=t.flags&-4097|2,Et=!1,Cs=t}}}function _w(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Cs=t}function i0(t){if(t!==Cs)return!1;if(!Et)return _w(t),Et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ig(t.type,t.memoizedProps)),e&&(e=Ss)){if(Ug(t))throw Qj(),Error(ye(418));for(;e;)Xj(t,e),e=Ea(e.nextSibling)}if(_w(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ye(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ss=Ea(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ss=null}}else Ss=Cs?Ea(t.stateNode.nextSibling):null;return!0}function Qj(){for(var t=Ss;t;)t=Ea(t.nextSibling)}function _c(){Ss=Cs=null,Et=!1}function $v(t){fn===null?fn=[t]:fn.push(t)}var GA=Oi.ReactCurrentBatchConfig;function od(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ye(309));var s=r.stateNode}if(!s)throw Error(ye(147,t));var n=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=n.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(ye(284));if(!r._owner)throw Error(ye(290,t))}return t}function a0(t,e){throw t=Object.prototype.toString.call(e),Error(ye(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Nw(t){var e=t._init;return e(t._payload)}function Zj(t){function e(v,b){if(t){var y=v.deletions;y===null?(v.deletions=[b],v.flags|=16):y.push(b)}}function r(v,b){if(!t)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function s(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function n(v,b){return v=Aa(v,b),v.index=0,v.sibling=null,v}function i(v,b,y){return v.index=y,t?(y=v.alternate,y!==null?(y=y.index,y<b?(v.flags|=2,b):y):(v.flags|=2,b)):(v.flags|=1048576,b)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,b,y,k){return b===null||b.tag!==6?(b=cp(y,v.mode,k),b.return=v,b):(b=n(b,y),b.return=v,b)}function c(v,b,y,k){var N=y.type;return N===Al?u(v,b,y.props.children,k,y.key):b!==null&&(b.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===qi&&Nw(N)===b.type)?(k=n(b,y.props),k.ref=od(v,b,y),k.return=v,k):(k=cf(y.type,y.key,y.props,null,v.mode,k),k.ref=od(v,b,y),k.return=v,k)}function d(v,b,y,k){return b===null||b.tag!==4||b.stateNode.containerInfo!==y.containerInfo||b.stateNode.implementation!==y.implementation?(b=dp(y,v.mode,k),b.return=v,b):(b=n(b,y.children||[]),b.return=v,b)}function u(v,b,y,k,N){return b===null||b.tag!==7?(b=Ao(y,v.mode,k,N),b.return=v,b):(b=n(b,y),b.return=v,b)}function h(v,b,y){if(typeof b=="string"&&b!==""||typeof b=="number")return b=cp(""+b,v.mode,y),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Kh:return y=cf(b.type,b.key,b.props,null,v.mode,y),y.ref=od(v,null,b),y.return=v,y;case Tl:return b=dp(b,v.mode,y),b.return=v,b;case qi:var k=b._init;return h(v,k(b._payload),y)}if(Sd(b)||rd(b))return b=Ao(b,v.mode,y,null),b.return=v,b;a0(v,b)}return null}function f(v,b,y,k){var N=b!==null?b.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return N!==null?null:l(v,b,""+y,k);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Kh:return y.key===N?c(v,b,y,k):null;case Tl:return y.key===N?d(v,b,y,k):null;case qi:return N=y._init,f(v,b,N(y._payload),k)}if(Sd(y)||rd(y))return N!==null?null:u(v,b,y,k,null);a0(v,y)}return null}function m(v,b,y,k,N){if(typeof k=="string"&&k!==""||typeof k=="number")return v=v.get(y)||null,l(b,v,""+k,N);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Kh:return v=v.get(k.key===null?y:k.key)||null,c(b,v,k,N);case Tl:return v=v.get(k.key===null?y:k.key)||null,d(b,v,k,N);case qi:var E=k._init;return m(v,b,y,E(k._payload),N)}if(Sd(k)||rd(k))return v=v.get(y)||null,u(b,v,k,N,null);a0(b,k)}return null}function x(v,b,y,k){for(var N=null,E=null,j=b,_=b=0,S=null;j!==null&&_<y.length;_++){j.index>_?(S=j,j=null):S=j.sibling;var C=f(v,j,y[_],k);if(C===null){j===null&&(j=S);break}t&&j&&C.alternate===null&&e(v,j),b=i(C,b,_),E===null?N=C:E.sibling=C,E=C,j=S}if(_===y.length)return r(v,j),Et&&so(v,_),N;if(j===null){for(;_<y.length;_++)j=h(v,y[_],k),j!==null&&(b=i(j,b,_),E===null?N=j:E.sibling=j,E=j);return Et&&so(v,_),N}for(j=s(v,j);_<y.length;_++)S=m(j,v,_,y[_],k),S!==null&&(t&&S.alternate!==null&&j.delete(S.key===null?_:S.key),b=i(S,b,_),E===null?N=S:E.sibling=S,E=S);return t&&j.forEach(function(F){return e(v,F)}),Et&&so(v,_),N}function p(v,b,y,k){var N=rd(y);if(typeof N!="function")throw Error(ye(150));if(y=N.call(y),y==null)throw Error(ye(151));for(var E=N=null,j=b,_=b=0,S=null,C=y.next();j!==null&&!C.done;_++,C=y.next()){j.index>_?(S=j,j=null):S=j.sibling;var F=f(v,j,C.value,k);if(F===null){j===null&&(j=S);break}t&&j&&F.alternate===null&&e(v,j),b=i(F,b,_),E===null?N=F:E.sibling=F,E=F,j=S}if(C.done)return r(v,j),Et&&so(v,_),N;if(j===null){for(;!C.done;_++,C=y.next())C=h(v,C.value,k),C!==null&&(b=i(C,b,_),E===null?N=C:E.sibling=C,E=C);return Et&&so(v,_),N}for(j=s(v,j);!C.done;_++,C=y.next())C=m(j,v,_,C.value,k),C!==null&&(t&&C.alternate!==null&&j.delete(C.key===null?_:C.key),b=i(C,b,_),E===null?N=C:E.sibling=C,E=C);return t&&j.forEach(function(P){return e(v,P)}),Et&&so(v,_),N}function g(v,b,y,k){if(typeof y=="object"&&y!==null&&y.type===Al&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Kh:e:{for(var N=y.key,E=b;E!==null;){if(E.key===N){if(N=y.type,N===Al){if(E.tag===7){r(v,E.sibling),b=n(E,y.props.children),b.return=v,v=b;break e}}else if(E.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===qi&&Nw(N)===E.type){r(v,E.sibling),b=n(E,y.props),b.ref=od(v,E,y),b.return=v,v=b;break e}r(v,E);break}else e(v,E);E=E.sibling}y.type===Al?(b=Ao(y.props.children,v.mode,k,y.key),b.return=v,v=b):(k=cf(y.type,y.key,y.props,null,v.mode,k),k.ref=od(v,b,y),k.return=v,v=k)}return a(v);case Tl:e:{for(E=y.key;b!==null;){if(b.key===E)if(b.tag===4&&b.stateNode.containerInfo===y.containerInfo&&b.stateNode.implementation===y.implementation){r(v,b.sibling),b=n(b,y.children||[]),b.return=v,v=b;break e}else{r(v,b);break}else e(v,b);b=b.sibling}b=dp(y,v.mode,k),b.return=v,v=b}return a(v);case qi:return E=y._init,g(v,b,E(y._payload),k)}if(Sd(y))return x(v,b,y,k);if(rd(y))return p(v,b,y,k);a0(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,b!==null&&b.tag===6?(r(v,b.sibling),b=n(b,y),b.return=v,v=b):(r(v,b),b=cp(y,v.mode,k),b.return=v,v=b),a(v)):r(v,b)}return g}var Nc=Zj(!0),Jj=Zj(!1),If=Va(null),Bf=null,Il=null,zv=null;function Uv(){zv=Il=Bf=null}function Vv(t){var e=If.current;kt(If),t._currentValue=e}function Wg(t,e,r){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===r)break;t=t.return}}function Gl(t,e){Bf=t,zv=Il=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xs=!0),t.firstContext=null)}function Gs(t){var e=t._currentValue;if(zv!==t)if(t={context:t,memoizedValue:e,next:null},Il===null){if(Bf===null)throw Error(ye(308));Il=t,Bf.dependencies={lanes:0,firstContext:t}}else Il=Il.next=t;return e}var uo=null;function Wv(t){uo===null?uo=[t]:uo.push(t)}function e5(t,e,r,s){var n=e.interleaved;return n===null?(r.next=r,Wv(e)):(r.next=n.next,n.next=r),e.interleaved=r,Pi(t,s)}function Pi(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Gi=!1;function Hv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t5(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ni(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Sa(t,e,r){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,nt&2){var n=s.pending;return n===null?e.next=e:(e.next=n.next,n.next=e),s.pending=e,Pi(t,r)}return n=s.interleaved,n===null?(e.next=e,Wv(s)):(e.next=n.next,n.next=e),s.interleaved=e,Pi(t,r)}function rf(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,Av(t,r)}}function jw(t,e){var r=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var n=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?n=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?n=i=e:i=i.next=e}else n=i=e;r={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function $f(t,e,r,s){var n=t.updateQueue;Gi=!1;var i=n.firstBaseUpdate,a=n.lastBaseUpdate,l=n.shared.pending;if(l!==null){n.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==a&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=n.baseState;a=0,u=d=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((s&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,p=l;switch(f=e,m=r,p.tag){case 1:if(x=p.payload,typeof x=="function"){h=x.call(m,h,f);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=p.payload,f=typeof x=="function"?x.call(m,h,f):x,f==null)break e;h=Mt({},h,f);break e;case 2:Gi=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=n.effects,f===null?n.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=m,c=h):u=u.next=m,a|=f;if(l=l.next,l===null){if(l=n.shared.pending,l===null)break;f=l,l=f.next,f.next=null,n.lastBaseUpdate=f,n.shared.pending=null}}while(1);if(u===null&&(c=h),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=u,e=n.shared.interleaved,e!==null){n=e;do a|=n.lane,n=n.next;while(n!==e)}else i===null&&(n.shared.lanes=0);Uo|=a,t.lanes=a,t.memoizedState=h}}function Ew(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],n=s.callback;if(n!==null){if(s.callback=null,s=r,typeof n!="function")throw Error(ye(191,n));n.call(s)}}}var jh={},Yn=Va(jh),Tu=Va(jh),Au=Va(jh);function ho(t){if(t===jh)throw Error(ye(174));return t}function Yv(t,e){switch(xt(Au,e),xt(Tu,t),xt(Yn,jh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ng(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ng(e,t)}kt(Yn),xt(Yn,e)}function jc(){kt(Yn),kt(Tu),kt(Au)}function r5(t){ho(Au.current);var e=ho(Yn.current),r=Ng(e,t.type);e!==r&&(xt(Tu,t),xt(Yn,r))}function qv(t){Tu.current===t&&(kt(Yn),kt(Tu))}var Ft=Va(0);function zf(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sp=[];function Gv(){for(var t=0;t<sp.length;t++)sp[t]._workInProgressVersionPrimary=null;sp.length=0}var sf=Oi.ReactCurrentDispatcher,np=Oi.ReactCurrentBatchConfig,zo=0,Pt=null,sr=null,xr=null,Uf=!1,Gd=!1,Fu=0,KA=0;function Cr(){throw Error(ye(321))}function Kv(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Nn(t[r],e[r]))return!1;return!0}function Xv(t,e,r,s,n,i){if(zo=i,Pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sf.current=t===null||t.memoizedState===null?JA:eF,t=r(s,n),Gd){i=0;do{if(Gd=!1,Fu=0,25<=i)throw Error(ye(301));i+=1,xr=sr=null,e.updateQueue=null,sf.current=tF,t=r(s,n)}while(Gd)}if(sf.current=Vf,e=sr!==null&&sr.next!==null,zo=0,xr=sr=Pt=null,Uf=!1,e)throw Error(ye(300));return t}function Qv(){var t=Fu!==0;return Fu=0,t}function Dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xr===null?Pt.memoizedState=xr=t:xr=xr.next=t,xr}function Ks(){if(sr===null){var t=Pt.alternate;t=t!==null?t.memoizedState:null}else t=sr.next;var e=xr===null?Pt.memoizedState:xr.next;if(e!==null)xr=e,sr=t;else{if(t===null)throw Error(ye(310));sr=t,t={memoizedState:sr.memoizedState,baseState:sr.baseState,baseQueue:sr.baseQueue,queue:sr.queue,next:null},xr===null?Pt.memoizedState=xr=t:xr=xr.next=t}return xr}function Pu(t,e){return typeof e=="function"?e(t):e}function ip(t){var e=Ks(),r=e.queue;if(r===null)throw Error(ye(311));r.lastRenderedReducer=t;var s=sr,n=s.baseQueue,i=r.pending;if(i!==null){if(n!==null){var a=n.next;n.next=i.next,i.next=a}s.baseQueue=n=i,r.pending=null}if(n!==null){i=n.next,s=s.baseState;var l=a=null,c=null,d=i;do{var u=d.lane;if((zo&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:t(s,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,a=s):c=c.next=h,Pt.lanes|=u,Uo|=u}d=d.next}while(d!==null&&d!==i);c===null?a=s:c.next=l,Nn(s,e.memoizedState)||(xs=!0),e.memoizedState=s,e.baseState=a,e.baseQueue=c,r.lastRenderedState=s}if(t=r.interleaved,t!==null){n=t;do i=n.lane,Pt.lanes|=i,Uo|=i,n=n.next;while(n!==t)}else n===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function ap(t){var e=Ks(),r=e.queue;if(r===null)throw Error(ye(311));r.lastRenderedReducer=t;var s=r.dispatch,n=r.pending,i=e.memoizedState;if(n!==null){r.pending=null;var a=n=n.next;do i=t(i,a.action),a=a.next;while(a!==n);Nn(i,e.memoizedState)||(xs=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,s]}function s5(){}function n5(t,e){var r=Pt,s=Ks(),n=e(),i=!Nn(s.memoizedState,n);if(i&&(s.memoizedState=n,xs=!0),s=s.queue,Zv(o5.bind(null,r,s,t),[t]),s.getSnapshot!==e||i||xr!==null&&xr.memoizedState.tag&1){if(r.flags|=2048,Mu(9,a5.bind(null,r,s,n,e),void 0,null),gr===null)throw Error(ye(349));zo&30||i5(r,e,n)}return n}function i5(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Pt.updateQueue,e===null?(e={lastEffect:null,stores:null},Pt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function a5(t,e,r,s){e.value=r,e.getSnapshot=s,l5(e)&&c5(t)}function o5(t,e,r){return r(function(){l5(e)&&c5(t)})}function l5(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Nn(t,r)}catch{return!0}}function c5(t){var e=Pi(t,1);e!==null&&wn(e,t,1,-1)}function Sw(t){var e=Dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pu,lastRenderedState:t},e.queue=t,t=t.dispatch=ZA.bind(null,Pt,t),[e.memoizedState,t]}function Mu(t,e,r,s){return t={tag:t,create:e,destroy:r,deps:s,next:null},e=Pt.updateQueue,e===null?(e={lastEffect:null,stores:null},Pt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(s=r.next,r.next=t,t.next=s,e.lastEffect=t)),t}function d5(){return Ks().memoizedState}function nf(t,e,r,s){var n=Dn();Pt.flags|=t,n.memoizedState=Mu(1|e,r,void 0,s===void 0?null:s)}function Hm(t,e,r,s){var n=Ks();s=s===void 0?null:s;var i=void 0;if(sr!==null){var a=sr.memoizedState;if(i=a.destroy,s!==null&&Kv(s,a.deps)){n.memoizedState=Mu(e,r,i,s);return}}Pt.flags|=t,n.memoizedState=Mu(1|e,r,i,s)}function Cw(t,e){return nf(8390656,8,t,e)}function Zv(t,e){return Hm(2048,8,t,e)}function u5(t,e){return Hm(4,2,t,e)}function h5(t,e){return Hm(4,4,t,e)}function f5(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function m5(t,e,r){return r=r!=null?r.concat([t]):null,Hm(4,4,f5.bind(null,e,t),r)}function Jv(){}function x5(t,e){var r=Ks();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&Kv(e,s[1])?s[0]:(r.memoizedState=[t,e],t)}function p5(t,e){var r=Ks();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&Kv(e,s[1])?s[0]:(t=t(),r.memoizedState=[t,e],t)}function g5(t,e,r){return zo&21?(Nn(r,e)||(r=kj(),Pt.lanes|=r,Uo|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xs=!0),t.memoizedState=r)}function XA(t,e){var r=dt;dt=r!==0&&4>r?r:4,t(!0);var s=np.transition;np.transition={};try{t(!1),e()}finally{dt=r,np.transition=s}}function v5(){return Ks().memoizedState}function QA(t,e,r){var s=Ta(t);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},y5(t))b5(e,r);else if(r=e5(t,e,r,s),r!==null){var n=ts();wn(r,t,s,n),w5(r,e,s)}}function ZA(t,e,r){var s=Ta(t),n={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(y5(t))b5(e,n);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,r);if(n.hasEagerState=!0,n.eagerState=l,Nn(l,a)){var c=e.interleaved;c===null?(n.next=n,Wv(e)):(n.next=c.next,c.next=n),e.interleaved=n;return}}catch{}finally{}r=e5(t,e,n,s),r!==null&&(n=ts(),wn(r,t,s,n),w5(r,e,s))}}function y5(t){var e=t.alternate;return t===Pt||e!==null&&e===Pt}function b5(t,e){Gd=Uf=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function w5(t,e,r){if(r&4194240){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,Av(t,r)}}var Vf={readContext:Gs,useCallback:Cr,useContext:Cr,useEffect:Cr,useImperativeHandle:Cr,useInsertionEffect:Cr,useLayoutEffect:Cr,useMemo:Cr,useReducer:Cr,useRef:Cr,useState:Cr,useDebugValue:Cr,useDeferredValue:Cr,useTransition:Cr,useMutableSource:Cr,useSyncExternalStore:Cr,useId:Cr,unstable_isNewReconciler:!1},JA={readContext:Gs,useCallback:function(t,e){return Dn().memoizedState=[t,e===void 0?null:e],t},useContext:Gs,useEffect:Cw,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,nf(4194308,4,f5.bind(null,e,t),r)},useLayoutEffect:function(t,e){return nf(4194308,4,t,e)},useInsertionEffect:function(t,e){return nf(4,2,t,e)},useMemo:function(t,e){var r=Dn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var s=Dn();return e=r!==void 0?r(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=QA.bind(null,Pt,t),[s.memoizedState,t]},useRef:function(t){var e=Dn();return t={current:t},e.memoizedState=t},useState:Sw,useDebugValue:Jv,useDeferredValue:function(t){return Dn().memoizedState=t},useTransition:function(){var t=Sw(!1),e=t[0];return t=XA.bind(null,t[1]),Dn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var s=Pt,n=Dn();if(Et){if(r===void 0)throw Error(ye(407));r=r()}else{if(r=e(),gr===null)throw Error(ye(349));zo&30||i5(s,e,r)}n.memoizedState=r;var i={value:r,getSnapshot:e};return n.queue=i,Cw(o5.bind(null,s,i,t),[t]),s.flags|=2048,Mu(9,a5.bind(null,s,i,r,e),void 0,null),r},useId:function(){var t=Dn(),e=gr.identifierPrefix;if(Et){var r=gi,s=pi;r=(s&~(1<<32-bn(s)-1)).toString(32)+r,e=":"+e+"R"+r,r=Fu++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=KA++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eF={readContext:Gs,useCallback:x5,useContext:Gs,useEffect:Zv,useImperativeHandle:m5,useInsertionEffect:u5,useLayoutEffect:h5,useMemo:p5,useReducer:ip,useRef:d5,useState:function(){return ip(Pu)},useDebugValue:Jv,useDeferredValue:function(t){var e=Ks();return g5(e,sr.memoizedState,t)},useTransition:function(){var t=ip(Pu)[0],e=Ks().memoizedState;return[t,e]},useMutableSource:s5,useSyncExternalStore:n5,useId:v5,unstable_isNewReconciler:!1},tF={readContext:Gs,useCallback:x5,useContext:Gs,useEffect:Zv,useImperativeHandle:m5,useInsertionEffect:u5,useLayoutEffect:h5,useMemo:p5,useReducer:ap,useRef:d5,useState:function(){return ap(Pu)},useDebugValue:Jv,useDeferredValue:function(t){var e=Ks();return sr===null?e.memoizedState=t:g5(e,sr.memoizedState,t)},useTransition:function(){var t=ap(Pu)[0],e=Ks().memoizedState;return[t,e]},useMutableSource:s5,useSyncExternalStore:n5,useId:v5,unstable_isNewReconciler:!1};function cn(t,e){if(t&&t.defaultProps){e=Mt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Hg(t,e,r,s){e=t.memoizedState,r=r(s,e),r=r==null?e:Mt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ym={isMounted:function(t){return(t=t._reactInternals)?il(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var s=ts(),n=Ta(t),i=Ni(s,n);i.payload=e,r!=null&&(i.callback=r),e=Sa(t,i,n),e!==null&&(wn(e,t,n,s),rf(e,t,n))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var s=ts(),n=Ta(t),i=Ni(s,n);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Sa(t,i,n),e!==null&&(wn(e,t,n,s),rf(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=ts(),s=Ta(t),n=Ni(r,s);n.tag=2,e!=null&&(n.callback=e),e=Sa(t,n,s),e!==null&&(wn(e,t,s,r),rf(e,t,s))}};function Tw(t,e,r,s,n,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,a):e.prototype&&e.prototype.isPureReactComponent?!ju(r,s)||!ju(n,i):!0}function k5(t,e,r){var s=!1,n=Oa,i=e.contextType;return typeof i=="object"&&i!==null?i=Gs(i):(n=gs(e)?Bo:Vr.current,s=e.contextTypes,i=(s=s!=null)?kc(t,n):Oa),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ym,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=i),e}function Aw(t,e,r,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,s),e.state!==t&&Ym.enqueueReplaceState(e,e.state,null)}function Yg(t,e,r,s){var n=t.stateNode;n.props=r,n.state=t.memoizedState,n.refs={},Hv(t);var i=e.contextType;typeof i=="object"&&i!==null?n.context=Gs(i):(i=gs(e)?Bo:Vr.current,n.context=kc(t,i)),n.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Hg(t,e,i,r),n.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(e=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),e!==n.state&&Ym.enqueueReplaceState(n,n.state,null),$f(t,r,n,s),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function Ec(t,e){try{var r="",s=e;do r+=T6(s),s=s.return;while(s);var n=r}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:n,digest:null}}function op(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function qg(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var rF=typeof WeakMap=="function"?WeakMap:Map;function _5(t,e,r){r=Ni(-1,r),r.tag=3,r.payload={element:null};var s=e.value;return r.callback=function(){Hf||(Hf=!0,s1=s),qg(t,e)},r}function N5(t,e,r){r=Ni(-1,r),r.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var n=e.value;r.payload=function(){return s(n)},r.callback=function(){qg(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){qg(t,e),typeof s!="function"&&(Ca===null?Ca=new Set([this]):Ca.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function Fw(t,e,r){var s=t.pingCache;if(s===null){s=t.pingCache=new rF;var n=new Set;s.set(e,n)}else n=s.get(e),n===void 0&&(n=new Set,s.set(e,n));n.has(r)||(n.add(r),t=pF.bind(null,t,e,r),e.then(t,t))}function Pw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Mw(t,e,r,s,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ni(-1,1),e.tag=2,Sa(r,e,1))),r.lanes|=1),t)}var sF=Oi.ReactCurrentOwner,xs=!1;function Kr(t,e,r,s){e.child=t===null?Jj(e,null,r,s):Nc(e,t.child,r,s)}function Rw(t,e,r,s,n){r=r.render;var i=e.ref;return Gl(e,n),s=Xv(t,e,r,s,i,n),r=Qv(),t!==null&&!xs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Mi(t,e,n)):(Et&&r&&Iv(e),e.flags|=1,Kr(t,e,s,n),e.child)}function Dw(t,e,r,s,n){if(t===null){var i=r.type;return typeof i=="function"&&!oy(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,j5(t,e,i,s,n)):(t=cf(r.type,null,s,e,e.mode,n),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&n)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:ju,r(a,s)&&t.ref===e.ref)return Mi(t,e,n)}return e.flags|=1,t=Aa(i,s),t.ref=e.ref,t.return=e,e.child=t}function j5(t,e,r,s,n){if(t!==null){var i=t.memoizedProps;if(ju(i,s)&&t.ref===e.ref)if(xs=!1,e.pendingProps=s=i,(t.lanes&n)!==0)t.flags&131072&&(xs=!0);else return e.lanes=t.lanes,Mi(t,e,n)}return Gg(t,e,r,s,n)}function E5(t,e,r){var s=e.pendingProps,n=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xt($l,ks),ks|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xt($l,ks),ks|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,xt($l,ks),ks|=s}else i!==null?(s=i.baseLanes|r,e.memoizedState=null):s=r,xt($l,ks),ks|=s;return Kr(t,e,n,r),e.child}function S5(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Gg(t,e,r,s,n){var i=gs(r)?Bo:Vr.current;return i=kc(e,i),Gl(e,n),r=Xv(t,e,r,s,i,n),s=Qv(),t!==null&&!xs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Mi(t,e,n)):(Et&&s&&Iv(e),e.flags|=1,Kr(t,e,r,n),e.child)}function Ow(t,e,r,s,n){if(gs(r)){var i=!0;Df(e)}else i=!1;if(Gl(e,n),e.stateNode===null)af(t,e),k5(e,r,s),Yg(e,r,s,n),s=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=r.contextType;typeof d=="object"&&d!==null?d=Gs(d):(d=gs(r)?Bo:Vr.current,d=kc(e,d));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==s||c!==d)&&Aw(e,a,s,d),Gi=!1;var f=e.memoizedState;a.state=f,$f(e,s,a,n),c=e.memoizedState,l!==s||f!==c||ps.current||Gi?(typeof u=="function"&&(Hg(e,r,u,s),c=e.memoizedState),(l=Gi||Tw(e,r,l,s,f,c,d))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),a.props=s,a.state=c,a.context=d,s=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{a=e.stateNode,t5(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:cn(e.type,l),a.props=d,h=e.pendingProps,f=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Gs(c):(c=gs(r)?Bo:Vr.current,c=kc(e,c));var m=r.getDerivedStateFromProps;(u=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Aw(e,a,s,c),Gi=!1,f=e.memoizedState,a.state=f,$f(e,s,a,n);var x=e.memoizedState;l!==h||f!==x||ps.current||Gi?(typeof m=="function"&&(Hg(e,r,m,s),x=e.memoizedState),(d=Gi||Tw(e,r,d,s,f,x,c)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,x,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,x,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=x),a.props=s,a.state=x,a.context=c,s=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),s=!1)}return Kg(t,e,r,s,i,n)}function Kg(t,e,r,s,n,i){S5(t,e);var a=(e.flags&128)!==0;if(!s&&!a)return n&&ww(e,r,!1),Mi(t,e,i);s=e.stateNode,sF.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&a?(e.child=Nc(e,t.child,null,i),e.child=Nc(e,null,l,i)):Kr(t,e,l,i),e.memoizedState=s.state,n&&ww(e,r,!0),e.child}function C5(t){var e=t.stateNode;e.pendingContext?bw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&bw(t,e.context,!1),Yv(t,e.containerInfo)}function Lw(t,e,r,s,n){return _c(),$v(n),e.flags|=256,Kr(t,e,r,s),e.child}var Xg={dehydrated:null,treeContext:null,retryLane:0};function Qg(t){return{baseLanes:t,cachePool:null,transitions:null}}function T5(t,e,r){var s=e.pendingProps,n=Ft.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(n&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),xt(Ft,n&1),t===null)return Vg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=s.children,t=s.fallback,i?(s=e.mode,i=e.child,a={mode:"hidden",children:a},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Km(a,s,0,null),t=Ao(t,s,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Qg(r),e.memoizedState=Xg,t):ey(e,a));if(n=t.memoizedState,n!==null&&(l=n.dehydrated,l!==null))return nF(t,e,a,s,l,n,r);if(i){i=s.fallback,a=e.mode,n=t.child,l=n.sibling;var c={mode:"hidden",children:s.children};return!(a&1)&&e.child!==n?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=Aa(n,c),s.subtreeFlags=n.subtreeFlags&14680064),l!==null?i=Aa(l,i):(i=Ao(i,a,r,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,a=t.child.memoizedState,a=a===null?Qg(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=Xg,s}return i=t.child,t=i.sibling,s=Aa(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=r),s.return=e,s.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=s,e.memoizedState=null,s}function ey(t,e){return e=Km({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function o0(t,e,r,s){return s!==null&&$v(s),Nc(e,t.child,null,r),t=ey(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function nF(t,e,r,s,n,i,a){if(r)return e.flags&256?(e.flags&=-257,s=op(Error(ye(422))),o0(t,e,a,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,n=e.mode,s=Km({mode:"visible",children:s.children},n,0,null),i=Ao(i,n,a,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Nc(e,t.child,null,a),e.child.memoizedState=Qg(a),e.memoizedState=Xg,i);if(!(e.mode&1))return o0(t,e,a,null);if(n.data==="$!"){if(s=n.nextSibling&&n.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(ye(419)),s=op(i,s,void 0),o0(t,e,a,s)}if(l=(a&t.childLanes)!==0,xs||l){if(s=gr,s!==null){switch(a&-a){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(s.suspendedLanes|a)?0:n,n!==0&&n!==i.retryLane&&(i.retryLane=n,Pi(t,n),wn(s,t,n,-1))}return ay(),s=op(Error(ye(421))),o0(t,e,a,s)}return n.data==="$?"?(e.flags|=128,e.child=t.child,e=gF.bind(null,t),n._reactRetry=e,null):(t=i.treeContext,Ss=Ea(n.nextSibling),Cs=e,Et=!0,fn=null,t!==null&&(Us[Vs++]=pi,Us[Vs++]=gi,Us[Vs++]=$o,pi=t.id,gi=t.overflow,$o=e),e=ey(e,s.children),e.flags|=4096,e)}function Iw(t,e,r){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Wg(t.return,e,r)}function lp(t,e,r,s,n){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:n}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=n)}function A5(t,e,r){var s=e.pendingProps,n=s.revealOrder,i=s.tail;if(Kr(t,e,s.children,r),s=Ft.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Iw(t,r,e);else if(t.tag===19)Iw(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(xt(Ft,s),!(e.mode&1))e.memoizedState=null;else switch(n){case"forwards":for(r=e.child,n=null;r!==null;)t=r.alternate,t!==null&&zf(t)===null&&(n=r),r=r.sibling;r=n,r===null?(n=e.child,e.child=null):(n=r.sibling,r.sibling=null),lp(e,!1,n,r,i);break;case"backwards":for(r=null,n=e.child,e.child=null;n!==null;){if(t=n.alternate,t!==null&&zf(t)===null){e.child=n;break}t=n.sibling,n.sibling=r,r=n,n=t}lp(e,!0,r,null,i);break;case"together":lp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function af(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mi(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Uo|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ye(153));if(e.child!==null){for(t=e.child,r=Aa(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Aa(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function iF(t,e,r){switch(e.tag){case 3:C5(e),_c();break;case 5:r5(e);break;case 1:gs(e.type)&&Df(e);break;case 4:Yv(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,n=e.memoizedProps.value;xt(If,s._currentValue),s._currentValue=n;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(xt(Ft,Ft.current&1),e.flags|=128,null):r&e.child.childLanes?T5(t,e,r):(xt(Ft,Ft.current&1),t=Mi(t,e,r),t!==null?t.sibling:null);xt(Ft,Ft.current&1);break;case 19:if(s=(r&e.childLanes)!==0,t.flags&128){if(s)return A5(t,e,r);e.flags|=128}if(n=e.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),xt(Ft,Ft.current),s)break;return null;case 22:case 23:return e.lanes=0,E5(t,e,r)}return Mi(t,e,r)}var F5,Zg,P5,M5;F5=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Zg=function(){};P5=function(t,e,r,s){var n=t.memoizedProps;if(n!==s){t=e.stateNode,ho(Yn.current);var i=null;switch(r){case"input":n=bg(t,n),s=bg(t,s),i=[];break;case"select":n=Mt({},n,{value:void 0}),s=Mt({},s,{value:void 0}),i=[];break;case"textarea":n=_g(t,n),s=_g(t,s),i=[];break;default:typeof n.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Mf)}jg(r,s);var a;r=null;for(d in n)if(!s.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var l=n[d];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(vu.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(l=n!=null?n[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(vu.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&bt("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};M5=function(t,e,r,s){r!==s&&(e.flags|=4)};function ld(t,e){if(!Et)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Tr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,s=0;if(e)for(var n=t.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags&14680064,s|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=s,t.childLanes=r,e}function aF(t,e,r){var s=e.pendingProps;switch(Bv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tr(e),null;case 1:return gs(e.type)&&Rf(),Tr(e),null;case 3:return s=e.stateNode,jc(),kt(ps),kt(Vr),Gv(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(i0(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fn!==null&&(a1(fn),fn=null))),Zg(t,e),Tr(e),null;case 5:qv(e);var n=ho(Au.current);if(r=e.type,t!==null&&e.stateNode!=null)P5(t,e,r,s,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(ye(166));return Tr(e),null}if(t=ho(Yn.current),i0(e)){s=e.stateNode,r=e.type;var i=e.memoizedProps;switch(s[zn]=e,s[Cu]=i,t=(e.mode&1)!==0,r){case"dialog":bt("cancel",s),bt("close",s);break;case"iframe":case"object":case"embed":bt("load",s);break;case"video":case"audio":for(n=0;n<Td.length;n++)bt(Td[n],s);break;case"source":bt("error",s);break;case"img":case"image":case"link":bt("error",s),bt("load",s);break;case"details":bt("toggle",s);break;case"input":qb(s,i),bt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},bt("invalid",s);break;case"textarea":Kb(s,i),bt("invalid",s)}jg(r,i),n=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&n0(s.textContent,l,t),n=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&n0(s.textContent,l,t),n=["children",""+l]):vu.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&bt("scroll",s)}switch(r){case"input":Xh(s),Gb(s,i,!0);break;case"textarea":Xh(s),Xb(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Mf)}s=n,e.updateQueue=s,s!==null&&(e.flags|=4)}else{a=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=oj(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=a.createElement(r,{is:s.is}):(t=a.createElement(r),r==="select"&&(a=t,s.multiple?a.multiple=!0:s.size&&(a.size=s.size))):t=a.createElementNS(t,r),t[zn]=e,t[Cu]=s,F5(t,e,!1,!1),e.stateNode=t;e:{switch(a=Eg(r,s),r){case"dialog":bt("cancel",t),bt("close",t),n=s;break;case"iframe":case"object":case"embed":bt("load",t),n=s;break;case"video":case"audio":for(n=0;n<Td.length;n++)bt(Td[n],t);n=s;break;case"source":bt("error",t),n=s;break;case"img":case"image":case"link":bt("error",t),bt("load",t),n=s;break;case"details":bt("toggle",t),n=s;break;case"input":qb(t,s),n=bg(t,s),bt("invalid",t);break;case"option":n=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},n=Mt({},s,{value:void 0}),bt("invalid",t);break;case"textarea":Kb(t,s),n=_g(t,s),bt("invalid",t);break;default:n=s}jg(r,n),l=n;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?dj(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&lj(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&yu(t,c):typeof c=="number"&&yu(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(vu.hasOwnProperty(i)?c!=null&&i==="onScroll"&&bt("scroll",t):c!=null&&Nv(t,i,c,a))}switch(r){case"input":Xh(t),Gb(t,s,!1);break;case"textarea":Xh(t),Xb(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Da(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?Wl(t,!!s.multiple,i,!1):s.defaultValue!=null&&Wl(t,!!s.multiple,s.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=Mf)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Tr(e),null;case 6:if(t&&e.stateNode!=null)M5(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(ye(166));if(r=ho(Au.current),ho(Yn.current),i0(e)){if(s=e.stateNode,r=e.memoizedProps,s[zn]=e,(i=s.nodeValue!==r)&&(t=Cs,t!==null))switch(t.tag){case 3:n0(s.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&n0(s.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[zn]=e,e.stateNode=s}return Tr(e),null;case 13:if(kt(Ft),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Et&&Ss!==null&&e.mode&1&&!(e.flags&128))Qj(),_c(),e.flags|=98560,i=!1;else if(i=i0(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(ye(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ye(317));i[zn]=e}else _c(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Tr(e),i=!1}else fn!==null&&(a1(fn),fn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Ft.current&1?ar===0&&(ar=3):ay())),e.updateQueue!==null&&(e.flags|=4),Tr(e),null);case 4:return jc(),Zg(t,e),t===null&&Eu(e.stateNode.containerInfo),Tr(e),null;case 10:return Vv(e.type._context),Tr(e),null;case 17:return gs(e.type)&&Rf(),Tr(e),null;case 19:if(kt(Ft),i=e.memoizedState,i===null)return Tr(e),null;if(s=(e.flags&128)!==0,a=i.rendering,a===null)if(s)ld(i,!1);else{if(ar!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=zf(t),a!==null){for(e.flags|=128,ld(i,!1),s=a.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=r,r=e.child;r!==null;)i=r,t=s,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return xt(Ft,Ft.current&1|2),e.child}t=t.sibling}i.tail!==null&&Vt()>Sc&&(e.flags|=128,s=!0,ld(i,!1),e.lanes=4194304)}else{if(!s)if(t=zf(a),t!==null){if(e.flags|=128,s=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ld(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Et)return Tr(e),null}else 2*Vt()-i.renderingStartTime>Sc&&r!==1073741824&&(e.flags|=128,s=!0,ld(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Vt(),e.sibling=null,r=Ft.current,xt(Ft,s?r&1|2:r&1),e):(Tr(e),null);case 22:case 23:return iy(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?ks&1073741824&&(Tr(e),e.subtreeFlags&6&&(e.flags|=8192)):Tr(e),null;case 24:return null;case 25:return null}throw Error(ye(156,e.tag))}function oF(t,e){switch(Bv(e),e.tag){case 1:return gs(e.type)&&Rf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return jc(),kt(ps),kt(Vr),Gv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qv(e),null;case 13:if(kt(Ft),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ye(340));_c()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return kt(Ft),null;case 4:return jc(),null;case 10:return Vv(e.type._context),null;case 22:case 23:return iy(),null;case 24:return null;default:return null}}var l0=!1,Rr=!1,lF=typeof WeakSet=="function"?WeakSet:Set,Me=null;function Bl(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Lt(t,e,s)}else r.current=null}function Jg(t,e,r){try{r()}catch(s){Lt(t,e,s)}}var Bw=!1;function cF(t,e){if(Og=Af,t=Ij(),Lv(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var n=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,d=0,u=0,h=t,f=null;t:for(;;){for(var m;h!==r||n!==0&&h.nodeType!==3||(l=a+n),h!==i||s!==0&&h.nodeType!==3||(c=a+s),h.nodeType===3&&(a+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===r&&++d===n&&(l=a),f===i&&++u===s&&(c=a),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Lg={focusedElem:t,selectionRange:r},Af=!1,Me=e;Me!==null;)if(e=Me,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Me=t;else for(;Me!==null;){e=Me;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var p=x.memoizedProps,g=x.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?p:cn(e.type,p),g);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ye(163))}}catch(k){Lt(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,Me=t;break}Me=e.return}return x=Bw,Bw=!1,x}function Kd(t,e,r){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&t)===t){var i=n.destroy;n.destroy=void 0,i!==void 0&&Jg(e,r,i)}n=n.next}while(n!==s)}}function qm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var s=r.create;r.destroy=s()}r=r.next}while(r!==e)}}function e1(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function R5(t){var e=t.alternate;e!==null&&(t.alternate=null,R5(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[zn],delete e[Cu],delete e[$g],delete e[HA],delete e[YA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function D5(t){return t.tag===5||t.tag===3||t.tag===4}function $w(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||D5(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function t1(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Mf));else if(s!==4&&(t=t.child,t!==null))for(t1(t,e,r),t=t.sibling;t!==null;)t1(t,e,r),t=t.sibling}function r1(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(r1(t,e,r),t=t.sibling;t!==null;)r1(t,e,r),t=t.sibling}var yr=null,hn=!1;function Ii(t,e,r){for(r=r.child;r!==null;)O5(t,e,r),r=r.sibling}function O5(t,e,r){if(Hn&&typeof Hn.onCommitFiberUnmount=="function")try{Hn.onCommitFiberUnmount(Bm,r)}catch{}switch(r.tag){case 5:Rr||Bl(r,e);case 6:var s=yr,n=hn;yr=null,Ii(t,e,r),yr=s,hn=n,yr!==null&&(hn?(t=yr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):yr.removeChild(r.stateNode));break;case 18:yr!==null&&(hn?(t=yr,r=r.stateNode,t.nodeType===8?tp(t.parentNode,r):t.nodeType===1&&tp(t,r),_u(t)):tp(yr,r.stateNode));break;case 4:s=yr,n=hn,yr=r.stateNode.containerInfo,hn=!0,Ii(t,e,r),yr=s,hn=n;break;case 0:case 11:case 14:case 15:if(!Rr&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){n=s=s.next;do{var i=n,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Jg(r,e,a),n=n.next}while(n!==s)}Ii(t,e,r);break;case 1:if(!Rr&&(Bl(r,e),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){Lt(r,e,l)}Ii(t,e,r);break;case 21:Ii(t,e,r);break;case 22:r.mode&1?(Rr=(s=Rr)||r.memoizedState!==null,Ii(t,e,r),Rr=s):Ii(t,e,r);break;default:Ii(t,e,r)}}function zw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new lF),e.forEach(function(s){var n=vF.bind(null,t,s);r.has(s)||(r.add(s),s.then(n,n))})}}function nn(t,e){var r=e.deletions;if(r!==null)for(var s=0;s<r.length;s++){var n=r[s];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:yr=l.stateNode,hn=!1;break e;case 3:yr=l.stateNode.containerInfo,hn=!0;break e;case 4:yr=l.stateNode.containerInfo,hn=!0;break e}l=l.return}if(yr===null)throw Error(ye(160));O5(i,a,n),yr=null,hn=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){Lt(n,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)L5(e,t),e=e.sibling}function L5(t,e){var r=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nn(e,t),Tn(t),s&4){try{Kd(3,t,t.return),qm(3,t)}catch(p){Lt(t,t.return,p)}try{Kd(5,t,t.return)}catch(p){Lt(t,t.return,p)}}break;case 1:nn(e,t),Tn(t),s&512&&r!==null&&Bl(r,r.return);break;case 5:if(nn(e,t),Tn(t),s&512&&r!==null&&Bl(r,r.return),t.flags&32){var n=t.stateNode;try{yu(n,"")}catch(p){Lt(t,t.return,p)}}if(s&4&&(n=t.stateNode,n!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ij(n,i),Eg(l,a);var d=Eg(l,i);for(a=0;a<c.length;a+=2){var u=c[a],h=c[a+1];u==="style"?dj(n,h):u==="dangerouslySetInnerHTML"?lj(n,h):u==="children"?yu(n,h):Nv(n,u,h,d)}switch(l){case"input":wg(n,i);break;case"textarea":aj(n,i);break;case"select":var f=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Wl(n,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Wl(n,!!i.multiple,i.defaultValue,!0):Wl(n,!!i.multiple,i.multiple?[]:"",!1))}n[Cu]=i}catch(p){Lt(t,t.return,p)}}break;case 6:if(nn(e,t),Tn(t),s&4){if(t.stateNode===null)throw Error(ye(162));n=t.stateNode,i=t.memoizedProps;try{n.nodeValue=i}catch(p){Lt(t,t.return,p)}}break;case 3:if(nn(e,t),Tn(t),s&4&&r!==null&&r.memoizedState.isDehydrated)try{_u(e.containerInfo)}catch(p){Lt(t,t.return,p)}break;case 4:nn(e,t),Tn(t);break;case 13:nn(e,t),Tn(t),n=t.child,n.flags&8192&&(i=n.memoizedState!==null,n.stateNode.isHidden=i,!i||n.alternate!==null&&n.alternate.memoizedState!==null||(sy=Vt())),s&4&&zw(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(Rr=(d=Rr)||u,nn(e,t),Rr=d):nn(e,t),Tn(t),s&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(Me=t,u=t.child;u!==null;){for(h=Me=u;Me!==null;){switch(f=Me,m=f.child,f.tag){case 0:case 11:case 14:case 15:Kd(4,f,f.return);break;case 1:Bl(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){s=f,r=f.return;try{e=s,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(p){Lt(s,r,p)}}break;case 5:Bl(f,f.return);break;case 22:if(f.memoizedState!==null){Vw(h);continue}}m!==null?(m.return=f,Me=m):Vw(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{n=h.stateNode,d?(i=n.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=cj("display",a))}catch(p){Lt(t,t.return,p)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(p){Lt(t,t.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:nn(e,t),Tn(t),s&4&&zw(t);break;case 21:break;default:nn(e,t),Tn(t)}}function Tn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(D5(r)){var s=r;break e}r=r.return}throw Error(ye(160))}switch(s.tag){case 5:var n=s.stateNode;s.flags&32&&(yu(n,""),s.flags&=-33);var i=$w(t);r1(t,i,n);break;case 3:case 4:var a=s.stateNode.containerInfo,l=$w(t);t1(t,l,a);break;default:throw Error(ye(161))}}catch(c){Lt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function dF(t,e,r){Me=t,I5(t)}function I5(t,e,r){for(var s=(t.mode&1)!==0;Me!==null;){var n=Me,i=n.child;if(n.tag===22&&s){var a=n.memoizedState!==null||l0;if(!a){var l=n.alternate,c=l!==null&&l.memoizedState!==null||Rr;l=l0;var d=Rr;if(l0=a,(Rr=c)&&!d)for(Me=n;Me!==null;)a=Me,c=a.child,a.tag===22&&a.memoizedState!==null?Ww(n):c!==null?(c.return=a,Me=c):Ww(n);for(;i!==null;)Me=i,I5(i),i=i.sibling;Me=n,l0=l,Rr=d}Uw(t)}else n.subtreeFlags&8772&&i!==null?(i.return=n,Me=i):Uw(t)}}function Uw(t){for(;Me!==null;){var e=Me;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Rr||qm(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Rr)if(r===null)s.componentDidMount();else{var n=e.elementType===e.type?r.memoizedProps:cn(e.type,r.memoizedProps);s.componentDidUpdate(n,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ew(e,i,s);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Ew(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&_u(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ye(163))}Rr||e.flags&512&&e1(e)}catch(f){Lt(e,e.return,f)}}if(e===t){Me=null;break}if(r=e.sibling,r!==null){r.return=e.return,Me=r;break}Me=e.return}}function Vw(t){for(;Me!==null;){var e=Me;if(e===t){Me=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Me=r;break}Me=e.return}}function Ww(t){for(;Me!==null;){var e=Me;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{qm(4,e)}catch(c){Lt(e,r,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var n=e.return;try{s.componentDidMount()}catch(c){Lt(e,n,c)}}var i=e.return;try{e1(e)}catch(c){Lt(e,i,c)}break;case 5:var a=e.return;try{e1(e)}catch(c){Lt(e,a,c)}}}catch(c){Lt(e,e.return,c)}if(e===t){Me=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Me=l;break}Me=e.return}}var uF=Math.ceil,Wf=Oi.ReactCurrentDispatcher,ty=Oi.ReactCurrentOwner,Ys=Oi.ReactCurrentBatchConfig,nt=0,gr=null,er=null,_r=0,ks=0,$l=Va(0),ar=0,Ru=null,Uo=0,Gm=0,ry=0,Xd=null,fs=null,sy=0,Sc=1/0,ci=null,Hf=!1,s1=null,Ca=null,c0=!1,ha=null,Yf=0,Qd=0,n1=null,of=-1,lf=0;function ts(){return nt&6?Vt():of!==-1?of:of=Vt()}function Ta(t){return t.mode&1?nt&2&&_r!==0?_r&-_r:GA.transition!==null?(lf===0&&(lf=kj()),lf):(t=dt,t!==0||(t=window.event,t=t===void 0?16:Tj(t.type)),t):1}function wn(t,e,r,s){if(50<Qd)throw Qd=0,n1=null,Error(ye(185));kh(t,r,s),(!(nt&2)||t!==gr)&&(t===gr&&(!(nt&2)&&(Gm|=r),ar===4&&Xi(t,_r)),vs(t,s),r===1&&nt===0&&!(e.mode&1)&&(Sc=Vt()+500,Wm&&Wa()))}function vs(t,e){var r=t.callbackNode;G6(t,e);var s=Tf(t,t===gr?_r:0);if(s===0)r!==null&&Jb(r),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(r!=null&&Jb(r),e===1)t.tag===0?qA(Hw.bind(null,t)):Gj(Hw.bind(null,t)),VA(function(){!(nt&6)&&Wa()}),r=null;else{switch(_j(s)){case 1:r=Tv;break;case 4:r=bj;break;case 16:r=Cf;break;case 536870912:r=wj;break;default:r=Cf}r=Y5(r,B5.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function B5(t,e){if(of=-1,lf=0,nt&6)throw Error(ye(327));var r=t.callbackNode;if(Kl()&&t.callbackNode!==r)return null;var s=Tf(t,t===gr?_r:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=qf(t,s);else{e=s;var n=nt;nt|=2;var i=z5();(gr!==t||_r!==e)&&(ci=null,Sc=Vt()+500,To(t,e));do try{mF();break}catch(l){$5(t,l)}while(1);Uv(),Wf.current=i,nt=n,er!==null?e=0:(gr=null,_r=0,e=ar)}if(e!==0){if(e===2&&(n=Fg(t),n!==0&&(s=n,e=i1(t,n))),e===1)throw r=Ru,To(t,0),Xi(t,s),vs(t,Vt()),r;if(e===6)Xi(t,s);else{if(n=t.current.alternate,!(s&30)&&!hF(n)&&(e=qf(t,s),e===2&&(i=Fg(t),i!==0&&(s=i,e=i1(t,i))),e===1))throw r=Ru,To(t,0),Xi(t,s),vs(t,Vt()),r;switch(t.finishedWork=n,t.finishedLanes=s,e){case 0:case 1:throw Error(ye(345));case 2:no(t,fs,ci);break;case 3:if(Xi(t,s),(s&130023424)===s&&(e=sy+500-Vt(),10<e)){if(Tf(t,0)!==0)break;if(n=t.suspendedLanes,(n&s)!==s){ts(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=Bg(no.bind(null,t,fs,ci),e);break}no(t,fs,ci);break;case 4:if(Xi(t,s),(s&4194240)===s)break;for(e=t.eventTimes,n=-1;0<s;){var a=31-bn(s);i=1<<a,a=e[a],a>n&&(n=a),s&=~i}if(s=n,s=Vt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*uF(s/1960))-s,10<s){t.timeoutHandle=Bg(no.bind(null,t,fs,ci),s);break}no(t,fs,ci);break;case 5:no(t,fs,ci);break;default:throw Error(ye(329))}}}return vs(t,Vt()),t.callbackNode===r?B5.bind(null,t):null}function i1(t,e){var r=Xd;return t.current.memoizedState.isDehydrated&&(To(t,e).flags|=256),t=qf(t,e),t!==2&&(e=fs,fs=r,e!==null&&a1(e)),t}function a1(t){fs===null?fs=t:fs.push.apply(fs,t)}function hF(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var n=r[s],i=n.getSnapshot;n=n.value;try{if(!Nn(i(),n))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xi(t,e){for(e&=~ry,e&=~Gm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-bn(e),s=1<<r;t[r]=-1,e&=~s}}function Hw(t){if(nt&6)throw Error(ye(327));Kl();var e=Tf(t,0);if(!(e&1))return vs(t,Vt()),null;var r=qf(t,e);if(t.tag!==0&&r===2){var s=Fg(t);s!==0&&(e=s,r=i1(t,s))}if(r===1)throw r=Ru,To(t,0),Xi(t,e),vs(t,Vt()),r;if(r===6)throw Error(ye(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,no(t,fs,ci),vs(t,Vt()),null}function ny(t,e){var r=nt;nt|=1;try{return t(e)}finally{nt=r,nt===0&&(Sc=Vt()+500,Wm&&Wa())}}function Vo(t){ha!==null&&ha.tag===0&&!(nt&6)&&Kl();var e=nt;nt|=1;var r=Ys.transition,s=dt;try{if(Ys.transition=null,dt=1,t)return t()}finally{dt=s,Ys.transition=r,nt=e,!(nt&6)&&Wa()}}function iy(){ks=$l.current,kt($l)}function To(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,UA(r)),er!==null)for(r=er.return;r!==null;){var s=r;switch(Bv(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Rf();break;case 3:jc(),kt(ps),kt(Vr),Gv();break;case 5:qv(s);break;case 4:jc();break;case 13:kt(Ft);break;case 19:kt(Ft);break;case 10:Vv(s.type._context);break;case 22:case 23:iy()}r=r.return}if(gr=t,er=t=Aa(t.current,null),_r=ks=e,ar=0,Ru=null,ry=Gm=Uo=0,fs=Xd=null,uo!==null){for(e=0;e<uo.length;e++)if(r=uo[e],s=r.interleaved,s!==null){r.interleaved=null;var n=s.next,i=r.pending;if(i!==null){var a=i.next;i.next=n,s.next=a}r.pending=s}uo=null}return t}function $5(t,e){do{var r=er;try{if(Uv(),sf.current=Vf,Uf){for(var s=Pt.memoizedState;s!==null;){var n=s.queue;n!==null&&(n.pending=null),s=s.next}Uf=!1}if(zo=0,xr=sr=Pt=null,Gd=!1,Fu=0,ty.current=null,r===null||r.return===null){ar=1,Ru=e,er=null;break}e:{var i=t,a=r.return,l=r,c=e;if(e=_r,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=Pw(a);if(m!==null){m.flags&=-257,Mw(m,a,l,i,e),m.mode&1&&Fw(i,d,e),e=m,c=d;var x=e.updateQueue;if(x===null){var p=new Set;p.add(c),e.updateQueue=p}else x.add(c);break e}else{if(!(e&1)){Fw(i,d,e),ay();break e}c=Error(ye(426))}}else if(Et&&l.mode&1){var g=Pw(a);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Mw(g,a,l,i,e),$v(Ec(c,l));break e}}i=c=Ec(c,l),ar!==4&&(ar=2),Xd===null?Xd=[i]:Xd.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=_5(i,c,e);jw(i,v);break e;case 1:l=c;var b=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ca===null||!Ca.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=N5(i,l,e);jw(i,k);break e}}i=i.return}while(i!==null)}V5(r)}catch(N){e=N,er===r&&r!==null&&(er=r=r.return);continue}break}while(1)}function z5(){var t=Wf.current;return Wf.current=Vf,t===null?Vf:t}function ay(){(ar===0||ar===3||ar===2)&&(ar=4),gr===null||!(Uo&268435455)&&!(Gm&268435455)||Xi(gr,_r)}function qf(t,e){var r=nt;nt|=2;var s=z5();(gr!==t||_r!==e)&&(ci=null,To(t,e));do try{fF();break}catch(n){$5(t,n)}while(1);if(Uv(),nt=r,Wf.current=s,er!==null)throw Error(ye(261));return gr=null,_r=0,ar}function fF(){for(;er!==null;)U5(er)}function mF(){for(;er!==null&&!B6();)U5(er)}function U5(t){var e=H5(t.alternate,t,ks);t.memoizedProps=t.pendingProps,e===null?V5(t):er=e,ty.current=null}function V5(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=oF(r,e),r!==null){r.flags&=32767,er=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ar=6,er=null;return}}else if(r=aF(r,e,ks),r!==null){er=r;return}if(e=e.sibling,e!==null){er=e;return}er=e=t}while(e!==null);ar===0&&(ar=5)}function no(t,e,r){var s=dt,n=Ys.transition;try{Ys.transition=null,dt=1,xF(t,e,r,s)}finally{Ys.transition=n,dt=s}return null}function xF(t,e,r,s){do Kl();while(ha!==null);if(nt&6)throw Error(ye(327));r=t.finishedWork;var n=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ye(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(K6(t,i),t===gr&&(er=gr=null,_r=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||c0||(c0=!0,Y5(Cf,function(){return Kl(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ys.transition,Ys.transition=null;var a=dt;dt=1;var l=nt;nt|=4,ty.current=null,cF(t,r),L5(r,t),DA(Lg),Af=!!Og,Lg=Og=null,t.current=r,dF(r),$6(),nt=l,dt=a,Ys.transition=i}else t.current=r;if(c0&&(c0=!1,ha=t,Yf=n),i=t.pendingLanes,i===0&&(Ca=null),V6(r.stateNode),vs(t,Vt()),e!==null)for(s=t.onRecoverableError,r=0;r<e.length;r++)n=e[r],s(n.value,{componentStack:n.stack,digest:n.digest});if(Hf)throw Hf=!1,t=s1,s1=null,t;return Yf&1&&t.tag!==0&&Kl(),i=t.pendingLanes,i&1?t===n1?Qd++:(Qd=0,n1=t):Qd=0,Wa(),null}function Kl(){if(ha!==null){var t=_j(Yf),e=Ys.transition,r=dt;try{if(Ys.transition=null,dt=16>t?16:t,ha===null)var s=!1;else{if(t=ha,ha=null,Yf=0,nt&6)throw Error(ye(331));var n=nt;for(nt|=4,Me=t.current;Me!==null;){var i=Me,a=i.child;if(Me.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Me=d;Me!==null;){var u=Me;switch(u.tag){case 0:case 11:case 15:Kd(8,u,i)}var h=u.child;if(h!==null)h.return=u,Me=h;else for(;Me!==null;){u=Me;var f=u.sibling,m=u.return;if(R5(u),u===d){Me=null;break}if(f!==null){f.return=m,Me=f;break}Me=m}}}var x=i.alternate;if(x!==null){var p=x.child;if(p!==null){x.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}Me=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Me=a;else e:for(;Me!==null;){if(i=Me,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Kd(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Me=v;break e}Me=i.return}}var b=t.current;for(Me=b;Me!==null;){a=Me;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,Me=y;else e:for(a=b;Me!==null;){if(l=Me,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:qm(9,l)}}catch(N){Lt(l,l.return,N)}if(l===a){Me=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,Me=k;break e}Me=l.return}}if(nt=n,Wa(),Hn&&typeof Hn.onPostCommitFiberRoot=="function")try{Hn.onPostCommitFiberRoot(Bm,t)}catch{}s=!0}return s}finally{dt=r,Ys.transition=e}}return!1}function Yw(t,e,r){e=Ec(r,e),e=_5(t,e,1),t=Sa(t,e,1),e=ts(),t!==null&&(kh(t,1,e),vs(t,e))}function Lt(t,e,r){if(t.tag===3)Yw(t,t,r);else for(;e!==null;){if(e.tag===3){Yw(e,t,r);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ca===null||!Ca.has(s))){t=Ec(r,t),t=N5(e,t,1),e=Sa(e,t,1),t=ts(),e!==null&&(kh(e,1,t),vs(e,t));break}}e=e.return}}function pF(t,e,r){var s=t.pingCache;s!==null&&s.delete(e),e=ts(),t.pingedLanes|=t.suspendedLanes&r,gr===t&&(_r&r)===r&&(ar===4||ar===3&&(_r&130023424)===_r&&500>Vt()-sy?To(t,0):ry|=r),vs(t,e)}function W5(t,e){e===0&&(t.mode&1?(e=Jh,Jh<<=1,!(Jh&130023424)&&(Jh=4194304)):e=1);var r=ts();t=Pi(t,e),t!==null&&(kh(t,e,r),vs(t,r))}function gF(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),W5(t,r)}function vF(t,e){var r=0;switch(t.tag){case 13:var s=t.stateNode,n=t.memoizedState;n!==null&&(r=n.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(ye(314))}s!==null&&s.delete(e),W5(t,r)}var H5;H5=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||ps.current)xs=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return xs=!1,iF(t,e,r);xs=!!(t.flags&131072)}else xs=!1,Et&&e.flags&1048576&&Kj(e,Lf,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;af(t,e),t=e.pendingProps;var n=kc(e,Vr.current);Gl(e,r),n=Xv(null,e,s,t,n,r);var i=Qv();return e.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gs(s)?(i=!0,Df(e)):i=!1,e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Hv(e),n.updater=Ym,e.stateNode=n,n._reactInternals=e,Yg(e,s,t,r),e=Kg(null,e,s,!0,i,r)):(e.tag=0,Et&&i&&Iv(e),Kr(null,e,n,r),e=e.child),e;case 16:s=e.elementType;e:{switch(af(t,e),t=e.pendingProps,n=s._init,s=n(s._payload),e.type=s,n=e.tag=bF(s),t=cn(s,t),n){case 0:e=Gg(null,e,s,t,r);break e;case 1:e=Ow(null,e,s,t,r);break e;case 11:e=Rw(null,e,s,t,r);break e;case 14:e=Dw(null,e,s,cn(s.type,t),r);break e}throw Error(ye(306,s,""))}return e;case 0:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:cn(s,n),Gg(t,e,s,n,r);case 1:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:cn(s,n),Ow(t,e,s,n,r);case 3:e:{if(C5(e),t===null)throw Error(ye(387));s=e.pendingProps,i=e.memoizedState,n=i.element,t5(t,e),$f(e,s,null,r);var a=e.memoizedState;if(s=a.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){n=Ec(Error(ye(423)),e),e=Lw(t,e,s,r,n);break e}else if(s!==n){n=Ec(Error(ye(424)),e),e=Lw(t,e,s,r,n);break e}else for(Ss=Ea(e.stateNode.containerInfo.firstChild),Cs=e,Et=!0,fn=null,r=Jj(e,null,s,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(_c(),s===n){e=Mi(t,e,r);break e}Kr(t,e,s,r)}e=e.child}return e;case 5:return r5(e),t===null&&Vg(e),s=e.type,n=e.pendingProps,i=t!==null?t.memoizedProps:null,a=n.children,Ig(s,n)?a=null:i!==null&&Ig(s,i)&&(e.flags|=32),S5(t,e),Kr(t,e,a,r),e.child;case 6:return t===null&&Vg(e),null;case 13:return T5(t,e,r);case 4:return Yv(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Nc(e,null,s,r):Kr(t,e,s,r),e.child;case 11:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:cn(s,n),Rw(t,e,s,n,r);case 7:return Kr(t,e,e.pendingProps,r),e.child;case 8:return Kr(t,e,e.pendingProps.children,r),e.child;case 12:return Kr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(s=e.type._context,n=e.pendingProps,i=e.memoizedProps,a=n.value,xt(If,s._currentValue),s._currentValue=a,i!==null)if(Nn(i.value,a)){if(i.children===n.children&&!ps.current){e=Mi(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=Ni(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Wg(i.return,r,e),l.lanes|=r;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(ye(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Wg(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Kr(t,e,n.children,r),e=e.child}return e;case 9:return n=e.type,s=e.pendingProps.children,Gl(e,r),n=Gs(n),s=s(n),e.flags|=1,Kr(t,e,s,r),e.child;case 14:return s=e.type,n=cn(s,e.pendingProps),n=cn(s.type,n),Dw(t,e,s,n,r);case 15:return j5(t,e,e.type,e.pendingProps,r);case 17:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:cn(s,n),af(t,e),e.tag=1,gs(s)?(t=!0,Df(e)):t=!1,Gl(e,r),k5(e,s,n),Yg(e,s,n,r),Kg(null,e,s,!0,t,r);case 19:return A5(t,e,r);case 22:return E5(t,e,r)}throw Error(ye(156,e.tag))};function Y5(t,e){return yj(t,e)}function yF(t,e,r,s){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ws(t,e,r,s){return new yF(t,e,r,s)}function oy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bF(t){if(typeof t=="function")return oy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ev)return 11;if(t===Sv)return 14}return 2}function Aa(t,e){var r=t.alternate;return r===null?(r=Ws(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function cf(t,e,r,s,n,i){var a=2;if(s=t,typeof t=="function")oy(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Al:return Ao(r.children,n,i,e);case jv:a=8,n|=8;break;case pg:return t=Ws(12,r,e,n|2),t.elementType=pg,t.lanes=i,t;case gg:return t=Ws(13,r,e,n),t.elementType=gg,t.lanes=i,t;case vg:return t=Ws(19,r,e,n),t.elementType=vg,t.lanes=i,t;case rj:return Km(r,n,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ej:a=10;break e;case tj:a=9;break e;case Ev:a=11;break e;case Sv:a=14;break e;case qi:a=16,s=null;break e}throw Error(ye(130,t==null?t:typeof t,""))}return e=Ws(a,r,e,n),e.elementType=t,e.type=s,e.lanes=i,e}function Ao(t,e,r,s){return t=Ws(7,t,s,e),t.lanes=r,t}function Km(t,e,r,s){return t=Ws(22,t,s,e),t.elementType=rj,t.lanes=r,t.stateNode={isHidden:!1},t}function cp(t,e,r){return t=Ws(6,t,null,e),t.lanes=r,t}function dp(t,e,r){return e=Ws(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function wF(t,e,r,s,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wx(0),this.expirationTimes=Wx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wx(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function ly(t,e,r,s,n,i,a,l,c){return t=new wF(t,e,r,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ws(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hv(i),t}function kF(t,e,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tl,key:s==null?null:""+s,children:t,containerInfo:e,implementation:r}}function q5(t){if(!t)return Oa;t=t._reactInternals;e:{if(il(t)!==t||t.tag!==1)throw Error(ye(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ye(171))}if(t.tag===1){var r=t.type;if(gs(r))return qj(t,r,e)}return e}function G5(t,e,r,s,n,i,a,l,c){return t=ly(r,s,!0,t,n,i,a,l,c),t.context=q5(null),r=t.current,s=ts(),n=Ta(r),i=Ni(s,n),i.callback=e??null,Sa(r,i,n),t.current.lanes=n,kh(t,n,s),vs(t,s),t}function Xm(t,e,r,s){var n=e.current,i=ts(),a=Ta(n);return r=q5(r),e.context===null?e.context=r:e.pendingContext=r,e=Ni(i,a),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Sa(n,e,a),t!==null&&(wn(t,n,a,i),rf(t,n,a)),a}function Gf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function cy(t,e){qw(t,e),(t=t.alternate)&&qw(t,e)}function _F(){return null}var K5=typeof reportError=="function"?reportError:function(t){console.error(t)};function dy(t){this._internalRoot=t}Qm.prototype.render=dy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ye(409));Xm(t,e,null,null)};Qm.prototype.unmount=dy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vo(function(){Xm(null,t,null,null)}),e[Fi]=null}};function Qm(t){this._internalRoot=t}Qm.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ej();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ki.length&&e!==0&&e<Ki[r].priority;r++);Ki.splice(r,0,t),r===0&&Cj(t)}};function uy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gw(){}function NF(t,e,r,s,n){if(n){if(typeof s=="function"){var i=s;s=function(){var d=Gf(a);i.call(d)}}var a=G5(e,s,t,0,null,!1,!1,"",Gw);return t._reactRootContainer=a,t[Fi]=a.current,Eu(t.nodeType===8?t.parentNode:t),Vo(),a}for(;n=t.lastChild;)t.removeChild(n);if(typeof s=="function"){var l=s;s=function(){var d=Gf(c);l.call(d)}}var c=ly(t,0,!1,null,null,!1,!1,"",Gw);return t._reactRootContainer=c,t[Fi]=c.current,Eu(t.nodeType===8?t.parentNode:t),Vo(function(){Xm(e,c,r,s)}),c}function Jm(t,e,r,s,n){var i=r._reactRootContainer;if(i){var a=i;if(typeof n=="function"){var l=n;n=function(){var c=Gf(a);l.call(c)}}Xm(e,a,t,n)}else a=NF(r,e,t,n,s);return Gf(a)}Nj=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Cd(e.pendingLanes);r!==0&&(Av(e,r|1),vs(e,Vt()),!(nt&6)&&(Sc=Vt()+500,Wa()))}break;case 13:Vo(function(){var s=Pi(t,1);if(s!==null){var n=ts();wn(s,t,1,n)}}),cy(t,1)}};Fv=function(t){if(t.tag===13){var e=Pi(t,134217728);if(e!==null){var r=ts();wn(e,t,134217728,r)}cy(t,134217728)}};jj=function(t){if(t.tag===13){var e=Ta(t),r=Pi(t,e);if(r!==null){var s=ts();wn(r,t,e,s)}cy(t,e)}};Ej=function(){return dt};Sj=function(t,e){var r=dt;try{return dt=t,e()}finally{dt=r}};Cg=function(t,e,r){switch(e){case"input":if(wg(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var s=r[e];if(s!==t&&s.form===t.form){var n=Vm(s);if(!n)throw Error(ye(90));nj(s),wg(s,n)}}}break;case"textarea":aj(t,r);break;case"select":e=r.value,e!=null&&Wl(t,!!r.multiple,e,!1)}};fj=ny;mj=Vo;var jF={usingClientEntryPoint:!1,Events:[Nh,Rl,Vm,uj,hj,ny]},cd={findFiberByHostInstance:co,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},EF={bundleType:cd.bundleType,version:cd.version,rendererPackageName:cd.rendererPackageName,rendererConfig:cd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Oi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=gj(t),t===null?null:t.stateNode},findFiberByHostInstance:cd.findFiberByHostInstance||_F,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var d0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!d0.isDisabled&&d0.supportsFiber)try{Bm=d0.inject(EF),Hn=d0}catch{}}Ms.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jF;Ms.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uy(e))throw Error(ye(200));return kF(t,e,null,r)};Ms.createRoot=function(t,e){if(!uy(t))throw Error(ye(299));var r=!1,s="",n=K5;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(n=e.onRecoverableError)),e=ly(t,1,!1,null,null,r,!1,s,n),t[Fi]=e.current,Eu(t.nodeType===8?t.parentNode:t),new dy(e)};Ms.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ye(188)):(t=Object.keys(t).join(","),Error(ye(268,t)));return t=gj(e),t=t===null?null:t.stateNode,t};Ms.flushSync=function(t){return Vo(t)};Ms.hydrate=function(t,e,r){if(!Zm(e))throw Error(ye(200));return Jm(null,t,e,!0,r)};Ms.hydrateRoot=function(t,e,r){if(!uy(t))throw Error(ye(405));var s=r!=null&&r.hydratedSources||null,n=!1,i="",a=K5;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=G5(e,null,t,1,r??null,n,!1,i,a),t[Fi]=e.current,Eu(t),s)for(t=0;t<s.length;t++)r=s[t],n=r._getVersion,n=n(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,n]:e.mutableSourceEagerHydrationData.push(r,n);return new Qm(e)};Ms.render=function(t,e,r){if(!Zm(e))throw Error(ye(200));return Jm(null,t,e,!1,r)};Ms.unmountComponentAtNode=function(t){if(!Zm(t))throw Error(ye(40));return t._reactRootContainer?(Vo(function(){Jm(null,null,t,!1,function(){t._reactRootContainer=null,t[Fi]=null})}),!0):!1};Ms.unstable_batchedUpdates=ny;Ms.unstable_renderSubtreeIntoContainer=function(t,e,r,s){if(!Zm(r))throw Error(ye(200));if(t==null||t._reactInternals===void 0)throw Error(ye(38));return Jm(t,e,r,!1,s)};Ms.version="18.3.1-next-f1338f8080-20240426";function X5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(X5)}catch(t){console.error(t)}}X5(),X4.exports=Ms;var Q5=X4.exports,Kw=Q5;mg.createRoot=Kw.createRoot,mg.hydrateRoot=Kw.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Du(){return Du=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Du.apply(this,arguments)}var fa;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(fa||(fa={}));const Xw="popstate";function SF(t){t===void 0&&(t={});function e(s,n){let{pathname:i,search:a,hash:l}=s.location;return o1("",{pathname:i,search:a,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(s,n){return typeof n=="string"?n:Kf(n)}return TF(e,r,null,t)}function Yt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Z5(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CF(){return Math.random().toString(36).substr(2,8)}function Qw(t,e){return{usr:t.state,key:t.key,idx:e}}function o1(t,e,r,s){return r===void 0&&(r=null),Du({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?zc(e):e,{state:r,key:e&&e.key||s||CF()})}function Kf(t){let{pathname:e="/",search:r="",hash:s=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function zc(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function TF(t,e,r,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:i=!1}=s,a=n.history,l=fa.Pop,c=null,d=u();d==null&&(d=0,a.replaceState(Du({},a.state,{idx:d}),""));function u(){return(a.state||{idx:null}).idx}function h(){l=fa.Pop;let g=u(),v=g==null?null:g-d;d=g,c&&c({action:l,location:p.location,delta:v})}function f(g,v){l=fa.Push;let b=o1(p.location,g,v);r&&r(b,g),d=u()+1;let y=Qw(b,d),k=p.createHref(b);try{a.pushState(y,"",k)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;n.location.assign(k)}i&&c&&c({action:l,location:p.location,delta:1})}function m(g,v){l=fa.Replace;let b=o1(p.location,g,v);r&&r(b,g),d=u();let y=Qw(b,d),k=p.createHref(b);a.replaceState(y,"",k),i&&c&&c({action:l,location:p.location,delta:0})}function x(g){let v=n.location.origin!=="null"?n.location.origin:n.location.href,b=typeof g=="string"?g:Kf(g);return b=b.replace(/ $/,"%20"),Yt(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let p={get action(){return l},get location(){return t(n,a)},listen(g){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(Xw,h),c=g,()=>{n.removeEventListener(Xw,h),c=null}},createHref(g){return e(n,g)},createURL:x,encodeLocation(g){let v=x(g);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:m,go(g){return a.go(g)}};return p}var Zw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Zw||(Zw={}));function AF(t,e,r){return r===void 0&&(r="/"),FF(t,e,r,!1)}function FF(t,e,r,s){let n=typeof e=="string"?zc(e):e,i=hy(n.pathname||"/",r);if(i==null)return null;let a=J5(t);PF(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let d=VF(i);l=zF(a[c],d,s)}return l}function J5(t,e,r,s){e===void 0&&(e=[]),r===void 0&&(r=[]),s===void 0&&(s="");let n=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(Yt(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=Fa([s,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(Yt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),J5(i.children,e,u,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:BF(d,i.index),routesMeta:u})};return t.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))n(i,a);else for(let c of eE(i.path))n(i,a,c)}),e}function eE(t){let e=t.split("/");if(e.length===0)return[];let[r,...s]=e,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return n?[i,""]:[i];let a=eE(s.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),n&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function PF(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:$F(e.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const MF=/^:[\w-]+$/,RF=3,DF=2,OF=1,LF=10,IF=-2,Jw=t=>t==="*";function BF(t,e){let r=t.split("/"),s=r.length;return r.some(Jw)&&(s+=IF),e&&(s+=DF),r.filter(n=>!Jw(n)).reduce((n,i)=>n+(MF.test(i)?RF:i===""?OF:LF),s)}function $F(t,e){return t.length===e.length&&t.slice(0,-1).every((s,n)=>s===e[n])?t[t.length-1]-e[e.length-1]:0}function zF(t,e,r){r===void 0&&(r=!1);let{routesMeta:s}=t,n={},i="/",a=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=e2({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h&&d&&r&&!s[s.length-1].route.index&&(h=e2({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(n,h.params),a.push({params:n,pathname:Fa([i,h.pathname]),pathnameBase:qF(Fa([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Fa([i,h.pathnameBase]))}return a}function e2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,s]=UF(t.path,t.caseSensitive,t.end),n=e.match(r);if(!n)return null;let i=n[0],a=i.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:s.reduce((d,u,h)=>{let{paramName:f,isOptional:m}=u;if(f==="*"){let p=l[h]||"";a=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const x=l[h];return m&&!x?d[f]=void 0:d[f]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function UF(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Z5(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),s]}function VF(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Z5(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function hy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,s=t.charAt(r);return s&&s!=="/"?null:t.slice(r)||"/"}function WF(t,e){e===void 0&&(e="/");let{pathname:r,search:s="",hash:n=""}=typeof t=="string"?zc(t):t;return{pathname:r?r.startsWith("/")?r:HF(r,e):e,search:GF(s),hash:KF(n)}}function HF(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function up(t,e,r,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function YF(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function fy(t,e){let r=YF(t);return e?r.map((s,n)=>n===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function my(t,e,r,s){s===void 0&&(s=!1);let n;typeof t=="string"?n=zc(t):(n=Du({},t),Yt(!n.pathname||!n.pathname.includes("?"),up("?","pathname","search",n)),Yt(!n.pathname||!n.pathname.includes("#"),up("#","pathname","hash",n)),Yt(!n.search||!n.search.includes("#"),up("#","search","hash",n)));let i=t===""||n.pathname==="",a=i?"/":n.pathname,l;if(a==null)l=r;else{let h=e.length-1;if(!s&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;n.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=WF(n,l),d=a&&a!=="/"&&a.endsWith("/"),u=(i||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const Fa=t=>t.join("/").replace(/\/\/+/g,"/"),qF=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),GF=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,KF=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function XF(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const tE=["post","put","patch","delete"];new Set(tE);const QF=["get",...tE];new Set(QF);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ou(){return Ou=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Ou.apply(this,arguments)}const xy=w.createContext(null),ZF=w.createContext(null),Ha=w.createContext(null),ex=w.createContext(null),Qn=w.createContext({outlet:null,matches:[],isDataRoute:!1}),rE=w.createContext(null);function JF(t,e){let{relative:r}=e===void 0?{}:e;Uc()||Yt(!1);let{basename:s,navigator:n}=w.useContext(Ha),{hash:i,pathname:a,search:l}=nE(t,{relative:r}),c=a;return s!=="/"&&(c=a==="/"?s:Fa([s,a])),n.createHref({pathname:c,search:l,hash:i})}function Uc(){return w.useContext(ex)!=null}function al(){return Uc()||Yt(!1),w.useContext(ex).location}function sE(t){w.useContext(Ha).static||w.useLayoutEffect(t)}function ol(){let{isDataRoute:t}=w.useContext(Qn);return t?xP():eP()}function eP(){Uc()||Yt(!1);let t=w.useContext(xy),{basename:e,future:r,navigator:s}=w.useContext(Ha),{matches:n}=w.useContext(Qn),{pathname:i}=al(),a=JSON.stringify(fy(n,r.v7_relativeSplatPath)),l=w.useRef(!1);return sE(()=>{l.current=!0}),w.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let h=my(d,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Fa([e,h.pathname])),(u.replace?s.replace:s.push)(h,u.state,u)},[e,s,a,i,t])}const tP=w.createContext(null);function rP(t){let e=w.useContext(Qn).outlet;return e&&w.createElement(tP.Provider,{value:t},e)}function sP(){let{matches:t}=w.useContext(Qn),e=t[t.length-1];return e?e.params:{}}function nE(t,e){let{relative:r}=e===void 0?{}:e,{future:s}=w.useContext(Ha),{matches:n}=w.useContext(Qn),{pathname:i}=al(),a=JSON.stringify(fy(n,s.v7_relativeSplatPath));return w.useMemo(()=>my(t,JSON.parse(a),i,r==="path"),[t,a,i,r])}function nP(t,e){return iP(t,e)}function iP(t,e,r,s){Uc()||Yt(!1);let{navigator:n}=w.useContext(Ha),{matches:i}=w.useContext(Qn),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=al(),u;if(e){var h;let g=typeof e=="string"?zc(e):e;c==="/"||(h=g.pathname)!=null&&h.startsWith(c)||Yt(!1),u=g}else u=d;let f=u.pathname||"/",m=f;if(c!=="/"){let g=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let x=AF(t,{pathname:m}),p=dP(x&&x.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:Fa([c,n.encodeLocation?n.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:Fa([c,n.encodeLocation?n.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,r,s);return e&&p?w.createElement(ex.Provider,{value:{location:Ou({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:fa.Pop}},p):p}function aP(){let t=mP(),e=XF(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),r?w.createElement("pre",{style:n},r):null,i)}const oP=w.createElement(aP,null);class lP extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?w.createElement(Qn.Provider,{value:this.props.routeContext},w.createElement(rE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cP(t){let{routeContext:e,match:r,children:s}=t,n=w.useContext(xy);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),w.createElement(Qn.Provider,{value:e},s)}function dP(t,e,r,s){var n;if(e===void 0&&(e=[]),r===void 0&&(r=null),s===void 0&&(s=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=s)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,l=(n=r)==null?void 0:n.errors;if(l!=null){let u=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||Yt(!1),a=a.slice(0,Math.min(a.length,u+1))}let c=!1,d=-1;if(r&&s&&s.v7_partialHydration)for(let u=0;u<a.length;u++){let h=a[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:f,errors:m}=r,x=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||x){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((u,h,f)=>{let m,x=!1,p=null,g=null;r&&(m=l&&h.route.id?l[h.route.id]:void 0,p=h.route.errorElement||oP,c&&(d<0&&f===0?(pP("route-fallback",!1),x=!0,g=null):d===f&&(x=!0,g=h.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,f+1)),b=()=>{let y;return m?y=p:x?y=g:h.route.Component?y=w.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=u,w.createElement(cP,{match:h,routeContext:{outlet:u,matches:v,isDataRoute:r!=null},children:y})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?w.createElement(lP,{location:r.location,revalidation:r.revalidation,component:p,error:m,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var iE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(iE||{}),Xf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Xf||{});function uP(t){let e=w.useContext(xy);return e||Yt(!1),e}function hP(t){let e=w.useContext(ZF);return e||Yt(!1),e}function fP(t){let e=w.useContext(Qn);return e||Yt(!1),e}function aE(t){let e=fP(),r=e.matches[e.matches.length-1];return r.route.id||Yt(!1),r.route.id}function mP(){var t;let e=w.useContext(rE),r=hP(Xf.UseRouteError),s=aE(Xf.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[s]}function xP(){let{router:t}=uP(iE.UseNavigateStable),e=aE(Xf.UseNavigateStable),r=w.useRef(!1);return sE(()=>{r.current=!0}),w.useCallback(function(n,i){i===void 0&&(i={}),r.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,Ou({fromRouteId:e},i)))},[t,e])}const t2={};function pP(t,e,r){!e&&!t2[t]&&(t2[t]=!0)}function gP(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function u0(t){let{to:e,replace:r,state:s,relative:n}=t;Uc()||Yt(!1);let{future:i,static:a}=w.useContext(Ha),{matches:l}=w.useContext(Qn),{pathname:c}=al(),d=ol(),u=my(e,fy(l,i.v7_relativeSplatPath),c,n==="path"),h=JSON.stringify(u);return w.useEffect(()=>d(JSON.parse(h),{replace:r,state:s,relative:n}),[d,h,n,r,s]),null}function oE(t){return rP(t.context)}function Rt(t){Yt(!1)}function vP(t){let{basename:e="/",children:r=null,location:s,navigationType:n=fa.Pop,navigator:i,static:a=!1,future:l}=t;Uc()&&Yt(!1);let c=e.replace(/^\/*/,"/"),d=w.useMemo(()=>({basename:c,navigator:i,static:a,future:Ou({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof s=="string"&&(s=zc(s));let{pathname:u="/",search:h="",hash:f="",state:m=null,key:x="default"}=s,p=w.useMemo(()=>{let g=hy(u,c);return g==null?null:{location:{pathname:g,search:h,hash:f,state:m,key:x},navigationType:n}},[c,u,h,f,m,x,n]);return p==null?null:w.createElement(Ha.Provider,{value:d},w.createElement(ex.Provider,{children:r,value:p}))}function yP(t){let{children:e,location:r}=t;return nP(l1(e),r)}new Promise(()=>{});function l1(t,e){e===void 0&&(e=[]);let r=[];return w.Children.forEach(t,(s,n)=>{if(!w.isValidElement(s))return;let i=[...e,n];if(s.type===w.Fragment){r.push.apply(r,l1(s.props.children,i));return}s.type!==Rt&&Yt(!1),!s.props.index||!s.props.children||Yt(!1);let a={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=l1(s.props.children,i)),r.push(a)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function c1(){return c1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},c1.apply(this,arguments)}function bP(t,e){if(t==null)return{};var r={},s=Object.keys(t),n,i;for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&(r[n]=t[n]);return r}function wP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function kP(t,e){return t.button===0&&(!e||e==="_self")&&!wP(t)}const _P=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],NP="6";try{window.__reactRouterVersion=NP}catch{}const jP="startTransition",r2=bc[jP];function EP(t){let{basename:e,children:r,future:s,window:n}=t,i=w.useRef();i.current==null&&(i.current=SF({window:n,v5Compat:!0}));let a=i.current,[l,c]=w.useState({action:a.action,location:a.location}),{v7_startTransition:d}=s||{},u=w.useCallback(h=>{d&&r2?r2(()=>c(h)):c(h)},[c,d]);return w.useLayoutEffect(()=>a.listen(u),[a,u]),w.useEffect(()=>gP(s),[s]),w.createElement(vP,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:a,future:s})}const SP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",CP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ma=w.forwardRef(function(e,r){let{onClick:s,relative:n,reloadDocument:i,replace:a,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=e,f=bP(e,_P),{basename:m}=w.useContext(Ha),x,p=!1;if(typeof d=="string"&&CP.test(d)&&(x=d,SP))try{let y=new URL(window.location.href),k=d.startsWith("//")?new URL(y.protocol+d):new URL(d),N=hy(k.pathname,m);k.origin===y.origin&&N!=null?d=N+k.search+k.hash:p=!0}catch{}let g=JF(d,{relative:n}),v=TP(d,{replace:a,state:l,target:c,preventScrollReset:u,relative:n,viewTransition:h});function b(y){s&&s(y),y.defaultPrevented||v(y)}return w.createElement("a",c1({},f,{href:x||g,onClick:p||i?s:b,ref:r,target:c}))});var s2;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(s2||(s2={}));var n2;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(n2||(n2={}));function TP(t,e){let{target:r,replace:s,state:n,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,c=ol(),d=al(),u=nE(t,{relative:a});return w.useCallback(h=>{if(kP(h,r)){h.preventDefault();let f=s!==void 0?s:Kf(d)===Kf(u);c(t,{replace:f,state:n,preventScrollReset:i,relative:a,viewTransition:l})}},[d,c,u,s,n,r,t,i,a,l])}var Vc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},AP={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},ra,gv,S4,FP=(S4=class{constructor(){Re(this,ra,AP);Re(this,gv,!1)}setTimeoutProvider(t){Te(this,ra,t)}setTimeout(t,e){return G(this,ra).setTimeout(t,e)}clearTimeout(t){G(this,ra).clearTimeout(t)}setInterval(t,e){return G(this,ra).setInterval(t,e)}clearInterval(t){G(this,ra).clearInterval(t)}},ra=new WeakMap,gv=new WeakMap,S4),fo=new FP;function PP(t){setTimeout(t,0)}var Wo=typeof window>"u"||"Deno"in globalThis;function Xr(){}function MP(t,e){return typeof t=="function"?t(e):t}function d1(t){return typeof t=="number"&&t>=0&&t!==1/0}function lE(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Pa(t,e){return typeof t=="function"?t(e):t}function zs(t,e){return typeof t=="function"?t(e):t}function i2(t,e){const{type:r="all",exact:s,fetchStatus:n,predicate:i,queryKey:a,stale:l}=t;if(a){if(s){if(e.queryHash!==py(a,e.options))return!1}else if(!Lu(e.queryKey,a))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||n&&n!==e.state.fetchStatus||i&&!i(e))}function a2(t,e){const{exact:r,status:s,predicate:n,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(r){if(Ho(e.options.mutationKey)!==Ho(i))return!1}else if(!Lu(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||n&&!n(e))}function py(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ho)(t)}function Ho(t){return JSON.stringify(t,(e,r)=>u1(r)?Object.keys(r).sort().reduce((s,n)=>(s[n]=r[n],s),{}):r)}function Lu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>Lu(t[r],e[r])):!1}var RP=Object.prototype.hasOwnProperty;function cE(t,e){if(t===e)return t;const r=o2(t)&&o2(e);if(!r&&!(u1(t)&&u1(e)))return e;const n=(r?t:Object.keys(t)).length,i=r?e:Object.keys(e),a=i.length,l=r?new Array(a):{};let c=0;for(let d=0;d<a;d++){const u=r?d:i[d],h=t[u],f=e[u];if(h===f){l[u]=h,(r?d<n:RP.call(t,u))&&c++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){l[u]=f;continue}const m=cE(h,f);l[u]=m,m===h&&c++}return n===a&&c===n?t:l}function Qf(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function o2(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function u1(t){if(!l2(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!l2(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function l2(t){return Object.prototype.toString.call(t)==="[object Object]"}function DP(t){return new Promise(e=>{fo.setTimeout(e,t)})}function h1(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?cE(t,e):e}function OP(t,e,r=0){const s=[...t,e];return r&&s.length>r?s.slice(1):s}function LP(t,e,r=0){const s=[e,...t];return r&&s.length>r?s.slice(0,-1):s}var gy=Symbol();function dE(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===gy?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function uE(t,e){return typeof t=="function"?t(...e):!!t}var yo,sa,oc,C4,IP=(C4=class extends Vc{constructor(){super();Re(this,yo,void 0);Re(this,sa,void 0);Re(this,oc,void 0);Te(this,oc,e=>{if(!Wo&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){G(this,sa)||this.setEventListener(G(this,oc))}onUnsubscribe(){var e;this.hasListeners()||((e=G(this,sa))==null||e.call(this),Te(this,sa,void 0))}setEventListener(e){var r;Te(this,oc,e),(r=G(this,sa))==null||r.call(this),Te(this,sa,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){G(this,yo)!==e&&(Te(this,yo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof G(this,yo)=="boolean"?G(this,yo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},yo=new WeakMap,sa=new WeakMap,oc=new WeakMap,C4),vy=new IP;function f1(){let t,e;const r=new Promise((n,i)=>{t=n,e=i});r.status="pending",r.catch(()=>{});function s(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{s({status:"fulfilled",value:n}),t(n)},r.reject=n=>{s({status:"rejected",reason:n}),e(n)},r}var BP=PP;function $P(){let t=[],e=0,r=l=>{l()},s=l=>{l()},n=BP;const i=l=>{e?t.push(l):n(()=>{r(l)})},a=()=>{const l=t;t=[],l.length&&n(()=>{s(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{n=l}}}var nr=$P(),lc,na,cc,T4,zP=(T4=class extends Vc{constructor(){super();Re(this,lc,!0);Re(this,na,void 0);Re(this,cc,void 0);Te(this,cc,e=>{if(!Wo&&window.addEventListener){const r=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){G(this,na)||this.setEventListener(G(this,cc))}onUnsubscribe(){var e;this.hasListeners()||((e=G(this,na))==null||e.call(this),Te(this,na,void 0))}setEventListener(e){var r;Te(this,cc,e),(r=G(this,na))==null||r.call(this),Te(this,na,e(this.setOnline.bind(this)))}setOnline(e){G(this,lc)!==e&&(Te(this,lc,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return G(this,lc)}},lc=new WeakMap,na=new WeakMap,cc=new WeakMap,T4),Zf=new zP;function UP(t){return Math.min(1e3*2**t,3e4)}function hE(t){return(t??"online")==="online"?Zf.isOnline():!0}var m1=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function fE(t){let e=!1,r=0,s;const n=f1(),i=()=>n.status!=="pending",a=p=>{var g;if(!i()){const v=new m1(p);f(v),(g=t.onCancel)==null||g.call(t,v)}},l=()=>{e=!0},c=()=>{e=!1},d=()=>vy.isFocused()&&(t.networkMode==="always"||Zf.isOnline())&&t.canRun(),u=()=>hE(t.networkMode)&&t.canRun(),h=p=>{i()||(s==null||s(),n.resolve(p))},f=p=>{i()||(s==null||s(),n.reject(p))},m=()=>new Promise(p=>{var g;s=v=>{(i()||d())&&p(v)},(g=t.onPause)==null||g.call(t)}).then(()=>{var p;s=void 0,i()||(p=t.onContinue)==null||p.call(t)}),x=()=>{if(i())return;let p;const g=r===0?t.initialPromise:void 0;try{p=g??t.fn()}catch(v){p=Promise.reject(v)}Promise.resolve(p).then(h).catch(v=>{var E;if(i())return;const b=t.retry??(Wo?0:3),y=t.retryDelay??UP,k=typeof y=="function"?y(r,v):y,N=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,v);if(e||!N){f(v);return}r++,(E=t.onFail)==null||E.call(t,r,v),DP(k).then(()=>d()?void 0:m()).then(()=>{e?f(v):x()})})};return{promise:n,status:()=>n.status,cancel:a,continue:()=>(s==null||s(),n),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?x():m().then(x),n)}}var bo,A4,mE=(A4=class{constructor(){Re(this,bo,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),d1(this.gcTime)&&Te(this,bo,fo.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Wo?1/0:5*60*1e3))}clearGcTimeout(){G(this,bo)&&(fo.clearTimeout(G(this,bo)),Te(this,bo,void 0))}},bo=new WeakMap,A4),wo,dc,$s,ko,fr,lh,_o,dn,ai,F4,VP=(F4=class extends mE{constructor(e){super();Re(this,dn);Re(this,wo,void 0);Re(this,dc,void 0);Re(this,$s,void 0);Re(this,ko,void 0);Re(this,fr,void 0);Re(this,lh,void 0);Re(this,_o,void 0);Te(this,_o,!1),Te(this,lh,e.defaultOptions),this.setOptions(e.options),this.observers=[],Te(this,ko,e.client),Te(this,$s,G(this,ko).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Te(this,wo,c2(this.options)),this.state=e.state??G(this,wo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=G(this,fr))==null?void 0:e.promise}setOptions(e){if(this.options={...G(this,lh),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=c2(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),Te(this,wo,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&G(this,$s).remove(this)}setData(e,r){const s=h1(this.state.data,e,this.options);return Xe(this,dn,ai).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(e,r){Xe(this,dn,ai).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var s,n;const r=(s=G(this,fr))==null?void 0:s.promise;return(n=G(this,fr))==null||n.cancel(e),r?r.then(Xr).catch(Xr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(G(this,wo))}isActive(){return this.observers.some(e=>zs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===gy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Pa(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!lE(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=G(this,fr))==null||r.continue()}onOnline(){var r;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=G(this,fr))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),G(this,$s).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(G(this,fr)&&(G(this,_o)?G(this,fr).cancel({revert:!0}):G(this,fr).cancelRetry()),this.scheduleGc()),G(this,$s).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Xe(this,dn,ai).call(this,{type:"invalidate"})}async fetch(e,r){var c,d,u,h,f,m,x,p,g,v,b,y;if(this.state.fetchStatus!=="idle"&&((c=G(this,fr))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(G(this,fr))return G(this,fr).continueRetry(),G(this,fr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const k=this.observers.find(N=>N.options.queryFn);k&&this.setOptions(k.options)}const s=new AbortController,n=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(Te(this,_o,!0),s.signal)})},i=()=>{const k=dE(this.options,r),E=(()=>{const j={client:G(this,ko),queryKey:this.queryKey,meta:this.meta};return n(j),j})();return Te(this,_o,!1),this.options.persister?this.options.persister(k,E,this):k(E)},l=(()=>{const k={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:G(this,ko),state:this.state,fetchFn:i};return n(k),k})();(d=this.options.behavior)==null||d.onFetch(l,this),Te(this,dc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&Xe(this,dn,ai).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),Te(this,fr,fE({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:k=>{k instanceof m1&&k.revert&&this.setState({...G(this,dc),fetchStatus:"idle"}),s.abort()},onFail:(k,N)=>{Xe(this,dn,ai).call(this,{type:"failed",failureCount:k,error:N})},onPause:()=>{Xe(this,dn,ai).call(this,{type:"pause"})},onContinue:()=>{Xe(this,dn,ai).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const k=await G(this,fr).start();if(k===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(k),(m=(f=G(this,$s).config).onSuccess)==null||m.call(f,k,this),(p=(x=G(this,$s).config).onSettled)==null||p.call(x,k,this.state.error,this),k}catch(k){if(k instanceof m1){if(k.silent)return G(this,fr).promise;if(k.revert){if(this.state.data===void 0)throw k;return this.state.data}}throw Xe(this,dn,ai).call(this,{type:"error",error:k}),(v=(g=G(this,$s).config).onError)==null||v.call(g,k,this),(y=(b=G(this,$s).config).onSettled)==null||y.call(b,this.state.data,k,this),k}finally{this.scheduleGc()}}},wo=new WeakMap,dc=new WeakMap,$s=new WeakMap,ko=new WeakMap,fr=new WeakMap,lh=new WeakMap,_o=new WeakMap,dn=new WeakSet,ai=function(e){const r=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...xE(s.data,this.options),fetchMeta:e.meta??null};case"success":const n={...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Te(this,dc,e.manual?n:void 0),n;case"error":const i=e.error;return{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=r(this.state),nr.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),G(this,$s).notify({query:this,type:"updated",action:e})})},F4);function xE(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:hE(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function c2(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,s=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var cs,et,ch,qr,No,uc,hi,ia,dh,hc,fc,jo,Eo,aa,mc,So,Ad,uh,x1,hh,p1,fh,g1,mh,v1,xh,y1,ph,b1,gh,w1,Lm,pE,P4,WP=(P4=class extends Vc{constructor(e,r){super();Re(this,So);Re(this,uh);Re(this,hh);Re(this,fh);Re(this,mh);Re(this,xh);Re(this,ph);Re(this,gh);Re(this,Lm);Re(this,cs,void 0);Re(this,et,void 0);Re(this,ch,void 0);Re(this,qr,void 0);Re(this,No,void 0);Re(this,uc,void 0);Re(this,hi,void 0);Re(this,ia,void 0);Re(this,dh,void 0);Re(this,hc,void 0);Re(this,fc,void 0);Re(this,jo,void 0);Re(this,Eo,void 0);Re(this,aa,void 0);Re(this,mc,new Set);this.options=r,Te(this,cs,e),Te(this,ia,null),Te(this,hi,f1()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(G(this,et).addObserver(this),d2(G(this,et),this.options)?Xe(this,So,Ad).call(this):this.updateResult(),Xe(this,mh,v1).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return k1(G(this,et),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return k1(G(this,et),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Xe(this,xh,y1).call(this),Xe(this,ph,b1).call(this),G(this,et).removeObserver(this)}setOptions(e){const r=this.options,s=G(this,et);if(this.options=G(this,cs).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof zs(this.options.enabled,G(this,et))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Xe(this,gh,w1).call(this),G(this,et).setOptions(this.options),r._defaulted&&!Qf(this.options,r)&&G(this,cs).getQueryCache().notify({type:"observerOptionsUpdated",query:G(this,et),observer:this});const n=this.hasListeners();n&&u2(G(this,et),s,this.options,r)&&Xe(this,So,Ad).call(this),this.updateResult(),n&&(G(this,et)!==s||zs(this.options.enabled,G(this,et))!==zs(r.enabled,G(this,et))||Pa(this.options.staleTime,G(this,et))!==Pa(r.staleTime,G(this,et)))&&Xe(this,uh,x1).call(this);const i=Xe(this,hh,p1).call(this);n&&(G(this,et)!==s||zs(this.options.enabled,G(this,et))!==zs(r.enabled,G(this,et))||i!==G(this,aa))&&Xe(this,fh,g1).call(this,i)}getOptimisticResult(e){const r=G(this,cs).getQueryCache().build(G(this,cs),e),s=this.createResult(r,e);return YP(this,s)&&(Te(this,qr,s),Te(this,uc,this.options),Te(this,No,G(this,et).state)),s}getCurrentResult(){return G(this,qr)}trackResult(e,r){return new Proxy(e,{get:(s,n)=>(this.trackProp(n),r==null||r(n),n==="promise"&&!this.options.experimental_prefetchInRender&&G(this,hi).status==="pending"&&G(this,hi).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(s,n))})}trackProp(e){G(this,mc).add(e)}getCurrentQuery(){return G(this,et)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=G(this,cs).defaultQueryOptions(e),s=G(this,cs).getQueryCache().build(G(this,cs),r);return s.fetch().then(()=>this.createResult(s,r))}fetch(e){return Xe(this,So,Ad).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),G(this,qr)))}createResult(e,r){var S;const s=G(this,et),n=this.options,i=G(this,qr),a=G(this,No),l=G(this,uc),d=e!==s?e.state:G(this,ch),{state:u}=e;let h={...u},f=!1,m;if(r._optimisticResults){const C=this.hasListeners(),F=!C&&d2(e,r),P=C&&u2(e,s,r,n);(F||P)&&(h={...h,...xE(u.data,e.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:x,errorUpdatedAt:p,status:g}=h;m=h.data;let v=!1;if(r.placeholderData!==void 0&&m===void 0&&g==="pending"){let C;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(C=i.data,v=!0):C=typeof r.placeholderData=="function"?r.placeholderData((S=G(this,fc))==null?void 0:S.state.data,G(this,fc)):r.placeholderData,C!==void 0&&(g="success",m=h1(i==null?void 0:i.data,C,r),f=!0)}if(r.select&&m!==void 0&&!v)if(i&&m===(a==null?void 0:a.data)&&r.select===G(this,dh))m=G(this,hc);else try{Te(this,dh,r.select),m=r.select(m),m=h1(i==null?void 0:i.data,m,r),Te(this,hc,m),Te(this,ia,null)}catch(C){Te(this,ia,C)}G(this,ia)&&(x=G(this,ia),m=G(this,hc),p=Date.now(),g="error");const b=h.fetchStatus==="fetching",y=g==="pending",k=g==="error",N=y&&b,E=m!==void 0,_={status:g,fetchStatus:h.fetchStatus,isPending:y,isSuccess:g==="success",isError:k,isInitialLoading:N,isLoading:N,data:m,dataUpdatedAt:h.dataUpdatedAt,error:x,errorUpdatedAt:p,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:b,isRefetching:b&&!y,isLoadingError:k&&!E,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:k&&E,isStale:yy(e,r),refetch:this.refetch,promise:G(this,hi),isEnabled:zs(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const C=B=>{_.status==="error"?B.reject(_.error):_.data!==void 0&&B.resolve(_.data)},F=()=>{const B=Te(this,hi,_.promise=f1());C(B)},P=G(this,hi);switch(P.status){case"pending":e.queryHash===s.queryHash&&C(P);break;case"fulfilled":(_.status==="error"||_.data!==P.value)&&F();break;case"rejected":(_.status!=="error"||_.error!==P.reason)&&F();break}}return _}updateResult(){const e=G(this,qr),r=this.createResult(G(this,et),this.options);if(Te(this,No,G(this,et).state),Te(this,uc,this.options),G(this,No).data!==void 0&&Te(this,fc,G(this,et)),Qf(r,e))return;Te(this,qr,r);const s=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!G(this,mc).size)return!0;const a=new Set(i??G(this,mc));return this.options.throwOnError&&a.add("error"),Object.keys(G(this,qr)).some(l=>{const c=l;return G(this,qr)[c]!==e[c]&&a.has(c)})};Xe(this,Lm,pE).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Xe(this,mh,v1).call(this)}},cs=new WeakMap,et=new WeakMap,ch=new WeakMap,qr=new WeakMap,No=new WeakMap,uc=new WeakMap,hi=new WeakMap,ia=new WeakMap,dh=new WeakMap,hc=new WeakMap,fc=new WeakMap,jo=new WeakMap,Eo=new WeakMap,aa=new WeakMap,mc=new WeakMap,So=new WeakSet,Ad=function(e){Xe(this,gh,w1).call(this);let r=G(this,et).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(Xr)),r},uh=new WeakSet,x1=function(){Xe(this,xh,y1).call(this);const e=Pa(this.options.staleTime,G(this,et));if(Wo||G(this,qr).isStale||!d1(e))return;const s=lE(G(this,qr).dataUpdatedAt,e)+1;Te(this,jo,fo.setTimeout(()=>{G(this,qr).isStale||this.updateResult()},s))},hh=new WeakSet,p1=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(G(this,et)):this.options.refetchInterval)??!1},fh=new WeakSet,g1=function(e){Xe(this,ph,b1).call(this),Te(this,aa,e),!(Wo||zs(this.options.enabled,G(this,et))===!1||!d1(G(this,aa))||G(this,aa)===0)&&Te(this,Eo,fo.setInterval(()=>{(this.options.refetchIntervalInBackground||vy.isFocused())&&Xe(this,So,Ad).call(this)},G(this,aa)))},mh=new WeakSet,v1=function(){Xe(this,uh,x1).call(this),Xe(this,fh,g1).call(this,Xe(this,hh,p1).call(this))},xh=new WeakSet,y1=function(){G(this,jo)&&(fo.clearTimeout(G(this,jo)),Te(this,jo,void 0))},ph=new WeakSet,b1=function(){G(this,Eo)&&(fo.clearInterval(G(this,Eo)),Te(this,Eo,void 0))},gh=new WeakSet,w1=function(){const e=G(this,cs).getQueryCache().build(G(this,cs),this.options);if(e===G(this,et))return;const r=G(this,et);Te(this,et,e),Te(this,ch,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},Lm=new WeakSet,pE=function(e){nr.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(G(this,qr))}),G(this,cs).getQueryCache().notify({query:G(this,et),type:"observerResultsUpdated"})})},P4);function HP(t,e){return zs(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function d2(t,e){return HP(t,e)||t.state.data!==void 0&&k1(t,e,e.refetchOnMount)}function k1(t,e,r){if(zs(e.enabled,t)!==!1&&Pa(e.staleTime,t)!=="static"){const s=typeof r=="function"?r(t):r;return s==="always"||s!==!1&&yy(t,e)}return!1}function u2(t,e,r,s){return(t!==e||zs(s.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&yy(t,r)}function yy(t,e){return zs(e.enabled,t)!==!1&&t.isStaleByTime(Pa(e.staleTime,t))}function YP(t,e){return!Qf(t.getCurrentResult(),e)}function h2(t){return{onFetch:(e,r)=>{var u,h,f,m,x;const s=e.options,n=(f=(h=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],a=((x=e.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let p=!1;const g=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},v=dE(e.options,e.fetchOptions),b=async(y,k,N)=>{if(p)return Promise.reject();if(k==null&&y.pages.length)return Promise.resolve(y);const j=(()=>{const F={client:e.client,queryKey:e.queryKey,pageParam:k,direction:N?"backward":"forward",meta:e.options.meta};return g(F),F})(),_=await v(j),{maxPages:S}=e.options,C=N?LP:OP;return{pages:C(y.pages,_,S),pageParams:C(y.pageParams,k,S)}};if(n&&i.length){const y=n==="backward",k=y?qP:f2,N={pages:i,pageParams:a},E=k(s,N);l=await b(N,E,y)}else{const y=t??i.length;do{const k=c===0?a[0]??s.initialPageParam:f2(s,l);if(c>0&&k==null)break;l=await b(l,k),c++}while(c<y)}return l};e.options.persister?e.fetchFn=()=>{var p,g;return(g=(p=e.options).persister)==null?void 0:g.call(p,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=d}}}function f2(t,{pages:e,pageParams:r}){const s=e.length-1;return e.length>0?t.getNextPageParam(e[s],e,r[s],r):void 0}function qP(t,{pages:e,pageParams:r}){var s;return e.length>0?(s=t.getPreviousPageParam)==null?void 0:s.call(t,e[0],e,r[0],r):void 0}var vh,In,Gr,Co,Bn,Yi,M4,GP=(M4=class extends mE{constructor(e){super();Re(this,Bn);Re(this,vh,void 0);Re(this,In,void 0);Re(this,Gr,void 0);Re(this,Co,void 0);Te(this,vh,e.client),this.mutationId=e.mutationId,Te(this,Gr,e.mutationCache),Te(this,In,[]),this.state=e.state||gE(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){G(this,In).includes(e)||(G(this,In).push(e),this.clearGcTimeout(),G(this,Gr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Te(this,In,G(this,In).filter(r=>r!==e)),this.scheduleGc(),G(this,Gr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){G(this,In).length||(this.state.status==="pending"?this.scheduleGc():G(this,Gr).remove(this))}continue(){var e;return((e=G(this,Co))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,l,c,d,u,h,f,m,x,p,g,v,b,y,k,N,E,j,_,S;const r=()=>{Xe(this,Bn,Yi).call(this,{type:"continue"})},s={client:G(this,vh),meta:this.options.meta,mutationKey:this.options.mutationKey};Te(this,Co,fE({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(new Error("No mutationFn found")),onFail:(C,F)=>{Xe(this,Bn,Yi).call(this,{type:"failed",failureCount:C,error:F})},onPause:()=>{Xe(this,Bn,Yi).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>G(this,Gr).canRun(this)}));const n=this.state.status==="pending",i=!G(this,Co).canStart();try{if(n)r();else{Xe(this,Bn,Yi).call(this,{type:"pending",variables:e,isPaused:i}),await((l=(a=G(this,Gr).config).onMutate)==null?void 0:l.call(a,e,this,s));const F=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,e,s));F!==this.state.context&&Xe(this,Bn,Yi).call(this,{type:"pending",context:F,variables:e,isPaused:i})}const C=await G(this,Co).start();return await((h=(u=G(this,Gr).config).onSuccess)==null?void 0:h.call(u,C,e,this.state.context,this,s)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,C,e,this.state.context,s)),await((p=(x=G(this,Gr).config).onSettled)==null?void 0:p.call(x,C,null,this.state.variables,this.state.context,this,s)),await((v=(g=this.options).onSettled)==null?void 0:v.call(g,C,null,e,this.state.context,s)),Xe(this,Bn,Yi).call(this,{type:"success",data:C}),C}catch(C){try{throw await((y=(b=G(this,Gr).config).onError)==null?void 0:y.call(b,C,e,this.state.context,this,s)),await((N=(k=this.options).onError)==null?void 0:N.call(k,C,e,this.state.context,s)),await((j=(E=G(this,Gr).config).onSettled)==null?void 0:j.call(E,void 0,C,this.state.variables,this.state.context,this,s)),await((S=(_=this.options).onSettled)==null?void 0:S.call(_,void 0,C,e,this.state.context,s)),C}finally{Xe(this,Bn,Yi).call(this,{type:"error",error:C})}}finally{G(this,Gr).runNext(this)}}},vh=new WeakMap,In=new WeakMap,Gr=new WeakMap,Co=new WeakMap,Bn=new WeakSet,Yi=function(e){const r=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),nr.batch(()=>{G(this,In).forEach(s=>{s.onMutationUpdate(e)}),G(this,Gr).notify({mutation:this,type:"updated",action:e})})},M4);function gE(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var fi,un,yh,R4,KP=(R4=class extends Vc{constructor(e={}){super();Re(this,fi,void 0);Re(this,un,void 0);Re(this,yh,void 0);this.config=e,Te(this,fi,new Set),Te(this,un,new Map),Te(this,yh,0)}build(e,r,s){const n=new GP({client:e,mutationCache:this,mutationId:++qh(this,yh)._,options:e.defaultMutationOptions(r),state:s});return this.add(n),n}add(e){G(this,fi).add(e);const r=h0(e);if(typeof r=="string"){const s=G(this,un).get(r);s?s.push(e):G(this,un).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(G(this,fi).delete(e)){const r=h0(e);if(typeof r=="string"){const s=G(this,un).get(r);if(s)if(s.length>1){const n=s.indexOf(e);n!==-1&&s.splice(n,1)}else s[0]===e&&G(this,un).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=h0(e);if(typeof r=="string"){const s=G(this,un).get(r),n=s==null?void 0:s.find(i=>i.state.status==="pending");return!n||n===e}else return!0}runNext(e){var s;const r=h0(e);if(typeof r=="string"){const n=(s=G(this,un).get(r))==null?void 0:s.find(i=>i!==e&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){nr.batch(()=>{G(this,fi).forEach(e=>{this.notify({type:"removed",mutation:e})}),G(this,fi).clear(),G(this,un).clear()})}getAll(){return Array.from(G(this,fi))}find(e){const r={exact:!0,...e};return this.getAll().find(s=>a2(r,s))}findAll(e={}){return this.getAll().filter(r=>a2(e,r))}notify(e){nr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return nr.batch(()=>Promise.all(e.map(r=>r.continue().catch(Xr))))}},fi=new WeakMap,un=new WeakMap,yh=new WeakMap,R4);function h0(t){var e;return(e=t.options.scope)==null?void 0:e.id}var mi,oa,ds,xi,xc,df,bh,_1,D4,XP=(D4=class extends Vc{constructor(r,s){super();Re(this,xc);Re(this,bh);Re(this,mi,void 0);Re(this,oa,void 0);Re(this,ds,void 0);Re(this,xi,void 0);Te(this,mi,r),this.setOptions(s),this.bindMethods(),Xe(this,xc,df).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var n;const s=this.options;this.options=G(this,mi).defaultMutationOptions(r),Qf(this.options,s)||G(this,mi).getMutationCache().notify({type:"observerOptionsUpdated",mutation:G(this,ds),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Ho(s.mutationKey)!==Ho(this.options.mutationKey)?this.reset():((n=G(this,ds))==null?void 0:n.state.status)==="pending"&&G(this,ds).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=G(this,ds))==null||r.removeObserver(this)}onMutationUpdate(r){Xe(this,xc,df).call(this),Xe(this,bh,_1).call(this,r)}getCurrentResult(){return G(this,oa)}reset(){var r;(r=G(this,ds))==null||r.removeObserver(this),Te(this,ds,void 0),Xe(this,xc,df).call(this),Xe(this,bh,_1).call(this)}mutate(r,s){var n;return Te(this,xi,s),(n=G(this,ds))==null||n.removeObserver(this),Te(this,ds,G(this,mi).getMutationCache().build(G(this,mi),this.options)),G(this,ds).addObserver(this),G(this,ds).execute(r)}},mi=new WeakMap,oa=new WeakMap,ds=new WeakMap,xi=new WeakMap,xc=new WeakSet,df=function(){var s;const r=((s=G(this,ds))==null?void 0:s.state)??gE();Te(this,oa,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},bh=new WeakSet,_1=function(r){nr.batch(()=>{var s,n,i,a,l,c,d,u;if(G(this,xi)&&this.hasListeners()){const h=G(this,oa).variables,f=G(this,oa).context,m={client:G(this,mi),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((n=(s=G(this,xi)).onSuccess)==null||n.call(s,r.data,h,f,m),(a=(i=G(this,xi)).onSettled)==null||a.call(i,r.data,null,h,f,m)):(r==null?void 0:r.type)==="error"&&((c=(l=G(this,xi)).onError)==null||c.call(l,r.error,h,f,m),(u=(d=G(this,xi)).onSettled)==null||u.call(d,void 0,r.error,h,f,m))}this.listeners.forEach(h=>{h(G(this,oa))})})},D4),$n,O4,QP=(O4=class extends Vc{constructor(e={}){super();Re(this,$n,void 0);this.config=e,Te(this,$n,new Map)}build(e,r,s){const n=r.queryKey,i=r.queryHash??py(n,r);let a=this.get(i);return a||(a=new VP({client:e,queryKey:n,queryHash:i,options:e.defaultQueryOptions(r),state:s,defaultOptions:e.getQueryDefaults(n)}),this.add(a)),a}add(e){G(this,$n).has(e.queryHash)||(G(this,$n).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=G(this,$n).get(e.queryHash);r&&(e.destroy(),r===e&&G(this,$n).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){nr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return G(this,$n).get(e)}getAll(){return[...G(this,$n).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(s=>i2(r,s))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(s=>i2(e,s)):r}notify(e){nr.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){nr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){nr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},$n=new WeakMap,O4),Dt,la,ca,pc,gc,da,vc,yc,L4,ZP=(L4=class{constructor(t={}){Re(this,Dt,void 0);Re(this,la,void 0);Re(this,ca,void 0);Re(this,pc,void 0);Re(this,gc,void 0);Re(this,da,void 0);Re(this,vc,void 0);Re(this,yc,void 0);Te(this,Dt,t.queryCache||new QP),Te(this,la,t.mutationCache||new KP),Te(this,ca,t.defaultOptions||{}),Te(this,pc,new Map),Te(this,gc,new Map),Te(this,da,0)}mount(){qh(this,da)._++,G(this,da)===1&&(Te(this,vc,vy.subscribe(async t=>{t&&(await this.resumePausedMutations(),G(this,Dt).onFocus())})),Te(this,yc,Zf.subscribe(async t=>{t&&(await this.resumePausedMutations(),G(this,Dt).onOnline())})))}unmount(){var t,e;qh(this,da)._--,G(this,da)===0&&((t=G(this,vc))==null||t.call(this),Te(this,vc,void 0),(e=G(this,yc))==null||e.call(this),Te(this,yc,void 0))}isFetching(t){return G(this,Dt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return G(this,la).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=G(this,Dt).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=G(this,Dt).build(this,e),s=r.state.data;return s===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(Pa(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(t){return G(this,Dt).findAll(t).map(({queryKey:e,state:r})=>{const s=r.data;return[e,s]})}setQueryData(t,e,r){const s=this.defaultQueryOptions({queryKey:t}),n=G(this,Dt).get(s.queryHash),i=n==null?void 0:n.state.data,a=MP(e,i);if(a!==void 0)return G(this,Dt).build(this,s).setData(a,{...r,manual:!0})}setQueriesData(t,e,r){return nr.batch(()=>G(this,Dt).findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=G(this,Dt).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=G(this,Dt);nr.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=G(this,Dt);return nr.batch(()=>(r.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},s=nr.batch(()=>G(this,Dt).findAll(t).map(n=>n.cancel(r)));return Promise.all(s).then(Xr).catch(Xr)}invalidateQueries(t,e={}){return nr.batch(()=>(G(this,Dt).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},s=nr.batch(()=>G(this,Dt).findAll(t).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,r);return r.throwOnError||(i=i.catch(Xr)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(Xr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=G(this,Dt).build(this,e);return r.isStaleByTime(Pa(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Xr).catch(Xr)}fetchInfiniteQuery(t){return t.behavior=h2(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Xr).catch(Xr)}ensureInfiniteQueryData(t){return t.behavior=h2(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Zf.isOnline()?G(this,la).resumePausedMutations():Promise.resolve()}getQueryCache(){return G(this,Dt)}getMutationCache(){return G(this,la)}getDefaultOptions(){return G(this,ca)}setDefaultOptions(t){Te(this,ca,t)}setQueryDefaults(t,e){G(this,pc).set(Ho(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...G(this,pc).values()],r={};return e.forEach(s=>{Lu(t,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(t,e){G(this,gc).set(Ho(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...G(this,gc).values()],r={};return e.forEach(s=>{Lu(t,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...G(this,ca).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=py(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===gy&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...G(this,ca).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){G(this,Dt).clear(),G(this,la).clear()}},Dt=new WeakMap,la=new WeakMap,ca=new WeakMap,pc=new WeakMap,gc=new WeakMap,da=new WeakMap,vc=new WeakMap,yc=new WeakMap,L4),vE=w.createContext(void 0),os=t=>{const e=w.useContext(vE);if(t)return t;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},JP=({client:t,children:e})=>(w.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx(vE.Provider,{value:t,children:e})),yE=w.createContext(!1),eM=()=>w.useContext(yE);yE.Provider;function tM(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var rM=w.createContext(tM()),sM=()=>w.useContext(rM),nM=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},iM=t=>{w.useEffect(()=>{t.clearReset()},[t])},aM=({result:t,errorResetBoundary:e,throwOnError:r,query:s,suspense:n})=>t.isError&&!e.isReset()&&!t.isFetching&&s&&(n&&t.data===void 0||uE(r,[t.error,s])),oM=t=>{if(t.suspense){const r=n=>n==="static"?n:Math.max(n??1e3,1e3),s=t.staleTime;t.staleTime=typeof s=="function"?(...n)=>r(s(...n)):r(s),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},lM=(t,e)=>t.isLoading&&t.isFetching&&!e,cM=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,m2=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function dM(t,e,r){var h,f,m,x,p;const s=eM(),n=sM(),i=os(r),a=i.defaultQueryOptions(t);(f=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,a),a._optimisticResults=s?"isRestoring":"optimistic",oM(a),nM(a,n),iM(n);const l=!i.getQueryCache().get(a.queryHash),[c]=w.useState(()=>new e(i,a)),d=c.getOptimisticResult(a),u=!s&&t.subscribed!==!1;if(w.useSyncExternalStore(w.useCallback(g=>{const v=u?c.subscribe(nr.batchCalls(g)):Xr;return c.updateResult(),v},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),w.useEffect(()=>{c.setOptions(a)},[a,c]),cM(a,d))throw m2(a,c,n);if(aM({result:d,errorResetBoundary:n,throwOnError:a.throwOnError,query:i.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw d.error;if((x=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||x.call(m,a,d),a.experimental_prefetchInRender&&!Wo&&lM(d,s)){const g=l?m2(a,c,n):(p=i.getQueryCache().get(a.queryHash))==null?void 0:p.promise;g==null||g.catch(Xr).finally(()=>{c.updateResult()})}return a.notifyOnChangeProps?d:c.trackResult(d)}function Ke(t,e){return dM(t,WP,e)}function ot(t,e){const r=os(e),[s]=w.useState(()=>new XP(r,t));w.useEffect(()=>{s.setOptions(t)},[s,t]);const n=w.useSyncExternalStore(w.useCallback(a=>s.subscribe(nr.batchCalls(a)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=w.useCallback((a,l)=>{s.mutate(a,l).catch(Xr)},[s]);if(n.error&&uE(s.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:i,mutateAsync:n.mutate}}let uM={data:""},hM=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||uM,fM=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,mM=/\/\*[^]*?\*\/|  +/g,x2=/\n+/g,Qi=(t,e)=>{let r="",s="",n="";for(let i in t){let a=t[i];i[0]=="@"?i[1]=="i"?r=i+" "+a+";":s+=i[1]=="f"?Qi(a,i):i+"{"+Qi(a,i[1]=="k"?"":e)+"}":typeof a=="object"?s+=Qi(a,e?e.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):a!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=Qi.p?Qi.p(i,a):i+":"+a+";")}return r+(e&&n?e+"{"+n+"}":n)+s},ri={},bE=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+bE(t[r]);return e}return t},xM=(t,e,r,s,n)=>{let i=bE(t),a=ri[i]||(ri[i]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(i));if(!ri[a]){let c=i!==t?t:(d=>{let u,h,f=[{}];for(;u=fM.exec(d.replace(mM,""));)u[4]?f.shift():u[3]?(h=u[3].replace(x2," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][u[1]]=u[2].replace(x2," ").trim();return f[0]})(t);ri[a]=Qi(n?{["@keyframes "+a]:c}:c,r?"":"."+a)}let l=r&&ri.g?ri.g:null;return r&&(ri.g=ri[a]),((c,d,u,h)=>{h?d.data=d.data.replace(h,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(ri[a],e,s,l),a},pM=(t,e,r)=>t.reduce((s,n,i)=>{let a=e[i];if(a&&a.call){let l=a(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;a=c?"."+c:l&&typeof l=="object"?l.props?"":Qi(l,""):l===!1?"":l}return s+n+(a??"")},"");function tx(t){let e=this||{},r=t.call?t(e.p):t;return xM(r.unshift?r.raw?pM(r,[].slice.call(arguments,1),e.p):r.reduce((s,n)=>Object.assign(s,n&&n.call?n(e.p):n),{}):r,hM(e.target),e.g,e.o,e.k)}let wE,N1,j1;tx.bind({g:1});let Ri=tx.bind({k:1});function gM(t,e,r,s){Qi.p=e,wE=t,N1=r,j1=s}function Ya(t,e){let r=this||{};return function(){let s=arguments;function n(i,a){let l=Object.assign({},i),c=l.className||n.className;r.p=Object.assign({theme:N1&&N1()},l),r.o=/ *go\d+/.test(c),l.className=tx.apply(r,s)+(c?" "+c:""),e&&(l.ref=a);let d=t;return t[0]&&(d=l.as||t,delete l.as),j1&&d[0]&&j1(l),wE(d,l)}return e?e(n):n}}var vM=t=>typeof t=="function",Jf=(t,e)=>vM(t)?t(e):t,yM=(()=>{let t=0;return()=>(++t).toString()})(),kE=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),bM=20,by="default",_E=(t,e)=>{let{toastLimit:r}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,r)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:s}=e;return _E(t,{type:t.toasts.find(a=>a.id===s.id)?1:0,toast:s});case 3:let{toastId:n}=e;return{...t,toasts:t.toasts.map(a=>a.id===n||n===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},uf=[],NE={toasts:[],pausedAt:void 0,settings:{toastLimit:bM}},Un={},jE=(t,e=by)=>{Un[e]=_E(Un[e]||NE,t),uf.forEach(([r,s])=>{r===e&&s(Un[e])})},EE=t=>Object.keys(Un).forEach(e=>jE(t,e)),wM=t=>Object.keys(Un).find(e=>Un[e].toasts.some(r=>r.id===t)),rx=(t=by)=>e=>{jE(e,t)},kM={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},_M=(t={},e=by)=>{let[r,s]=w.useState(Un[e]||NE),n=w.useRef(Un[e]);w.useEffect(()=>(n.current!==Un[e]&&s(Un[e]),uf.push([e,s]),()=>{let a=uf.findIndex(([l])=>l===e);a>-1&&uf.splice(a,1)}),[e]);let i=r.toasts.map(a=>{var l,c,d;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((l=t[a.type])==null?void 0:l.removeDelay)||(t==null?void 0:t.removeDelay),duration:a.duration||((c=t[a.type])==null?void 0:c.duration)||(t==null?void 0:t.duration)||kM[a.type],style:{...t.style,...(d=t[a.type])==null?void 0:d.style,...a.style}}});return{...r,toasts:i}},NM=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||yM()}),Eh=t=>(e,r)=>{let s=NM(e,t,r);return rx(s.toasterId||wM(s.id))({type:2,toast:s}),s.id},ir=(t,e)=>Eh("blank")(t,e);ir.error=Eh("error");ir.success=Eh("success");ir.loading=Eh("loading");ir.custom=Eh("custom");ir.dismiss=(t,e)=>{let r={type:3,toastId:t};e?rx(e)(r):EE(r)};ir.dismissAll=t=>ir.dismiss(void 0,t);ir.remove=(t,e)=>{let r={type:4,toastId:t};e?rx(e)(r):EE(r)};ir.removeAll=t=>ir.remove(void 0,t);ir.promise=(t,e,r)=>{let s=ir.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(n=>{let i=e.success?Jf(e.success,n):void 0;return i?ir.success(i,{id:s,...r,...r==null?void 0:r.success}):ir.dismiss(s),n}).catch(n=>{let i=e.error?Jf(e.error,n):void 0;i?ir.error(i,{id:s,...r,...r==null?void 0:r.error}):ir.dismiss(s)}),t};var jM=1e3,EM=(t,e="default")=>{let{toasts:r,pausedAt:s}=_M(t,e),n=w.useRef(new Map).current,i=w.useCallback((h,f=jM)=>{if(n.has(h))return;let m=setTimeout(()=>{n.delete(h),a({type:4,toastId:h})},f);n.set(h,m)},[]);w.useEffect(()=>{if(s)return;let h=Date.now(),f=r.map(m=>{if(m.duration===1/0)return;let x=(m.duration||0)+m.pauseDuration-(h-m.createdAt);if(x<0){m.visible&&ir.dismiss(m.id);return}return setTimeout(()=>ir.dismiss(m.id,e),x)});return()=>{f.forEach(m=>m&&clearTimeout(m))}},[r,s,e]);let a=w.useCallback(rx(e),[e]),l=w.useCallback(()=>{a({type:5,time:Date.now()})},[a]),c=w.useCallback((h,f)=>{a({type:1,toast:{id:h,height:f}})},[a]),d=w.useCallback(()=>{s&&a({type:6,time:Date.now()})},[s,a]),u=w.useCallback((h,f)=>{let{reverseOrder:m=!1,gutter:x=8,defaultPosition:p}=f||{},g=r.filter(y=>(y.position||p)===(h.position||p)&&y.height),v=g.findIndex(y=>y.id===h.id),b=g.filter((y,k)=>k<v&&y.visible).length;return g.filter(y=>y.visible).slice(...m?[b+1]:[0,b]).reduce((y,k)=>y+(k.height||0)+x,0)},[r]);return w.useEffect(()=>{r.forEach(h=>{if(h.dismissed)i(h.id,h.removeDelay);else{let f=n.get(h.id);f&&(clearTimeout(f),n.delete(h.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:u}}},SM=Ri`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,CM=Ri`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,TM=Ri`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,AM=Ya("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${SM} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${CM} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${TM} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,FM=Ri`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,PM=Ya("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${FM} 1s linear infinite;
`,MM=Ri`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,RM=Ri`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,DM=Ya("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${MM} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${RM} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,OM=Ya("div")`
  position: absolute;
`,LM=Ya("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,IM=Ri`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,BM=Ya("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${IM} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,$M=({toast:t})=>{let{icon:e,type:r,iconTheme:s}=t;return e!==void 0?typeof e=="string"?w.createElement(BM,null,e):e:r==="blank"?null:w.createElement(LM,null,w.createElement(PM,{...s}),r!=="loading"&&w.createElement(OM,null,r==="error"?w.createElement(AM,{...s}):w.createElement(DM,{...s})))},zM=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,UM=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,VM="0%{opacity:0;} 100%{opacity:1;}",WM="0%{opacity:1;} 100%{opacity:0;}",HM=Ya("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,YM=Ya("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,qM=(t,e)=>{let r=t.includes("top")?1:-1,[s,n]=kE()?[VM,WM]:[zM(r),UM(r)];return{animation:e?`${Ri(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ri(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},GM=w.memo(({toast:t,position:e,style:r,children:s})=>{let n=t.height?qM(t.position||e||"top-center",t.visible):{opacity:0},i=w.createElement($M,{toast:t}),a=w.createElement(YM,{...t.ariaProps},Jf(t.message,t));return w.createElement(HM,{className:t.className,style:{...n,...r,...t.style}},typeof s=="function"?s({icon:i,message:a}):w.createElement(w.Fragment,null,i,a))});gM(w.createElement);var KM=({id:t,className:e,style:r,onHeightUpdate:s,children:n})=>{let i=w.useCallback(a=>{if(a){let l=()=>{let c=a.getBoundingClientRect().height;s(t,c)};l(),new MutationObserver(l).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return w.createElement("div",{ref:i,className:e,style:r},n)},XM=(t,e)=>{let r=t.includes("top"),s=r?{top:0}:{bottom:0},n=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:kE()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...s,...n}},QM=tx`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,f0=16,ZM=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:s,children:n,toasterId:i,containerStyle:a,containerClassName:l})=>{let{toasts:c,handlers:d}=EM(r,i);return w.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:f0,left:f0,right:f0,bottom:f0,pointerEvents:"none",...a},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(u=>{let h=u.position||e,f=d.calculateOffset(u,{reverseOrder:t,gutter:s,defaultPosition:e}),m=XM(h,f);return w.createElement(KM,{id:u.id,key:u.id,onHeightUpdate:d.updateHeight,className:u.visible?QM:"",style:m},u.type==="custom"?Jf(u.message,u):n?n(u):w.createElement(GM,{toast:u,position:h}))}))},me=ir;function SE(t,e){return function(){return t.apply(e,arguments)}}const{toString:JM}=Object.prototype,{getPrototypeOf:wy}=Object,{iterator:sx,toStringTag:CE}=Symbol,nx=(t=>e=>{const r=JM.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Sn=t=>(t=t.toLowerCase(),e=>nx(e)===t),ix=t=>e=>typeof e===t,{isArray:Wc}=Array,Cc=ix("undefined");function Sh(t){return t!==null&&!Cc(t)&&t.constructor!==null&&!Cc(t.constructor)&&ys(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const TE=Sn("ArrayBuffer");function eR(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&TE(t.buffer),e}const tR=ix("string"),ys=ix("function"),AE=ix("number"),Ch=t=>t!==null&&typeof t=="object",rR=t=>t===!0||t===!1,hf=t=>{if(nx(t)!=="object")return!1;const e=wy(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(CE in t)&&!(sx in t)},sR=t=>{if(!Ch(t)||Sh(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},nR=Sn("Date"),iR=Sn("File"),aR=Sn("Blob"),oR=Sn("FileList"),lR=t=>Ch(t)&&ys(t.pipe),cR=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ys(t.append)&&((e=nx(t))==="formdata"||e==="object"&&ys(t.toString)&&t.toString()==="[object FormData]"))},dR=Sn("URLSearchParams"),[uR,hR,fR,mR]=["ReadableStream","Request","Response","Headers"].map(Sn),xR=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Th(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let s,n;if(typeof t!="object"&&(t=[t]),Wc(t))for(s=0,n=t.length;s<n;s++)e.call(null,t[s],s,t);else{if(Sh(t))return;const i=r?Object.getOwnPropertyNames(t):Object.keys(t),a=i.length;let l;for(s=0;s<a;s++)l=i[s],e.call(null,t[l],l,t)}}function FE(t,e){if(Sh(t))return null;e=e.toLowerCase();const r=Object.keys(t);let s=r.length,n;for(;s-- >0;)if(n=r[s],e===n.toLowerCase())return n;return null}const mo=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),PE=t=>!Cc(t)&&t!==mo;function E1(){const{caseless:t,skipUndefined:e}=PE(this)&&this||{},r={},s=(n,i)=>{const a=t&&FE(r,i)||i;hf(r[a])&&hf(n)?r[a]=E1(r[a],n):hf(n)?r[a]=E1({},n):Wc(n)?r[a]=n.slice():(!e||!Cc(n))&&(r[a]=n)};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Th(arguments[n],s);return r}const pR=(t,e,r,{allOwnKeys:s}={})=>(Th(e,(n,i)=>{r&&ys(n)?t[i]=SE(n,r):t[i]=n},{allOwnKeys:s}),t),gR=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),vR=(t,e,r,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},yR=(t,e,r,s)=>{let n,i,a;const l={};if(e=e||{},t==null)return e;do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)a=n[i],(!s||s(a,t,e))&&!l[a]&&(e[a]=t[a],l[a]=!0);t=r!==!1&&wy(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},bR=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const s=t.indexOf(e,r);return s!==-1&&s===r},wR=t=>{if(!t)return null;if(Wc(t))return t;let e=t.length;if(!AE(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},kR=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&wy(Uint8Array)),_R=(t,e)=>{const s=(t&&t[sx]).call(t);let n;for(;(n=s.next())&&!n.done;){const i=n.value;e.call(t,i[0],i[1])}},NR=(t,e)=>{let r;const s=[];for(;(r=t.exec(e))!==null;)s.push(r);return s},jR=Sn("HTMLFormElement"),ER=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,n){return s.toUpperCase()+n}),p2=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),SR=Sn("RegExp"),ME=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),s={};Th(r,(n,i)=>{let a;(a=e(n,i,t))!==!1&&(s[i]=a||n)}),Object.defineProperties(t,s)},CR=t=>{ME(t,(e,r)=>{if(ys(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=t[r];if(ys(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},TR=(t,e)=>{const r={},s=n=>{n.forEach(i=>{r[i]=!0})};return Wc(t)?s(t):s(String(t).split(e)),r},AR=()=>{},FR=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function PR(t){return!!(t&&ys(t.append)&&t[CE]==="FormData"&&t[sx])}const MR=t=>{const e=new Array(10),r=(s,n)=>{if(Ch(s)){if(e.indexOf(s)>=0)return;if(Sh(s))return s;if(!("toJSON"in s)){e[n]=s;const i=Wc(s)?[]:{};return Th(s,(a,l)=>{const c=r(a,n+1);!Cc(c)&&(i[l]=c)}),e[n]=void 0,i}}return s};return r(t,0)},RR=Sn("AsyncFunction"),DR=t=>t&&(Ch(t)||ys(t))&&ys(t.then)&&ys(t.catch),RE=((t,e)=>t?setImmediate:e?((r,s)=>(mo.addEventListener("message",({source:n,data:i})=>{n===mo&&i===r&&s.length&&s.shift()()},!1),n=>{s.push(n),mo.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ys(mo.postMessage)),OR=typeof queueMicrotask<"u"?queueMicrotask.bind(mo):typeof process<"u"&&process.nextTick||RE,LR=t=>t!=null&&ys(t[sx]),ce={isArray:Wc,isArrayBuffer:TE,isBuffer:Sh,isFormData:cR,isArrayBufferView:eR,isString:tR,isNumber:AE,isBoolean:rR,isObject:Ch,isPlainObject:hf,isEmptyObject:sR,isReadableStream:uR,isRequest:hR,isResponse:fR,isHeaders:mR,isUndefined:Cc,isDate:nR,isFile:iR,isBlob:aR,isRegExp:SR,isFunction:ys,isStream:lR,isURLSearchParams:dR,isTypedArray:kR,isFileList:oR,forEach:Th,merge:E1,extend:pR,trim:xR,stripBOM:gR,inherits:vR,toFlatObject:yR,kindOf:nx,kindOfTest:Sn,endsWith:bR,toArray:wR,forEachEntry:_R,matchAll:NR,isHTMLForm:jR,hasOwnProperty:p2,hasOwnProp:p2,reduceDescriptors:ME,freezeMethods:CR,toObjectSet:TR,toCamelCase:ER,noop:AR,toFiniteNumber:FR,findKey:FE,global:mo,isContextDefined:PE,isSpecCompliantForm:PR,toJSONObject:MR,isAsyncFn:RR,isThenable:DR,setImmediate:RE,asap:OR,isIterable:LR};function Ye(t,e,r,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),s&&(this.request=s),n&&(this.response=n,this.status=n.status?n.status:null)}ce.inherits(Ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ce.toJSONObject(this.config),code:this.code,status:this.status}}});const DE=Ye.prototype,OE={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{OE[t]={value:t}});Object.defineProperties(Ye,OE);Object.defineProperty(DE,"isAxiosError",{value:!0});Ye.from=(t,e,r,s,n,i)=>{const a=Object.create(DE);ce.toFlatObject(t,a,function(u){return u!==Error.prototype},d=>d!=="isAxiosError");const l=t&&t.message?t.message:"Error",c=e==null&&t?t.code:e;return Ye.call(a,l,c,r,s,n),t&&a.cause==null&&Object.defineProperty(a,"cause",{value:t,configurable:!0}),a.name=t&&t.name||"Error",i&&Object.assign(a,i),a};const IR=null;function S1(t){return ce.isPlainObject(t)||ce.isArray(t)}function LE(t){return ce.endsWith(t,"[]")?t.slice(0,-2):t}function g2(t,e,r){return t?t.concat(e).map(function(n,i){return n=LE(n),!r&&i?"["+n+"]":n}).join(r?".":""):e}function BR(t){return ce.isArray(t)&&!t.some(S1)}const $R=ce.toFlatObject(ce,{},null,function(e){return/^is[A-Z]/.test(e)});function ax(t,e,r){if(!ce.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=ce.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,g){return!ce.isUndefined(g[p])});const s=r.metaTokens,n=r.visitor||u,i=r.dots,a=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&ce.isSpecCompliantForm(e);if(!ce.isFunction(n))throw new TypeError("visitor must be a function");function d(x){if(x===null)return"";if(ce.isDate(x))return x.toISOString();if(ce.isBoolean(x))return x.toString();if(!c&&ce.isBlob(x))throw new Ye("Blob is not supported. Use a Buffer instead.");return ce.isArrayBuffer(x)||ce.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function u(x,p,g){let v=x;if(x&&!g&&typeof x=="object"){if(ce.endsWith(p,"{}"))p=s?p:p.slice(0,-2),x=JSON.stringify(x);else if(ce.isArray(x)&&BR(x)||(ce.isFileList(x)||ce.endsWith(p,"[]"))&&(v=ce.toArray(x)))return p=LE(p),v.forEach(function(y,k){!(ce.isUndefined(y)||y===null)&&e.append(a===!0?g2([p],k,i):a===null?p:p+"[]",d(y))}),!1}return S1(x)?!0:(e.append(g2(g,p,i),d(x)),!1)}const h=[],f=Object.assign($R,{defaultVisitor:u,convertValue:d,isVisitable:S1});function m(x,p){if(!ce.isUndefined(x)){if(h.indexOf(x)!==-1)throw Error("Circular reference detected in "+p.join("."));h.push(x),ce.forEach(x,function(v,b){(!(ce.isUndefined(v)||v===null)&&n.call(e,v,ce.isString(b)?b.trim():b,p,f))===!0&&m(v,p?p.concat(b):[b])}),h.pop()}}if(!ce.isObject(t))throw new TypeError("data must be an object");return m(t),e}function v2(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function ky(t,e){this._pairs=[],t&&ax(t,this,e)}const IE=ky.prototype;IE.append=function(e,r){this._pairs.push([e,r])};IE.toString=function(e){const r=e?function(s){return e.call(this,s,v2)}:v2;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function zR(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function BE(t,e,r){if(!e)return t;const s=r&&r.encode||zR;ce.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let i;if(n?i=n(e,r):i=ce.isURLSearchParams(e)?e.toString():new ky(e,r).toString(s),i){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class UR{constructor(){this.handlers=[]}use(e,r,s){return this.handlers.push({fulfilled:e,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ce.forEach(this.handlers,function(s){s!==null&&e(s)})}}const y2=UR,$E={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},VR=typeof URLSearchParams<"u"?URLSearchParams:ky,WR=typeof FormData<"u"?FormData:null,HR=typeof Blob<"u"?Blob:null,YR={isBrowser:!0,classes:{URLSearchParams:VR,FormData:WR,Blob:HR},protocols:["http","https","file","blob","url","data"]},_y=typeof window<"u"&&typeof document<"u",C1=typeof navigator=="object"&&navigator||void 0,qR=_y&&(!C1||["ReactNative","NativeScript","NS"].indexOf(C1.product)<0),GR=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),KR=_y&&window.location.href||"http://localhost",XR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:_y,hasStandardBrowserEnv:qR,hasStandardBrowserWebWorkerEnv:GR,navigator:C1,origin:KR},Symbol.toStringTag,{value:"Module"})),Dr={...XR,...YR};function QR(t,e){return ax(t,new Dr.classes.URLSearchParams,{visitor:function(r,s,n,i){return Dr.isNode&&ce.isBuffer(r)?(this.append(s,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function ZR(t){return ce.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function JR(t){const e={},r=Object.keys(t);let s;const n=r.length;let i;for(s=0;s<n;s++)i=r[s],e[i]=t[i];return e}function zE(t){function e(r,s,n,i){let a=r[i++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),c=i>=r.length;return a=!a&&ce.isArray(n)?n.length:a,c?(ce.hasOwnProp(n,a)?n[a]=[n[a],s]:n[a]=s,!l):((!n[a]||!ce.isObject(n[a]))&&(n[a]=[]),e(r,s,n[a],i)&&ce.isArray(n[a])&&(n[a]=JR(n[a])),!l)}if(ce.isFormData(t)&&ce.isFunction(t.entries)){const r={};return ce.forEachEntry(t,(s,n)=>{e(ZR(s),n,r,0)}),r}return null}function e8(t,e,r){if(ce.isString(t))try{return(e||JSON.parse)(t),ce.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(t)}const Ny={transitional:$E,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const s=r.getContentType()||"",n=s.indexOf("application/json")>-1,i=ce.isObject(e);if(i&&ce.isHTMLForm(e)&&(e=new FormData(e)),ce.isFormData(e))return n?JSON.stringify(zE(e)):e;if(ce.isArrayBuffer(e)||ce.isBuffer(e)||ce.isStream(e)||ce.isFile(e)||ce.isBlob(e)||ce.isReadableStream(e))return e;if(ce.isArrayBufferView(e))return e.buffer;if(ce.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return QR(e,this.formSerializer).toString();if((l=ce.isFileList(e))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return ax(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||n?(r.setContentType("application/json",!1),e8(e)):e}],transformResponse:[function(e){const r=this.transitional||Ny.transitional,s=r&&r.forcedJSONParsing,n=this.responseType==="json";if(ce.isResponse(e)||ce.isReadableStream(e))return e;if(e&&ce.isString(e)&&(s&&!this.responseType||n)){const a=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(l){if(a)throw l.name==="SyntaxError"?Ye.from(l,Ye.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Dr.classes.FormData,Blob:Dr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ce.forEach(["delete","get","head","post","put","patch"],t=>{Ny.headers[t]={}});const jy=Ny,t8=ce.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),r8=t=>{const e={};let r,s,n;return t&&t.split(`
`).forEach(function(a){n=a.indexOf(":"),r=a.substring(0,n).trim().toLowerCase(),s=a.substring(n+1).trim(),!(!r||e[r]&&t8[r])&&(r==="set-cookie"?e[r]?e[r].push(s):e[r]=[s]:e[r]=e[r]?e[r]+", "+s:s)}),e},b2=Symbol("internals");function dd(t){return t&&String(t).trim().toLowerCase()}function ff(t){return t===!1||t==null?t:ce.isArray(t)?t.map(ff):String(t)}function s8(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(t);)e[s[1]]=s[2];return e}const n8=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function hp(t,e,r,s,n){if(ce.isFunction(s))return s.call(this,e,r);if(n&&(e=r),!!ce.isString(e)){if(ce.isString(s))return e.indexOf(s)!==-1;if(ce.isRegExp(s))return s.test(e)}}function i8(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,s)=>r.toUpperCase()+s)}function a8(t,e){const r=ce.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+r,{value:function(n,i,a){return this[s].call(this,e,n,i,a)},configurable:!0})})}class ox{constructor(e){e&&this.set(e)}set(e,r,s){const n=this;function i(l,c,d){const u=dd(c);if(!u)throw new Error("header name must be a non-empty string");const h=ce.findKey(n,u);(!h||n[h]===void 0||d===!0||d===void 0&&n[h]!==!1)&&(n[h||c]=ff(l))}const a=(l,c)=>ce.forEach(l,(d,u)=>i(d,u,c));if(ce.isPlainObject(e)||e instanceof this.constructor)a(e,r);else if(ce.isString(e)&&(e=e.trim())&&!n8(e))a(r8(e),r);else if(ce.isObject(e)&&ce.isIterable(e)){let l={},c,d;for(const u of e){if(!ce.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?ce.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}a(l,r)}else e!=null&&i(r,e,s);return this}get(e,r){if(e=dd(e),e){const s=ce.findKey(this,e);if(s){const n=this[s];if(!r)return n;if(r===!0)return s8(n);if(ce.isFunction(r))return r.call(this,n,s);if(ce.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=dd(e),e){const s=ce.findKey(this,e);return!!(s&&this[s]!==void 0&&(!r||hp(this,this[s],s,r)))}return!1}delete(e,r){const s=this;let n=!1;function i(a){if(a=dd(a),a){const l=ce.findKey(s,a);l&&(!r||hp(s,s[l],l,r))&&(delete s[l],n=!0)}}return ce.isArray(e)?e.forEach(i):i(e),n}clear(e){const r=Object.keys(this);let s=r.length,n=!1;for(;s--;){const i=r[s];(!e||hp(this,this[i],i,e,!0))&&(delete this[i],n=!0)}return n}normalize(e){const r=this,s={};return ce.forEach(this,(n,i)=>{const a=ce.findKey(s,i);if(a){r[a]=ff(n),delete r[i];return}const l=e?i8(i):String(i).trim();l!==i&&delete r[i],r[l]=ff(n),s[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return ce.forEach(this,(s,n)=>{s!=null&&s!==!1&&(r[n]=e&&ce.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const s=new this(e);return r.forEach(n=>s.set(n)),s}static accessor(e){const s=(this[b2]=this[b2]={accessors:{}}).accessors,n=this.prototype;function i(a){const l=dd(a);s[l]||(a8(n,a),s[l]=!0)}return ce.isArray(e)?e.forEach(i):i(e),this}}ox.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ce.reduceDescriptors(ox.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[r]=s}}});ce.freezeMethods(ox);const kn=ox;function fp(t,e){const r=this||jy,s=e||r,n=kn.from(s.headers);let i=s.data;return ce.forEach(t,function(l){i=l.call(r,i,n.normalize(),e?e.status:void 0)}),n.normalize(),i}function UE(t){return!!(t&&t.__CANCEL__)}function Hc(t,e,r){Ye.call(this,t??"canceled",Ye.ERR_CANCELED,e,r),this.name="CanceledError"}ce.inherits(Hc,Ye,{__CANCEL__:!0});function VE(t,e,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?t(r):e(new Ye("Request failed with status code "+r.status,[Ye.ERR_BAD_REQUEST,Ye.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function o8(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function l8(t,e){t=t||10;const r=new Array(t),s=new Array(t);let n=0,i=0,a;return e=e!==void 0?e:1e3,function(c){const d=Date.now(),u=s[i];a||(a=d),r[n]=c,s[n]=d;let h=i,f=0;for(;h!==n;)f+=r[h++],h=h%t;if(n=(n+1)%t,n===i&&(i=(i+1)%t),d-a<e)return;const m=u&&d-u;return m?Math.round(f*1e3/m):void 0}}function c8(t,e){let r=0,s=1e3/e,n,i;const a=(d,u=Date.now())=>{r=u,n=null,i&&(clearTimeout(i),i=null),t(...d)};return[(...d)=>{const u=Date.now(),h=u-r;h>=s?a(d,u):(n=d,i||(i=setTimeout(()=>{i=null,a(n)},s-h)))},()=>n&&a(n)]}const em=(t,e,r=3)=>{let s=0;const n=l8(50,250);return c8(i=>{const a=i.loaded,l=i.lengthComputable?i.total:void 0,c=a-s,d=n(c),u=a<=l;s=a;const h={loaded:a,total:l,progress:l?a/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-a)/d:void 0,event:i,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(h)},r)},w2=(t,e)=>{const r=t!=null;return[s=>e[0]({lengthComputable:r,total:t,loaded:s}),e[1]]},k2=t=>(...e)=>ce.asap(()=>t(...e)),d8=Dr.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,Dr.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(Dr.origin),Dr.navigator&&/(msie|trident)/i.test(Dr.navigator.userAgent)):()=>!0,u8=Dr.hasStandardBrowserEnv?{write(t,e,r,s,n,i){const a=[t+"="+encodeURIComponent(e)];ce.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),ce.isString(s)&&a.push("path="+s),ce.isString(n)&&a.push("domain="+n),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function h8(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function f8(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function WE(t,e,r){let s=!h8(e);return t&&(s||r==!1)?f8(t,e):e}const _2=t=>t instanceof kn?{...t}:t;function Yo(t,e){e=e||{};const r={};function s(d,u,h,f){return ce.isPlainObject(d)&&ce.isPlainObject(u)?ce.merge.call({caseless:f},d,u):ce.isPlainObject(u)?ce.merge({},u):ce.isArray(u)?u.slice():u}function n(d,u,h,f){if(ce.isUndefined(u)){if(!ce.isUndefined(d))return s(void 0,d,h,f)}else return s(d,u,h,f)}function i(d,u){if(!ce.isUndefined(u))return s(void 0,u)}function a(d,u){if(ce.isUndefined(u)){if(!ce.isUndefined(d))return s(void 0,d)}else return s(void 0,u)}function l(d,u,h){if(h in e)return s(d,u);if(h in t)return s(void 0,d)}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(d,u,h)=>n(_2(d),_2(u),h,!0)};return ce.forEach(Object.keys({...t,...e}),function(u){const h=c[u]||n,f=h(t[u],e[u],u);ce.isUndefined(f)&&h!==l||(r[u]=f)}),r}const HE=t=>{const e=Yo({},t);let{data:r,withXSRFToken:s,xsrfHeaderName:n,xsrfCookieName:i,headers:a,auth:l}=e;if(e.headers=a=kn.from(a),e.url=BE(WE(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),ce.isFormData(r)){if(Dr.hasStandardBrowserEnv||Dr.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(ce.isFunction(r.getHeaders)){const c=r.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,h])=>{d.includes(u.toLowerCase())&&a.set(u,h)})}}if(Dr.hasStandardBrowserEnv&&(s&&ce.isFunction(s)&&(s=s(e)),s||s!==!1&&d8(e.url))){const c=n&&i&&u8.read(i);c&&a.set(n,c)}return e},m8=typeof XMLHttpRequest<"u",x8=m8&&function(t){return new Promise(function(r,s){const n=HE(t);let i=n.data;const a=kn.from(n.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=n,u,h,f,m,x;function p(){m&&m(),x&&x(),n.cancelToken&&n.cancelToken.unsubscribe(u),n.signal&&n.signal.removeEventListener("abort",u)}let g=new XMLHttpRequest;g.open(n.method.toUpperCase(),n.url,!0),g.timeout=n.timeout;function v(){if(!g)return;const y=kn.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),N={data:!l||l==="text"||l==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:y,config:t,request:g};VE(function(j){r(j),p()},function(j){s(j),p()},N),g=null}"onloadend"in g?g.onloadend=v:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(v)},g.onabort=function(){g&&(s(new Ye("Request aborted",Ye.ECONNABORTED,t,g)),g=null)},g.onerror=function(k){const N=k&&k.message?k.message:"Network Error",E=new Ye(N,Ye.ERR_NETWORK,t,g);E.event=k||null,s(E),g=null},g.ontimeout=function(){let k=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const N=n.transitional||$E;n.timeoutErrorMessage&&(k=n.timeoutErrorMessage),s(new Ye(k,N.clarifyTimeoutError?Ye.ETIMEDOUT:Ye.ECONNABORTED,t,g)),g=null},i===void 0&&a.setContentType(null),"setRequestHeader"in g&&ce.forEach(a.toJSON(),function(k,N){g.setRequestHeader(N,k)}),ce.isUndefined(n.withCredentials)||(g.withCredentials=!!n.withCredentials),l&&l!=="json"&&(g.responseType=n.responseType),d&&([f,x]=em(d,!0),g.addEventListener("progress",f)),c&&g.upload&&([h,m]=em(c),g.upload.addEventListener("progress",h),g.upload.addEventListener("loadend",m)),(n.cancelToken||n.signal)&&(u=y=>{g&&(s(!y||y.type?new Hc(null,t,g):y),g.abort(),g=null)},n.cancelToken&&n.cancelToken.subscribe(u),n.signal&&(n.signal.aborted?u():n.signal.addEventListener("abort",u)));const b=o8(n.url);if(b&&Dr.protocols.indexOf(b)===-1){s(new Ye("Unsupported protocol "+b+":",Ye.ERR_BAD_REQUEST,t));return}g.send(i||null)})},p8=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let s=new AbortController,n;const i=function(d){if(!n){n=!0,l();const u=d instanceof Error?d:this.reason;s.abort(u instanceof Ye?u:new Hc(u instanceof Error?u.message:u))}};let a=e&&setTimeout(()=>{a=null,i(new Ye(`timeout ${e} of ms exceeded`,Ye.ETIMEDOUT))},e);const l=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),t=null)};t.forEach(d=>d.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>ce.asap(l),c}},g8=p8,v8=function*(t,e){let r=t.byteLength;if(!e||r<e){yield t;return}let s=0,n;for(;s<r;)n=s+e,yield t.slice(s,n),s=n},y8=async function*(t,e){for await(const r of b8(t))yield*v8(r,e)},b8=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:s}=await e.read();if(r)break;yield s}}finally{await e.cancel()}},N2=(t,e,r,s)=>{const n=y8(t,e);let i=0,a,l=c=>{a||(a=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await n.next();if(d){l(),c.close();return}let h=u.byteLength;if(r){let f=i+=h;r(f)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),n.return()}},{highWaterMark:2})},j2=64*1024,{isFunction:m0}=ce,w8=(({Request:t,Response:e})=>({Request:t,Response:e}))(ce.global),{ReadableStream:E2,TextEncoder:S2}=ce.global,C2=(t,...e)=>{try{return!!t(...e)}catch{return!1}},k8=t=>{t=ce.merge.call({skipUndefined:!0},w8,t);const{fetch:e,Request:r,Response:s}=t,n=e?m0(e):typeof fetch=="function",i=m0(r),a=m0(s);if(!n)return!1;const l=n&&m0(E2),c=n&&(typeof S2=="function"?(x=>p=>x.encode(p))(new S2):async x=>new Uint8Array(await new r(x).arrayBuffer())),d=i&&l&&C2(()=>{let x=!1;const p=new r(Dr.origin,{body:new E2,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!p}),u=a&&l&&C2(()=>ce.isReadableStream(new s("").body)),h={stream:u&&(x=>x.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!h[x]&&(h[x]=(p,g)=>{let v=p&&p[x];if(v)return v.call(p);throw new Ye(`Response type '${x}' is not supported`,Ye.ERR_NOT_SUPPORT,g)})});const f=async x=>{if(x==null)return 0;if(ce.isBlob(x))return x.size;if(ce.isSpecCompliantForm(x))return(await new r(Dr.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(ce.isArrayBufferView(x)||ce.isArrayBuffer(x))return x.byteLength;if(ce.isURLSearchParams(x)&&(x=x+""),ce.isString(x))return(await c(x)).byteLength},m=async(x,p)=>{const g=ce.toFiniteNumber(x.getContentLength());return g??f(p)};return async x=>{let{url:p,method:g,data:v,signal:b,cancelToken:y,timeout:k,onDownloadProgress:N,onUploadProgress:E,responseType:j,headers:_,withCredentials:S="same-origin",fetchOptions:C}=HE(x),F=e||fetch;j=j?(j+"").toLowerCase():"text";let P=g8([b,y&&y.toAbortSignal()],k),B=null;const Q=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let D;try{if(E&&d&&g!=="get"&&g!=="head"&&(D=await m(_,v))!==0){let Z=new r(p,{method:"POST",body:v,duplex:"half"}),M;if(ce.isFormData(v)&&(M=Z.headers.get("content-type"))&&_.setContentType(M),Z.body){const[X,V]=w2(D,em(k2(E)));v=N2(Z.body,j2,X,V)}}ce.isString(S)||(S=S?"include":"omit");const I=i&&"credentials"in r.prototype,te={...C,signal:P,method:g.toUpperCase(),headers:_.normalize().toJSON(),body:v,duplex:"half",credentials:I?S:void 0};B=i&&new r(p,te);let re=await(i?F(B,C):F(p,te));const W=u&&(j==="stream"||j==="response");if(u&&(N||W&&Q)){const Z={};["status","statusText","headers"].forEach(Y=>{Z[Y]=re[Y]});const M=ce.toFiniteNumber(re.headers.get("content-length")),[X,V]=N&&w2(M,em(k2(N),!0))||[];re=new s(N2(re.body,j2,X,()=>{V&&V(),Q&&Q()}),Z)}j=j||"text";let K=await h[ce.findKey(h,j)||"text"](re,x);return!W&&Q&&Q(),await new Promise((Z,M)=>{VE(Z,M,{data:K,headers:kn.from(re.headers),status:re.status,statusText:re.statusText,config:x,request:B})})}catch(I){throw Q&&Q(),I&&I.name==="TypeError"&&/Load failed|fetch/i.test(I.message)?Object.assign(new Ye("Network Error",Ye.ERR_NETWORK,x,B),{cause:I.cause||I}):Ye.from(I,I&&I.code,x,B)}}},_8=new Map,YE=t=>{let e=t?t.env:{};const{fetch:r,Request:s,Response:n}=e,i=[s,n,r];let a=i.length,l=a,c,d,u=_8;for(;l--;)c=i[l],d=u.get(c),d===void 0&&u.set(c,d=l?new Map:k8(e)),u=d;return d};YE();const T1={http:IR,xhr:x8,fetch:{get:YE}};ce.forEach(T1,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const T2=t=>`- ${t}`,N8=t=>ce.isFunction(t)||t===null||t===!1,qE={getAdapter:(t,e)=>{t=ce.isArray(t)?t:[t];const{length:r}=t;let s,n;const i={};for(let a=0;a<r;a++){s=t[a];let l;if(n=s,!N8(s)&&(n=T1[(l=String(s)).toLowerCase()],n===void 0))throw new Ye(`Unknown adapter '${l}'`);if(n&&(ce.isFunction(n)||(n=n.get(e))))break;i[l||"#"+a]=n}if(!n){const a=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=r?a.length>1?`since :
`+a.map(T2).join(`
`):" "+T2(a[0]):"as no adapter specified";throw new Ye("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return n},adapters:T1};function mp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Hc(null,t)}function A2(t){return mp(t),t.headers=kn.from(t.headers),t.data=fp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),qE.getAdapter(t.adapter||jy.adapter,t)(t).then(function(s){return mp(t),s.data=fp.call(t,t.transformResponse,s),s.headers=kn.from(s.headers),s},function(s){return UE(s)||(mp(t),s&&s.response&&(s.response.data=fp.call(t,t.transformResponse,s.response),s.response.headers=kn.from(s.response.headers))),Promise.reject(s)})}const GE="1.12.2",lx={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{lx[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const F2={};lx.transitional=function(e,r,s){function n(i,a){return"[Axios v"+GE+"] Transitional option '"+i+"'"+a+(s?". "+s:"")}return(i,a,l)=>{if(e===!1)throw new Ye(n(a," has been removed"+(r?" in "+r:"")),Ye.ERR_DEPRECATED);return r&&!F2[a]&&(F2[a]=!0,console.warn(n(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,a,l):!0}};lx.spelling=function(e){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function j8(t,e,r){if(typeof t!="object")throw new Ye("options must be an object",Ye.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let n=s.length;for(;n-- >0;){const i=s[n],a=e[i];if(a){const l=t[i],c=l===void 0||a(l,i,t);if(c!==!0)throw new Ye("option "+i+" must be "+c,Ye.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ye("Unknown option "+i,Ye.ERR_BAD_OPTION)}}const mf={assertOptions:j8,validators:lx},An=mf.validators;class tm{constructor(e){this.defaults=e||{},this.interceptors={request:new y2,response:new y2}}async request(e,r){try{return await this._request(e,r)}catch(s){if(s instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Yo(this.defaults,r);const{transitional:s,paramsSerializer:n,headers:i}=r;s!==void 0&&mf.assertOptions(s,{silentJSONParsing:An.transitional(An.boolean),forcedJSONParsing:An.transitional(An.boolean),clarifyTimeoutError:An.transitional(An.boolean)},!1),n!=null&&(ce.isFunction(n)?r.paramsSerializer={serialize:n}:mf.assertOptions(n,{encode:An.function,serialize:An.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),mf.assertOptions(r,{baseUrl:An.spelling("baseURL"),withXsrfToken:An.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=i&&ce.merge(i.common,i[r.method]);i&&ce.forEach(["delete","get","head","post","put","patch","common"],x=>{delete i[x]}),r.headers=kn.concat(a,i);const l=[];let c=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(r)===!1||(c=c&&p.synchronous,l.unshift(p.fulfilled,p.rejected))});const d=[];this.interceptors.response.forEach(function(p){d.push(p.fulfilled,p.rejected)});let u,h=0,f;if(!c){const x=[A2.bind(this),void 0];for(x.unshift(...l),x.push(...d),f=x.length,u=Promise.resolve(r);h<f;)u=u.then(x[h++],x[h++]);return u}f=l.length;let m=r;for(;h<f;){const x=l[h++],p=l[h++];try{m=x(m)}catch(g){p.call(this,g);break}}try{u=A2.call(this,m)}catch(x){return Promise.reject(x)}for(h=0,f=d.length;h<f;)u=u.then(d[h++],d[h++]);return u}getUri(e){e=Yo(this.defaults,e);const r=WE(e.baseURL,e.url,e.allowAbsoluteUrls);return BE(r,e.params,e.paramsSerializer)}}ce.forEach(["delete","get","head","options"],function(e){tm.prototype[e]=function(r,s){return this.request(Yo(s||{},{method:e,url:r,data:(s||{}).data}))}});ce.forEach(["post","put","patch"],function(e){function r(s){return function(i,a,l){return this.request(Yo(l||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}tm.prototype[e]=r(),tm.prototype[e+"Form"]=r(!0)});const xf=tm;class Ey{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const s=this;this.promise.then(n=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](n);s._listeners=null}),this.promise.then=n=>{let i;const a=new Promise(l=>{s.subscribe(l),i=l}).then(n);return a.cancel=function(){s.unsubscribe(i)},a},e(function(i,a,l){s.reason||(s.reason=new Hc(i,a,l),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=s=>{e.abort(s)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new Ey(function(n){e=n}),cancel:e}}}const E8=Ey;function S8(t){return function(r){return t.apply(null,r)}}function C8(t){return ce.isObject(t)&&t.isAxiosError===!0}const A1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(A1).forEach(([t,e])=>{A1[e]=t});const T8=A1;function KE(t){const e=new xf(t),r=SE(xf.prototype.request,e);return ce.extend(r,xf.prototype,e,{allOwnKeys:!0}),ce.extend(r,e,null,{allOwnKeys:!0}),r.create=function(n){return KE(Yo(t,n))},r}const tr=KE(jy);tr.Axios=xf;tr.CanceledError=Hc;tr.CancelToken=E8;tr.isCancel=UE;tr.VERSION=GE;tr.toFormData=ax;tr.AxiosError=Ye;tr.Cancel=tr.CanceledError;tr.all=function(e){return Promise.all(e)};tr.spread=S8;tr.isAxiosError=C8;tr.mergeConfig=Yo;tr.AxiosHeaders=kn;tr.formToJSON=t=>zE(ce.isHTMLForm(t)?new FormData(t):t);tr.getAdapter=qE.getAdapter;tr.HttpStatusCode=T8;tr.default=tr;const ln=tr,Oe=ln.create({baseURL:"/api",timeout:3e4,headers:{"Content-Type":"application/json"}});Oe.interceptors.request.use(t=>{const e=localStorage.getItem("auth_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t});Oe.interceptors.response.use(t=>t,t=>{var e,r,s,n,i;if(console.log("Error en API interceptor:",t),((e=t.response)==null?void 0:e.status)===401){console.log("Error 401 detectado");const a=window.location.pathname;console.log("Ruta actual:",a);const l=a.startsWith("/auth/")||a==="/",c=((s=(r=t.config)==null?void 0:r.url)==null?void 0:s.includes("/permissions"))||((i=(n=t.config)==null?void 0:n.url)==null?void 0:i.includes("/roles"));!l&&!c?(console.log("Limpiando tokens por error 401 inesperado..."),localStorage.removeItem("auth_token"),localStorage.removeItem("user"),setTimeout(()=>{console.log("Redirigiendo a login..."),window.location.href="/auth/login"},100)):c&&console.log("Error 401 en permisos/roles - puede ser por falta de permisos específicos")}return Promise.reject(t)});const x0={login:async(t,e,r=!1)=>{console.log("API: Iniciando login para:",t),console.log("API: URL completa:",`${window.location.origin}/api/auth/login.php`);try{const s=await Oe.post("/auth/login.php",{username:t,password:e,remember:r});return console.log("API: Login exitoso - Status:",s.status),console.log("API: Data recibida:",s.data),s.data}catch(s){if(console.error("API: Error en login:",s),s.response&&s.response.data)return console.log("API: Respuesta de error del servidor:",s.response.data),s.response.data;throw new Error("No se puede conectar con el servidor")}},verifyToken:async t=>{console.log("Verificando token");try{const e=await Oe.get("/auth/verify.php",{headers:{Authorization:`Bearer ${t}`}});return console.log("Token verificado:",e.data),e.data}catch(e){throw console.error("Error verificando token:",e),e}},logout:async()=>{console.log("Cerrando sesión");try{const t=localStorage.getItem("auth_token");if(t){const e=await Oe.post("/auth/logout.php",{},{headers:{Authorization:`Bearer ${t}`}});return console.log("Logout exitoso:",e.data),e.data}}catch(t){throw console.error("Error en logout:",t),t}},register:async t=>{console.log("Registrando usuario:",t);try{const e=await Oe.post("/auth/register.php",t);return console.log("Registro exitoso:",e.data),e.data}catch(e){throw console.error("Error en registro:",e),e}}},P2={getStats:async(t="month")=>{console.log("Obteniendo estadísticas del empleado:",t);try{const e=await Oe.get(`/employee-stats.php?period=${t}`);return console.log("Estadísticas obtenidas:",e.data),e.data}catch(e){throw console.error("Error obteniendo estadísticas:",e),e}},getActivities:async(t=10)=>{console.log("Obteniendo actividades del empleado:",t);try{const e=await Oe.get(`/employee-activities.php?limit=${t}`);return console.log("Actividades obtenidas:",e.data),e.data}catch(e){throw console.error("Error obteniendo actividades:",e),e}}},Fo={getRoles:async t=>{console.log("Obteniendo roles con parámetros:",t);try{const e=new URLSearchParams;t&&Object.keys(t).forEach(n=>{t[n]&&e.append(n,t[n])});const r=`/roles.php${e.toString()?"?"+e.toString():""}`;console.log("URL de roles:",r);const s=await Oe.get(r);return console.log("Respuesta de roles recibida:",s.data),s.data}catch(e){throw console.error("Error obteniendo roles:",e),e}},getRole:async t=>{console.log("Obteniendo rol individual:",t);try{const e=await Oe.get(`/roles.php?id=${t}`);return console.log("Respuesta de rol individual:",e.data),e.data.data}catch(e){throw console.error("Error obteniendo rol:",e),e}},getPermissions:async()=>{var t,e;console.log("=== API getPermissions ==="),console.log("Obteniendo permisos disponibles"),console.log("Token actual:",localStorage.getItem("auth_token"));try{const r=await Oe.get("/permissions.php");return console.log("Response status:",r.status),console.log("Response headers:",r.headers),console.log("Response data completa:",r.data),console.log("Response data type:",typeof r.data),r.data&&r.data.success&&Array.isArray(r.data.data)?(console.log("✅ Permisos válidos encontrados:",r.data.data.length),r.data.data):(console.warn("❌ Respuesta de permisos no válida:",r.data),console.warn("response.data.success:",(t=r.data)==null?void 0:t.success),console.warn("Array.isArray(response.data.data):",Array.isArray((e=r.data)==null?void 0:e.data)),[])}catch(r){return console.error("❌ Error obteniendo permisos:",r),[]}},createRole:async t=>{console.log("Creando rol:",t);try{const e=await Oe.post("/roles.php",t);return console.log("Rol creado:",e.data),e.data}catch(e){throw console.error("Error creando rol:",e),e}},updateRole:async(t,e)=>{console.log("Actualizando rol:",t,e);try{const r=await Oe.put(`/roles.php?id=${t}`,e);return console.log("Rol actualizado:",r.data),r.data}catch(r){throw console.error("Error actualizando rol:",r),r}},deleteRole:async t=>{console.log("Eliminando rol:",t);try{const e=await Oe.delete(`/roles.php?id=${t}`);return console.log("Rol eliminado:",e.data),e.data}catch(e){throw console.error("Error eliminando rol:",e),e}}},Kn={getDesks:async t=>{console.log("Obteniendo mesas con parámetros:",t);try{const e=new URLSearchParams;t&&Object.keys(t).forEach(n=>{t[n]&&e.append(n,t[n])});const r=`/desks.php${e.toString()?"?"+e.toString():""}`;console.log("URL de mesas:",r);const s=await Oe.get(r);return console.log("Respuesta de mesas recibida:",s.data),s.data}catch(e){throw console.error("Error obteniendo mesas:",e),e}},getDesk:async t=>{console.log("Obteniendo mesa individual:",t);try{const e=await Oe.get(`/desks.php?id=${t}`);return console.log("Respuesta de mesa individual:",e.data),e.data.data}catch(e){throw console.error("Error obteniendo mesa:",e),e}},createDesk:async t=>{console.log("Creando mesa:",t);try{const e=await Oe.post("/desks.php",t);return console.log("Mesa creada:",e.data),e.data}catch(e){throw console.error("Error creando mesa:",e),e}},updateDesk:async(t,e)=>{console.log("Actualizando mesa:",t,e);try{const r=await Oe.put(`/desks.php?id=${t}`,e);return console.log("Mesa actualizada:",r.data),r.data}catch(r){throw console.error("Error actualizando mesa:",r),r}},deleteDesk:async t=>{console.log("Eliminando mesa:",t);try{const e=await Oe.delete(`/desks.php?id=${t}`);return console.log("Mesa eliminada:",e.data),e.data}catch(e){throw console.error("Error eliminando mesa:",e),e}}},qn={getLeads:async t=>{console.log("Obteniendo leads con parámetros:",t);try{const e=new URLSearchParams;t&&Object.keys(t).forEach(n=>{t[n]&&e.append(n,t[n])});const r=`/leads_simple.php${e.toString()?"?"+e.toString():""}`;console.log("URL de leads:",r);const s=await Oe.get(r);return console.log("Respuesta de leads recibida:",s.data),s.data}catch(e){throw console.error("Error obteniendo leads:",e),e}},getLead:async t=>{console.log("Obteniendo lead individual:",t);try{const e=await Oe.get(`/leads_simple.php?id=${t}`);return console.log("Respuesta de lead individual:",e.data),e.data.data}catch(e){throw console.error("Error obteniendo lead:",e),e}},createLead:async t=>{console.log("Creando lead:",t);try{const e=await Oe.post("/leads_simple.php",t);return console.log("Lead creado:",e.data),e.data}catch(e){throw console.error("Error creando lead:",e),e}},updateLead:async(t,e)=>{console.log("Actualizando lead:",t,e);try{const r=await Oe.put(`/leads.php?id=${t}`,e);return console.log("Lead actualizado:",r.data),r.data}catch(r){throw console.error("Error actualizando lead:",r),r}},deleteLead:async t=>{console.log("Eliminando lead:",t);try{const e=await Oe.delete(`/leads.php?id=${t}`);return console.log("Lead eliminado:",e.data),e.data}catch(e){throw console.error("Error eliminando lead:",e),e}},importLeads:async t=>{console.log("Importando leads:",t);try{const e=await Oe.post("/leads.php?action=import",t);return console.log("Leads importados:",e.data),e.data}catch(e){throw console.error("Error importando leads:",e),e}},getByEmail:async t=>{console.log("Buscando lead por email:",t);try{const e=await Oe.get(`/lead-trading-link.php?action=find_lead&email=${encodeURIComponent(t)}`);return console.log("Lead encontrado por email:",e.data),e.data}catch(e){throw console.error("Error buscando lead por email:",e),e}},bulkAssign:async(t,e)=>{var r;console.log("Asignación masiva de leads:",{leadIds:t,assignments:e});try{const s=await Oe.post("/bulk-assign-leads.php",{leadIds:t,assignments:e});return console.log("Asignación masiva completada:",s.data),s.data}catch(s){throw console.error("Error en asignación masiva:",s),(r=s.response)!=null&&r.data&&typeof s.response.data=="string"&&s.response.data.includes("<")?new Error("Error del servidor: Respuesta HTML inesperada"):s}}},Zn={getUsers:async t=>{console.log("Obteniendo usuarios con parámetros:",t);try{const e=new URLSearchParams;t&&Object.keys(t).forEach(n=>{t[n]&&e.append(n,t[n])});const r=`/users.php${e.toString()?"?"+e.toString():""}`;console.log("URL de usuarios:",r);const s=await Oe.get(r);return console.log("Respuesta de usuarios recibida:",s.data),s.data}catch(e){throw console.error("Error obteniendo usuarios:",e),e}},getUser:async t=>{console.log("Obteniendo usuario individual:",t);try{const e=await Oe.get(`/users.php?id=${t}`);return console.log("Respuesta de usuario individual:",e.data),e.data.data}catch(e){throw console.error("Error obteniendo usuario:",e),e}},createUser:async t=>{console.log("Creando usuario:",t);try{const e=await Oe.post("/users.php",t);return console.log("Usuario creado:",e.data),e.data}catch(e){throw console.error("Error creando usuario:",e),e}},updateUser:async(t,e)=>{console.log("Actualizando usuario:",t,e);try{const r=await Oe.put(`/users.php?id=${t}`,e);return console.log("Usuario actualizado:",r.data),r.data}catch(r){throw console.error("Error actualizando usuario:",r),r}},deleteUser:async t=>{console.log("Eliminando usuario:",t);try{const e=await Oe.delete(`/users.php?id=${t}`);return console.log("Usuario eliminado:",e.data),e.data}catch(e){throw console.error("Error eliminando usuario:",e),e}},assignDesk:async(t,e,r=!0)=>{console.log("Asignando desk al usuario:",{userId:t,deskId:e,isPrimary:r});try{const s=await Oe.put(`/users.php?id=${t}`,{action:"assign_desk",desk_id:e,is_primary:r});return console.log("Desk asignado:",s.data),s.data}catch(s){throw console.error("Error asignando desk:",s),s}},assignRole:async(t,e)=>{console.log("Asignando rol al usuario:",{userId:t,roleId:e});try{const r=await Oe.put(`/users.php?id=${t}`,{action:"assign_role",role_id:e});return console.log("Rol asignado:",r.data),r.data}catch(r){throw console.error("Error asignando rol:",r),r}},toggleStatus:async t=>{console.log("Cambiando estado del usuario:",t);try{const e=await Oe.put(`/users.php?id=${t}`,{action:"toggle_status"});return console.log("Estado cambiado:",e.data),e.data}catch(e){throw console.error("Error cambiando estado:",e),e}}},Iu={getTradingAccounts:async t=>{console.log("Obteniendo cuentas de trading con parámetros:",t);try{const e=new URLSearchParams;t&&Object.keys(t).forEach(n=>{t[n]&&e.append(n,t[n])});const r=`/trading-accounts.php${e.toString()?"?"+e.toString():""}`;console.log("URL de cuentas de trading:",r);const s=await Oe.get(r);return console.log("Respuesta de cuentas de trading recibida:",s.data),s.data}catch(e){throw console.error("Error obteniendo cuentas de trading:",e),e}},getTradingAccount:async t=>{console.log("Obteniendo cuenta de trading individual:",t);try{const e=await Oe.get(`/trading-accounts.php?id=${t}`);return console.log("Respuesta de cuenta de trading individual:",e.data),e.data.data}catch(e){throw console.error("Error obteniendo cuenta de trading:",e),e}},getAccountTypes:async()=>{console.log("Obteniendo tipos de cuenta disponibles");try{const t=await Oe.get("/trading-accounts.php?types=1");return console.log("Tipos de cuenta obtenidos:",t.data),t.data}catch(t){throw console.error("Error obteniendo tipos de cuenta:",t),t}},createTradingAccount:async t=>{console.log("Creando cuenta de trading:",t);try{const e=await Oe.post("/trading-accounts.php",t);return console.log("Cuenta de trading creada:",e.data),e.data}catch(e){throw console.error("Error creando cuenta de trading:",e),e}},updateTradingAccount:async(t,e)=>{console.log("Actualizando cuenta de trading:",t,e);try{const r=await Oe.put(`/trading-accounts.php?id=${t}`,e);return console.log("Cuenta de trading actualizada:",r.data),r.data}catch(r){throw console.error("Error actualizando cuenta de trading:",r),r}},deleteTradingAccount:async t=>{console.log("Eliminando cuenta de trading:",t);try{const e=await Oe.delete(`/trading-accounts.php?id=${t}`);return console.log("Cuenta de trading eliminada:",e.data),e.data}catch(e){throw console.error("Error eliminando cuenta de trading:",e),e}}},p0={getSystemFields:async()=>{console.log("Obteniendo campos del sistema para mapeo");try{const t=await Oe.get("/api/lead-import.php?fields=1");return console.log("Campos del sistema obtenidos:",t.data),t.data}catch(t){throw console.error("Error obteniendo campos del sistema:",t),t}},getImportHistory:async()=>{console.log("Obteniendo historial de importaciones");try{const t=await Oe.get("/api/lead-import.php");return console.log("Historial de importaciones obtenido:",t.data),t.data}catch(t){throw console.error("Error obteniendo historial de importaciones:",t),t}},analyzeFile:async t=>{console.log("Analizando archivo:",t.name);try{const e=new FormData;e.append("file",t);const r=await Oe.post("/api/lead-import.php?action=analyze",e,{headers:{"Content-Type":"multipart/form-data"}});return console.log("Archivo analizado:",r.data),r.data}catch(e){throw console.error("Error analizando archivo:",e),e}},importLeads:async t=>{console.log("Importando leads con datos:",t);try{const e=await Oe.post("/api/lead-import.php?action=import",t);return console.log("Leads importados:",e.data),e.data}catch(e){throw console.error("Error importando leads:",e),e}},deleteImport:async t=>{console.log("Eliminando registro de importación:",t);try{const e=await Oe.delete(`/api/lead-import.php?id=${t}`);return console.log("Registro de importación eliminado:",e.data),e.data}catch(e){throw console.error("Error eliminando registro de importación:",e),e}}},ud={getTransactions:async t=>{console.log("Obteniendo transacciones con parámetros:",t);try{const e=new URLSearchParams;t&&Object.keys(t).forEach(n=>{t[n]&&e.append(n,t[n])});const r=`/api/deposits-withdrawals.php${e.toString()?"?"+e.toString():""}`;console.log("URL de transacciones:",r);const s=await Oe.get(r);return console.log("Respuesta de transacciones recibida:",s.data),s.data}catch(e){throw console.error("Error obteniendo transacciones:",e),e}},getTransaction:async t=>{console.log("Obteniendo transacción individual:",t);try{const e=await Oe.get(`/api/deposits-withdrawals.php?id=${t}`);return console.log("Respuesta de transacción individual:",e.data),e.data.data}catch(e){throw console.error("Error obteniendo transacción:",e),e}},getPaymentMethods:async()=>{console.log("Obteniendo métodos de pago disponibles");try{const t=await Oe.get("/api/deposits-withdrawals.php?methods=1");return console.log("Métodos de pago obtenidos:",t.data),t.data}catch(t){throw console.error("Error obteniendo métodos de pago:",t),t}},createTransaction:async t=>{console.log("Creando transacción:",t);try{const e=await Oe.post("/api/deposits-withdrawals.php",t);return console.log("Transacción creada:",e.data),e.data}catch(e){throw console.error("Error creando transacción:",e),e}},updateTransaction:async(t,e)=>{console.log("Actualizando transacción:",t,e);try{const r=await Oe.put(`/api/deposits-withdrawals.php?id=${t}`,e);return console.log("Transacción actualizada:",r.data),r.data}catch(r){throw console.error("Error actualizando transacción:",r),r}},deleteTransaction:async t=>{console.log("Eliminando transacción:",t);try{const e=await Oe.delete(`/api/deposits-withdrawals.php?id=${t}`);return console.log("Transacción eliminada:",e.data),e.data}catch(e){throw console.error("Error eliminando transacción:",e),e}}},Qa={getInstruments:async()=>{console.log("Obteniendo instrumentos");try{return{success:!0,data:{Forex:{EURUSD:{name:"Euro / US Dollar",digits:5,spread:1e-4},GBPUSD:{name:"British Pound / US Dollar",digits:5,spread:2e-4},USDJPY:{name:"US Dollar / Japanese Yen",digits:3,spread:.01},AUDUSD:{name:"Australian Dollar / US Dollar",digits:5,spread:2e-4},USDCAD:{name:"US Dollar / Canadian Dollar",digits:5,spread:2e-4}},Crypto:{BTCUSD:{name:"Bitcoin / US Dollar",digits:2,spread:1},ETHUSD:{name:"Ethereum / US Dollar",digits:2,spread:.5}},Commodities:{XAUUSD:{name:"Gold / US Dollar",digits:2,spread:.3},XAGUSD:{name:"Silver / US Dollar",digits:3,spread:.02}},Indices:{US30:{name:"Dow Jones Industrial Average",digits:1,spread:2},SPX500:{name:"S&P 500",digits:1,spread:.5}}}}}catch(t){return console.error("Error obteniendo instrumentos:",t),{success:!0,data:{Forex:{EURUSD:{name:"Euro / US Dollar",digits:5,spread:1e-4}}}}}},getPrices:async t=>{const e=Date.now();(!window._lastPriceLogTime||e-window._lastPriceLogTime>1e4)&&(console.log("📊 Actualizando precios...",t?`[${t}]`:"[todos]"),window._lastPriceLogTime=e);try{const r={EURUSD:{bid:1.085,ask:1.0851,price:1.085,change:5e-4,timestamp:Date.now()},GBPUSD:{bid:1.265,ask:1.2652,price:1.2651,change:-.001,timestamp:Date.now()},USDJPY:{bid:149.25,ask:149.26,price:149.25,change:.15,timestamp:Date.now()},AUDUSD:{bid:.658,ask:.6582,price:.6581,change:8e-4,timestamp:Date.now()},USDCAD:{bid:1.372,ask:1.3722,price:1.3721,change:-5e-4,timestamp:Date.now()}};return{success:!0,data:t?{[t]:r[t]}:r}}catch(r){return console.error("❌ Error obteniendo precios:",r),{success:!0,data:{EURUSD:{bid:1.085,ask:1.0851,spread:1e-4,change:5e-4,timestamp:Date.now()},GBPUSD:{bid:1.265,ask:1.2652,spread:2e-4,change:-.0012,timestamp:Date.now()},USDJPY:{bid:149.25,ask:149.26,spread:.01,change:.15,timestamp:Date.now()}}}}},getCandles:async(t,e,r=100)=>{console.log(`📊 Obteniendo datos OHLC REALES de Finage para ${t} ${e}`);try{const s=await Oe.get(`/finage-data.php?endpoint=ohlc&symbol=${t}&timeframe=${e}&days=7`);if(!s.data.success)throw new Error(s.data.error||"Error obteniendo datos OHLC de Finage");if(console.log(`✅ Datos REALES de Finage obtenidos: ${s.data.data.count} velas`),console.log(`🔍 Fuente: ${s.data.data.source}`),!s.data.data.candles||s.data.data.candles.length===0)throw new Error("No se obtuvieron velas de Finage");return s.data}catch(s){throw console.error("❌ Error obteniendo datos REALES de Finage:",s),s}},getOrders:async t=>{const e=Date.now();(!window._lastOrdersLogTime||e-window._lastOrdersLogTime>15e3)&&(console.log("📋 Actualizando órdenes para cuenta:",t),window._lastOrdersLogTime=e);try{return{success:!0,data:[]}}catch(r){return console.error("❌ Error obteniendo órdenes:",r),{success:!0,data:[]}}},createOrder:async t=>{console.log("Creando orden:",t);try{return{success:!0,message:"Orden creada exitosamente (simulada)",data:{id:Math.floor(Math.random()*1e3),...t,status:"open",created_at:new Date().toISOString()}}}catch(e){throw console.error("Error creando orden:",e),e}},closeOrder:async t=>{console.log("Cerrando orden:",t);try{return{success:!0,message:"Orden cerrada exitosamente (simulada)"}}catch(e){throw console.error("Error cerrando orden:",e),e}},getAccountInfo:async t=>{const e=Date.now();(!window._lastAccountLogTime||e-window._lastAccountLogTime>3e4)&&(console.log("💼 Actualizando información de cuenta:",t),window._lastAccountLogTime=e);try{return{success:!0,data:{id:t,balance:1e4,equity:1e4,margin:0,free_margin:1e4,profit_loss:0,currency:"USD"}}}catch(r){return console.error("❌ Error obteniendo información de cuenta:",r),{success:!0,data:{id:t,balance:1e4,equity:1e4,margin:0,free_margin:1e4,profit_loss:0,currency:"USD"}}}}},A8={getStats:async()=>(await Oe.get("/dashboard.php")).data.data},F1={findLeadByEmail:async t=>{console.log("Buscando lead por email:",t);try{const e=await Oe.get(`/lead-trading-link.php?action=find_lead&email=${encodeURIComponent(t)}`);return console.log("Resultado búsqueda lead:",e.data),e.data}catch(e){throw console.error("Error buscando lead por email:",e),e}},autoLinkAccount:async(t,e)=>{console.log("Vinculando automáticamente cuenta:",{email:t,accountId:e});try{const r=await Oe.post("/lead-trading-link.php?action=auto_link",{email:t,account_id:e});return console.log("Resultado vinculación automática:",r.data),r.data}catch(r){throw console.error("Error en vinculación automática:",r),r}},manualLinkAccount:async(t,e)=>{console.log("Vinculando manualmente cuenta:",{leadId:t,accountId:e});try{const r=await Oe.post("/lead-trading-link.php?action=manual_link",{lead_id:t,account_id:e});return console.log("Resultado vinculación manual:",r.data),r.data}catch(r){throw console.error("Error en vinculación manual:",r),r}},getLeadAccounts:async t=>{console.log("Obteniendo cuentas del lead:",t);try{const e=await Oe.get(`/lead-trading-link.php?action=lead_accounts&lead_id=${t}`);return console.log("Cuentas del lead obtenidas:",e.data),e.data}catch(e){throw console.error("Error obteniendo cuentas del lead:",e),e}},unlinkAccount:async t=>{console.log("Desvinculando cuenta:",t);try{const e=await Oe.delete(`/lead-trading-link.php?account_id=${t}`);return console.log("Cuenta desvinculada:",e.data),e.data}catch(e){throw console.error("Error desvinculando cuenta:",e),e}}},XE=w.createContext(void 0);function F8({children:t}){const[e,r]=w.useState(null),[s,n]=w.useState(null),[i,a]=w.useState(!0),l=!!e&&!!s;w.useEffect(()=>{(async()=>{const g=localStorage.getItem("auth_token");if(g)try{const v=await x0.verifyToken(g);v.success?(n(g),r(v.user)):localStorage.removeItem("auth_token")}catch(v){console.error("Error verificando token:",v),localStorage.removeItem("auth_token")}a(!1)})()},[]);const c=async(p,g,v=!1)=>{var b,y;try{a(!0),console.log("AuthContext: Iniciando login para",p);const k=await x0.login(p,g,v);return console.log("AuthContext: Respuesta recibida:",k),k&&k.success?(console.log("AuthContext: Login exitoso, guardando datos"),n(k.token),r(k.user),localStorage.setItem("auth_token",k.token),me.success(`¡Bienvenido, ${k.user.first_name}!`),!0):(console.log("AuthContext: Login fallido:",k),me.error((k==null?void 0:k.message)||"Error al iniciar sesión"),!1)}catch(k){console.error("AuthContext: Error en login:",k);const N=((y=(b=k.response)==null?void 0:b.data)==null?void 0:y.message)||k.message||"Error de conexión";return me.error(N),!1}finally{a(!1)}},d=async p=>{try{s&&await x0.logout()}catch(g){console.error("Error al cerrar sesión:",g)}finally{r(null),n(null),localStorage.removeItem("auth_token"),me.success("Sesión cerrada exitosamente"),setTimeout(p?()=>{p()}:()=>{window.location.replace("/auth/login")},100)}},x={user:e,token:s,isAuthenticated:l,isLoading:i,login:c,logout:d,refreshUser:async()=>{if(s)try{const p=await x0.verifyToken(s);p.success?r(p.user):d()}catch(p){console.error("Error refrescando usuario:",p),d()}},hasPermission:p=>e?e.roles.includes("admin")||e.permissions.includes(p)?!0:({"leads.view":["leads.view.assigned","leads.view.all"],"users.view":["users.view.assigned","users.view.all"],"desks.view":["desks.view.assigned","desks.view.all"]}[p]||[]).some(b=>e.permissions.includes(b)):!1,hasRole:p=>e?e.roles.includes(p):!1,updateUserSettings:p=>{if(!e)return;const g={...e,settings:{...e.settings,...p}};r(g)}};return o.jsx(XE.Provider,{value:x,children:t})}function ll(){const t=w.useContext(XE);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const QE=w.createContext(void 0);function P8({children:t}){const[e,r]=w.useState(()=>{const i=localStorage.getItem("iatrade-theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});w.useEffect(()=>{localStorage.setItem("iatrade-theme",e),document.documentElement.classList.toggle("dark",e==="dark");const i=document.querySelector('meta[name="theme-color"]');i&&i.setAttribute("content",e==="dark"?"#0f172a":"#1e3a8a")},[e]);const s=()=>{r(i=>i==="light"?"dark":"light")},n=i=>{r(i)};return o.jsx(QE.Provider,{value:{theme:e,toggleTheme:s,setTheme:n},children:t})}function cx(){const t=w.useContext(QE);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}function M8({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))}const R8=w.forwardRef(M8),Xl=R8;function D8({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const O8=w.forwardRef(D8),La=O8;function L8({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const I8=w.forwardRef(L8),Zd=I8;function B8({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const $8=w.forwardRef(B8),z8=$8;function U8({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const V8=w.forwardRef(U8),ji=V8;function W8({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181"}))}const H8=w.forwardRef(W8),Y8=H8;function q8({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const G8=w.forwardRef(q8),Fd=G8;function K8({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const X8=w.forwardRef(K8),Q8=X8;function Z8({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}const J8=w.forwardRef(Z8),Ql=J8;function eD({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5 7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"}))}const tD=w.forwardRef(eD),rD=tD;function sD({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"}))}const nD=w.forwardRef(sD),xp=nD;function iD({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const aD=w.forwardRef(iD),oD=aD;function lD({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const cD=w.forwardRef(lD),dD=cD;function uD({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"}))}const hD=w.forwardRef(uD),fD=hD;function mD({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const xD=w.forwardRef(mD),Xs=xD;function pD({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const gD=w.forwardRef(pD),vD=gD;function yD({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const bD=w.forwardRef(yD),Bu=bD;function wD({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const kD=w.forwardRef(wD),Lr=kD;function _D({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const ND=w.forwardRef(_D),M2=ND;function jD({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ED=w.forwardRef(jD),pr=ED;function SD({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const CD=w.forwardRef(SD),Ir=CD;function TD({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const AD=w.forwardRef(TD),vi=AD;function FD({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const PD=w.forwardRef(FD),dx=PD;function MD({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const RD=w.forwardRef(MD),ux=RD;function DD({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const OD=w.forwardRef(DD),zl=OD;function LD({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ID=w.forwardRef(LD),jn=ID;function BD({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"}))}const $D=w.forwardRef(BD),R2=$D;function zD({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const UD=w.forwardRef(zD),ZE=UD;function VD({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}const WD=w.forwardRef(VD),HD=WD;function YD({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"}))}const qD=w.forwardRef(YD),D2=qD;function GD({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const KD=w.forwardRef(GD),XD=KD;function QD({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ZD=w.forwardRef(QD),Fs=ZD;function JD({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const eO=w.forwardRef(JD),Zl=eO;function tO({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const rO=w.forwardRef(tO),qs=rO;function sO({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const nO=w.forwardRef(sO),Ia=nO;function iO({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const aO=w.forwardRef(iO),Qs=aO;function oO({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const lO=w.forwardRef(oO),JE=lO;function cO({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const dO=w.forwardRef(cO),qa=dO;function uO({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const hO=w.forwardRef(uO),Tc=hO;function fO({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const mO=w.forwardRef(fO),Sy=mO;function xO({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.05 4.575a1.575 1.575 0 1 0-3.15 0v3m3.15-3v-1.5a1.575 1.575 0 0 1 3.15 0v1.5m-3.15 0 .075 5.925m3.075.75V4.575m0 0a1.575 1.575 0 0 1 3.15 0V15M6.9 7.575a1.575 1.575 0 1 0-3.15 0v8.175a6.75 6.75 0 0 0 6.75 6.75h2.018a5.25 5.25 0 0 0 3.712-1.538l1.732-1.732a5.25 5.25 0 0 0 1.538-3.712l.003-2.024a.668.668 0 0 1 .198-.471 1.575 1.575 0 1 0-2.228-2.228 3.818 3.818 0 0 0-1.12 2.687M6.9 7.575V12m6.27 4.318A4.49 4.49 0 0 1 16.35 15m.002 0h-.002"}))}const pO=w.forwardRef(xO),gO=pO;function vO({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5-3.9 19.5m-2.1-19.5-3.9 19.5"}))}const yO=w.forwardRef(vO),bO=yO;function wO({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const kO=w.forwardRef(wO),_O=kO;function NO({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const jO=w.forwardRef(NO),EO=jO;function SO({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const CO=w.forwardRef(SO),gn=CO;function TO({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const AO=w.forwardRef(TO),FO=AO;function PO({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 0 1 8.835 2.535M10.34 6.66a23.847 23.847 0 0 0 8.835-2.535m0 0A23.74 23.74 0 0 0 18.795 3m.38 1.125a23.91 23.91 0 0 1 1.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 0 0 1.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 0 1 0 3.46"}))}const MO=w.forwardRef(PO),RO=MO;function DO({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"}))}const OO=w.forwardRef(DO),eS=OO;function LO({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const IO=w.forwardRef(LO),qo=IO;function BO({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const $O=w.forwardRef(BO),Ah=$O;function zO({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const UO=w.forwardRef(zO),Zs=UO;function VO({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"}))}const WO=w.forwardRef(VO),rm=WO;function HO({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const YO=w.forwardRef(HO),$u=YO;function qO({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const GO=w.forwardRef(qO),zu=GO;function KO({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const XO=w.forwardRef(KO),QO=XO;function ZO({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"}))}const JO=w.forwardRef(ZO),tS=JO;function eL({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.098 19.902a3.75 3.75 0 0 0 5.304 0l6.401-6.402M6.75 21A3.75 3.75 0 0 1 3 17.25V4.125C3 3.504 3.504 3 4.125 3h5.25c.621 0 1.125.504 1.125 1.125v4.072M6.75 21a3.75 3.75 0 0 0 3.75-3.75V8.197M6.75 21h13.125c.621 0 1.125-.504 1.125-1.125v-5.25c0-.621-.504-1.125-1.125-1.125h-4.072M10.5 8.197l2.88-2.88c.438-.439 1.15-.439 1.59 0l3.712 3.713c.44.44.44 1.152 0 1.59l-2.879 2.88M6.75 17.25h.008v.008H6.75v-.008Z"}))}const tL=w.forwardRef(eL),rL=tL;function sL({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"}))}const nL=w.forwardRef(sL),rS=nL;function iL({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const aL=w.forwardRef(iL),sm=aL;function oL({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const lL=w.forwardRef(oL),Go=lL;function cL({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const dL=w.forwardRef(cL),uL=dL;function hL({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const fL=w.forwardRef(hL),Cy=fL;function mL({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const xL=w.forwardRef(mL),sS=xL;function pL({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const gL=w.forwardRef(pL),or=gL;function vL({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const yL=w.forwardRef(vL),Ac=yL;function bL({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const wL=w.forwardRef(bL),Uu=wL;function kL({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const _L=w.forwardRef(kL),Wt=_L;function NL(){const{theme:t,toggleTheme:e}=cx();return o.jsxs("div",{className:"min-h-screen w-full bg-gradient-to-br from-primary-50 via-white to-secondary-50 dark:from-secondary-900 dark:via-secondary-800 dark:to-primary-900 flex",children:[o.jsxs("div",{className:"hidden lg:flex lg:w-1/2 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary-600 to-primary-800 opacity-90"}),o.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmZmZmYiIGZpbGwtb3BhY2l0eT0iMC4xIj48Y2lyY2xlIGN4PSIzMCIgY3k9IjMwIiByPSI0Ii8+PC9nPjwvZz48L3N2Zz4=')] opacity-20"}),o.jsx("div",{className:"relative z-10 flex flex-col justify-center items-center text-white p-8 xl:p-12",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 xl:w-20 h-16 xl:h-20 bg-white/20 rounded-2xl flex items-center justify-center mb-6 xl:mb-8 backdrop-blur-sm",children:o.jsx("svg",{className:"w-8 xl:w-10 h-8 xl:h-10 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})}),o.jsx("h1",{className:"text-3xl xl:text-4xl font-bold mb-3 xl:mb-4",children:"iaTrade CRM"}),o.jsx("p",{className:"text-lg xl:text-xl text-primary-100 mb-6 xl:mb-8",children:"Plataforma Profesional de Trading"}),o.jsxs("div",{className:"space-y-3 xl:space-y-4 text-left max-w-md",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-2 h-2 bg-success-400 rounded-full"}),o.jsx("span",{className:"text-sm xl:text-base text-primary-100",children:"Gestión avanzada de leads"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-2 h-2 bg-success-400 rounded-full"}),o.jsx("span",{className:"text-sm xl:text-base text-primary-100",children:"Cuentas de trading integradas"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-2 h-2 bg-success-400 rounded-full"}),o.jsx("span",{className:"text-sm xl:text-base text-primary-100",children:"Análisis en tiempo real"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-2 h-2 bg-success-400 rounded-full"}),o.jsx("span",{className:"text-sm xl:text-base text-primary-100",children:"Reportes profesionales"})]})]})]})})]}),o.jsx("div",{className:"flex-1 flex flex-col justify-center py-8 sm:py-12 px-4 sm:px-6 lg:px-16 xl:px-20 2xl:px-24 w-full",children:o.jsxs("div",{className:"mx-auto w-full max-w-sm lg:max-w-md xl:max-w-lg",children:[o.jsx("div",{className:"flex justify-end mb-6 sm:mb-8",children:o.jsx("button",{onClick:e,className:"p-2 rounded-lg bg-white dark:bg-secondary-800 shadow-soft border border-secondary-200 dark:border-secondary-700 hover:bg-secondary-50 dark:hover:bg-secondary-700 transition-colors","aria-label":`Cambiar a tema ${t==="light"?"oscuro":"claro"}`,children:t==="light"?o.jsx(eS,{className:"w-5 h-5 text-secondary-600"}):o.jsx(tS,{className:"w-5 h-5 text-secondary-400"})})}),o.jsxs("div",{className:"lg:hidden text-center mb-6 sm:mb-8",children:[o.jsx("div",{className:"w-14 sm:w-16 h-14 sm:h-16 bg-primary-600 rounded-2xl flex items-center justify-center mx-auto mb-3 sm:mb-4",children:o.jsx("svg",{className:"w-7 sm:w-8 h-7 sm:h-8 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})}),o.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-secondary-900 dark:text-white",children:"iaTrade CRM"})]}),o.jsx(oE,{})]})})]})}const pp=[{name:"Dashboard",href:"/dashboard",icon:_O,permission:null},{name:"Mi Resumen",href:"/employee-summary",icon:Lr,permission:null,roles:["sales","employee"]},{name:"Leads",href:"/leads",icon:Ac,permission:"leads.view"},{name:"Usuarios",href:"/users",icon:Cy,permission:"users.view"},{name:"Roles",href:"/roles",icon:$u,permission:"roles.view"},{name:"Mesas",href:"/desks",icon:Xs,permission:"desks.view"},{name:"Gestión de Estados",href:"/states",icon:ZE,permission:"manage_states"},{name:"Trading",icon:XD,permission:null,children:[{name:"Cuentas",href:"/trading",permission:"trading_accounts.view"},{name:"Depósitos/Retiros",href:"/deposits-withdrawals",permission:"deposits_withdrawals.view"}]}];function jL(){var m,x,p,g,v,b,y;const[t,e]=w.useState(!1),[r,s]=w.useState(!1),{user:n,logout:i,hasPermission:a}=ll(),{theme:l,toggleTheme:c}=cx(),d=al(),u=ol(),h=()=>{i(()=>u("/auth/login",{replace:!0}))},f=pp.map(k=>{if(k.permission&&!a(k.permission)||k.roles&&!k.roles.some(N=>{var E;return(E=n==null?void 0:n.roles)==null?void 0:E.includes(N)}))return null;if(k.children){const N=k.children.filter(E=>!E.permission||a(E.permission));return N.length>0?{...k,children:N}:null}return k}).filter(k=>k!==null);return o.jsxs("div",{className:"min-h-screen w-full bg-secondary-50 dark:bg-secondary-900",children:[o.jsxs("div",{className:`fixed inset-0 z-50 lg:hidden ${t?"block":"hidden"}`,children:[o.jsx("div",{className:"fixed inset-0 bg-secondary-600 bg-opacity-75",onClick:()=>e(!1)}),o.jsxs("div",{className:"fixed inset-y-0 left-0 flex w-full max-w-xs flex-col bg-white dark:bg-secondary-800 shadow-xl",children:[o.jsxs("div",{className:"flex h-16 items-center justify-between px-4 border-b border-secondary-200 dark:border-secondary-700",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",children:o.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})}),o.jsx("span",{className:"ml-2 text-lg font-semibold text-secondary-900 dark:text-white",children:"iaTrade CRM"})]}),o.jsx("button",{onClick:()=>e(!1),className:"p-2 rounded-md text-secondary-400 hover:text-secondary-500 hover:bg-secondary-100 dark:hover:bg-secondary-700",children:o.jsx(Wt,{className:"w-6 h-6"})})]}),o.jsx("nav",{className:"flex-1 px-4 py-4 space-y-1",children:f.map(k=>o.jsx("div",{children:k.children?o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center px-3 py-2 text-sm font-medium text-secondary-700 dark:text-secondary-300",children:[o.jsx(k.icon,{className:"w-5 h-5 mr-3"}),k.name]}),o.jsx("div",{className:"ml-8 space-y-1",children:k.children.map(N=>o.jsx(ma,{to:N.href,className:`block px-3 py-2 text-sm rounded-md transition-colors ${d.pathname===N.href?"bg-primary-100 text-primary-700 dark:bg-primary-900 dark:text-primary-200":"text-secondary-600 hover:bg-secondary-100 dark:text-secondary-400 dark:hover:bg-secondary-700"}`,children:N.name},N.name))})]}):o.jsxs(ma,{to:k.href,className:`flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ${d.pathname===k.href?"bg-primary-100 text-primary-700 dark:bg-primary-900 dark:text-primary-200":"text-secondary-700 hover:bg-secondary-100 dark:text-secondary-300 dark:hover:bg-secondary-700"}`,children:[o.jsx(k.icon,{className:"w-5 h-5 mr-3"}),k.name]})},k.name))})]})]}),o.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-64 lg:flex-col",children:o.jsxs("div",{className:"flex grow flex-col gap-y-5 overflow-y-auto bg-white dark:bg-secondary-800 border-r border-secondary-200 dark:border-secondary-700",children:[o.jsx("div",{className:"flex h-16 shrink-0 items-center px-6 border-b border-secondary-200 dark:border-secondary-700",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",children:o.jsx("span",{className:"text-white font-bold text-sm",children:"IT"})}),o.jsx("span",{className:"ml-3 text-lg font-semibold text-secondary-900 dark:text-white",children:"iaTrade CRM"})]})}),o.jsx("nav",{className:"flex flex-1 flex-col px-6",children:o.jsx("ul",{role:"list",className:"flex flex-1 flex-col gap-y-7",children:o.jsx("li",{children:o.jsx("ul",{role:"list",className:"-mx-2 space-y-1",children:f.map(k=>o.jsx("li",{children:k.children?o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center px-3 py-2 text-sm font-medium text-secondary-700 dark:text-secondary-300",children:[o.jsx(k.icon,{className:"w-5 h-5 mr-3"}),k.name]}),o.jsx("div",{className:"ml-8 space-y-1",children:k.children.map(N=>o.jsx(ma,{to:N.href,className:`block px-3 py-2 text-sm rounded-md transition-colors ${d.pathname===N.href?"bg-primary-100 text-primary-700 dark:bg-primary-900 dark:text-primary-200":"text-secondary-600 hover:bg-secondary-100 dark:text-secondary-400 dark:hover:bg-secondary-700"}`,children:N.name},N.name))})]}):o.jsxs(ma,{to:k.href,className:`flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ${d.pathname===k.href?"bg-primary-100 text-primary-700 dark:bg-primary-900 dark:text-primary-200":"text-secondary-700 hover:bg-secondary-100 dark:text-secondary-300 dark:hover:bg-secondary-700"}`,children:[o.jsx(k.icon,{className:"w-5 h-5 mr-3"}),k.name]})},k.name))})})})})]})}),o.jsxs("div",{className:"lg:pl-64 w-full",children:[o.jsx("header",{className:"bg-white dark:bg-secondary-800 shadow-sm border-b border-secondary-200 dark:border-secondary-700 w-full",children:o.jsxs("div",{className:"flex items-center justify-between h-16 px-4 sm:px-6 lg:px-8 w-full",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("button",{onClick:()=>e(!0),className:"lg:hidden p-2 rounded-md text-secondary-400 hover:text-secondary-500 hover:bg-secondary-100 dark:hover:bg-secondary-700",children:o.jsx(oD,{className:"w-6 h-6"})}),o.jsx("h1",{className:"ml-4 lg:ml-0 text-lg sm:text-xl font-semibold text-secondary-900 dark:text-white",children:((m=pp.find(k=>k.href===d.pathname))==null?void 0:m.name)||((g=(p=(x=pp.find(k=>{var N;return(N=k.children)==null?void 0:N.some(E=>E.href===d.pathname)}))==null?void 0:x.children)==null?void 0:p.find(k=>k.href===d.pathname))==null?void 0:g.name)||"Dashboard"})]}),o.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[o.jsx("button",{onClick:c,className:"p-2 rounded-lg bg-secondary-100 dark:bg-secondary-700 hover:bg-secondary-200 dark:hover:bg-secondary-600 transition-colors","aria-label":`Cambiar a tema ${l==="light"?"oscuro":"claro"}`,children:l==="light"?o.jsx(eS,{className:"w-5 h-5 text-secondary-600 dark:text-secondary-400"}):o.jsx(tS,{className:"w-5 h-5 text-secondary-600 dark:text-secondary-400"})}),o.jsxs("button",{className:"p-2 rounded-lg bg-secondary-100 dark:bg-secondary-700 hover:bg-secondary-200 dark:hover:bg-secondary-600 transition-colors relative",children:[o.jsx(dD,{className:"w-5 h-5 text-secondary-600 dark:text-secondary-400"}),o.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-danger-500 rounded-full text-xs text-white flex items-center justify-center",children:"3"})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>s(!r),className:"flex items-center space-x-2 sm:space-x-3 p-2 rounded-lg hover:bg-secondary-100 dark:hover:bg-secondary-700 transition-colors",children:[o.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center",children:o.jsxs("span",{className:"text-sm font-medium text-white",children:[(v=n==null?void 0:n.first_name)==null?void 0:v.charAt(0),(b=n==null?void 0:n.last_name)==null?void 0:b.charAt(0)]})}),o.jsxs("div",{className:"hidden sm:block text-left",children:[o.jsxs("p",{className:"text-sm font-medium text-secondary-900 dark:text-white",children:[n==null?void 0:n.first_name," ",n==null?void 0:n.last_name]}),o.jsx("p",{className:"text-xs text-secondary-500 dark:text-secondary-400",children:((y=n==null?void 0:n.roles)==null?void 0:y[0])||"Sin rol"})]}),o.jsx(vi,{className:"w-4 h-4 text-secondary-400"})]}),r&&o.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-secondary-800 rounded-lg shadow-lg border border-secondary-200 dark:border-secondary-700 py-1 z-50",children:o.jsxs("button",{onClick:h,className:"flex items-center w-full px-4 py-2 text-sm text-secondary-700 dark:text-secondary-300 hover:bg-secondary-100 dark:hover:bg-secondary-700",children:[o.jsx(z8,{className:"w-4 h-4 mr-3"}),"Cerrar Sesión"]})})]})]})]})}),o.jsx("main",{className:"p-4 sm:p-6 lg:p-8 w-full",children:o.jsx(oE,{})})]})]})}var Fh=t=>t.type==="checkbox",xo=t=>t instanceof Date,Qr=t=>t==null;const nS=t=>typeof t=="object";var qt=t=>!Qr(t)&&!Array.isArray(t)&&nS(t)&&!xo(t),EL=t=>qt(t)&&t.target?Fh(t.target)?t.target.checked:t.target.value:t,SL=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,CL=(t,e)=>t.has(SL(e)),TL=t=>{const e=t.constructor&&t.constructor.prototype;return qt(e)&&e.hasOwnProperty("isPrototypeOf")},Ty=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function hr(t){let e;const r=Array.isArray(t),s=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(Ty&&(t instanceof Blob||s))&&(r||qt(t)))if(e=r?[]:Object.create(Object.getPrototypeOf(t)),!r&&!TL(t))e=t;else for(const n in t)t.hasOwnProperty(n)&&(e[n]=hr(t[n]));else return t;return e}var hx=t=>/^\w*$/.test(t),Jt=t=>t===void 0,Ay=t=>Array.isArray(t)?t.filter(Boolean):[],Fy=t=>Ay(t.replace(/["|']|\]/g,"").split(/\.|\[/)),De=(t,e,r)=>{if(!e||!qt(t))return r;const s=(hx(e)?[e]:Fy(e)).reduce((n,i)=>Qr(n)?n:n[i],t);return Jt(s)||s===t?Jt(t[e])?r:t[e]:s},Ln=t=>typeof t=="boolean",Nt=(t,e,r)=>{let s=-1;const n=hx(e)?[e]:Fy(e),i=n.length,a=i-1;for(;++s<i;){const l=n[s];let c=r;if(s!==a){const d=t[l];c=qt(d)||Array.isArray(d)?d:isNaN(+n[s+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=c,t=t[l]}};const O2={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},mn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},si={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},AL=Ie.createContext(null);AL.displayName="HookFormContext";var FL=(t,e,r,s=!0)=>{const n={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(n,i,{get:()=>{const a=i;return e._proxyFormState[a]!==mn.all&&(e._proxyFormState[a]=!s||mn.all),r&&(r[a]=!0),t[a]}});return n};const PL=typeof window<"u"?Ie.useLayoutEffect:Ie.useEffect;var Vn=t=>typeof t=="string",ML=(t,e,r,s,n)=>Vn(t)?(s&&e.watch.add(t),De(r,t,n)):Array.isArray(t)?t.map(i=>(s&&e.watch.add(i),De(r,i))):(s&&(e.watchAll=!0),r),P1=t=>Qr(t)||!nS(t);function Zi(t,e,r=new WeakSet){if(P1(t)||P1(e))return t===e;if(xo(t)&&xo(e))return t.getTime()===e.getTime();const s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const i of s){const a=t[i];if(!n.includes(i))return!1;if(i!=="ref"){const l=e[i];if(xo(a)&&xo(l)||qt(a)&&qt(l)||Array.isArray(a)&&Array.isArray(l)?!Zi(a,l,r):a!==l)return!1}}return!0}var RL=(t,e,r,s,n)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[s]:n||!0}}:{},Jd=t=>Array.isArray(t)?t:[t],L2=()=>{let t=[];return{get observers(){return t},next:n=>{for(const i of t)i.next&&i.next(n)},subscribe:n=>(t.push(n),{unsubscribe:()=>{t=t.filter(i=>i!==n)}}),unsubscribe:()=>{t=[]}}},us=t=>qt(t)&&!Object.keys(t).length,Py=t=>t.type==="file",xn=t=>typeof t=="function",nm=t=>{if(!Ty)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},iS=t=>t.type==="select-multiple",My=t=>t.type==="radio",DL=t=>My(t)||Fh(t),gp=t=>nm(t)&&t.isConnected;function OL(t,e){const r=e.slice(0,-1).length;let s=0;for(;s<r;)t=Jt(t)?s++:t[e[s++]];return t}function LL(t){for(const e in t)if(t.hasOwnProperty(e)&&!Jt(t[e]))return!1;return!0}function Xt(t,e){const r=Array.isArray(e)?e:hx(e)?[e]:Fy(e),s=r.length===1?t:OL(t,r),n=r.length-1,i=r[n];return s&&delete s[i],n!==0&&(qt(s)&&us(s)||Array.isArray(s)&&LL(s))&&Xt(t,r.slice(0,-1)),t}var aS=t=>{for(const e in t)if(xn(t[e]))return!0;return!1};function im(t,e={}){const r=Array.isArray(t);if(qt(t)||r)for(const s in t)Array.isArray(t[s])||qt(t[s])&&!aS(t[s])?(e[s]=Array.isArray(t[s])?[]:{},im(t[s],e[s])):Qr(t[s])||(e[s]=!0);return e}function oS(t,e,r){const s=Array.isArray(t);if(qt(t)||s)for(const n in t)Array.isArray(t[n])||qt(t[n])&&!aS(t[n])?Jt(e)||P1(r[n])?r[n]=Array.isArray(t[n])?im(t[n],[]):{...im(t[n])}:oS(t[n],Qr(e)?{}:e[n],r[n]):r[n]=!Zi(t[n],e[n]);return r}var hd=(t,e)=>oS(t,e,im(e));const I2={value:!1,isValid:!1},B2={value:!0,isValid:!0};var lS=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Jt(t[0].attributes.value)?Jt(t[0].value)||t[0].value===""?B2:{value:t[0].value,isValid:!0}:B2:I2}return I2},cS=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:s})=>Jt(t)?t:e?t===""?NaN:t&&+t:r&&Vn(t)?new Date(t):s?s(t):t;const $2={isValid:!1,value:null};var dS=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,$2):$2;function z2(t){const e=t.ref;return Py(e)?e.files:My(e)?dS(t.refs).value:iS(e)?[...e.selectedOptions].map(({value:r})=>r):Fh(e)?lS(t.refs).value:cS(Jt(e.value)?t.ref.value:e.value,t)}var IL=(t,e,r,s)=>{const n={};for(const i of t){const a=De(e,i);a&&Nt(n,i,a._f)}return{criteriaMode:r,names:[...t],fields:n,shouldUseNativeValidation:s}},am=t=>t instanceof RegExp,fd=t=>Jt(t)?t:am(t)?t.source:qt(t)?am(t.value)?t.value.source:t.value:t,U2=t=>({isOnSubmit:!t||t===mn.onSubmit,isOnBlur:t===mn.onBlur,isOnChange:t===mn.onChange,isOnAll:t===mn.all,isOnTouch:t===mn.onTouched});const V2="AsyncFunction";var BL=t=>!!t&&!!t.validate&&!!(xn(t.validate)&&t.validate.constructor.name===V2||qt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===V2)),$L=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),W2=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(s=>t.startsWith(s)&&/^\.\w+/.test(t.slice(s.length))));const eu=(t,e,r,s)=>{for(const n of r||Object.keys(t)){const i=De(t,n);if(i){const{_f:a,...l}=i;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],n)&&!s)return!0;if(a.ref&&e(a.ref,a.name)&&!s)return!0;if(eu(l,e))break}else if(qt(l)&&eu(l,e))break}}};function H2(t,e,r){const s=De(t,r);if(s||hx(r))return{error:s,name:r};const n=r.split(".");for(;n.length;){const i=n.join("."),a=De(e,i),l=De(t,i);if(a&&!Array.isArray(a)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};n.pop()}return{name:r}}var zL=(t,e,r,s)=>{r(t);const{name:n,...i}=t;return us(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(a=>e[a]===(!s||mn.all))},UL=(t,e,r)=>!t||!e||t===e||Jd(t).some(s=>s&&(r?s===e:s.startsWith(e)||e.startsWith(s))),VL=(t,e,r,s,n)=>n.isOnAll?!1:!r&&n.isOnTouch?!(e||t):(r?s.isOnBlur:n.isOnBlur)?!t:(r?s.isOnChange:n.isOnChange)?t:!0,WL=(t,e)=>!Ay(De(t,e)).length&&Xt(t,e),HL=(t,e,r)=>{const s=Jd(De(t,r));return Nt(s,"root",e[r]),Nt(t,r,s),t},pf=t=>Vn(t);function Y2(t,e,r="validate"){if(pf(t)||Array.isArray(t)&&t.every(pf)||Ln(t)&&!t)return{type:r,message:pf(t)?t:"",ref:e}}var yl=t=>qt(t)&&!am(t)?t:{value:t,message:""},q2=async(t,e,r,s,n,i)=>{const{ref:a,refs:l,required:c,maxLength:d,minLength:u,min:h,max:f,pattern:m,validate:x,name:p,valueAsNumber:g,mount:v}=t._f,b=De(r,p);if(!v||e.has(p))return{};const y=l?l[0]:a,k=P=>{n&&y.reportValidity&&(y.setCustomValidity(Ln(P)?"":P||""),y.reportValidity())},N={},E=My(a),j=Fh(a),_=E||j,S=(g||Py(a))&&Jt(a.value)&&Jt(b)||nm(a)&&a.value===""||b===""||Array.isArray(b)&&!b.length,C=RL.bind(null,p,s,N),F=(P,B,Q,D=si.maxLength,I=si.minLength)=>{const te=P?B:Q;N[p]={type:P?D:I,message:te,ref:a,...C(P?D:I,te)}};if(i?!Array.isArray(b)||!b.length:c&&(!_&&(S||Qr(b))||Ln(b)&&!b||j&&!lS(l).isValid||E&&!dS(l).isValid)){const{value:P,message:B}=pf(c)?{value:!!c,message:c}:yl(c);if(P&&(N[p]={type:si.required,message:B,ref:y,...C(si.required,B)},!s))return k(B),N}if(!S&&(!Qr(h)||!Qr(f))){let P,B;const Q=yl(f),D=yl(h);if(!Qr(b)&&!isNaN(b)){const I=a.valueAsNumber||b&&+b;Qr(Q.value)||(P=I>Q.value),Qr(D.value)||(B=I<D.value)}else{const I=a.valueAsDate||new Date(b),te=K=>new Date(new Date().toDateString()+" "+K),re=a.type=="time",W=a.type=="week";Vn(Q.value)&&b&&(P=re?te(b)>te(Q.value):W?b>Q.value:I>new Date(Q.value)),Vn(D.value)&&b&&(B=re?te(b)<te(D.value):W?b<D.value:I<new Date(D.value))}if((P||B)&&(F(!!P,Q.message,D.message,si.max,si.min),!s))return k(N[p].message),N}if((d||u)&&!S&&(Vn(b)||i&&Array.isArray(b))){const P=yl(d),B=yl(u),Q=!Qr(P.value)&&b.length>+P.value,D=!Qr(B.value)&&b.length<+B.value;if((Q||D)&&(F(Q,P.message,B.message),!s))return k(N[p].message),N}if(m&&!S&&Vn(b)){const{value:P,message:B}=yl(m);if(am(P)&&!b.match(P)&&(N[p]={type:si.pattern,message:B,ref:a,...C(si.pattern,B)},!s))return k(B),N}if(x){if(xn(x)){const P=await x(b,r),B=Y2(P,y);if(B&&(N[p]={...B,...C(si.validate,B.message)},!s))return k(B.message),N}else if(qt(x)){let P={};for(const B in x){if(!us(P)&&!s)break;const Q=Y2(await x[B](b,r),y,B);Q&&(P={...Q,...C(B,Q.message)},k(Q.message),s&&(N[p]=P))}if(!us(P)&&(N[p]={ref:y,...P},!s))return N}}return k(!0),N};const YL={mode:mn.onSubmit,reValidateMode:mn.onChange,shouldFocusError:!0};function qL(t={}){let e={...YL,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:xn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},s={},n=qt(e.defaultValues)||qt(e.values)?hr(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:hr(n),a={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...u};const f={array:L2(),state:L2()},m=e.criteriaMode===mn.all,x=q=>J=>{clearTimeout(d),d=setTimeout(q,J)},p=async q=>{if(!e.disabled&&(u.isValid||h.isValid||q)){const J=e.resolver?us((await j()).errors):await S(s,!0);J!==r.isValid&&f.state.next({isValid:J})}},g=(q,J)=>{!e.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((q||Array.from(l.mount)).forEach(ue=>{ue&&(J?Nt(r.validatingFields,ue,J):Xt(r.validatingFields,ue))}),f.state.next({validatingFields:r.validatingFields,isValidating:!us(r.validatingFields)}))},v=(q,J=[],ue,Ne,ge=!0,pe=!0)=>{if(Ne&&ue&&!e.disabled){if(a.action=!0,pe&&Array.isArray(De(s,q))){const Pe=ue(De(s,q),Ne.argA,Ne.argB);ge&&Nt(s,q,Pe)}if(pe&&Array.isArray(De(r.errors,q))){const Pe=ue(De(r.errors,q),Ne.argA,Ne.argB);ge&&Nt(r.errors,q,Pe),WL(r.errors,q)}if((u.touchedFields||h.touchedFields)&&pe&&Array.isArray(De(r.touchedFields,q))){const Pe=ue(De(r.touchedFields,q),Ne.argA,Ne.argB);ge&&Nt(r.touchedFields,q,Pe)}(u.dirtyFields||h.dirtyFields)&&(r.dirtyFields=hd(n,i)),f.state.next({name:q,isDirty:F(q,J),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Nt(i,q,J)},b=(q,J)=>{Nt(r.errors,q,J),f.state.next({errors:r.errors})},y=q=>{r.errors=q,f.state.next({errors:r.errors,isValid:!1})},k=(q,J,ue,Ne)=>{const ge=De(s,q);if(ge){const pe=De(i,q,Jt(ue)?De(n,q):ue);Jt(pe)||Ne&&Ne.defaultChecked||J?Nt(i,q,J?pe:z2(ge._f)):Q(q,pe),a.mount&&p()}},N=(q,J,ue,Ne,ge)=>{let pe=!1,Pe=!1;const Qe={name:q};if(!e.disabled){if(!ue||Ne){(u.isDirty||h.isDirty)&&(Pe=r.isDirty,r.isDirty=Qe.isDirty=F(),pe=Pe!==Qe.isDirty);const Ue=Zi(De(n,q),J);Pe=!!De(r.dirtyFields,q),Ue?Xt(r.dirtyFields,q):Nt(r.dirtyFields,q,!0),Qe.dirtyFields=r.dirtyFields,pe=pe||(u.dirtyFields||h.dirtyFields)&&Pe!==!Ue}if(ue){const Ue=De(r.touchedFields,q);Ue||(Nt(r.touchedFields,q,ue),Qe.touchedFields=r.touchedFields,pe=pe||(u.touchedFields||h.touchedFields)&&Ue!==ue)}pe&&ge&&f.state.next(Qe)}return pe?Qe:{}},E=(q,J,ue,Ne)=>{const ge=De(r.errors,q),pe=(u.isValid||h.isValid)&&Ln(J)&&r.isValid!==J;if(e.delayError&&ue?(c=x(()=>b(q,ue)),c(e.delayError)):(clearTimeout(d),c=null,ue?Nt(r.errors,q,ue):Xt(r.errors,q)),(ue?!Zi(ge,ue):ge)||!us(Ne)||pe){const Pe={...Ne,...pe&&Ln(J)?{isValid:J}:{},errors:r.errors,name:q};r={...r,...Pe},f.state.next(Pe)}},j=async q=>{g(q,!0);const J=await e.resolver(i,e.context,IL(q||l.mount,s,e.criteriaMode,e.shouldUseNativeValidation));return g(q),J},_=async q=>{const{errors:J}=await j(q);if(q)for(const ue of q){const Ne=De(J,ue);Ne?Nt(r.errors,ue,Ne):Xt(r.errors,ue)}else r.errors=J;return J},S=async(q,J,ue={valid:!0})=>{for(const Ne in q){const ge=q[Ne];if(ge){const{_f:pe,...Pe}=ge;if(pe){const Qe=l.array.has(pe.name),Ue=ge._f&&BL(ge._f);Ue&&u.validatingFields&&g([Ne],!0);const ft=await q2(ge,l.disabled,i,m,e.shouldUseNativeValidation&&!J,Qe);if(Ue&&u.validatingFields&&g([Ne]),ft[pe.name]&&(ue.valid=!1,J))break;!J&&(De(ft,pe.name)?Qe?HL(r.errors,ft,pe.name):Nt(r.errors,pe.name,ft[pe.name]):Xt(r.errors,pe.name))}!us(Pe)&&await S(Pe,J,ue)}}return ue.valid},C=()=>{for(const q of l.unMount){const J=De(s,q);J&&(J._f.refs?J._f.refs.every(ue=>!gp(ue)):!gp(J._f.ref))&&ie(q)}l.unMount=new Set},F=(q,J)=>!e.disabled&&(q&&J&&Nt(i,q,J),!Zi(K(),n)),P=(q,J,ue)=>ML(q,l,{...a.mount?i:Jt(J)?n:Vn(q)?{[q]:J}:J},ue,J),B=q=>Ay(De(a.mount?i:n,q,e.shouldUnregister?De(n,q,[]):[])),Q=(q,J,ue={})=>{const Ne=De(s,q);let ge=J;if(Ne){const pe=Ne._f;pe&&(!pe.disabled&&Nt(i,q,cS(J,pe)),ge=nm(pe.ref)&&Qr(J)?"":J,iS(pe.ref)?[...pe.ref.options].forEach(Pe=>Pe.selected=ge.includes(Pe.value)):pe.refs?Fh(pe.ref)?pe.refs.forEach(Pe=>{(!Pe.defaultChecked||!Pe.disabled)&&(Array.isArray(ge)?Pe.checked=!!ge.find(Qe=>Qe===Pe.value):Pe.checked=ge===Pe.value||!!ge)}):pe.refs.forEach(Pe=>Pe.checked=Pe.value===ge):Py(pe.ref)?pe.ref.value="":(pe.ref.value=ge,pe.ref.type||f.state.next({name:q,values:hr(i)})))}(ue.shouldDirty||ue.shouldTouch)&&N(q,ge,ue.shouldTouch,ue.shouldDirty,!0),ue.shouldValidate&&W(q)},D=(q,J,ue)=>{for(const Ne in J){if(!J.hasOwnProperty(Ne))return;const ge=J[Ne],pe=q+"."+Ne,Pe=De(s,pe);(l.array.has(q)||qt(ge)||Pe&&!Pe._f)&&!xo(ge)?D(pe,ge,ue):Q(pe,ge,ue)}},I=(q,J,ue={})=>{const Ne=De(s,q),ge=l.array.has(q),pe=hr(J);Nt(i,q,pe),ge?(f.array.next({name:q,values:hr(i)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&ue.shouldDirty&&f.state.next({name:q,dirtyFields:hd(n,i),isDirty:F(q,pe)})):Ne&&!Ne._f&&!Qr(pe)?D(q,pe,ue):Q(q,pe,ue),W2(q,l)&&f.state.next({...r,name:q}),f.state.next({name:a.mount?q:void 0,values:hr(i)})},te=async q=>{a.mount=!0;const J=q.target;let ue=J.name,Ne=!0;const ge=De(s,ue),pe=Ue=>{Ne=Number.isNaN(Ue)||xo(Ue)&&isNaN(Ue.getTime())||Zi(Ue,De(i,ue,Ue))},Pe=U2(e.mode),Qe=U2(e.reValidateMode);if(ge){let Ue,ft;const ee=J.type?z2(ge._f):EL(q),Le=q.type===O2.BLUR||q.type===O2.FOCUS_OUT,vt=!$L(ge._f)&&!e.resolver&&!De(r.errors,ue)&&!ge._f.deps||VL(Le,De(r.touchedFields,ue),r.isSubmitted,Qe,Pe),ut=W2(ue,l,Le);Nt(i,ue,ee),Le?(!J||!J.readOnly)&&(ge._f.onBlur&&ge._f.onBlur(q),c&&c(0)):ge._f.onChange&&ge._f.onChange(q);const sn=N(ue,ee,Le),Wh=!us(sn)||ut;if(!Le&&f.state.next({name:ue,type:q.type,values:hr(i)}),vt)return(u.isValid||h.isValid)&&(e.mode==="onBlur"?Le&&p():Le||p()),Wh&&f.state.next({name:ue,...ut?{}:sn});if(!Le&&ut&&f.state.next({...r}),e.resolver){const{errors:Hh}=await j([ue]);if(pe(ee),Ne){const Dx=H2(r.errors,s,ue),Zc=H2(Hh,s,Dx.name||ue);Ue=Zc.error,ue=Zc.name,ft=us(Hh)}}else g([ue],!0),Ue=(await q2(ge,l.disabled,i,m,e.shouldUseNativeValidation))[ue],g([ue]),pe(ee),Ne&&(Ue?ft=!1:(u.isValid||h.isValid)&&(ft=await S(s,!0)));Ne&&(ge._f.deps&&W(ge._f.deps),E(ue,ft,Ue,sn))}},re=(q,J)=>{if(De(r.errors,J)&&q.focus)return q.focus(),1},W=async(q,J={})=>{let ue,Ne;const ge=Jd(q);if(e.resolver){const pe=await _(Jt(q)?q:ge);ue=us(pe),Ne=q?!ge.some(Pe=>De(pe,Pe)):ue}else q?(Ne=(await Promise.all(ge.map(async pe=>{const Pe=De(s,pe);return await S(Pe&&Pe._f?{[pe]:Pe}:Pe)}))).every(Boolean),!(!Ne&&!r.isValid)&&p()):Ne=ue=await S(s);return f.state.next({...!Vn(q)||(u.isValid||h.isValid)&&ue!==r.isValid?{}:{name:q},...e.resolver||!q?{isValid:ue}:{},errors:r.errors}),J.shouldFocus&&!Ne&&eu(s,re,q?ge:l.mount),Ne},K=q=>{const J={...a.mount?i:n};return Jt(q)?J:Vn(q)?De(J,q):q.map(ue=>De(J,ue))},Z=(q,J)=>({invalid:!!De((J||r).errors,q),isDirty:!!De((J||r).dirtyFields,q),error:De((J||r).errors,q),isValidating:!!De(r.validatingFields,q),isTouched:!!De((J||r).touchedFields,q)}),M=q=>{q&&Jd(q).forEach(J=>Xt(r.errors,J)),f.state.next({errors:q?r.errors:{}})},X=(q,J,ue)=>{const Ne=(De(s,q,{_f:{}})._f||{}).ref,ge=De(r.errors,q)||{},{ref:pe,message:Pe,type:Qe,...Ue}=ge;Nt(r.errors,q,{...Ue,...J,ref:Ne}),f.state.next({name:q,errors:r.errors,isValid:!1}),ue&&ue.shouldFocus&&Ne&&Ne.focus&&Ne.focus()},V=(q,J)=>xn(q)?f.state.subscribe({next:ue=>"values"in ue&&q(P(void 0,J),ue)}):P(q,J,!0),Y=q=>f.state.subscribe({next:J=>{UL(q.name,J.name,q.exact)&&zL(J,q.formState||u,Ee,q.reRenderRoot)&&q.callback({values:{...i},...r,...J,defaultValues:n})}}).unsubscribe,H=q=>(a.mount=!0,h={...h,...q.formState},Y({...q,formState:h})),ie=(q,J={})=>{for(const ue of q?Jd(q):l.mount)l.mount.delete(ue),l.array.delete(ue),J.keepValue||(Xt(s,ue),Xt(i,ue)),!J.keepError&&Xt(r.errors,ue),!J.keepDirty&&Xt(r.dirtyFields,ue),!J.keepTouched&&Xt(r.touchedFields,ue),!J.keepIsValidating&&Xt(r.validatingFields,ue),!e.shouldUnregister&&!J.keepDefaultValue&&Xt(n,ue);f.state.next({values:hr(i)}),f.state.next({...r,...J.keepDirty?{isDirty:F()}:{}}),!J.keepIsValid&&p()},de=({disabled:q,name:J})=>{(Ln(q)&&a.mount||q||l.disabled.has(J))&&(q?l.disabled.add(J):l.disabled.delete(J))},xe=(q,J={})=>{let ue=De(s,q);const Ne=Ln(J.disabled)||Ln(e.disabled);return Nt(s,q,{...ue||{},_f:{...ue&&ue._f?ue._f:{ref:{name:q}},name:q,mount:!0,...J}}),l.mount.add(q),ue?de({disabled:Ln(J.disabled)?J.disabled:e.disabled,name:q}):k(q,!0,J.value),{...Ne?{disabled:J.disabled||e.disabled}:{},...e.progressive?{required:!!J.required,min:fd(J.min),max:fd(J.max),minLength:fd(J.minLength),maxLength:fd(J.maxLength),pattern:fd(J.pattern)}:{},name:q,onChange:te,onBlur:te,ref:ge=>{if(ge){xe(q,J),ue=De(s,q);const pe=Jt(ge.value)&&ge.querySelectorAll&&ge.querySelectorAll("input,select,textarea")[0]||ge,Pe=DL(pe),Qe=ue._f.refs||[];if(Pe?Qe.find(Ue=>Ue===pe):pe===ue._f.ref)return;Nt(s,q,{_f:{...ue._f,...Pe?{refs:[...Qe.filter(gp),pe,...Array.isArray(De(n,q))?[{}]:[]],ref:{type:pe.type,name:q}}:{ref:pe}}}),k(q,!1,void 0,pe)}else ue=De(s,q,{}),ue._f&&(ue._f.mount=!1),(e.shouldUnregister||J.shouldUnregister)&&!(CL(l.array,q)&&a.action)&&l.unMount.add(q)}}},le=()=>e.shouldFocusError&&eu(s,re,l.mount),he=q=>{Ln(q)&&(f.state.next({disabled:q}),eu(s,(J,ue)=>{const Ne=De(s,ue);Ne&&(J.disabled=Ne._f.disabled||q,Array.isArray(Ne._f.refs)&&Ne._f.refs.forEach(ge=>{ge.disabled=Ne._f.disabled||q}))},0,!1))},A=(q,J)=>async ue=>{let Ne;ue&&(ue.preventDefault&&ue.preventDefault(),ue.persist&&ue.persist());let ge=hr(i);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:pe,values:Pe}=await j();r.errors=pe,ge=hr(Pe)}else await S(s);if(l.disabled.size)for(const pe of l.disabled)Xt(ge,pe);if(Xt(r.errors,"root"),us(r.errors)){f.state.next({errors:{}});try{await q(ge,ue)}catch(pe){Ne=pe}}else J&&await J({...r.errors},ue),le(),setTimeout(le);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:us(r.errors)&&!Ne,submitCount:r.submitCount+1,errors:r.errors}),Ne)throw Ne},Ce=(q,J={})=>{De(s,q)&&(Jt(J.defaultValue)?I(q,hr(De(n,q))):(I(q,J.defaultValue),Nt(n,q,hr(J.defaultValue))),J.keepTouched||Xt(r.touchedFields,q),J.keepDirty||(Xt(r.dirtyFields,q),r.isDirty=J.defaultValue?F(q,hr(De(n,q))):F()),J.keepError||(Xt(r.errors,q),u.isValid&&p()),f.state.next({...r}))},be=(q,J={})=>{const ue=q?hr(q):n,Ne=hr(ue),ge=us(q),pe=ge?n:Ne;if(J.keepDefaultValues||(n=ue),!J.keepValues){if(J.keepDirtyValues){const Pe=new Set([...l.mount,...Object.keys(hd(n,i))]);for(const Qe of Array.from(Pe))De(r.dirtyFields,Qe)?Nt(pe,Qe,De(i,Qe)):I(Qe,De(pe,Qe))}else{if(Ty&&Jt(q))for(const Pe of l.mount){const Qe=De(s,Pe);if(Qe&&Qe._f){const Ue=Array.isArray(Qe._f.refs)?Qe._f.refs[0]:Qe._f.ref;if(nm(Ue)){const ft=Ue.closest("form");if(ft){ft.reset();break}}}}if(J.keepFieldsRef)for(const Pe of l.mount)I(Pe,De(pe,Pe));else s={}}i=e.shouldUnregister?J.keepDefaultValues?hr(n):{}:hr(pe),f.array.next({values:{...pe}}),f.state.next({values:{...pe}})}l={mount:J.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!u.isValid||!!J.keepIsValid||!!J.keepDirtyValues,a.watch=!!e.shouldUnregister,f.state.next({submitCount:J.keepSubmitCount?r.submitCount:0,isDirty:ge?!1:J.keepDirty?r.isDirty:!!(J.keepDefaultValues&&!Zi(q,n)),isSubmitted:J.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ge?{}:J.keepDirtyValues?J.keepDefaultValues&&i?hd(n,i):r.dirtyFields:J.keepDefaultValues&&q?hd(n,q):J.keepDirty?r.dirtyFields:{},touchedFields:J.keepTouched?r.touchedFields:{},errors:J.keepErrors?r.errors:{},isSubmitSuccessful:J.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},ze=(q,J)=>be(xn(q)?q(i):q,J),Be=(q,J={})=>{const ue=De(s,q),Ne=ue&&ue._f;if(Ne){const ge=Ne.refs?Ne.refs[0]:Ne.ref;ge.focus&&(ge.focus(),J.shouldSelect&&xn(ge.select)&&ge.select())}},Ee=q=>{r={...r,...q}},ur={control:{register:xe,unregister:ie,getFieldState:Z,handleSubmit:A,setError:X,_subscribe:Y,_runSchema:j,_focusError:le,_getWatch:P,_getDirty:F,_setValid:p,_setFieldArray:v,_setDisabledField:de,_setErrors:y,_getFieldArray:B,_reset:be,_resetDefaultValues:()=>xn(e.defaultValues)&&e.defaultValues().then(q=>{ze(q,e.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:C,_disableForm:he,_subjects:f,_proxyFormState:u,get _fields(){return s},get _formValues(){return i},get _state(){return a},set _state(q){a=q},get _defaultValues(){return n},get _names(){return l},set _names(q){l=q},get _formState(){return r},get _options(){return e},set _options(q){e={...e,...q}}},subscribe:H,trigger:W,register:xe,handleSubmit:A,watch:V,setValue:I,getValues:K,reset:ze,resetField:Ce,clearErrors:M,unregister:ie,setError:X,setFocus:Be,getFieldState:Z};return{...ur,formControl:ur}}function om(t={}){const e=Ie.useRef(void 0),r=Ie.useRef(void 0),[s,n]=Ie.useState({isDirty:!1,isValidating:!1,isLoading:xn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:xn(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:s},t.defaultValues&&!xn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:a,...l}=qL(t);e.current={...l,formState:s}}const i=e.current.control;return i._options=t,PL(()=>{const a=i._subscribe({formState:i._proxyFormState,callback:()=>n({...i._formState}),reRenderRoot:!0});return n(l=>({...l,isReady:!0})),i._formState.isReady=!0,a},[i]),Ie.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),Ie.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),Ie.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),Ie.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),Ie.useEffect(()=>{if(i._proxyFormState.isDirty){const a=i._getDirty();a!==s.isDirty&&i._subjects.state.next({isDirty:a})}},[i,s.isDirty]),Ie.useEffect(()=>{t.values&&!Zi(t.values,r.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=t.values,n(a=>({...a}))):i._resetDefaultValues()},[i,t.values]),Ie.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=FL(s,i),e.current}function uS(t){var e,r,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(e=0;e<n;e++)t[e]&&(r=uS(t[e]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}function GL(){for(var t,e,r=0,s="",n=arguments.length;r<n;r++)(t=arguments[r])&&(e=uS(t))&&(s&&(s+=" "),s+=e);return s}const Ry="-",KL=t=>{const e=QL(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:a=>{const l=a.split(Ry);return l[0]===""&&l.length!==1&&l.shift(),hS(l,e)||XL(a)},getConflictingClassGroupIds:(a,l)=>{const c=r[a]||[];return l&&s[a]?[...c,...s[a]]:c}}},hS=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const r=t[0],s=e.nextPart.get(r),n=s?hS(t.slice(1),s):void 0;if(n)return n;if(e.validators.length===0)return;const i=t.join(Ry);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},G2=/^\[(.+)\]$/,XL=t=>{if(G2.test(t)){const e=G2.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},QL=t=>{const{theme:e,prefix:r}=t,s={nextPart:new Map,validators:[]};return JL(Object.entries(t.classGroups),r).forEach(([i,a])=>{M1(a,s,i,e)}),s},M1=(t,e,r,s)=>{t.forEach(n=>{if(typeof n=="string"){const i=n===""?e:K2(e,n);i.classGroupId=r;return}if(typeof n=="function"){if(ZL(n)){M1(n(s),e,r,s);return}e.validators.push({validator:n,classGroupId:r});return}Object.entries(n).forEach(([i,a])=>{M1(a,K2(e,i),r,s)})})},K2=(t,e)=>{let r=t;return e.split(Ry).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},ZL=t=>t.isThemeGetter,JL=(t,e)=>e?t.map(([r,s])=>{const n=s.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[r,n]}):t,e7=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,s=new Map;const n=(i,a)=>{r.set(i,a),e++,e>t&&(e=0,s=r,r=new Map)};return{get(i){let a=r.get(i);if(a!==void 0)return a;if((a=s.get(i))!==void 0)return n(i,a),a},set(i,a){r.has(i)?r.set(i,a):n(i,a)}}},fS="!",t7=t=>{const{separator:e,experimentalParseClassName:r}=t,s=e.length===1,n=e[0],i=e.length,a=l=>{const c=[];let d=0,u=0,h;for(let g=0;g<l.length;g++){let v=l[g];if(d===0){if(v===n&&(s||l.slice(g,g+i)===e)){c.push(l.slice(u,g)),u=g+i;continue}if(v==="/"){h=g;continue}}v==="["?d++:v==="]"&&d--}const f=c.length===0?l:l.substring(u),m=f.startsWith(fS),x=m?f.substring(1):f,p=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:x,maybePostfixModifierPosition:p}};return r?l=>r({className:l,parseClassName:a}):a},r7=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(s=>{s[0]==="["?(e.push(...r.sort(),s),r=[]):r.push(s)}),e.push(...r.sort()),e},s7=t=>({cache:e7(t.cacheSize),parseClassName:t7(t),...KL(t)}),n7=/\s+/,i7=(t,e)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:n}=e,i=[],a=t.trim().split(n7);let l="";for(let c=a.length-1;c>=0;c-=1){const d=a[c],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=r(d);let x=!!m,p=s(x?f.substring(0,m):f);if(!p){if(!x){l=d+(l.length>0?" "+l:l);continue}if(p=s(f),!p){l=d+(l.length>0?" "+l:l);continue}x=!1}const g=r7(u).join(":"),v=h?g+fS:g,b=v+p;if(i.includes(b))continue;i.push(b);const y=n(p,x);for(let k=0;k<y.length;++k){const N=y[k];i.push(v+N)}l=d+(l.length>0?" "+l:l)}return l};function a7(){let t=0,e,r,s="";for(;t<arguments.length;)(e=arguments[t++])&&(r=mS(e))&&(s&&(s+=" "),s+=r);return s}const mS=t=>{if(typeof t=="string")return t;let e,r="";for(let s=0;s<t.length;s++)t[s]&&(e=mS(t[s]))&&(r&&(r+=" "),r+=e);return r};function o7(t,...e){let r,s,n,i=a;function a(c){const d=e.reduce((u,h)=>h(u),t());return r=s7(d),s=r.cache.get,n=r.cache.set,i=l,l(c)}function l(c){const d=s(c);if(d)return d;const u=i7(c,r);return n(c,u),u}return function(){return i(a7.apply(null,arguments))}}const yt=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},xS=/^\[(?:([a-z-]+):)?(.+)\]$/i,l7=/^\d+\/\d+$/,c7=new Set(["px","full","screen"]),d7=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,u7=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,h7=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,f7=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,m7=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ni=t=>Jl(t)||c7.has(t)||l7.test(t),Bi=t=>Yc(t,"length",k7),Jl=t=>!!t&&!Number.isNaN(Number(t)),vp=t=>Yc(t,"number",Jl),md=t=>!!t&&Number.isInteger(Number(t)),x7=t=>t.endsWith("%")&&Jl(t.slice(0,-1)),qe=t=>xS.test(t),$i=t=>d7.test(t),p7=new Set(["length","size","percentage"]),g7=t=>Yc(t,p7,pS),v7=t=>Yc(t,"position",pS),y7=new Set(["image","url"]),b7=t=>Yc(t,y7,N7),w7=t=>Yc(t,"",_7),xd=()=>!0,Yc=(t,e,r)=>{const s=xS.exec(t);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):r(s[2]):!1},k7=t=>u7.test(t)&&!h7.test(t),pS=()=>!1,_7=t=>f7.test(t),N7=t=>m7.test(t),j7=()=>{const t=yt("colors"),e=yt("spacing"),r=yt("blur"),s=yt("brightness"),n=yt("borderColor"),i=yt("borderRadius"),a=yt("borderSpacing"),l=yt("borderWidth"),c=yt("contrast"),d=yt("grayscale"),u=yt("hueRotate"),h=yt("invert"),f=yt("gap"),m=yt("gradientColorStops"),x=yt("gradientColorStopPositions"),p=yt("inset"),g=yt("margin"),v=yt("opacity"),b=yt("padding"),y=yt("saturate"),k=yt("scale"),N=yt("sepia"),E=yt("skew"),j=yt("space"),_=yt("translate"),S=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",qe,e],P=()=>[qe,e],B=()=>["",ni,Bi],Q=()=>["auto",Jl,qe],D=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],I=()=>["solid","dashed","dotted","double","none"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],re=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",qe],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Z=()=>[Jl,qe];return{cacheSize:500,separator:":",theme:{colors:[xd],spacing:[ni,Bi],blur:["none","",$i,qe],brightness:Z(),borderColor:[t],borderRadius:["none","","full",$i,qe],borderSpacing:P(),borderWidth:B(),contrast:Z(),grayscale:W(),hueRotate:Z(),invert:W(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[x7,Bi],inset:F(),margin:F(),opacity:Z(),padding:P(),saturate:Z(),scale:Z(),sepia:W(),skew:Z(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",qe]}],container:["container"],columns:[{columns:[$i]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...D(),qe]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",md,qe]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",qe]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",md,qe]}],"grid-cols":[{"grid-cols":[xd]}],"col-start-end":[{col:["auto",{span:["full",md,qe]},qe]}],"col-start":[{"col-start":Q()}],"col-end":[{"col-end":Q()}],"grid-rows":[{"grid-rows":[xd]}],"row-start-end":[{row:["auto",{span:[md,qe]},qe]}],"row-start":[{"row-start":Q()}],"row-end":[{"row-end":Q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",qe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",qe]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...re()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...re(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...re(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",qe,e]}],"min-w":[{"min-w":[qe,e,"min","max","fit"]}],"max-w":[{"max-w":[qe,e,"none","full","min","max","fit","prose",{screen:[$i]},$i]}],h:[{h:[qe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[qe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[qe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[qe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",$i,Bi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",vp]}],"font-family":[{font:[xd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",qe]}],"line-clamp":[{"line-clamp":["none",Jl,vp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ni,qe]}],"list-image":[{"list-image":["none",qe]}],"list-style-type":[{list:["none","disc","decimal",qe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...I(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ni,Bi]}],"underline-offset":[{"underline-offset":["auto",ni,qe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",qe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",qe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...D(),v7]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",g7]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},b7]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...I(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:I()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...I()]}],"outline-offset":[{"outline-offset":[ni,qe]}],"outline-w":[{outline:[ni,Bi]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[ni,Bi]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",$i,w7]}],"shadow-color":[{shadow:[xd]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...te(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":te()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",$i,qe]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[y]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",qe]}],duration:[{duration:Z()}],ease:[{ease:["linear","in","out","in-out",qe]}],delay:[{delay:Z()}],animate:[{animate:["none","spin","ping","pulse","bounce",qe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[md,qe]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",qe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",qe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",qe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ni,Bi,vp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},E7=o7(j7);function je(...t){return E7(GL(t))}const S7={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"},C7={primary:"border-primary-600",secondary:"border-secondary-600",white:"border-white"};function St({size:t="md",className:e,color:r="primary"}){return o.jsx("div",{className:je("loading-spinner border-2 border-secondary-200 border-t-transparent rounded-full",S7[t],C7[r],e),role:"status","aria-label":"Cargando...",children:o.jsx("span",{className:"sr-only",children:"Cargando..."})})}function T7(){var f,m;const[t,e]=w.useState(!1),[r,s]=w.useState(!1),{login:n}=ll(),i=ol(),l=((m=(f=al().state)==null?void 0:f.from)==null?void 0:m.pathname)||"/dashboard",{register:c,handleSubmit:d,formState:{errors:u}}=om({defaultValues:{username:"",password:"",remember:!1}}),h=async x=>{s(!0);try{await n(x.username,x.password,x.remember)&&i(l,{replace:!0})}catch(p){console.error("Login error:",p)}finally{s(!1)}};return o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h2",{className:"text-3xl font-bold text-secondary-900 dark:text-white",children:"Iniciar Sesión"}),o.jsx("p",{className:"mt-2 text-sm text-secondary-600 dark:text-secondary-400",children:"Accede a tu cuenta para gestionar tu CRM"})]}),o.jsxs("form",{onSubmit:d(h),className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"username",className:"label",children:"Usuario"}),o.jsx("input",{...c("username",{required:"El usuario es requerido",minLength:{value:3,message:"El usuario debe tener al menos 3 caracteres"}}),type:"text",id:"username",className:"input",placeholder:"Ingresa tu usuario",disabled:r}),u.username&&o.jsx("p",{className:"mt-1 text-sm text-danger-600 dark:text-danger-400",children:u.username.message})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"label",children:"Contraseña"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{...c("password",{required:"La contraseña es requerida",minLength:{value:6,message:"La contraseña debe tener al menos 6 caracteres"}}),type:t?"text":"password",id:"password",className:"input pr-10",placeholder:"Ingresa tu contraseña",disabled:r}),o.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>e(!t),disabled:r,children:t?o.jsx(JE,{className:"h-5 w-5 text-secondary-400"}):o.jsx(qa,{className:"h-5 w-5 text-secondary-400"})})]}),u.password&&o.jsx("p",{className:"mt-1 text-sm text-danger-600 dark:text-danger-400",children:u.password.message})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{...c("remember"),id:"remember",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-secondary-300 rounded",disabled:r}),o.jsx("label",{htmlFor:"remember",className:"ml-2 block text-sm text-secondary-700 dark:text-secondary-300",children:"Recordar sesión"})]}),o.jsx("div",{className:"text-sm",children:o.jsx("a",{href:"#",className:"font-medium text-primary-600 hover:text-primary-500 dark:text-primary-400 dark:hover:text-primary-300",children:"¿Olvidaste tu contraseña?"})})]}),o.jsx("button",{type:"submit",disabled:r,className:"w-full btn-primary py-3 text-base font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:r?o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx(St,{size:"sm",color:"white",className:"mr-2"}),"Iniciando sesión..."]}):"Iniciar Sesión"})]}),o.jsxs("div",{className:"mt-8 p-4 bg-primary-50 dark:bg-primary-900/20 rounded-lg border border-primary-200 dark:border-primary-800",children:[o.jsx("h3",{className:"text-sm font-medium text-primary-800 dark:text-primary-200 mb-2",children:"Credenciales de Demo"}),o.jsxs("div",{className:"text-sm text-primary-700 dark:text-primary-300 space-y-1",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Usuario:"})," admin"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Contraseña:"})," password"]})]})]})]})}const X2=[{id:"demo",name:"Cuenta Demo",description:"Practica sin riesgo con dinero virtual",icon:"🎯",features:["$10,000 virtuales","Sin riesgo","Todas las funciones","Ideal para aprender"],color:"from-blue-500 to-blue-600"},{id:"micro",name:"Cuenta Micro",description:"Perfecta para principiantes",icon:"🌱",features:["Depósito mínimo $10","Spreads competitivos","Soporte 24/7","Apalancamiento 1:100"],color:"from-green-500 to-green-600"},{id:"standard",name:"Cuenta Standard",description:"La más popular entre traders",icon:"⭐",features:["Depósito mínimo $100","Spreads reducidos","Análisis diario","Apalancamiento 1:200"],color:"from-purple-500 to-purple-600"},{id:"premium",name:"Cuenta Premium",description:"Para traders experimentados",icon:"💎",features:["Depósito mínimo $1,000","Spreads mínimos","Gestor personal","Apalancamiento 1:400"],color:"from-yellow-500 to-yellow-600"},{id:"vip",name:"Cuenta VIP",description:"Máximo nivel de trading",icon:"👑",features:["Depósito mínimo $10,000","Spreads institucionales","Servicio VIP","Apalancamiento 1:500"],color:"from-red-500 to-red-600"}],Q2=[{code:"USD",name:"Dólar Estadounidense",symbol:"$"},{code:"EUR",name:"Euro",symbol:"€"},{code:"GBP",name:"Libra Esterlina",symbol:"£"},{code:"JPY",name:"Yen Japonés",symbol:"¥"},{code:"CHF",name:"Franco Suizo",symbol:"CHF"},{code:"CAD",name:"Dólar Canadiense",symbol:"C$"},{code:"AUD",name:"Dólar Australiano",symbol:"A$"}];function A7({leadData:t,onComplete:e,onCancel:r}){var P,B,Q,D;const[s,n]=w.useState(0),[i,a]=w.useState(!1),[l,c]=w.useState(t||null),[d,u]=w.useState(!1),{register:h,handleSubmit:f,watch:m,setValue:x,formState:{errors:p}}=om({defaultValues:{account_type:"demo",currency:"USD",leverage:"1:100",initial_deposit:1e3,platform:"webtrader",password:""}}),{register:g,handleSubmit:v,formState:{errors:b}}=om(),y=m("account_type"),k=m("currency"),N=[{id:0,title:"Verificación de Email",description:"Ingresa tu email para verificar si existe en nuestra base de datos",icon:Ia},{id:1,title:"Tipo de Cuenta",description:"Selecciona el tipo de cuenta que mejor se adapte a ti",icon:or},{id:2,title:"Configuración",description:"Configura los parámetros de tu cuenta",icon:HD},{id:3,title:"Confirmación",description:"Revisa y confirma los detalles de tu cuenta",icon:pr}],E=()=>{s<3&&n(s+1)},j=()=>{s>0&&n(s-1)},_=async I=>{u(!0);try{console.log("Verificando email:",I.email);const te=await F1.findLeadByEmail(I.email);console.log("Respuesta de búsqueda de lead:",te),te.success&&te.data?(c(te.data),me.success(`¡Email encontrado! Hola ${te.data.first_name} ${te.data.last_name}`,{icon:"✅",duration:4e3}),n(1)):me.error("Email no encontrado en nuestra base de datos. Por favor, regístrate primero.",{icon:"❌",duration:5e3})}catch(te){console.error("Error verificando email:",te),me.error("Error al verificar el email. Inténtalo de nuevo.",{icon:"❌",duration:4e3})}finally{u(!1)}},S=async I=>{var te,re,W,K;a(!0);try{const Z={account_type:I.account_type,currency:I.currency,leverage:I.leverage,initial_deposit:I.initial_deposit,platform:I.platform,password:I.password,lead_id:(l==null?void 0:l.id)||null,client_name:l?`${l.first_name} ${l.last_name}`:"Cliente",client_email:(l==null?void 0:l.email)||""};console.log("Creando cuenta de trading con datos:",Z),console.log("verifiedLead completo:",l);const M=await Iu.createTradingAccount(Z);if(console.log("Respuesta de creación de cuenta:",M),M.success)me.success("¡Cuenta de trading creada exitosamente!",{icon:"🎉",duration:4e3}),e(M.data);else throw new Error(M.message||"Error al crear la cuenta")}catch(Z){console.error("Error creating trading account:",Z);let M="Error al crear la cuenta. Inténtalo de nuevo.";(re=(te=Z.response)==null?void 0:te.data)!=null&&re.message?M=Z.response.data.message:Z.message?M=Z.message:((W=Z.response)==null?void 0:W.status)===500?M="Error interno del servidor. Por favor, contacta al soporte técnico.":((K=Z.response)==null?void 0:K.status)===400?M="Datos inválidos. Verifica la información ingresada.":navigator.onLine||(M="Sin conexión a internet. Verifica tu conexión."),me.error(M,{duration:5e3})}finally{a(!1)}},C=()=>X2.find(I=>I.id===y),F=()=>Q2.find(I=>I.code===k);return o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"p-6 border-b border-secondary-200 dark:border-secondary-700",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-primary-500 to-primary-600 rounded-xl flex items-center justify-center",children:o.jsx(rm,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:"Configurar Cuenta de Trading"}),l&&o.jsxs("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:["Bienvenido, ",l.first_name," ",l.last_name]})]})]}),o.jsx("button",{onClick:r,className:"text-secondary-400 hover:text-secondary-600 dark:hover:text-secondary-300 transition-colors",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("div",{className:"mt-6",children:o.jsx("div",{className:"flex items-center justify-between",children:N.map((I,te)=>o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 transition-all ${s>=I.id?"bg-primary-600 border-primary-600 text-white":"border-secondary-300 text-secondary-400"}`,children:s>I.id?o.jsx(pr,{className:"w-5 h-5"}):o.jsx(I.icon,{className:"w-5 h-5"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("p",{className:`text-sm font-medium ${s>=I.id?"text-primary-600":"text-secondary-500"}`,children:I.title}),o.jsx("p",{className:"text-xs text-secondary-400",children:I.description})]}),te<N.length-1&&o.jsx("div",{className:`flex-1 h-0.5 mx-4 ${s>I.id?"bg-primary-600":"bg-secondary-200"}`})]},I.id))})})]}),o.jsxs("div",{className:"p-6",children:[s===0&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h3",{className:"text-xl font-semibold text-secondary-900 dark:text-white mb-2",children:"Verificación de Email"}),o.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"Ingresa tu email para verificar si ya tienes una cuenta con nosotros"})]}),o.jsx("form",{onSubmit:v(_),className:"max-w-md mx-auto",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Email"}),o.jsx("input",{type:"email",...g("email",{required:"El email es requerido",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Email inválido"}}),className:"w-full px-4 py-3 border border-secondary-300 dark:border-secondary-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-secondary-700 dark:text-white",placeholder:"tu@email.com"}),b.email&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.email.message})]}),o.jsx("button",{type:"submit",disabled:d,className:"w-full bg-primary-600 hover:bg-primary-700 disabled:bg-primary-400 text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center",children:d?o.jsxs(o.Fragment,{children:[o.jsx(St,{size:"sm",className:"mr-2"}),"Verificando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Ia,{className:"w-5 h-5 mr-2"}),"Verificar Email"]})})]})}),!l&&o.jsx("div",{className:"mt-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(Qs,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mt-0.5 mr-3 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"¿No tienes una cuenta?"}),o.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-1",children:"Si no tienes una cuenta registrada, por favor regístrate primero en nuestro sistema."})]})]})})]}),o.jsxs("form",{onSubmit:f(S),children:[s===1&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h3",{className:"text-xl font-semibold text-secondary-900 dark:text-white mb-2",children:"Elige tu Tipo de Cuenta"}),o.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"Selecciona la cuenta que mejor se adapte a tu experiencia y objetivos"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:X2.map(I=>o.jsxs("div",{onClick:()=>{x("account_type",I.id)},className:`relative p-6 rounded-xl border-2 cursor-pointer transition-all duration-200 hover:shadow-lg ${y===I.id?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-secondary-200 dark:border-secondary-700 hover:border-primary-300"}`,children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-r ${I.color} flex items-center justify-center text-2xl`,children:I.icon}),o.jsx("h4",{className:"text-lg font-semibold text-secondary-900 dark:text-white mb-2",children:I.name}),o.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400 mb-4",children:I.description}),o.jsx("ul",{className:"text-xs text-secondary-500 dark:text-secondary-400 space-y-1",children:I.features.map((te,re)=>o.jsxs("li",{className:"flex items-center justify-center",children:[o.jsx(pr,{className:"w-3 h-3 text-green-500 mr-1"}),te]},re))})]}),y===I.id&&o.jsx("div",{className:"absolute top-2 right-2",children:o.jsx(pr,{className:"w-6 h-6 text-primary-600"})})]},I.id))})]}),s===2&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h3",{className:"text-xl font-semibold text-secondary-900 dark:text-white mb-2",children:"Configuración de Cuenta"}),o.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"Personaliza los parámetros de tu cuenta de trading"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-3",children:"Moneda Base de la Cuenta"}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:Q2.map(I=>o.jsx("div",{onClick:()=>x("currency",I.code),className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${k===I.code?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-secondary-200 dark:border-secondary-700 hover:border-primary-300"}`,children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl mb-1",children:I.symbol}),o.jsx("div",{className:"text-sm font-medium text-secondary-900 dark:text-white",children:I.code}),o.jsx("div",{className:"text-xs text-secondary-500 dark:text-secondary-400",children:I.name})]})},I.code))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-3",children:"Plataforma de Trading"}),o.jsx("div",{className:"space-y-3",children:[{id:"webtrader",name:"WebTrader",description:"Plataforma web moderna y accesible"}].map(I=>o.jsx("div",{onClick:()=>x("platform",I.id),className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${m("platform")===I.id?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-secondary-200 dark:border-secondary-700 hover:border-primary-300"}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-secondary-900 dark:text-white",children:I.name}),o.jsx("div",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:I.description})]}),m("platform")===I.id&&o.jsx(pr,{className:"w-5 h-5 text-primary-600"})]})},I.id))})]})]}),y!=="demo"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-3",children:"Depósito Inicial (Opcional)"}),o.jsxs("div",{className:"relative",children:[o.jsx(Fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-secondary-400"}),o.jsx("input",{...h("initial_deposit",{min:{value:0,message:"El depósito debe ser positivo"}}),type:"number",className:"w-full pl-10 pr-4 py-3 border border-secondary-300 dark:border-secondary-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-secondary-700 dark:text-white",placeholder:"0.00"})]}),o.jsx("p",{className:"mt-1 text-xs text-secondary-500 dark:text-secondary-400",children:"Puedes realizar el depósito más tarde desde tu panel de control"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-3",children:"Contraseña de la Cuenta"}),o.jsx("div",{className:"relative",children:o.jsx("input",{...h("password",{required:"La contraseña es obligatoria",minLength:{value:6,message:"La contraseña debe tener al menos 6 caracteres"}}),type:"password",className:"w-full px-4 py-3 border border-secondary-300 dark:border-secondary-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-secondary-700 dark:text-white",placeholder:"Ingresa una contraseña segura"})}),p.password&&o.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:p.password.message}),o.jsx("p",{className:"mt-1 text-xs text-secondary-500 dark:text-secondary-400",children:"Mínimo 6 caracteres. Esta será la contraseña para acceder a tu cuenta de trading."})]})]}),s===3&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h3",{className:"text-xl font-semibold text-secondary-900 dark:text-white mb-2",children:"Confirmar Detalles"}),o.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"Revisa la información antes de crear tu cuenta"})]}),o.jsx("div",{className:"bg-secondary-50 dark:bg-secondary-700/50 rounded-xl p-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-secondary-900 dark:text-white mb-4",children:"Información Personal"}),o.jsx("div",{className:"space-y-3",children:t&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Nombre:"}),o.jsxs("span",{className:"font-medium text-secondary-900 dark:text-white",children:[t.first_name," ",t.last_name]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Email:"}),o.jsx("span",{className:"font-medium text-secondary-900 dark:text-white",children:t.email})]})]})})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-secondary-900 dark:text-white mb-4",children:"Configuración de Cuenta"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Tipo:"}),o.jsx("span",{className:"font-medium text-secondary-900 dark:text-white",children:(P=C())==null?void 0:P.name})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Moneda:"}),o.jsxs("span",{className:"font-medium text-secondary-900 dark:text-white",children:[(B=F())==null?void 0:B.name," (",(Q=F())==null?void 0:Q.symbol,")"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Plataforma:"}),o.jsx("span",{className:"font-medium text-secondary-900 dark:text-white",children:m("platform")})]}),y!=="demo"&&m("initial_deposit")>0&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Depósito:"}),o.jsxs("span",{className:"font-medium text-secondary-900 dark:text-white",children:[(D=F())==null?void 0:D.symbol,m("initial_deposit")]})]})]})]})]})}),o.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(zu,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h5",{className:"font-medium text-blue-800 dark:text-blue-200 mb-1",children:"¡Tu cuenta estará lista en segundos!"}),o.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Recibirás los datos de acceso por email y podrás empezar a operar inmediatamente."})]})]})})]}),s>0&&o.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-secondary-200 dark:border-secondary-700",children:[o.jsxs("button",{type:"button",onClick:j,disabled:s===1,className:"flex items-center space-x-2 px-4 py-2 text-secondary-600 hover:text-secondary-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[o.jsx(dx,{className:"w-5 h-5"}),o.jsx("span",{children:"Anterior"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("button",{type:"button",onClick:r,className:"px-6 py-2 text-secondary-600 hover:text-secondary-800 transition-colors",children:"Cancelar"}),s<3?o.jsxs("button",{type:"button",onClick:E,disabled:s===1&&!y,className:"flex items-center space-x-2 bg-primary-600 hover:bg-primary-700 text-white font-semibold px-6 py-2 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx("span",{children:"Siguiente"}),o.jsx(ux,{className:"w-5 h-5"})]}):o.jsx("button",{type:"submit",disabled:i,className:"flex items-center space-x-2 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold px-8 py-2 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:i?o.jsxs(o.Fragment,{children:[o.jsx(St,{size:"sm",color:"white"}),o.jsx("span",{children:"Creando cuenta..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(rm,{className:"w-5 h-5"}),o.jsx("span",{children:"Crear Cuenta"})]})})]})]})]})]})]})})}function F7(){const[t,e]=w.useState(null),[r,s]=w.useState(!1),[n,i]=w.useState(!1),a=ol(),{register:l,handleSubmit:c,watch:d,formState:{errors:u,isValid:h}}=om({mode:"onChange"}),f=d("email");w.useEffect(()=>{if(f&&f.includes("@")&&f.includes(".")){const g=setTimeout(()=>{m(f)},800);return()=>clearTimeout(g)}else e(null)},[f]);const m=async g=>{s(!0);try{const v=await qn.getByEmail(g);v.data.exists?(e(v.data.lead),me.success(`¡Bienvenido de vuelta, ${v.data.lead.first_name}!`,{icon:"👋",duration:3e3})):e(null)}catch{e(null)}finally{s(!1)}},x=g=>{i(!0)},p=()=>{i(!1),a("/webtrader")};return n?o.jsx(A7,{leadData:t,onComplete:p,onCancel:()=>i(!1)}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center p-4",children:[o.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[o.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-500/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-500/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-emerald-500/10 rounded-full blur-3xl"})]}),o.jsxs("div",{className:"relative w-full max-w-md",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl mb-6 shadow-2xl",children:o.jsx(zu,{className:"w-8 h-8 text-white"})}),o.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Únete a iaTrade"}),o.jsx("p",{className:"text-slate-300 text-lg",children:"Comienza tu viaje en el trading profesional"})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-3xl border border-white/20 shadow-2xl p-8",children:[o.jsxs("form",{onSubmit:c(x),className:"space-y-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-white",children:"Correo Electrónico"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:o.jsx(Ia,{className:"h-5 w-5 text-slate-400"})}),o.jsx("input",{...l("email",{required:"El email es requerido",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Email inválido"}}),type:"email",placeholder:"tu@email.com",className:"w-full pl-12 pr-12 py-4 bg-white/5 border border-white/20 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"}),o.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center",children:r?o.jsx(St,{size:"sm"}):t?o.jsx(pr,{className:"h-5 w-5 text-emerald-400"}):f&&f.includes("@")&&!u.email?o.jsx(pr,{className:"h-5 w-5 text-slate-400"}):null})]}),u.email&&o.jsxs("p",{className:"text-red-400 text-sm flex items-center gap-1",children:[o.jsx(Qs,{className:"w-4 h-4"}),u.email.message]})]}),t&&o.jsx("div",{className:"bg-emerald-500/20 border border-emerald-500/30 rounded-xl p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(or,{className:"w-6 h-6 text-emerald-400"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-emerald-300 font-medium",children:"¡Cuenta encontrada!"}),o.jsxs("p",{className:"text-emerald-200 text-sm",children:["Hola ",t.first_name," ",t.last_name,", continúa con tu configuración"]})]})]})}),o.jsx("button",{type:"submit",disabled:!h||r,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 disabled:from-slate-600 disabled:to-slate-700 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-200 flex items-center justify-center gap-3 shadow-lg hover:shadow-xl disabled:cursor-not-allowed group",children:r?o.jsxs(o.Fragment,{children:[o.jsx(St,{size:"sm"}),o.jsx("span",{children:"Verificando..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(rm,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),o.jsx("span",{children:t?"Continuar":"Comenzar"}),o.jsx(ji,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})})]}),o.jsx("div",{className:"text-center mt-6 pt-6 border-t border-white/10",children:o.jsxs("p",{className:"text-slate-400",children:["¿Ya tienes cuenta?"," ",o.jsx(ma,{to:"/auth/login",className:"text-blue-400 hover:text-blue-300 font-medium transition-colors",children:"Inicia sesión"})]})})]}),o.jsxs("div",{className:"mt-8 grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:"text-center p-4 bg-white/5 backdrop-blur-xl rounded-xl border border-white/10 hover:bg-white/10 transition-all duration-200",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center mx-auto mb-2",children:o.jsx(zu,{className:"w-5 h-5 text-blue-400"})}),o.jsx("p",{className:"text-xs text-slate-300 font-medium",children:"Tecnología IA"})]}),o.jsxs("div",{className:"text-center p-4 bg-white/5 backdrop-blur-xl rounded-xl border border-white/10 hover:bg-white/10 transition-all duration-200",children:[o.jsx("div",{className:"w-10 h-10 bg-emerald-500/20 rounded-lg flex items-center justify-center mx-auto mb-2",children:o.jsx(rm,{className:"w-5 h-5 text-emerald-400"})}),o.jsx("p",{className:"text-xs text-slate-300 font-medium",children:"Rápido & Seguro"})]}),o.jsxs("div",{className:"text-center p-4 bg-white/5 backdrop-blur-xl rounded-xl border border-white/10 hover:bg-white/10 transition-all duration-200",children:[o.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center mx-auto mb-2",children:o.jsx(or,{className:"w-5 h-5 text-purple-400"})}),o.jsx("p",{className:"text-xs text-slate-300 font-medium",children:"Soporte 24/7"})]})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-slate-500 text-xs",children:"Más de 10,000 traders confían en nosotros"})})]})]})}const Z2={primary:"from-primary-500 to-primary-600",success:"from-success-500 to-success-600",warning:"from-warning-500 to-warning-600",danger:"from-danger-500 to-danger-600",secondary:"from-secondary-500 to-secondary-600"};function P7({title:t,value:e,change:r,icon:s,color:n,format:i,className:a,style:l}){const c=u=>{switch(i){case"currency":return new Intl.NumberFormat("es-ES",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(u);case"percentage":return`${u.toFixed(1)}%`;default:return new Intl.NumberFormat("es-ES").format(u)}},d=r>=0;return o.jsx("div",{className:je("card hover:shadow-medium transition-all duration-300 group cursor-pointer",a),style:l,children:o.jsxs("div",{className:"card-body",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium text-secondary-600 dark:text-secondary-400 mb-1",children:t}),o.jsx("p",{className:"text-2xl font-bold text-secondary-900 dark:text-white mb-2",children:c(e)}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsxs("div",{className:je("flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium",d?"bg-success-100 text-success-700 dark:bg-success-900 dark:text-success-200":"bg-danger-100 text-danger-700 dark:bg-danger-900 dark:text-danger-200"),children:[d?o.jsx(Ql,{className:"w-3 h-3"}):o.jsx(Xl,{className:"w-3 h-3"}),o.jsxs("span",{children:[Math.abs(r).toFixed(1),"%"]})]}),o.jsx("span",{className:"text-xs text-secondary-500 dark:text-secondary-400",children:"vs mes anterior"})]})]}),o.jsx("div",{className:je("w-12 h-12 rounded-xl bg-gradient-to-br flex items-center justify-center group-hover:scale-110 transition-transform duration-300",Z2[n]),children:o.jsx(s,{className:"w-6 h-6 text-white"})})]}),o.jsx("div",{className:"mt-4",children:o.jsx("div",{className:"w-full bg-secondary-200 dark:bg-secondary-700 rounded-full h-1.5",children:o.jsx("div",{className:je("h-1.5 rounded-full bg-gradient-to-r transition-all duration-1000 ease-out",Z2[n]),style:{width:`${Math.min(Math.max(e/(e+Math.abs(e*.3))*100,10),100)}%`}})})})]})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ph(t){return t+.5|0}const xa=(t,e,r)=>Math.max(Math.min(t,r),e);function Pd(t){return xa(Ph(t*2.55),0,255)}function Ma(t){return xa(Ph(t*255),0,255)}function ui(t){return xa(Ph(t/2.55)/100,0,1)}function J2(t){return xa(Ph(t*100),0,100)}const Os={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},R1=[..."0123456789ABCDEF"],M7=t=>R1[t&15],R7=t=>R1[(t&240)>>4]+R1[t&15],g0=t=>(t&240)>>4===(t&15),D7=t=>g0(t.r)&&g0(t.g)&&g0(t.b)&&g0(t.a);function O7(t){var e=t.length,r;return t[0]==="#"&&(e===4||e===5?r={r:255&Os[t[1]]*17,g:255&Os[t[2]]*17,b:255&Os[t[3]]*17,a:e===5?Os[t[4]]*17:255}:(e===7||e===9)&&(r={r:Os[t[1]]<<4|Os[t[2]],g:Os[t[3]]<<4|Os[t[4]],b:Os[t[5]]<<4|Os[t[6]],a:e===9?Os[t[7]]<<4|Os[t[8]]:255})),r}const L7=(t,e)=>t<255?e(t):"";function I7(t){var e=D7(t)?M7:R7;return t?"#"+e(t.r)+e(t.g)+e(t.b)+L7(t.a,e):void 0}const B7=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function gS(t,e,r){const s=e*Math.min(r,1-r),n=(i,a=(i+t/30)%12)=>r-s*Math.max(Math.min(a-3,9-a,1),-1);return[n(0),n(8),n(4)]}function $7(t,e,r){const s=(n,i=(n+t/60)%6)=>r-r*e*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function z7(t,e,r){const s=gS(t,1,.5);let n;for(e+r>1&&(n=1/(e+r),e*=n,r*=n),n=0;n<3;n++)s[n]*=1-e-r,s[n]+=e;return s}function U7(t,e,r,s,n){return t===n?(e-r)/s+(e<r?6:0):e===n?(r-t)/s+2:(t-e)/s+4}function Dy(t){const r=t.r/255,s=t.g/255,n=t.b/255,i=Math.max(r,s,n),a=Math.min(r,s,n),l=(i+a)/2;let c,d,u;return i!==a&&(u=i-a,d=l>.5?u/(2-i-a):u/(i+a),c=U7(r,s,n,u,i),c=c*60+.5),[c|0,d||0,l]}function Oy(t,e,r,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,r,s)).map(Ma)}function Ly(t,e,r){return Oy(gS,t,e,r)}function V7(t,e,r){return Oy(z7,t,e,r)}function W7(t,e,r){return Oy($7,t,e,r)}function vS(t){return(t%360+360)%360}function H7(t){const e=B7.exec(t);let r=255,s;if(!e)return;e[5]!==s&&(r=e[6]?Pd(+e[5]):Ma(+e[5]));const n=vS(+e[2]),i=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?s=V7(n,i,a):e[1]==="hsv"?s=W7(n,i,a):s=Ly(n,i,a),{r:s[0],g:s[1],b:s[2],a:r}}function Y7(t,e){var r=Dy(t);r[0]=vS(r[0]+e),r=Ly(r),t.r=r[0],t.g=r[1],t.b=r[2]}function q7(t){if(!t)return;const e=Dy(t),r=e[0],s=J2(e[1]),n=J2(e[2]);return t.a<255?`hsla(${r}, ${s}%, ${n}%, ${ui(t.a)})`:`hsl(${r}, ${s}%, ${n}%)`}const ek={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},tk={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function G7(){const t={},e=Object.keys(tk),r=Object.keys(ek);let s,n,i,a,l;for(s=0;s<e.length;s++){for(a=l=e[s],n=0;n<r.length;n++)i=r[n],l=l.replace(i,ek[i]);i=parseInt(tk[a],16),t[l]=[i>>16&255,i>>8&255,i&255]}return t}let v0;function K7(t){v0||(v0=G7(),v0.transparent=[0,0,0,0]);const e=v0[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const X7=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Q7(t){const e=X7.exec(t);let r=255,s,n,i;if(e){if(e[7]!==s){const a=+e[7];r=e[8]?Pd(a):xa(a*255,0,255)}return s=+e[1],n=+e[3],i=+e[5],s=255&(e[2]?Pd(s):xa(s,0,255)),n=255&(e[4]?Pd(n):xa(n,0,255)),i=255&(e[6]?Pd(i):xa(i,0,255)),{r:s,g:n,b:i,a:r}}}function Z7(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ui(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const yp=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,bl=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function J7(t,e,r){const s=bl(ui(t.r)),n=bl(ui(t.g)),i=bl(ui(t.b));return{r:Ma(yp(s+r*(bl(ui(e.r))-s))),g:Ma(yp(n+r*(bl(ui(e.g))-n))),b:Ma(yp(i+r*(bl(ui(e.b))-i))),a:t.a+r*(e.a-t.a)}}function y0(t,e,r){if(t){let s=Dy(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*r,e===0?360:1)),s=Ly(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function yS(t,e){return t&&Object.assign(e||{},t)}function rk(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ma(t[3]))):(e=yS(t,{r:0,g:0,b:0,a:1}),e.a=Ma(e.a)),e}function e9(t){return t.charAt(0)==="r"?Q7(t):H7(t)}class Vu{constructor(e){if(e instanceof Vu)return e;const r=typeof e;let s;r==="object"?s=rk(e):r==="string"&&(s=O7(e)||K7(e)||e9(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=yS(this._rgb);return e&&(e.a=ui(e.a)),e}set rgb(e){this._rgb=rk(e)}rgbString(){return this._valid?Z7(this._rgb):void 0}hexString(){return this._valid?I7(this._rgb):void 0}hslString(){return this._valid?q7(this._rgb):void 0}mix(e,r){if(e){const s=this.rgb,n=e.rgb;let i;const a=r===i?.5:r,l=2*a-1,c=s.a-n.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-d,s.r=255&d*s.r+i*n.r+.5,s.g=255&d*s.g+i*n.g+.5,s.b=255&d*s.b+i*n.b+.5,s.a=a*s.a+(1-a)*n.a,this.rgb=s}return this}interpolate(e,r){return e&&(this._rgb=J7(this._rgb,e._rgb,r)),this}clone(){return new Vu(this.rgb)}alpha(e){return this._rgb.a=Ma(e),this}clearer(e){const r=this._rgb;return r.a*=1-e,this}greyscale(){const e=this._rgb,r=Ph(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=r,this}opaquer(e){const r=this._rgb;return r.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return y0(this._rgb,2,e),this}darken(e){return y0(this._rgb,2,-e),this}saturate(e){return y0(this._rgb,1,e),this}desaturate(e){return y0(this._rgb,1,-e),this}rotate(e){return Y7(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ii(){}const t9=(()=>{let t=0;return()=>t++})();function it(t){return t==null}function wt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Je(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Bt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function ws(t,e){return Bt(t)?t:e}function Ge(t,e){return typeof t>"u"?e:t}const r9=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,bS=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function mt(t,e,r){if(t&&typeof t.call=="function")return t.apply(r,e)}function ct(t,e,r,s){let n,i,a;if(wt(t))if(i=t.length,s)for(n=i-1;n>=0;n--)e.call(r,t[n],n);else for(n=0;n<i;n++)e.call(r,t[n],n);else if(Je(t))for(a=Object.keys(t),i=a.length,n=0;n<i;n++)e.call(r,t[a[n]],a[n])}function lm(t,e){let r,s,n,i;if(!t||!e||t.length!==e.length)return!1;for(r=0,s=t.length;r<s;++r)if(n=t[r],i=e[r],n.datasetIndex!==i.datasetIndex||n.index!==i.index)return!1;return!0}function cm(t){if(wt(t))return t.map(cm);if(Je(t)){const e=Object.create(null),r=Object.keys(t),s=r.length;let n=0;for(;n<s;++n)e[r[n]]=cm(t[r[n]]);return e}return t}function wS(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function s9(t,e,r,s){if(!wS(t))return;const n=e[t],i=r[t];Je(n)&&Je(i)?Wu(n,i,s):e[t]=cm(i)}function Wu(t,e,r){const s=wt(e)?e:[e],n=s.length;if(!Je(t))return t;r=r||{};const i=r.merger||s9;let a;for(let l=0;l<n;++l){if(a=s[l],!Je(a))continue;const c=Object.keys(a);for(let d=0,u=c.length;d<u;++d)i(c[d],t,a,r)}return t}function tu(t,e){return Wu(t,e,{merger:n9})}function n9(t,e,r){if(!wS(t))return;const s=e[t],n=r[t];Je(s)&&Je(n)?tu(s,n):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=cm(n))}const sk={"":t=>t,x:t=>t.x,y:t=>t.y};function i9(t){const e=t.split("."),r=[];let s="";for(const n of e)s+=n,s.endsWith("\\")?s=s.slice(0,-1)+".":(r.push(s),s="");return r}function a9(t){const e=i9(t);return r=>{for(const s of e){if(s==="")break;r=r&&r[s]}return r}}function Ko(t,e){return(sk[e]||(sk[e]=a9(e)))(t)}function Iy(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Hu=t=>typeof t<"u",Ba=t=>typeof t=="function",nk=(t,e)=>{if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0};function o9(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const lt=Math.PI,_t=2*lt,l9=_t+lt,dm=Number.POSITIVE_INFINITY,c9=lt/180,Ht=lt/2,Za=lt/4,ik=lt*2/3,pa=Math.log10,Gn=Math.sign;function ru(t,e,r){return Math.abs(t-e)<r}function ak(t){const e=Math.round(t);t=ru(t,e,t/1e3)?e:t;const r=Math.pow(10,Math.floor(pa(t))),s=t/r;return(s<=1?1:s<=2?2:s<=5?5:10)*r}function d9(t){const e=[],r=Math.sqrt(t);let s;for(s=1;s<r;s++)t%s===0&&(e.push(s),e.push(t/s));return r===(r|0)&&e.push(r),e.sort((n,i)=>n-i).pop(),e}function u9(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Yu(t){return!u9(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function h9(t,e){const r=Math.round(t);return r-e<=t&&r+e>=t}function kS(t,e,r){let s,n,i;for(s=0,n=t.length;s<n;s++)i=t[s][r],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Wn(t){return t*(lt/180)}function By(t){return t*(180/lt)}function ok(t){if(!Bt(t))return;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r++;return r}function _S(t,e){const r=e.x-t.x,s=e.y-t.y,n=Math.sqrt(r*r+s*s);let i=Math.atan2(s,r);return i<-.5*lt&&(i+=_t),{angle:i,distance:n}}function D1(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function f9(t,e){return(t-e+l9)%_t-lt}function Pr(t){return(t%_t+_t)%_t}function qu(t,e,r,s){const n=Pr(t),i=Pr(e),a=Pr(r),l=Pr(i-n),c=Pr(a-n),d=Pr(n-i),u=Pr(n-a);return n===i||n===a||s&&i===a||l>c&&d<u}function Br(t,e,r){return Math.max(e,Math.min(r,t))}function m9(t){return Br(t,-32768,32767)}function yi(t,e,r,s=1e-6){return t>=Math.min(e,r)-s&&t<=Math.max(e,r)+s}function $y(t,e,r){r=r||(a=>t[a]<e);let s=t.length-1,n=0,i;for(;s-n>1;)i=n+s>>1,r(i)?n=i:s=i;return{lo:n,hi:s}}const po=(t,e,r,s)=>$y(t,r,s?n=>{const i=t[n][e];return i<r||i===r&&t[n+1][e]===r}:n=>t[n][e]<r),x9=(t,e,r)=>$y(t,r,s=>t[s][e]>=r);function p9(t,e,r){let s=0,n=t.length;for(;s<n&&t[s]<e;)s++;for(;n>s&&t[n-1]>r;)n--;return s>0||n<t.length?t.slice(s,n):t}const NS=["push","pop","shift","splice","unshift"];function g9(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),NS.forEach(r=>{const s="_onData"+Iy(r),n=t[r];Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value(...i){const a=n.apply(this,i);return t._chartjs.listeners.forEach(l=>{typeof l[s]=="function"&&l[s](...i)}),a}})})}function lk(t,e){const r=t._chartjs;if(!r)return;const s=r.listeners,n=s.indexOf(e);n!==-1&&s.splice(n,1),!(s.length>0)&&(NS.forEach(i=>{delete t[i]}),delete t._chartjs)}function jS(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const ES=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function SS(t,e){let r=[],s=!1;return function(...n){r=n,s||(s=!0,ES.call(window,()=>{s=!1,t.apply(e,r)}))}}function v9(t,e){let r;return function(...s){return e?(clearTimeout(r),r=setTimeout(t,e,s)):t.apply(this,s),e}}const zy=t=>t==="start"?"left":t==="end"?"right":"center",Fr=(t,e,r)=>t==="start"?e:t==="end"?r:(e+r)/2,y9=(t,e,r,s)=>t===(s?"left":"right")?r:t==="center"?(e+r)/2:e;function b9(t,e,r){const s=e.length;let n=0,i=s;if(t._sorted){const{iScale:a,vScale:l,_parsed:c}=t,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=a.axis,{min:h,max:f,minDefined:m,maxDefined:x}=a.getUserBounds();if(m){if(n=Math.min(po(c,u,h).lo,r?s:po(e,u,a.getPixelForValue(h)).lo),d){const p=c.slice(0,n+1).reverse().findIndex(g=>!it(g[l.axis]));n-=Math.max(0,p)}n=Br(n,0,s-1)}if(x){let p=Math.max(po(c,a.axis,f,!0).hi+1,r?0:po(e,u,a.getPixelForValue(f),!0).hi+1);if(d){const g=c.slice(p-1).findIndex(v=>!it(v[l.axis]));p+=Math.max(0,g)}i=Br(p,n,s)-n}else i=s-n}return{start:n,count:i}}function w9(t){const{xScale:e,yScale:r,_scaleRanges:s}=t,n={xmin:e.min,xmax:e.max,ymin:r.min,ymax:r.max};if(!s)return t._scaleRanges=n,!0;const i=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==r.min||s.ymax!==r.max;return Object.assign(s,n),i}const b0=t=>t===0||t===1,ck=(t,e,r)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*_t/r)),dk=(t,e,r)=>Math.pow(2,-10*t)*Math.sin((t-e)*_t/r)+1,su={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Ht)+1,easeOutSine:t=>Math.sin(t*Ht),easeInOutSine:t=>-.5*(Math.cos(lt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>b0(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>b0(t)?t:ck(t,.075,.3),easeOutElastic:t=>b0(t)?t:dk(t,.075,.3),easeInOutElastic(t){return b0(t)?t:t<.5?.5*ck(t*2,.1125,.45):.5+.5*dk(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-su.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?su.easeInBounce(t*2)*.5:su.easeOutBounce(t*2-1)*.5+.5};function Uy(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function uk(t){return Uy(t)?t:new Vu(t)}function bp(t){return Uy(t)?t:new Vu(t).saturate(.5).darken(.1).hexString()}const k9=["x","y","borderWidth","radius","tension"],_9=["color","borderColor","backgroundColor"];function N9(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:_9},numbers:{type:"number",properties:k9}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function j9(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const hk=new Map;function E9(t,e){e=e||{};const r=t+JSON.stringify(e);let s=hk.get(r);return s||(s=new Intl.NumberFormat(t,e),hk.set(r,s)),s}function fx(t,e,r){return E9(e,r).format(t)}const CS={values(t){return wt(t)?t:""+t},numeric(t,e,r){if(t===0)return"0";const s=this.chart.options.locale;let n,i=t;if(r.length>1){const d=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(d<1e-4||d>1e15)&&(n="scientific"),i=S9(t,r)}const a=pa(Math.abs(i)),l=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:n,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),fx(t,s,c)},logarithmic(t,e,r){if(t===0)return"0";const s=r[e].significand||t/Math.pow(10,Math.floor(pa(t)));return[1,2,3,5,10,15].includes(s)||e>.8*r.length?CS.numeric.call(this,t,e,r):""}};function S9(t,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(r)>=1&&t!==Math.floor(t)&&(r=t-Math.floor(t)),r}var mx={formatters:CS};function C9(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,r)=>r.lineWidth,tickColor:(e,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:mx.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Xo=Object.create(null),O1=Object.create(null);function nu(t,e){if(!e)return t;const r=e.split(".");for(let s=0,n=r.length;s<n;++s){const i=r[s];t=t[i]||(t[i]=Object.create(null))}return t}function wp(t,e,r){return typeof e=="string"?Wu(nu(t,e),r):Wu(nu(t,""),e)}class T9{constructor(e,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,n)=>bp(n.backgroundColor),this.hoverBorderColor=(s,n)=>bp(n.borderColor),this.hoverColor=(s,n)=>bp(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(r)}set(e,r){return wp(this,e,r)}get(e){return nu(this,e)}describe(e,r){return wp(O1,e,r)}override(e,r){return wp(Xo,e,r)}route(e,r,s,n){const i=nu(this,e),a=nu(this,s),l="_"+r;Object.defineProperties(i,{[l]:{value:i[r],writable:!0},[r]:{enumerable:!0,get(){const c=this[l],d=a[n];return Je(c)?Object.assign({},d,c):Ge(c,d)},set(c){this[l]=c}}})}apply(e){e.forEach(r=>r(this))}}var $t=new T9({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[N9,j9,C9]);function A9(t){return!t||it(t.size)||it(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function um(t,e,r,s,n){let i=e[n];return i||(i=e[n]=t.measureText(n).width,r.push(n)),i>s&&(s=i),s}function F9(t,e,r,s){s=s||{};let n=s.data=s.data||{},i=s.garbageCollect=s.garbageCollect||[];s.font!==e&&(n=s.data={},i=s.garbageCollect=[],s.font=e),t.save(),t.font=e;let a=0;const l=r.length;let c,d,u,h,f;for(c=0;c<l;c++)if(h=r[c],h!=null&&!wt(h))a=um(t,n,i,a,h);else if(wt(h))for(d=0,u=h.length;d<u;d++)f=h[d],f!=null&&!wt(f)&&(a=um(t,n,i,a,f));t.restore();const m=i.length/2;if(m>r.length){for(c=0;c<m;c++)delete n[i[c]];i.splice(0,m)}return a}function Ja(t,e,r){const s=t.currentDevicePixelRatio,n=r!==0?Math.max(r/2,.5):0;return Math.round((e-n)*s)/s+n}function fk(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function L1(t,e,r,s){TS(t,e,r,s,null)}function TS(t,e,r,s,n){let i,a,l,c,d,u,h,f;const m=e.pointStyle,x=e.rotation,p=e.radius;let g=(x||0)*c9;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(r,s),t.rotate(g),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(p)||p<=0)){switch(t.beginPath(),m){default:n?t.ellipse(r,s,n/2,p,0,0,_t):t.arc(r,s,p,0,_t),t.closePath();break;case"triangle":u=n?n/2:p,t.moveTo(r+Math.sin(g)*u,s-Math.cos(g)*p),g+=ik,t.lineTo(r+Math.sin(g)*u,s-Math.cos(g)*p),g+=ik,t.lineTo(r+Math.sin(g)*u,s-Math.cos(g)*p),t.closePath();break;case"rectRounded":d=p*.516,c=p-d,a=Math.cos(g+Za)*c,h=Math.cos(g+Za)*(n?n/2-d:c),l=Math.sin(g+Za)*c,f=Math.sin(g+Za)*(n?n/2-d:c),t.arc(r-h,s-l,d,g-lt,g-Ht),t.arc(r+f,s-a,d,g-Ht,g),t.arc(r+h,s+l,d,g,g+Ht),t.arc(r-f,s+a,d,g+Ht,g+lt),t.closePath();break;case"rect":if(!x){c=Math.SQRT1_2*p,u=n?n/2:c,t.rect(r-u,s-c,2*u,2*c);break}g+=Za;case"rectRot":h=Math.cos(g)*(n?n/2:p),a=Math.cos(g)*p,l=Math.sin(g)*p,f=Math.sin(g)*(n?n/2:p),t.moveTo(r-h,s-l),t.lineTo(r+f,s-a),t.lineTo(r+h,s+l),t.lineTo(r-f,s+a),t.closePath();break;case"crossRot":g+=Za;case"cross":h=Math.cos(g)*(n?n/2:p),a=Math.cos(g)*p,l=Math.sin(g)*p,f=Math.sin(g)*(n?n/2:p),t.moveTo(r-h,s-l),t.lineTo(r+h,s+l),t.moveTo(r+f,s-a),t.lineTo(r-f,s+a);break;case"star":h=Math.cos(g)*(n?n/2:p),a=Math.cos(g)*p,l=Math.sin(g)*p,f=Math.sin(g)*(n?n/2:p),t.moveTo(r-h,s-l),t.lineTo(r+h,s+l),t.moveTo(r+f,s-a),t.lineTo(r-f,s+a),g+=Za,h=Math.cos(g)*(n?n/2:p),a=Math.cos(g)*p,l=Math.sin(g)*p,f=Math.sin(g)*(n?n/2:p),t.moveTo(r-h,s-l),t.lineTo(r+h,s+l),t.moveTo(r+f,s-a),t.lineTo(r-f,s+a);break;case"line":a=n?n/2:Math.cos(g)*p,l=Math.sin(g)*p,t.moveTo(r-a,s-l),t.lineTo(r+a,s+l);break;case"dash":t.moveTo(r,s),t.lineTo(r+Math.cos(g)*(n?n/2:p),s+Math.sin(g)*p);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function bi(t,e,r){return r=r||.5,!e||t&&t.x>e.left-r&&t.x<e.right+r&&t.y>e.top-r&&t.y<e.bottom+r}function xx(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function px(t){t.restore()}function P9(t,e,r,s,n){if(!e)return t.lineTo(r.x,r.y);if(n==="middle"){const i=(e.x+r.x)/2;t.lineTo(i,e.y),t.lineTo(i,r.y)}else n==="after"!=!!s?t.lineTo(e.x,r.y):t.lineTo(r.x,e.y);t.lineTo(r.x,r.y)}function M9(t,e,r,s){if(!e)return t.lineTo(r.x,r.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?r.cp2x:r.cp1x,s?r.cp2y:r.cp1y,r.x,r.y)}function R9(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),it(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function D9(t,e,r,s,n){if(n.strikethrough||n.underline){const i=t.measureText(s),a=e-i.actualBoundingBoxLeft,l=e+i.actualBoundingBoxRight,c=r-i.actualBoundingBoxAscent,d=r+i.actualBoundingBoxDescent,u=n.strikethrough?(c+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=n.decorationWidth||2,t.moveTo(a,u),t.lineTo(l,u),t.stroke()}}function O9(t,e){const r=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=r}function Qo(t,e,r,s,n,i={}){const a=wt(e)?e:[e],l=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(t.save(),t.font=n.string,R9(t,i),c=0;c<a.length;++c)d=a[c],i.backdrop&&O9(t,i.backdrop),l&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),it(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(d,r,s,i.maxWidth)),t.fillText(d,r,s,i.maxWidth),D9(t,r,s,d,i),s+=Number(n.lineHeight);t.restore()}function Gu(t,e){const{x:r,y:s,w:n,h:i,radius:a}=e;t.arc(r+a.topLeft,s+a.topLeft,a.topLeft,1.5*lt,lt,!0),t.lineTo(r,s+i-a.bottomLeft),t.arc(r+a.bottomLeft,s+i-a.bottomLeft,a.bottomLeft,lt,Ht,!0),t.lineTo(r+n-a.bottomRight,s+i),t.arc(r+n-a.bottomRight,s+i-a.bottomRight,a.bottomRight,Ht,0,!0),t.lineTo(r+n,s+a.topRight),t.arc(r+n-a.topRight,s+a.topRight,a.topRight,0,-Ht,!0),t.lineTo(r+a.topLeft,s)}const L9=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,I9=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function B9(t,e){const r=(""+t).match(L9);if(!r||r[1]==="normal")return e*1.2;switch(t=+r[2],r[3]){case"px":return t;case"%":t/=100;break}return e*t}const $9=t=>+t||0;function Vy(t,e){const r={},s=Je(e),n=s?Object.keys(e):e,i=Je(t)?s?a=>Ge(t[a],t[e[a]]):a=>t[a]:()=>t;for(const a of n)r[a]=$9(i(a));return r}function AS(t){return Vy(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Po(t){return Vy(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Wr(t){const e=AS(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function lr(t,e){t=t||{},e=e||$t.font;let r=Ge(t.size,e.size);typeof r=="string"&&(r=parseInt(r,10));let s=Ge(t.style,e.style);s&&!(""+s).match(I9)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const n={family:Ge(t.family,e.family),lineHeight:B9(Ge(t.lineHeight,e.lineHeight),r),size:r,style:s,weight:Ge(t.weight,e.weight),string:""};return n.string=A9(n),n}function w0(t,e,r,s){let n=!0,i,a,l;for(i=0,a=t.length;i<a;++i)if(l=t[i],l!==void 0&&(e!==void 0&&typeof l=="function"&&(l=l(e),n=!1),r!==void 0&&wt(l)&&(l=l[r%l.length],n=!1),l!==void 0))return s&&!n&&(s.cacheable=!1),l}function z9(t,e,r){const{min:s,max:n}=t,i=bS(e,(n-s)/2),a=(l,c)=>r&&l===0?0:l+c;return{min:a(s,-Math.abs(i)),max:a(n,i)}}function Ga(t,e){return Object.assign(Object.create(t),e)}function Wy(t,e=[""],r,s,n=()=>t[0]){const i=r||t;typeof s>"u"&&(s=RS("_fallback",t));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:s,_getTarget:n,override:l=>Wy([l,...t],e,i,s)};return new Proxy(a,{deleteProperty(l,c){return delete l[c],delete l._keys,delete t[0][c],!0},get(l,c){return PS(l,c,()=>K9(c,e,t,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,c){return xk(l).includes(c)},ownKeys(l){return xk(l)},set(l,c,d){const u=l._storage||(l._storage=n());return l[c]=u[c]=d,delete l._keys,!0}})}function Fc(t,e,r,s){const n={_cacheable:!1,_proxy:t,_context:e,_subProxy:r,_stack:new Set,_descriptors:FS(t,s),setContext:i=>Fc(t,i,r,s),override:i=>Fc(t.override(i),e,r,s)};return new Proxy(n,{deleteProperty(i,a){return delete i[a],delete t[a],!0},get(i,a,l){return PS(i,a,()=>V9(i,a,l))},getOwnPropertyDescriptor(i,a){return i._descriptors.allKeys?Reflect.has(t,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,a)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,a){return Reflect.has(t,a)},ownKeys(){return Reflect.ownKeys(t)},set(i,a,l){return t[a]=l,delete i[a],!0}})}function FS(t,e={scriptable:!0,indexable:!0}){const{_scriptable:r=e.scriptable,_indexable:s=e.indexable,_allKeys:n=e.allKeys}=t;return{allKeys:n,scriptable:r,indexable:s,isScriptable:Ba(r)?r:()=>r,isIndexable:Ba(s)?s:()=>s}}const U9=(t,e)=>t?t+Iy(e):e,Hy=(t,e)=>Je(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function PS(t,e,r){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=r();return t[e]=s,s}function V9(t,e,r){const{_proxy:s,_context:n,_subProxy:i,_descriptors:a}=t;let l=s[e];return Ba(l)&&a.isScriptable(e)&&(l=W9(e,l,t,r)),wt(l)&&l.length&&(l=H9(e,l,t,a.isIndexable)),Hy(e,l)&&(l=Fc(l,n,i&&i[e],a)),l}function W9(t,e,r,s){const{_proxy:n,_context:i,_subProxy:a,_stack:l}=r;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let c=e(i,a||s);return l.delete(t),Hy(t,c)&&(c=Yy(n._scopes,n,t,c)),c}function H9(t,e,r,s){const{_proxy:n,_context:i,_subProxy:a,_descriptors:l}=r;if(typeof i.index<"u"&&s(t))return e[i.index%e.length];if(Je(e[0])){const c=e,d=n._scopes.filter(u=>u!==c);e=[];for(const u of c){const h=Yy(d,n,t,u);e.push(Fc(h,i,a&&a[t],l))}}return e}function MS(t,e,r){return Ba(t)?t(e,r):t}const Y9=(t,e)=>t===!0?e:typeof t=="string"?Ko(e,t):void 0;function q9(t,e,r,s,n){for(const i of e){const a=Y9(r,i);if(a){t.add(a);const l=MS(a._fallback,r,n);if(typeof l<"u"&&l!==r&&l!==s)return l}else if(a===!1&&typeof s<"u"&&r!==s)return null}return!1}function Yy(t,e,r,s){const n=e._rootScopes,i=MS(e._fallback,r,s),a=[...t,...n],l=new Set;l.add(s);let c=mk(l,a,r,i||r,s);return c===null||typeof i<"u"&&i!==r&&(c=mk(l,a,i,c,s),c===null)?!1:Wy(Array.from(l),[""],n,i,()=>G9(e,r,s))}function mk(t,e,r,s,n){for(;r;)r=q9(t,e,r,s,n);return r}function G9(t,e,r){const s=t._getTarget();e in s||(s[e]={});const n=s[e];return wt(n)&&Je(r)?r:n||{}}function K9(t,e,r,s){let n;for(const i of e)if(n=RS(U9(i,t),r),typeof n<"u")return Hy(t,n)?Yy(r,s,t,n):n}function RS(t,e){for(const r of e){if(!r)continue;const s=r[t];if(typeof s<"u")return s}}function xk(t){let e=t._keys;return e||(e=t._keys=X9(t._scopes)),e}function X9(t){const e=new Set;for(const r of t)for(const s of Object.keys(r).filter(n=>!n.startsWith("_")))e.add(s);return Array.from(e)}const Q9=Number.EPSILON||1e-14,Pc=(t,e)=>e<t.length&&!t[e].skip&&t[e],DS=t=>t==="x"?"y":"x";function Z9(t,e,r,s){const n=t.skip?e:t,i=e,a=r.skip?e:r,l=D1(i,n),c=D1(a,i);let d=l/(l+c),u=c/(l+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const h=s*d,f=s*u;return{previous:{x:i.x-h*(a.x-n.x),y:i.y-h*(a.y-n.y)},next:{x:i.x+f*(a.x-n.x),y:i.y+f*(a.y-n.y)}}}function J9(t,e,r){const s=t.length;let n,i,a,l,c,d=Pc(t,0);for(let u=0;u<s-1;++u)if(c=d,d=Pc(t,u+1),!(!c||!d)){if(ru(e[u],0,Q9)){r[u]=r[u+1]=0;continue}n=r[u]/e[u],i=r[u+1]/e[u],l=Math.pow(n,2)+Math.pow(i,2),!(l<=9)&&(a=3/Math.sqrt(l),r[u]=n*a*e[u],r[u+1]=i*a*e[u])}}function eI(t,e,r="x"){const s=DS(r),n=t.length;let i,a,l,c=Pc(t,0);for(let d=0;d<n;++d){if(a=l,l=c,c=Pc(t,d+1),!l)continue;const u=l[r],h=l[s];a&&(i=(u-a[r])/3,l[`cp1${r}`]=u-i,l[`cp1${s}`]=h-i*e[d]),c&&(i=(c[r]-u)/3,l[`cp2${r}`]=u+i,l[`cp2${s}`]=h+i*e[d])}}function tI(t,e="x"){const r=DS(e),s=t.length,n=Array(s).fill(0),i=Array(s);let a,l,c,d=Pc(t,0);for(a=0;a<s;++a)if(l=c,c=d,d=Pc(t,a+1),!!c){if(d){const u=d[e]-c[e];n[a]=u!==0?(d[r]-c[r])/u:0}i[a]=l?d?Gn(n[a-1])!==Gn(n[a])?0:(n[a-1]+n[a])/2:n[a-1]:n[a]}J9(t,n,i),eI(t,i,e)}function k0(t,e,r){return Math.max(Math.min(t,r),e)}function rI(t,e){let r,s,n,i,a,l=bi(t[0],e);for(r=0,s=t.length;r<s;++r)a=i,i=l,l=r<s-1&&bi(t[r+1],e),i&&(n=t[r],a&&(n.cp1x=k0(n.cp1x,e.left,e.right),n.cp1y=k0(n.cp1y,e.top,e.bottom)),l&&(n.cp2x=k0(n.cp2x,e.left,e.right),n.cp2y=k0(n.cp2y,e.top,e.bottom)))}function sI(t,e,r,s,n){let i,a,l,c;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")tI(t,n);else{let d=s?t[t.length-1]:t[0];for(i=0,a=t.length;i<a;++i)l=t[i],c=Z9(d,l,t[Math.min(i+1,a-(s?0:1))%a],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}e.capBezierPoints&&rI(t,r)}function qy(){return typeof window<"u"&&typeof document<"u"}function Gy(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function hm(t,e,r){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[r])):s=t,s}const gx=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function nI(t,e){return gx(t).getPropertyValue(e)}const iI=["top","right","bottom","left"];function Mo(t,e,r){const s={};r=r?"-"+r:"";for(let n=0;n<4;n++){const i=iI[n];s[i]=parseFloat(t[e+"-"+i+r])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const aI=(t,e,r)=>(t>0||e>0)&&(!r||!r.shadowRoot);function oI(t,e){const r=t.touches,s=r&&r.length?r[0]:t,{offsetX:n,offsetY:i}=s;let a=!1,l,c;if(aI(n,i,t.target))l=n,c=i;else{const d=e.getBoundingClientRect();l=s.clientX-d.left,c=s.clientY-d.top,a=!0}return{x:l,y:c,box:a}}function io(t,e){if("native"in t)return t;const{canvas:r,currentDevicePixelRatio:s}=e,n=gx(r),i=n.boxSizing==="border-box",a=Mo(n,"padding"),l=Mo(n,"border","width"),{x:c,y:d,box:u}=oI(t,r),h=a.left+(u&&l.left),f=a.top+(u&&l.top);let{width:m,height:x}=e;return i&&(m-=a.width+l.width,x-=a.height+l.height),{x:Math.round((c-h)/m*r.width/s),y:Math.round((d-f)/x*r.height/s)}}function lI(t,e,r){let s,n;if(e===void 0||r===void 0){const i=t&&Gy(t);if(!i)e=t.clientWidth,r=t.clientHeight;else{const a=i.getBoundingClientRect(),l=gx(i),c=Mo(l,"border","width"),d=Mo(l,"padding");e=a.width-d.width-c.width,r=a.height-d.height-c.height,s=hm(l.maxWidth,i,"clientWidth"),n=hm(l.maxHeight,i,"clientHeight")}}return{width:e,height:r,maxWidth:s||dm,maxHeight:n||dm}}const _0=t=>Math.round(t*10)/10;function cI(t,e,r,s){const n=gx(t),i=Mo(n,"margin"),a=hm(n.maxWidth,t,"clientWidth")||dm,l=hm(n.maxHeight,t,"clientHeight")||dm,c=lI(t,e,r);let{width:d,height:u}=c;if(n.boxSizing==="content-box"){const f=Mo(n,"border","width"),m=Mo(n,"padding");d-=m.width+f.width,u-=m.height+f.height}return d=Math.max(0,d-i.width),u=Math.max(0,s?d/s:u-i.height),d=_0(Math.min(d,a,c.maxWidth)),u=_0(Math.min(u,l,c.maxHeight)),d&&!u&&(u=_0(d/2)),(e!==void 0||r!==void 0)&&s&&c.height&&u>c.height&&(u=c.height,d=_0(Math.floor(u*s))),{width:d,height:u}}function pk(t,e,r){const s=e||1,n=Math.floor(t.height*s),i=Math.floor(t.width*s);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const a=t.canvas;return a.style&&(r||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||a.height!==n||a.width!==i?(t.currentDevicePixelRatio=s,a.height=n,a.width=i,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const dI=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};qy()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function gk(t,e){const r=nI(t,e),s=r&&r.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function ao(t,e,r,s){return{x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}}function uI(t,e,r,s){return{x:t.x+r*(e.x-t.x),y:s==="middle"?r<.5?t.y:e.y:s==="after"?r<1?t.y:e.y:r>0?e.y:t.y}}function hI(t,e,r,s){const n={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},a=ao(t,n,r),l=ao(n,i,r),c=ao(i,e,r),d=ao(a,l,r),u=ao(l,c,r);return ao(d,u,r)}const fI=function(t,e){return{x(r){return t+t+e-r},setWidth(r){e=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,s){return r-s},leftForLtr(r,s){return r-s}}},mI=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ec(t,e,r){return t?fI(e,r):mI()}function OS(t,e){let r,s;(e==="ltr"||e==="rtl")&&(r=t.canvas.style,s=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),t.prevTextDirection=s)}function LS(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function IS(t){return t==="angle"?{between:qu,compare:f9,normalize:Pr}:{between:yi,compare:(e,r)=>e-r,normalize:e=>e}}function vk({start:t,end:e,count:r,loop:s,style:n}){return{start:t%r,end:e%r,loop:s&&(e-t+1)%r===0,style:n}}function xI(t,e,r){const{property:s,start:n,end:i}=r,{between:a,normalize:l}=IS(s),c=e.length;let{start:d,end:u,loop:h}=t,f,m;if(h){for(d+=c,u+=c,f=0,m=c;f<m&&a(l(e[d%c][s]),n,i);++f)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:h,style:t.style}}function BS(t,e,r){if(!r)return[t];const{property:s,start:n,end:i}=r,a=e.length,{compare:l,between:c,normalize:d}=IS(s),{start:u,end:h,loop:f,style:m}=xI(t,e,r),x=[];let p=!1,g=null,v,b,y;const k=()=>c(n,y,v)&&l(n,y)!==0,N=()=>l(i,v)===0||c(i,y,v),E=()=>p||k(),j=()=>!p||N();for(let _=u,S=u;_<=h;++_)b=e[_%a],!b.skip&&(v=d(b[s]),v!==y&&(p=c(v,n,i),g===null&&E()&&(g=l(v,n)===0?_:S),g!==null&&j()&&(x.push(vk({start:g,end:_,loop:f,count:a,style:m})),g=null),S=_,y=v));return g!==null&&x.push(vk({start:g,end:h,loop:f,count:a,style:m})),x}function $S(t,e){const r=[],s=t.segments;for(let n=0;n<s.length;n++){const i=BS(s[n],t.points,e);i.length&&r.push(...i)}return r}function pI(t,e,r,s){let n=0,i=e-1;if(r&&!s)for(;n<e&&!t[n].skip;)n++;for(;n<e&&t[n].skip;)n++;for(n%=e,r&&(i+=n);i>n&&t[i%e].skip;)i--;return i%=e,{start:n,end:i}}function gI(t,e,r,s){const n=t.length,i=[];let a=e,l=t[e],c;for(c=e+1;c<=r;++c){const d=t[c%n];d.skip||d.stop?l.skip||(s=!1,i.push({start:e%n,end:(c-1)%n,loop:s}),e=a=d.stop?c:null):(a=c,l.skip&&(e=c)),l=d}return a!==null&&i.push({start:e%n,end:a%n,loop:s}),i}function vI(t,e){const r=t.points,s=t.options.spanGaps,n=r.length;if(!n)return[];const i=!!t._loop,{start:a,end:l}=pI(r,n,i,s);if(s===!0)return yk(t,[{start:a,end:l,loop:i}],r,e);const c=l<a?l+n:l,d=!!t._fullLoop&&a===0&&l===n-1;return yk(t,gI(r,a,c,d),r,e)}function yk(t,e,r,s){return!s||!s.setContext||!r?e:yI(t,e,r,s)}function yI(t,e,r,s){const n=t._chart.getContext(),i=bk(t.options),{_datasetIndex:a,options:{spanGaps:l}}=t,c=r.length,d=[];let u=i,h=e[0].start,f=h;function m(x,p,g,v){const b=l?-1:1;if(x!==p){for(x+=c;r[x%c].skip;)x-=b;for(;r[p%c].skip;)p+=b;x%c!==p%c&&(d.push({start:x%c,end:p%c,loop:g,style:v}),u=v,h=p%c)}}for(const x of e){h=l?h:x.start;let p=r[h%c],g;for(f=h+1;f<=x.end;f++){const v=r[f%c];g=bk(s.setContext(Ga(n,{type:"segment",p0:p,p1:v,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:a}))),bI(g,u)&&m(h,f-1,x.loop,u),p=v,u=g}h<f-1&&m(h,f-1,x.loop,u)}return d}function bk(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function bI(t,e){if(!e)return!1;const r=[],s=function(n,i){return Uy(i)?(r.includes(i)||r.push(i),r.indexOf(i)):i};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function N0(t,e,r){return t.options.clip?t[r]:e[r]}function wI(t,e){const{xScale:r,yScale:s}=t;return r&&s?{left:N0(r,e,"left"),right:N0(r,e,"right"),top:N0(s,e,"top"),bottom:N0(s,e,"bottom")}:e}function zS(t,e){const r=e._clip;if(r.disabled)return!1;const s=wI(e,t.chartArea);return{left:r.left===!1?0:s.left-(r.left===!0?0:r.left),right:r.right===!1?t.width:s.right+(r.right===!0?0:r.right),top:r.top===!1?0:s.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?t.height:s.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class kI{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,r,s,n){const i=r.listeners[n],a=r.duration;i.forEach(l=>l({chart:e,initial:r.initial,numSteps:a,currentStep:Math.min(s-r.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=ES.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let r=0;this._charts.forEach((s,n)=>{if(!s.running||!s.items.length)return;const i=s.items;let a=i.length-1,l=!1,c;for(;a>=0;--a)c=i[a],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(e),l=!0):(i[a]=i[i.length-1],i.pop());l&&(n.draw(),this._notify(n,s,e,"progress")),i.length||(s.running=!1,this._notify(n,s,e,"complete"),s.initial=!1),r+=i.length}),this._lastDate=e,r===0&&(this._running=!1)}_getAnims(e){const r=this._charts;let s=r.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(e,s)),s}listen(e,r,s){this._getAnims(e).listeners[r].push(s)}add(e,r){!r||!r.length||this._getAnims(e).items.push(...r)}has(e){return this._getAnims(e).items.length>0}start(e){const r=this._charts.get(e);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((s,n)=>Math.max(s,n._duration),0),this._refresh())}running(e){if(!this._running)return!1;const r=this._charts.get(e);return!(!r||!r.running||!r.items.length)}stop(e){const r=this._charts.get(e);if(!r||!r.items.length)return;const s=r.items;let n=s.length-1;for(;n>=0;--n)s[n].cancel();r.items=[],this._notify(e,r,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var oi=new kI;const wk="transparent",_I={boolean(t,e,r){return r>.5?e:t},color(t,e,r){const s=uk(t||wk),n=s.valid&&uk(e||wk);return n&&n.valid?n.mix(s,r).hexString():e},number(t,e,r){return t+(e-t)*r}};class NI{constructor(e,r,s,n){const i=r[s];n=w0([e.to,n,i,e.from]);const a=w0([e.from,i,n]);this._active=!0,this._fn=e.fn||_I[e.type||typeof a],this._easing=su[e.easing]||su.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=r,this._prop=s,this._from=a,this._to=n,this._promises=void 0}active(){return this._active}update(e,r,s){if(this._active){this._notify(!1);const n=this._target[this._prop],i=s-this._start,a=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=w0([e.to,r,n,e.from]),this._from=w0([e.from,n,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const r=e-this._start,s=this._duration,n=this._prop,i=this._from,a=this._loop,l=this._to;let c;if(this._active=i!==l&&(a||r<s),!this._active){this._target[n]=l,this._notify(!0);return}if(r<0){this._target[n]=i;return}c=r/s%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[n]=this._fn(i,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((r,s)=>{e.push({res:r,rej:s})})}_notify(e){const r=e?"res":"rej",s=this._promises||[];for(let n=0;n<s.length;n++)s[n][r]()}}class US{constructor(e,r){this._chart=e,this._properties=new Map,this.configure(r)}configure(e){if(!Je(e))return;const r=Object.keys($t.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const i=e[n];if(!Je(i))return;const a={};for(const l of r)a[l]=i[l];(wt(i.properties)&&i.properties||[n]).forEach(l=>{(l===n||!s.has(l))&&s.set(l,a)})})}_animateOptions(e,r){const s=r.options,n=EI(e,s);if(!n)return[];const i=this._createAnimations(n,s);return s.$shared&&jI(e.options.$animations,s).then(()=>{e.options=s},()=>{}),i}_createAnimations(e,r){const s=this._properties,n=[],i=e.$animations||(e.$animations={}),a=Object.keys(r),l=Date.now();let c;for(c=a.length-1;c>=0;--c){const d=a[c];if(d.charAt(0)==="$")continue;if(d==="options"){n.push(...this._animateOptions(e,r));continue}const u=r[d];let h=i[d];const f=s.get(d);if(h)if(f&&h.active()){h.update(f,u,l);continue}else h.cancel();if(!f||!f.duration){e[d]=u;continue}i[d]=h=new NI(f,e,d,u),n.push(h)}return n}update(e,r){if(this._properties.size===0){Object.assign(e,r);return}const s=this._createAnimations(e,r);if(s.length)return oi.add(this._chart,s),!0}}function jI(t,e){const r=[],s=Object.keys(e);for(let n=0;n<s.length;n++){const i=t[s[n]];i&&i.active()&&r.push(i.wait())}return Promise.all(r)}function EI(t,e){if(!e)return;let r=t.options;if(!r){t.options=e;return}return r.$shared&&(t.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function kk(t,e){const r=t&&t.options||{},s=r.reverse,n=r.min===void 0?e:0,i=r.max===void 0?e:0;return{start:s?i:n,end:s?n:i}}function SI(t,e,r){if(r===!1)return!1;const s=kk(t,r),n=kk(e,r);return{top:n.end,right:s.end,bottom:n.start,left:s.start}}function CI(t){let e,r,s,n;return Je(t)?(e=t.top,r=t.right,s=t.bottom,n=t.left):e=r=s=n=t,{top:e,right:r,bottom:s,left:n,disabled:t===!1}}function VS(t,e){const r=[],s=t._getSortedDatasetMetas(e);let n,i;for(n=0,i=s.length;n<i;++n)r.push(s[n].index);return r}function _k(t,e,r,s={}){const n=t.keys,i=s.mode==="single";let a,l,c,d;if(e===null)return;let u=!1;for(a=0,l=n.length;a<l;++a){if(c=+n[a],c===r){if(u=!0,s.all)continue;break}d=t.values[c],Bt(d)&&(i||e===0||Gn(e)===Gn(d))&&(e+=d)}return!u&&!s.all?0:e}function TI(t,e){const{iScale:r,vScale:s}=e,n=r.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",a=Object.keys(t),l=new Array(a.length);let c,d,u;for(c=0,d=a.length;c<d;++c)u=a[c],l[c]={[n]:u,[i]:t[u]};return l}function kp(t,e){const r=t&&t.options.stacked;return r||r===void 0&&e.stack!==void 0}function AI(t,e,r){return`${t.id}.${e.id}.${r.stack||r.type}`}function FI(t){const{min:e,max:r,minDefined:s,maxDefined:n}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:n?r:Number.POSITIVE_INFINITY}}function PI(t,e,r){const s=t[e]||(t[e]={});return s[r]||(s[r]={})}function Nk(t,e,r,s){for(const n of e.getMatchingVisibleMetas(s).reverse()){const i=t[n.index];if(r&&i>0||!r&&i<0)return n.index}return null}function jk(t,e){const{chart:r,_cachedMeta:s}=t,n=r._stacks||(r._stacks={}),{iScale:i,vScale:a,index:l}=s,c=i.axis,d=a.axis,u=AI(i,a,s),h=e.length;let f;for(let m=0;m<h;++m){const x=e[m],{[c]:p,[d]:g}=x,v=x._stacks||(x._stacks={});f=v[d]=PI(n,u,p),f[l]=g,f._top=Nk(f,a,!0,s.type),f._bottom=Nk(f,a,!1,s.type);const b=f._visualValues||(f._visualValues={});b[l]=g}}function _p(t,e){const r=t.scales;return Object.keys(r).filter(s=>r[s].axis===e).shift()}function MI(t,e){return Ga(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function RI(t,e,r){return Ga(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}function pd(t,e){const r=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const n of e){const i=n._stacks;if(!i||i[s]===void 0||i[s][r]===void 0)return;delete i[s][r],i[s]._visualValues!==void 0&&i[s]._visualValues[r]!==void 0&&delete i[s]._visualValues[r]}}}const Np=t=>t==="reset"||t==="none",Ek=(t,e)=>e?t:Object.assign({},t),DI=(t,e,r)=>t&&!e.hidden&&e._stacked&&{keys:VS(r,!0),values:null};class Ro{constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=kp(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&pd(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,r=this._cachedMeta,s=this.getDataset(),n=(h,f,m,x)=>h==="x"?f:h==="r"?x:m,i=r.xAxisID=Ge(s.xAxisID,_p(e,"x")),a=r.yAxisID=Ge(s.yAxisID,_p(e,"y")),l=r.rAxisID=Ge(s.rAxisID,_p(e,"r")),c=r.indexAxis,d=r.iAxisID=n(c,i,a,l),u=r.vAxisID=n(c,a,i,l);r.xScale=this.getScaleForId(i),r.yScale=this.getScaleForId(a),r.rScale=this.getScaleForId(l),r.iScale=this.getScaleForId(d),r.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&lk(this._data,this),e._stacked&&pd(e)}_dataCheck(){const e=this.getDataset(),r=e.data||(e.data=[]),s=this._data;if(Je(r)){const n=this._cachedMeta;this._data=TI(r,n)}else if(s!==r){if(s){lk(s,this);const n=this._cachedMeta;pd(n),n._parsed=[]}r&&Object.isExtensible(r)&&g9(r,this),this._syncList=[],this._data=r}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const r=this._cachedMeta,s=this.getDataset();let n=!1;this._dataCheck();const i=r._stacked;r._stacked=kp(r.vScale,r),r.stack!==s.stack&&(n=!0,pd(r),r.stack=s.stack),this._resyncElements(e),(n||i!==r._stacked)&&(jk(this,r._parsed),r._stacked=kp(r.vScale,r))}configure(){const e=this.chart.config,r=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){const{_cachedMeta:s,_data:n}=this,{iScale:i,_stacked:a}=s,l=i.axis;let c=e===0&&r===n.length?!0:s._sorted,d=e>0&&s._parsed[e-1],u,h,f;if(this._parsing===!1)s._parsed=n,s._sorted=!0,f=n;else{wt(n[e])?f=this.parseArrayData(s,n,e,r):Je(n[e])?f=this.parseObjectData(s,n,e,r):f=this.parsePrimitiveData(s,n,e,r);const m=()=>h[l]===null||d&&h[l]<d[l];for(u=0;u<r;++u)s._parsed[u+e]=h=f[u],c&&(m()&&(c=!1),d=h);s._sorted=c}a&&jk(this,f)}parsePrimitiveData(e,r,s,n){const{iScale:i,vScale:a}=e,l=i.axis,c=a.axis,d=i.getLabels(),u=i===a,h=new Array(n);let f,m,x;for(f=0,m=n;f<m;++f)x=f+s,h[f]={[l]:u||i.parse(d[x],x),[c]:a.parse(r[x],x)};return h}parseArrayData(e,r,s,n){const{xScale:i,yScale:a}=e,l=new Array(n);let c,d,u,h;for(c=0,d=n;c<d;++c)u=c+s,h=r[u],l[c]={x:i.parse(h[0],u),y:a.parse(h[1],u)};return l}parseObjectData(e,r,s,n){const{xScale:i,yScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(n);let u,h,f,m;for(u=0,h=n;u<h;++u)f=u+s,m=r[f],d[u]={x:i.parse(Ko(m,l),f),y:a.parse(Ko(m,c),f)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,s){const n=this.chart,i=this._cachedMeta,a=r[e.axis],l={keys:VS(n,!0),values:r._stacks[e.axis]._visualValues};return _k(l,a,i.index,{mode:s})}updateRangeFromParsed(e,r,s,n){const i=s[r.axis];let a=i===null?NaN:i;const l=n&&s._stacks[r.axis];n&&l&&(n.values=l,a=_k(n,i,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,r){const s=this._cachedMeta,n=s._parsed,i=s._sorted&&e===s.iScale,a=n.length,l=this._getOtherScale(e),c=DI(r,s,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=FI(l);let f,m;function x(){m=n[f];const p=m[l.axis];return!Bt(m[e.axis])||u>p||h<p}for(f=0;f<a&&!(!x()&&(this.updateRangeFromParsed(d,e,m,c),i));++f);if(i){for(f=a-1;f>=0;--f)if(!x()){this.updateRangeFromParsed(d,e,m,c);break}}return d}getAllParsedValues(e){const r=this._cachedMeta._parsed,s=[];let n,i,a;for(n=0,i=r.length;n<i;++n)a=r[n][e.axis],Bt(a)&&s.push(a);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const r=this._cachedMeta,s=r.iScale,n=r.vScale,i=this.getParsed(e);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:n?""+n.getLabelForValue(i[n.axis]):""}}_update(e){const r=this._cachedMeta;this.update(e||"default"),r._clip=CI(Ge(this.options.clip,SI(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this.chart,s=this._cachedMeta,n=s.data||[],i=r.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||n.length-l,d=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,i,l,c),u=l;u<l+c;++u){const h=n[u];h.hidden||(h.active&&d?a.push(h):h.draw(e,i))}for(u=0;u<a.length;++u)a[u].draw(e,i)}getStyle(e,r){const s=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,r,s){const n=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];i=a.$context||(a.$context=RI(this.getContext(),e,a)),i.parsed=this.getParsed(e),i.raw=n.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=MI(this.chart.getContext(),this.index)),i.dataset=n,i.index=i.datasetIndex=this.index;return i.active=!!r,i.mode=s,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",s){const n=r==="active",i=this._cachedDataOpts,a=e+"-"+r,l=i[a],c=this.enableOptionSharing&&Hu(s);if(l)return Ek(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),h=n?[`${e}Hover`,"hover",e,""]:[e,""],f=d.getOptionScopes(this.getDataset(),u),m=Object.keys($t.elements[e]),x=()=>this.getContext(s,n,r),p=d.resolveNamedOptions(f,m,x,h);return p.$shared&&(p.$shared=c,i[a]=Object.freeze(Ek(p,c))),p}_resolveAnimations(e,r,s){const n=this.chart,i=this._cachedDataOpts,a=`animation-${r}`,l=i[a];if(l)return l;let c;if(n.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,r),f=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(f,this.getContext(e,s,r))}const d=new US(n,c&&c.animations);return c&&c._cacheable&&(i[a]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||Np(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){const s=this.resolveDataElementOptions(e,r),n=this._sharedOptions,i=this.getSharedOptions(s),a=this.includeOptions(r,i)||i!==n;return this.updateSharedOptions(i,r,s),{sharedOptions:i,includeOptions:a}}updateElement(e,r,s,n){Np(n)?Object.assign(e,s):this._resolveAnimations(r,n).update(e,s)}updateSharedOptions(e,r,s){e&&!Np(r)&&this._resolveAnimations(void 0,r).update(e,s)}_setStyle(e,r,s,n){e.active=n;const i=this.getStyle(r,n);this._resolveAnimations(r,s,n).update(e,{options:!n&&this.getSharedOptions(i)||i})}removeHoverStyle(e,r,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,r,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const r=this._data,s=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const n=s.length,i=r.length,a=Math.min(i,n);a&&this.parse(0,a),i>n?this._insertElements(n,i-n,e):i<n&&this._removeElements(i,n-i)}_insertElements(e,r,s=!0){const n=this._cachedMeta,i=n.data,a=e+r;let l;const c=d=>{for(d.length+=r,l=d.length-1;l>=a;l--)d[l]=d[l-r]};for(c(i),l=e;l<a;++l)i[l]=new this.dataElementType;this._parsing&&c(n._parsed),this.parse(e,r),s&&this.updateElements(i,e,r,"reset")}updateElements(e,r,s,n){}_removeElements(e,r){const s=this._cachedMeta;if(this._parsing){const n=s._parsed.splice(e,r);s._stacked&&pd(s,n)}s.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[r,s,n]=e;this[r](s,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}_e(Ro,"defaults",{}),_e(Ro,"datasetElementType",null),_e(Ro,"dataElementType",null);function OI(t,e){if(!t._cache.$bar){const r=t.getMatchingVisibleMetas(e);let s=[];for(let n=0,i=r.length;n<i;n++)s=s.concat(r[n].controller.getAllParsedValues(t));t._cache.$bar=jS(s.sort((n,i)=>n-i))}return t._cache.$bar}function LI(t){const e=t.iScale,r=OI(e,t.type);let s=e._length,n,i,a,l;const c=()=>{a===32767||a===-32768||(Hu(l)&&(s=Math.min(s,Math.abs(a-l)||s)),l=a)};for(n=0,i=r.length;n<i;++n)a=e.getPixelForValue(r[n]),c();for(l=void 0,n=0,i=e.ticks.length;n<i;++n)a=e.getPixelForTick(n),c();return s}function II(t,e,r,s){const n=r.barThickness;let i,a;return it(n)?(i=e.min*r.categoryPercentage,a=r.barPercentage):(i=n*s,a=1),{chunk:i/s,ratio:a,start:e.pixels[t]-i/2}}function BI(t,e,r,s){const n=e.pixels,i=n[t];let a=t>0?n[t-1]:null,l=t<n.length-1?n[t+1]:null;const c=r.categoryPercentage;a===null&&(a=i-(l===null?e.end-e.start:l-i)),l===null&&(l=i+i-a);const d=i-(i-Math.min(a,l))/2*c;return{chunk:Math.abs(l-a)/2*c/s,ratio:r.barPercentage,start:d}}function $I(t,e,r,s){const n=r.parse(t[0],s),i=r.parse(t[1],s),a=Math.min(n,i),l=Math.max(n,i);let c=a,d=l;Math.abs(a)>Math.abs(l)&&(c=l,d=a),e[r.axis]=d,e._custom={barStart:c,barEnd:d,start:n,end:i,min:a,max:l}}function WS(t,e,r,s){return wt(t)?$I(t,e,r,s):e[r.axis]=r.parse(t,s),e}function Sk(t,e,r,s){const n=t.iScale,i=t.vScale,a=n.getLabels(),l=n===i,c=[];let d,u,h,f;for(d=r,u=r+s;d<u;++d)f=e[d],h={},h[n.axis]=l||n.parse(a[d],d),c.push(WS(f,h,i,d));return c}function jp(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function zI(t,e,r){return t!==0?Gn(t):(e.isHorizontal()?1:-1)*(e.min>=r?1:-1)}function UI(t){let e,r,s,n,i;return t.horizontal?(e=t.base>t.x,r="left",s="right"):(e=t.base<t.y,r="bottom",s="top"),e?(n="end",i="start"):(n="start",i="end"),{start:r,end:s,reverse:e,top:n,bottom:i}}function VI(t,e,r,s){let n=e.borderSkipped;const i={};if(!n){t.borderSkipped=i;return}if(n===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:l,reverse:c,top:d,bottom:u}=UI(t);n==="middle"&&r&&(t.enableBorderRadius=!0,(r._top||0)===s?n=d:(r._bottom||0)===s?n=u:(i[Ck(u,a,l,c)]=!0,n=d)),i[Ck(n,a,l,c)]=!0,t.borderSkipped=i}function Ck(t,e,r,s){return s?(t=WI(t,e,r),t=Tk(t,r,e)):t=Tk(t,e,r),t}function WI(t,e,r){return t===e?r:t===r?e:t}function Tk(t,e,r){return t==="start"?e:t==="end"?r:t}function HI(t,{inflateAmount:e},r){t.inflateAmount=e==="auto"?r===1?.33:0:e}class gf extends Ro{parsePrimitiveData(e,r,s,n){return Sk(e,r,s,n)}parseArrayData(e,r,s,n){return Sk(e,r,s,n)}parseObjectData(e,r,s,n){const{iScale:i,vScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=i.axis==="x"?l:c,u=a.axis==="x"?l:c,h=[];let f,m,x,p;for(f=s,m=s+n;f<m;++f)p=r[f],x={},x[i.axis]=i.parse(Ko(p,d),f),h.push(WS(Ko(p,u),x,a,f));return h}updateRangeFromParsed(e,r,s,n){super.updateRangeFromParsed(e,r,s,n);const i=s._custom;i&&r===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const r=this._cachedMeta,{iScale:s,vScale:n}=r,i=this.getParsed(e),a=i._custom,l=jp(a)?"["+a.start+", "+a.end+"]":""+n.getLabelForValue(i[n.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,e)}updateElements(e,r,s,n){const i=n==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(r,n);for(let m=r;m<r+s;m++){const x=this.getParsed(m),p=i||it(x[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(m),g=this._calculateBarIndexPixels(m,u),v=(x._stacks||{})[l.axis],b={horizontal:d,base:p.base,enableBorderRadius:!v||jp(x._custom)||a===v._top||a===v._bottom,x:d?p.head:g.center,y:d?g.center:p.head,height:d?g.size:Math.abs(p.size),width:d?Math.abs(p.size):g.size};f&&(b.options=h||this.resolveDataElementOptions(m,e[m].active?"active":n));const y=b.options||e[m].options;VI(b,y,v,a),HI(b,y,u.ratio),this.updateElement(e[m],m,b,n)}}_getStacks(e,r){const{iScale:s}=this._cachedMeta,n=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=s.options.stacked,a=[],l=this._cachedMeta.controller.getParsed(r),c=l&&l[s.axis],d=u=>{const h=u._parsed.find(m=>m[s.axis]===c),f=h&&h[u.vScale.axis];if(it(f)||isNaN(f))return!0};for(const u of n)if(!(r!==void 0&&d(u))&&((i===!1||a.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&a.push(u.stack),u.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===r).shift()}_getAxis(){const e={},r=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[Ge(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,r)]=!0;return Object.keys(e)}_getStackIndex(e,r,s){const n=this._getStacks(e,s),i=r!==void 0?n.indexOf(r):-1;return i===-1?n.length-1:i}_getRuler(){const e=this.options,r=this._cachedMeta,s=r.iScale,n=[];let i,a;for(i=0,a=r.data.length;i<a;++i)n.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const l=e.barThickness;return{min:l||LI(r),pixels:n,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:r,_stacked:s,index:n},options:{base:i,minBarLength:a}}=this,l=i||0,c=this.getParsed(e),d=c._custom,u=jp(d);let h=c[r.axis],f=0,m=s?this.applyStack(r,c,s):h,x,p;m!==h&&(f=m-h,m=h),u&&(h=d.barStart,m=d.barEnd-d.barStart,h!==0&&Gn(h)!==Gn(d.barEnd)&&(f=0),f+=h);const g=!it(i)&&!u?i:f;let v=r.getPixelForValue(g);if(this.chart.getDataVisibility(e)?x=r.getPixelForValue(f+m):x=v,p=x-v,Math.abs(p)<a){p=zI(p,r,l)*a,h===l&&(v-=p/2);const b=r.getPixelForDecimal(0),y=r.getPixelForDecimal(1),k=Math.min(b,y),N=Math.max(b,y);v=Math.max(Math.min(v,N),k),x=v+p,s&&!u&&(c._stacks[r.axis]._visualValues[n]=r.getValueForPixel(x)-r.getValueForPixel(v))}if(v===r.getPixelForValue(l)){const b=Gn(p)*r.getLineWidthForValue(l)/2;v+=b,p-=b}return{size:p,base:v,head:x,center:x+p/2}}_calculateBarIndexPixels(e,r){const s=r.scale,n=this.options,i=n.skipNull,a=Ge(n.maxBarThickness,1/0);let l,c;const d=this._getAxisCount();if(r.grouped){const u=i?this._getStackCount(e):r.stackCount,h=n.barThickness==="flex"?BI(e,r,n,u*d):II(e,r,n,u*d),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(Ge(f,this.getFirstScaleIdForIndexAxis())),x=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+m;l=h.start+h.chunk*x+h.chunk/2,c=Math.min(a,h.chunk*h.ratio)}else l=s.getPixelForValue(this.getParsed(e)[s.axis],e),c=Math.min(a,r.min*r.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this._cachedMeta,r=e.vScale,s=e.data,n=s.length;let i=0;for(;i<n;++i)this.getParsed(i)[r.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}_e(gf,"id","bar"),_e(gf,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),_e(gf,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function YI(t,e,r){let s=1,n=1,i=0,a=0;if(e<_t){const l=t,c=l+e,d=Math.cos(l),u=Math.sin(l),h=Math.cos(c),f=Math.sin(c),m=(y,k,N)=>qu(y,l,c,!0)?1:Math.max(k,k*r,N,N*r),x=(y,k,N)=>qu(y,l,c,!0)?-1:Math.min(k,k*r,N,N*r),p=m(0,d,h),g=m(Ht,u,f),v=x(lt,d,h),b=x(lt+Ht,u,f);s=(p-v)/2,n=(g-b)/2,i=-(p+v)/2,a=-(g+b)/2}return{ratioX:s,ratioY:n,offsetX:i,offsetY:a}}class Md extends Ro{constructor(e,r){super(e,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,r){const s=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=s;else{let i=c=>+s[c];if(Je(s[e])){const{key:c="value"}=this._parsing;i=d=>+Ko(s[d],c)}let a,l;for(a=e,l=e+r;a<l;++a)n._parsed[a]=i(a)}}_getRotation(){return Wn(this.options.rotation-90)}_getCircumference(){return Wn(this.options.circumference)}_getRotationExtents(){let e=_t,r=-_t;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const n=this.chart.getDatasetMeta(s).controller,i=n._getRotation(),a=n._getCircumference();e=Math.min(e,i),r=Math.max(r,i+a)}return{rotation:e,circumference:r-e}}update(e){const r=this.chart,{chartArea:s}=r,n=this._cachedMeta,i=n.data,a=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-a)/2,0),c=Math.min(r9(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:m,offsetX:x,offsetY:p}=YI(h,u,c),g=(s.width-a)/f,v=(s.height-a)/m,b=Math.max(Math.min(g,v)/2,0),y=bS(this.options.radius,b),k=Math.max(y*c,0),N=(y-k)/this._getVisibleDatasetWeightTotal();this.offsetX=x*y,this.offsetY=p*y,n.total=this.calculateTotal(),this.outerRadius=y-N*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-N*d,0),this.updateElements(i,0,i.length,e)}_circumference(e,r){const s=this.options,n=this._cachedMeta,i=this._getCircumference();return r&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||n._parsed[e]===null||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*i/_t)}updateElements(e,r,s,n){const i=n==="reset",a=this.chart,l=a.chartArea,d=a.options.animation,u=(l.left+l.right)/2,h=(l.top+l.bottom)/2,f=i&&d.animateScale,m=f?0:this.innerRadius,x=f?0:this.outerRadius,{sharedOptions:p,includeOptions:g}=this._getSharedOptions(r,n);let v=this._getRotation(),b;for(b=0;b<r;++b)v+=this._circumference(b,i);for(b=r;b<r+s;++b){const y=this._circumference(b,i),k=e[b],N={x:u+this.offsetX,y:h+this.offsetY,startAngle:v,endAngle:v+y,circumference:y,outerRadius:x,innerRadius:m};g&&(N.options=p||this.resolveDataElementOptions(b,k.active?"active":n)),v+=y,this.updateElement(k,b,N,n)}}calculateTotal(){const e=this._cachedMeta,r=e.data;let s=0,n;for(n=0;n<r.length;n++){const i=e._parsed[n];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(n)&&!r[n].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(e){const r=this._cachedMeta.total;return r>0&&!isNaN(e)?_t*(Math.abs(e)/r):0}getLabelAndValue(e){const r=this._cachedMeta,s=this.chart,n=s.data.labels||[],i=fx(r._parsed[e],s.options.locale);return{label:n[e]||"",value:i}}getMaxBorderWidth(e){let r=0;const s=this.chart;let n,i,a,l,c;if(!e){for(n=0,i=s.data.datasets.length;n<i;++n)if(s.isDatasetVisible(n)){a=s.getDatasetMeta(n),e=a.data,l=a.controller;break}}if(!e)return 0;for(n=0,i=e.length;n<i;++n)c=l.resolveDataElementOptions(n),c.borderAlign!=="inner"&&(r=Math.max(r,c.borderWidth||0,c.hoverBorderWidth||0));return r}getMaxOffset(e){let r=0;for(let s=0,n=e.length;s<n;++s){const i=this.resolveDataElementOptions(s);r=Math.max(r,i.offset||0,i.hoverOffset||0)}return r}_getRingWeightOffset(e){let r=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(r+=this._getRingWeight(s));return r}_getRingWeight(e){return Math.max(Ge(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}_e(Md,"id","doughnut"),_e(Md,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),_e(Md,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),_e(Md,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const r=e.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:s,color:n}}=e.legend.options;return r.labels.map((i,a)=>{const c=e.getDatasetMeta(0).controller.getStyle(a);return{text:i,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:n,lineWidth:c.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,r,s){s.chart.toggleDataVisibility(r.index),s.chart.update()}}}});class vf extends Ro{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const r=this._cachedMeta,{dataset:s,data:n=[],_dataset:i}=r,a=this.chart._animationsDisabled;let{start:l,count:c}=b9(r,n,a);this._drawStart=l,this._drawCount=c,w9(r)&&(l=0,c=n.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=n;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(s,void 0,{animated:!a,options:d},e),this.updateElements(n,l,c,e)}updateElements(e,r,s,n){const i=n==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(r,n),f=a.axis,m=l.axis,{spanGaps:x,segment:p}=this.options,g=Yu(x)?x:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||i||n==="none",b=r+s,y=e.length;let k=r>0&&this.getParsed(r-1);for(let N=0;N<y;++N){const E=e[N],j=v?E:{};if(N<r||N>=b){j.skip=!0;continue}const _=this.getParsed(N),S=it(_[m]),C=j[f]=a.getPixelForValue(_[f],N),F=j[m]=i||S?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,_,c):_[m],N);j.skip=isNaN(C)||isNaN(F)||S,j.stop=N>0&&Math.abs(_[f]-k[f])>g,p&&(j.parsed=_,j.raw=d.data[N]),h&&(j.options=u||this.resolveDataElementOptions(N,E.active?"active":n)),v||this.updateElement(E,N,j,n),k=_}}getMaxOverflow(){const e=this._cachedMeta,r=e.dataset,s=r.options&&r.options.borderWidth||0,n=e.data||[];if(!n.length)return s;const i=n[0].size(this.resolveDataElementOptions(0)),a=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,i,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}_e(vf,"id","line"),_e(vf,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),_e(vf,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function eo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ky{constructor(e){_e(this,"options");this.options=e||{}}static override(e){Object.assign(Ky.prototype,e)}init(){}formats(){return eo()}parse(){return eo()}format(){return eo()}add(){return eo()}diff(){return eo()}startOf(){return eo()}endOf(){return eo()}}var qI={_date:Ky};function GI(t,e,r,s){const{controller:n,data:i,_sorted:a}=t,l=n._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&a&&i.length){const d=l._reversePixels?x9:po;if(s){if(n._sharedOptions){const u=i[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=d(i,e,r-h),m=d(i,e,r+h);return{lo:f.lo,hi:m.hi}}}}else{const u=d(i,e,r);if(c){const{vScale:h}=n._cachedMeta,{_parsed:f}=t,m=f.slice(0,u.lo+1).reverse().findIndex(p=>!it(p[h.axis]));u.lo-=Math.max(0,m);const x=f.slice(u.hi).findIndex(p=>!it(p[h.axis]));u.hi+=Math.max(0,x)}return u}}return{lo:0,hi:i.length-1}}function Mh(t,e,r,s,n){const i=t.getSortedVisibleDatasetMetas(),a=r[e];for(let l=0,c=i.length;l<c;++l){const{index:d,data:u}=i[l],{lo:h,hi:f}=GI(i[l],e,a,n);for(let m=h;m<=f;++m){const x=u[m];x.skip||s(x,d,m)}}}function KI(t){const e=t.indexOf("x")!==-1,r=t.indexOf("y")!==-1;return function(s,n){const i=e?Math.abs(s.x-n.x):0,a=r?Math.abs(s.y-n.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}function Ep(t,e,r,s,n){const i=[];return!n&&!t.isPointInArea(e)||Mh(t,r,e,function(l,c,d){!n&&!bi(l,t.chartArea,0)||l.inRange(e.x,e.y,s)&&i.push({element:l,datasetIndex:c,index:d})},!0),i}function XI(t,e,r,s){let n=[];function i(a,l,c){const{startAngle:d,endAngle:u}=a.getProps(["startAngle","endAngle"],s),{angle:h}=_S(a,{x:e.x,y:e.y});qu(h,d,u)&&n.push({element:a,datasetIndex:l,index:c})}return Mh(t,r,e,i),n}function QI(t,e,r,s,n,i){let a=[];const l=KI(r);let c=Number.POSITIVE_INFINITY;function d(u,h,f){const m=u.inRange(e.x,e.y,n);if(s&&!m)return;const x=u.getCenterPoint(n);if(!(!!i||t.isPointInArea(x))&&!m)return;const g=l(e,x);g<c?(a=[{element:u,datasetIndex:h,index:f}],c=g):g===c&&a.push({element:u,datasetIndex:h,index:f})}return Mh(t,r,e,d),a}function Sp(t,e,r,s,n,i){return!i&&!t.isPointInArea(e)?[]:r==="r"&&!s?XI(t,e,r,n):QI(t,e,r,s,n,i)}function Ak(t,e,r,s,n){const i=[],a=r==="x"?"inXRange":"inYRange";let l=!1;return Mh(t,r,e,(c,d,u)=>{c[a]&&c[a](e[r],n)&&(i.push({element:c,datasetIndex:d,index:u}),l=l||c.inRange(e.x,e.y,n))}),s&&!l?[]:i}var ZI={evaluateInteractionItems:Mh,modes:{index(t,e,r,s){const n=io(e,t),i=r.axis||"x",a=r.includeInvisible||!1,l=r.intersect?Ep(t,n,i,s,a):Sp(t,n,i,!1,s,a),c=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const u=l[0].index,h=d.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:d.index,index:u})}),c):[]},dataset(t,e,r,s){const n=io(e,t),i=r.axis||"xy",a=r.includeInvisible||!1;let l=r.intersect?Ep(t,n,i,s,a):Sp(t,n,i,!1,s,a);if(l.length>0){const c=l[0].datasetIndex,d=t.getDatasetMeta(c).data;l=[];for(let u=0;u<d.length;++u)l.push({element:d[u],datasetIndex:c,index:u})}return l},point(t,e,r,s){const n=io(e,t),i=r.axis||"xy",a=r.includeInvisible||!1;return Ep(t,n,i,s,a)},nearest(t,e,r,s){const n=io(e,t),i=r.axis||"xy",a=r.includeInvisible||!1;return Sp(t,n,i,r.intersect,s,a)},x(t,e,r,s){const n=io(e,t);return Ak(t,n,"x",r.intersect,s)},y(t,e,r,s){const n=io(e,t);return Ak(t,n,"y",r.intersect,s)}}};const HS=["left","top","right","bottom"];function gd(t,e){return t.filter(r=>r.pos===e)}function Fk(t,e){return t.filter(r=>HS.indexOf(r.pos)===-1&&r.box.axis===e)}function vd(t,e){return t.sort((r,s)=>{const n=e?s:r,i=e?r:s;return n.weight===i.weight?n.index-i.index:n.weight-i.weight})}function JI(t){const e=[];let r,s,n,i,a,l;for(r=0,s=(t||[]).length;r<s;++r)n=t[r],{position:i,options:{stack:a,stackWeight:l=1}}=n,e.push({index:r,box:n,pos:i,horizontal:n.isHorizontal(),weight:n.weight,stack:a&&i+a,stackWeight:l});return e}function eB(t){const e={};for(const r of t){const{stack:s,pos:n,stackWeight:i}=r;if(!s||!HS.includes(n))continue;const a=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=i}return e}function tB(t,e){const r=eB(t),{vBoxMaxWidth:s,hBoxMaxHeight:n}=e;let i,a,l;for(i=0,a=t.length;i<a;++i){l=t[i];const{fullSize:c}=l.box,d=r[l.stack],u=d&&l.stackWeight/d.weight;l.horizontal?(l.width=u?u*s:c&&e.availableWidth,l.height=n):(l.width=s,l.height=u?u*n:c&&e.availableHeight)}return r}function rB(t){const e=JI(t),r=vd(e.filter(d=>d.box.fullSize),!0),s=vd(gd(e,"left"),!0),n=vd(gd(e,"right")),i=vd(gd(e,"top"),!0),a=vd(gd(e,"bottom")),l=Fk(e,"x"),c=Fk(e,"y");return{fullSize:r,leftAndTop:s.concat(i),rightAndBottom:n.concat(c).concat(a).concat(l),chartArea:gd(e,"chartArea"),vertical:s.concat(n).concat(c),horizontal:i.concat(a).concat(l)}}function Pk(t,e,r,s){return Math.max(t[r],e[r])+Math.max(t[s],e[s])}function YS(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function sB(t,e,r,s){const{pos:n,box:i}=r,a=t.maxPadding;if(!Je(n)){r.size&&(t[n]-=r.size);const h=s[r.stack]||{size:0,count:1};h.size=Math.max(h.size,r.horizontal?i.height:i.width),r.size=h.size/h.count,t[n]+=r.size}i.getPadding&&YS(a,i.getPadding());const l=Math.max(0,e.outerWidth-Pk(a,t,"left","right")),c=Math.max(0,e.outerHeight-Pk(a,t,"top","bottom")),d=l!==t.w,u=c!==t.h;return t.w=l,t.h=c,r.horizontal?{same:d,other:u}:{same:u,other:d}}function nB(t){const e=t.maxPadding;function r(s){const n=Math.max(e[s]-t[s],0);return t[s]+=n,n}t.y+=r("top"),t.x+=r("left"),r("right"),r("bottom")}function iB(t,e){const r=e.maxPadding;function s(n){const i={left:0,top:0,right:0,bottom:0};return n.forEach(a=>{i[a]=Math.max(e[a],r[a])}),i}return s(t?["left","right"]:["top","bottom"])}function Rd(t,e,r,s){const n=[];let i,a,l,c,d,u;for(i=0,a=t.length,d=0;i<a;++i){l=t[i],c=l.box,c.update(l.width||e.w,l.height||e.h,iB(l.horizontal,e));const{same:h,other:f}=sB(e,r,l,s);d|=h&&n.length,u=u||f,c.fullSize||n.push(l)}return d&&Rd(n,e,r,s)||u}function j0(t,e,r,s,n){t.top=r,t.left=e,t.right=e+s,t.bottom=r+n,t.width=s,t.height=n}function Mk(t,e,r,s){const n=r.padding;let{x:i,y:a}=e;for(const l of t){const c=l.box,d=s[l.stack]||{count:1,placed:0,weight:1},u=l.stackWeight/d.weight||1;if(l.horizontal){const h=e.w*u,f=d.size||c.height;Hu(d.start)&&(a=d.start),c.fullSize?j0(c,n.left,a,r.outerWidth-n.right-n.left,f):j0(c,e.left+d.placed,a,h,f),d.start=a,d.placed+=h,a=c.bottom}else{const h=e.h*u,f=d.size||c.width;Hu(d.start)&&(i=d.start),c.fullSize?j0(c,i,n.top,f,r.outerHeight-n.bottom-n.top):j0(c,i,e.top+d.placed,f,h),d.start=i,d.placed+=h,i=c.right}}e.x=i,e.y=a}var Hs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(r){e.draw(r)}}]},t.boxes.push(e)},removeBox(t,e){const r=t.boxes?t.boxes.indexOf(e):-1;r!==-1&&t.boxes.splice(r,1)},configure(t,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(t,e,r,s){if(!t)return;const n=Wr(t.options.layout.padding),i=Math.max(e-n.width,0),a=Math.max(r-n.height,0),l=rB(t.boxes),c=l.vertical,d=l.horizontal;ct(t.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const u=c.reduce((p,g)=>g.box.options&&g.box.options.display===!1?p:p+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:r,padding:n,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/u,hBoxMaxHeight:a/2}),f=Object.assign({},n);YS(f,Wr(s));const m=Object.assign({maxPadding:f,w:i,h:a,x:n.left,y:n.top},n),x=tB(c.concat(d),h);Rd(l.fullSize,m,h,x),Rd(c,m,h,x),Rd(d,m,h,x)&&Rd(c,m,h,x),nB(m),Mk(l.leftAndTop,m,h,x),m.x+=m.w,m.y+=m.h,Mk(l.rightAndBottom,m,h,x),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},ct(l.chartArea,p=>{const g=p.box;Object.assign(g,t.chartArea),g.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class qS{acquireContext(e,r){}releaseContext(e){return!1}addEventListener(e,r,s){}removeEventListener(e,r,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,r,s,n){return r=Math.max(0,r||e.width),s=s||e.height,{width:r,height:Math.max(0,n?Math.floor(r/n):s)}}isAttached(e){return!0}updateConfig(e){}}class aB extends qS{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const yf="$chartjs",oB={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Rk=t=>t===null||t==="";function lB(t,e){const r=t.style,s=t.getAttribute("height"),n=t.getAttribute("width");if(t[yf]={initial:{height:s,width:n,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",Rk(n)){const i=gk(t,"width");i!==void 0&&(t.width=i)}if(Rk(s))if(t.style.height==="")t.height=t.width/(e||2);else{const i=gk(t,"height");i!==void 0&&(t.height=i)}return t}const GS=dI?{passive:!0}:!1;function cB(t,e,r){t&&t.addEventListener(e,r,GS)}function dB(t,e,r){t&&t.canvas&&t.canvas.removeEventListener(e,r,GS)}function uB(t,e){const r=oB[t.type]||t.type,{x:s,y:n}=io(t,e);return{type:r,chart:e,native:t,x:s!==void 0?s:null,y:n!==void 0?n:null}}function fm(t,e){for(const r of t)if(r===e||r.contains(e))return!0}function hB(t,e,r){const s=t.canvas,n=new MutationObserver(i=>{let a=!1;for(const l of i)a=a||fm(l.addedNodes,s),a=a&&!fm(l.removedNodes,s);a&&r()});return n.observe(document,{childList:!0,subtree:!0}),n}function fB(t,e,r){const s=t.canvas,n=new MutationObserver(i=>{let a=!1;for(const l of i)a=a||fm(l.removedNodes,s),a=a&&!fm(l.addedNodes,s);a&&r()});return n.observe(document,{childList:!0,subtree:!0}),n}const Ku=new Map;let Dk=0;function KS(){const t=window.devicePixelRatio;t!==Dk&&(Dk=t,Ku.forEach((e,r)=>{r.currentDevicePixelRatio!==t&&e()}))}function mB(t,e){Ku.size||window.addEventListener("resize",KS),Ku.set(t,e)}function xB(t){Ku.delete(t),Ku.size||window.removeEventListener("resize",KS)}function pB(t,e,r){const s=t.canvas,n=s&&Gy(s);if(!n)return;const i=SS((l,c)=>{const d=n.clientWidth;r(l,c),d<n.clientWidth&&r()},window),a=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||i(d,u)});return a.observe(n),mB(t,i),a}function Cp(t,e,r){r&&r.disconnect(),e==="resize"&&xB(t)}function gB(t,e,r){const s=t.canvas,n=SS(i=>{t.ctx!==null&&r(uB(i,t))},t);return cB(s,e,n),n}class vB extends qS{acquireContext(e,r){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(lB(e,r),s):null}releaseContext(e){const r=e.canvas;if(!r[yf])return!1;const s=r[yf].initial;["height","width"].forEach(i=>{const a=s[i];it(a)?r.removeAttribute(i):r.setAttribute(i,a)});const n=s.style||{};return Object.keys(n).forEach(i=>{r.style[i]=n[i]}),r.width=r.width,delete r[yf],!0}addEventListener(e,r,s){this.removeEventListener(e,r);const n=e.$proxies||(e.$proxies={}),a={attach:hB,detach:fB,resize:pB}[r]||gB;n[r]=a(e,r,s)}removeEventListener(e,r){const s=e.$proxies||(e.$proxies={}),n=s[r];if(!n)return;({attach:Cp,detach:Cp,resize:Cp}[r]||dB)(e,r,n),s[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,r,s,n){return cI(e,r,s,n)}isAttached(e){const r=e&&Gy(e);return!!(r&&r.isConnected)}}function yB(t){return!qy()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?aB:vB}class En{constructor(){_e(this,"x");_e(this,"y");_e(this,"active",!1);_e(this,"options");_e(this,"$animations")}tooltipPosition(e){const{x:r,y:s}=this.getProps(["x","y"],e);return{x:r,y:s}}hasValue(){return Yu(this.x)&&Yu(this.y)}getProps(e,r){const s=this.$animations;if(!r||!s)return this;const n={};return e.forEach(i=>{n[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),n}}_e(En,"defaults",{}),_e(En,"defaultRoutes");function bB(t,e){const r=t.options.ticks,s=wB(t),n=Math.min(r.maxTicksLimit||s,s),i=r.major.enabled?_B(e):[],a=i.length,l=i[0],c=i[a-1],d=[];if(a>n)return NB(e,d,i,a/n),d;const u=kB(i,e,n);if(a>0){let h,f;const m=a>1?Math.round((c-l)/(a-1)):null;for(E0(e,d,u,it(m)?0:l-m,l),h=0,f=a-1;h<f;h++)E0(e,d,u,i[h],i[h+1]);return E0(e,d,u,c,it(m)?e.length:c+m),d}return E0(e,d,u),d}function wB(t){const e=t.options.offset,r=t._tickSize(),s=t._length/r+(e?0:1),n=t._maxLength/r;return Math.floor(Math.min(s,n))}function kB(t,e,r){const s=jB(t),n=e.length/r;if(!s)return Math.max(n,1);const i=d9(s);for(let a=0,l=i.length-1;a<l;a++){const c=i[a];if(c>n)return c}return Math.max(n,1)}function _B(t){const e=[];let r,s;for(r=0,s=t.length;r<s;r++)t[r].major&&e.push(r);return e}function NB(t,e,r,s){let n=0,i=r[0],a;for(s=Math.ceil(s),a=0;a<t.length;a++)a===i&&(e.push(t[a]),n++,i=r[n*s])}function E0(t,e,r,s,n){const i=Ge(s,0),a=Math.min(Ge(n,t.length),t.length);let l=0,c,d,u;for(r=Math.ceil(r),n&&(c=n-s,r=c/Math.floor(c/r)),u=i;u<0;)l++,u=Math.round(i+l*r);for(d=Math.max(i,0);d<a;d++)d===u&&(e.push(t[d]),l++,u=Math.round(i+l*r))}function jB(t){const e=t.length;let r,s;if(e<2)return!1;for(s=t[0],r=1;r<e;++r)if(t[r]-t[r-1]!==s)return!1;return s}const EB=t=>t==="left"?"right":t==="right"?"left":t,Ok=(t,e,r)=>e==="top"||e==="left"?t[e]+r:t[e]-r,Lk=(t,e)=>Math.min(e||t,t);function Ik(t,e){const r=[],s=t.length/e,n=t.length;let i=0;for(;i<n;i+=s)r.push(t[Math.floor(i)]);return r}function SB(t,e,r){const s=t.ticks.length,n=Math.min(e,s-1),i=t._startPixel,a=t._endPixel,l=1e-6;let c=t.getPixelForTick(n),d;if(!(r&&(s===1?d=Math.max(c-i,a-c):e===0?d=(t.getPixelForTick(1)-c)/2:d=(c-t.getPixelForTick(n-1))/2,c+=n<e?d:-d,c<i-l||c>a+l)))return c}function CB(t,e){ct(t,r=>{const s=r.gc,n=s.length/2;let i;if(n>e){for(i=0;i<n;++i)delete r.data[s[i]];s.splice(0,n)}})}function yd(t){return t.drawTicks?t.tickLength:0}function Bk(t,e){if(!t.display)return 0;const r=lr(t.font,e),s=Wr(t.padding);return(wt(t.text)?t.text.length:1)*r.lineHeight+s.height}function TB(t,e){return Ga(t,{scale:e,type:"scale"})}function AB(t,e,r){return Ga(t,{tick:r,index:e,type:"tick"})}function FB(t,e,r){let s=zy(t);return(r&&e!=="right"||!r&&e==="right")&&(s=EB(s)),s}function PB(t,e,r,s){const{top:n,left:i,bottom:a,right:l,chart:c}=t,{chartArea:d,scales:u}=c;let h=0,f,m,x;const p=a-n,g=l-i;if(t.isHorizontal()){if(m=Fr(s,i,l),Je(r)){const v=Object.keys(r)[0],b=r[v];x=u[v].getPixelForValue(b)+p-e}else r==="center"?x=(d.bottom+d.top)/2+p-e:x=Ok(t,r,e);f=l-i}else{if(Je(r)){const v=Object.keys(r)[0],b=r[v];m=u[v].getPixelForValue(b)-g+e}else r==="center"?m=(d.left+d.right)/2-g+e:m=Ok(t,r,e);x=Fr(s,a,n),h=r==="left"?-Ht:Ht}return{titleX:m,titleY:x,maxWidth:f,rotation:h}}class cl extends En{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,r){return e}getUserBounds(){let{_userMin:e,_userMax:r,_suggestedMin:s,_suggestedMax:n}=this;return e=ws(e,Number.POSITIVE_INFINITY),r=ws(r,Number.NEGATIVE_INFINITY),s=ws(s,Number.POSITIVE_INFINITY),n=ws(n,Number.NEGATIVE_INFINITY),{min:ws(e,s),max:ws(r,n),minDefined:Bt(e),maxDefined:Bt(r)}}getMinMax(e){let{min:r,max:s,minDefined:n,maxDefined:i}=this.getUserBounds(),a;if(n&&i)return{min:r,max:s};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)a=l[c].controller.getMinMax(this,e),n||(r=Math.min(r,a.min)),i||(s=Math.max(s,a.max));return r=i&&r>s?s:r,s=n&&r>s?r:s,{min:ws(r,ws(s,r)),max:ws(s,ws(r,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){mt(this.options.beforeUpdate,[this])}update(e,r,s){const{beginAtZero:n,grace:i,ticks:a}=this.options,l=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=r,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=z9(this,i,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?Ik(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=bB(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,r,s;this.isHorizontal()?(r=this.left,s=this.right):(r=this.top,s=this.bottom,e=!e),this._startPixel=r,this._endPixel=s,this._reversePixels=e,this._length=s-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){mt(this.options.afterUpdate,[this])}beforeSetDimensions(){mt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){mt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),mt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){mt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const r=this.options.ticks;let s,n,i;for(s=0,n=e.length;s<n;s++)i=e[s],i.label=mt(r.callback,[i.value,s,e],this)}afterTickToLabelConversion(){mt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){mt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,r=e.ticks,s=Lk(this.ticks.length,e.ticks.maxTicksLimit),n=r.minRotation||0,i=r.maxRotation;let a=n,l,c,d;if(!this._isVisible()||!r.display||n>=i||s<=1||!this.isHorizontal()){this.labelRotation=n;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,m=Br(this.chart.width-h,0,this.maxWidth);l=e.offset?this.maxWidth/s:m/(s-1),h+6>l&&(l=m/(s-(e.offset?.5:1)),c=this.maxHeight-yd(e.grid)-r.padding-Bk(e.title,this.chart.options.font),d=Math.sqrt(h*h+f*f),a=By(Math.min(Math.asin(Br((u.highest.height+6)/l,-1,1)),Math.asin(Br(c/d,-1,1))-Math.asin(Br(f/d,-1,1)))),a=Math.max(n,Math.min(i,a))),this.labelRotation=a}afterCalculateLabelRotation(){mt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){mt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:r,options:{ticks:s,title:n,grid:i}}=this,a=this._isVisible(),l=this.isHorizontal();if(a){const c=Bk(n,r.options.font);if(l?(e.width=this.maxWidth,e.height=yd(i)+c):(e.height=this.maxHeight,e.width=yd(i)+c),s.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:f}=this._getLabelSizes(),m=s.padding*2,x=Wn(this.labelRotation),p=Math.cos(x),g=Math.sin(x);if(l){const v=s.mirror?0:g*h.width+p*f.height;e.height=Math.min(this.maxHeight,e.height+v+m)}else{const v=s.mirror?0:p*h.width+g*f.height;e.width=Math.min(this.maxWidth,e.width+v+m)}this._calculatePadding(d,u,g,p)}}this._handleMargins(),l?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,r,s,n){const{ticks:{align:i,padding:a},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;c?d?(f=n*e.width,m=s*r.height):(f=s*e.height,m=n*r.width):i==="start"?m=r.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,m=r.width/2),this.paddingLeft=Math.max((f-u+a)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-h+a)*this.width/(this.width-h),0)}else{let u=r.height/2,h=e.height/2;i==="start"?(u=0,h=e.height):i==="end"&&(u=r.height,h=0),this.paddingTop=u+a,this.paddingBottom=h+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){mt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:r}=this.options;return r==="top"||r==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let r,s;for(r=0,s=e.length;r<s;r++)it(e[r].label)&&(e.splice(r,1),s--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const r=this.options.ticks.sampleSize;let s=this.ticks;r<s.length&&(s=Ik(s,r)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,r,s){const{ctx:n,_longestTextCache:i}=this,a=[],l=[],c=Math.floor(r/Lk(r,s));let d=0,u=0,h,f,m,x,p,g,v,b,y,k,N;for(h=0;h<r;h+=c){if(x=e[h].label,p=this._resolveTickFontOptions(h),n.font=g=p.string,v=i[g]=i[g]||{data:{},gc:[]},b=p.lineHeight,y=k=0,!it(x)&&!wt(x))y=um(n,v.data,v.gc,y,x),k=b;else if(wt(x))for(f=0,m=x.length;f<m;++f)N=x[f],!it(N)&&!wt(N)&&(y=um(n,v.data,v.gc,y,N),k+=b);a.push(y),l.push(k),d=Math.max(y,d),u=Math.max(k,u)}CB(i,r);const E=a.indexOf(d),j=l.indexOf(u),_=S=>({width:a[S]||0,height:l[S]||0});return{first:_(0),last:_(r-1),widest:_(E),highest:_(j),widths:a,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,r){return NaN}getValueForPixel(e){}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const r=this._startPixel+e*this._length;return m9(this._alignToPixels?Ja(this.chart,r,0):r)}getDecimalForPixel(e){const r=(e-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:r}=this;return e<0&&r<0?r:e>0&&r>0?e:0}getContext(e){const r=this.ticks||[];if(e>=0&&e<r.length){const s=r[e];return s.$context||(s.$context=AB(this.getContext(),e,s))}return this.$context||(this.$context=TB(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,r=Wn(this.labelRotation),s=Math.abs(Math.cos(r)),n=Math.abs(Math.sin(r)),i=this._getLabelSizes(),a=e.autoSkipPadding||0,l=i?i.widest.width+a:0,c=i?i.highest.height+a:0;return this.isHorizontal()?c*s>l*n?l/s:c/n:c*n<l*s?c/s:l/n}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const r=this.axis,s=this.chart,n=this.options,{grid:i,position:a,border:l}=n,c=i.offset,d=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=yd(i),m=[],x=l.setContext(this.getContext()),p=x.display?x.width:0,g=p/2,v=function(I){return Ja(s,I,p)};let b,y,k,N,E,j,_,S,C,F,P,B;if(a==="top")b=v(this.bottom),j=this.bottom-f,S=b-g,F=v(e.top)+g,B=e.bottom;else if(a==="bottom")b=v(this.top),F=e.top,B=v(e.bottom)-g,j=b+g,S=this.top+f;else if(a==="left")b=v(this.right),E=this.right-f,_=b-g,C=v(e.left)+g,P=e.right;else if(a==="right")b=v(this.left),C=e.left,P=v(e.right)-g,E=b+g,_=this.left+f;else if(r==="x"){if(a==="center")b=v((e.top+e.bottom)/2+.5);else if(Je(a)){const I=Object.keys(a)[0],te=a[I];b=v(this.chart.scales[I].getPixelForValue(te))}F=e.top,B=e.bottom,j=b+g,S=j+f}else if(r==="y"){if(a==="center")b=v((e.left+e.right)/2);else if(Je(a)){const I=Object.keys(a)[0],te=a[I];b=v(this.chart.scales[I].getPixelForValue(te))}E=b-g,_=E-f,C=e.left,P=e.right}const Q=Ge(n.ticks.maxTicksLimit,h),D=Math.max(1,Math.ceil(h/Q));for(y=0;y<h;y+=D){const I=this.getContext(y),te=i.setContext(I),re=l.setContext(I),W=te.lineWidth,K=te.color,Z=re.dash||[],M=re.dashOffset,X=te.tickWidth,V=te.tickColor,Y=te.tickBorderDash||[],H=te.tickBorderDashOffset;k=SB(this,y,c),k!==void 0&&(N=Ja(s,k,W),d?E=_=C=P=N:j=S=F=B=N,m.push({tx1:E,ty1:j,tx2:_,ty2:S,x1:C,y1:F,x2:P,y2:B,width:W,color:K,borderDash:Z,borderDashOffset:M,tickWidth:X,tickColor:V,tickBorderDash:Y,tickBorderDashOffset:H}))}return this._ticksLength=h,this._borderValue=b,m}_computeLabelItems(e){const r=this.axis,s=this.options,{position:n,ticks:i}=s,a=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=i,f=yd(s.grid),m=f+u,x=h?-u:m,p=-Wn(this.labelRotation),g=[];let v,b,y,k,N,E,j,_,S,C,F,P,B="middle";if(n==="top")E=this.bottom-x,j=this._getXAxisLabelAlignment();else if(n==="bottom")E=this.top+x,j=this._getXAxisLabelAlignment();else if(n==="left"){const D=this._getYAxisLabelAlignment(f);j=D.textAlign,N=D.x}else if(n==="right"){const D=this._getYAxisLabelAlignment(f);j=D.textAlign,N=D.x}else if(r==="x"){if(n==="center")E=(e.top+e.bottom)/2+m;else if(Je(n)){const D=Object.keys(n)[0],I=n[D];E=this.chart.scales[D].getPixelForValue(I)+m}j=this._getXAxisLabelAlignment()}else if(r==="y"){if(n==="center")N=(e.left+e.right)/2-m;else if(Je(n)){const D=Object.keys(n)[0],I=n[D];N=this.chart.scales[D].getPixelForValue(I)}j=this._getYAxisLabelAlignment(f).textAlign}r==="y"&&(c==="start"?B="top":c==="end"&&(B="bottom"));const Q=this._getLabelSizes();for(v=0,b=l.length;v<b;++v){y=l[v],k=y.label;const D=i.setContext(this.getContext(v));_=this.getPixelForTick(v)+i.labelOffset,S=this._resolveTickFontOptions(v),C=S.lineHeight,F=wt(k)?k.length:1;const I=F/2,te=D.color,re=D.textStrokeColor,W=D.textStrokeWidth;let K=j;a?(N=_,j==="inner"&&(v===b-1?K=this.options.reverse?"left":"right":v===0?K=this.options.reverse?"right":"left":K="center"),n==="top"?d==="near"||p!==0?P=-F*C+C/2:d==="center"?P=-Q.highest.height/2-I*C+C:P=-Q.highest.height+C/2:d==="near"||p!==0?P=C/2:d==="center"?P=Q.highest.height/2-I*C:P=Q.highest.height-F*C,h&&(P*=-1),p!==0&&!D.showLabelBackdrop&&(N+=C/2*Math.sin(p))):(E=_,P=(1-F)*C/2);let Z;if(D.showLabelBackdrop){const M=Wr(D.backdropPadding),X=Q.heights[v],V=Q.widths[v];let Y=P-M.top,H=0-M.left;switch(B){case"middle":Y-=X/2;break;case"bottom":Y-=X;break}switch(j){case"center":H-=V/2;break;case"right":H-=V;break;case"inner":v===b-1?H-=V:v>0&&(H-=V/2);break}Z={left:H,top:Y,width:V+M.width,height:X+M.height,color:D.backdropColor}}g.push({label:k,font:S,textOffset:P,options:{rotation:p,color:te,strokeColor:re,strokeWidth:W,textAlign:K,textBaseline:B,translation:[N,E],backdrop:Z}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:r}=this.options;if(-Wn(this.labelRotation))return e==="top"?"left":"right";let n="center";return r.align==="start"?n="left":r.align==="end"?n="right":r.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:r,ticks:{crossAlign:s,mirror:n,padding:i}}=this.options,a=this._getLabelSizes(),l=e+i,c=a.widest.width;let d,u;return r==="left"?n?(u=this.right+i,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-l,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u=this.left)):r==="right"?n?(u=this.left+i,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+l,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:r},left:s,top:n,width:i,height:a}=this;r&&(e.save(),e.fillStyle=r,e.fillRect(s,n,i,a),e.restore())}getLineWidthForValue(e){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const n=this.ticks.findIndex(i=>i.value===e);return n>=0?r.setContext(this.getContext(n)).lineWidth:0}drawGrid(e){const r=this.options.grid,s=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,a;const l=(c,d,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(d.x,d.y),s.stroke(),s.restore())};if(r.display)for(i=0,a=n.length;i<a;++i){const c=n[i];r.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),r.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:r,options:{border:s,grid:n}}=this,i=s.setContext(this.getContext()),a=s.display?i.width:0;if(!a)return;const l=n.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,h,f;this.isHorizontal()?(d=Ja(e,this.left,a)-a/2,u=Ja(e,this.right,l)+l/2,h=f=c):(h=Ja(e,this.top,a)-a/2,f=Ja(e,this.bottom,l)+l/2,d=u=c),r.save(),r.lineWidth=i.width,r.strokeStyle=i.color,r.beginPath(),r.moveTo(d,h),r.lineTo(u,f),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,n=this._computeLabelArea();n&&xx(s,n);const i=this.getLabelItems(e);for(const a of i){const l=a.options,c=a.font,d=a.label,u=a.textOffset;Qo(s,d,0,u,c,l)}n&&px(s)}drawTitle(){const{ctx:e,options:{position:r,title:s,reverse:n}}=this;if(!s.display)return;const i=lr(s.font),a=Wr(s.padding),l=s.align;let c=i.lineHeight/2;r==="bottom"||r==="center"||Je(r)?(c+=a.bottom,wt(s.text)&&(c+=i.lineHeight*(s.text.length-1))):c+=a.top;const{titleX:d,titleY:u,maxWidth:h,rotation:f}=PB(this,c,r,l);Qo(e,s.text,0,0,i,{color:s.color,maxWidth:h,rotation:f,textAlign:FB(l,r,n),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,r=e.ticks&&e.ticks.z||0,s=Ge(e.grid&&e.grid.z,-1),n=Ge(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==cl.prototype.draw?[{z:r,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:r,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const r=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",n=[];let i,a;for(i=0,a=r.length;i<a;++i){const l=r[i];l[s]===this.id&&(!e||l.type===e)&&n.push(l)}return n}_resolveTickFontOptions(e){const r=this.options.ticks.setContext(this.getContext(e));return lr(r.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class S0{constructor(e,r,s){this.type=e,this.scope=r,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const r=Object.getPrototypeOf(e);let s;DB(r)&&(s=this.register(r));const n=this.items,i=e.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in n||(n[i]=e,MB(e,a,s),this.override&&$t.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const r=this.items,s=e.id,n=this.scope;s in r&&delete r[s],n&&s in $t[n]&&(delete $t[n][s],this.override&&delete Xo[s])}}function MB(t,e,r){const s=Wu(Object.create(null),[r?$t.get(r):{},$t.get(e),t.defaults]);$t.set(e,s),t.defaultRoutes&&RB(e,t.defaultRoutes),t.descriptors&&$t.describe(e,t.descriptors)}function RB(t,e){Object.keys(e).forEach(r=>{const s=r.split("."),n=s.pop(),i=[t].concat(s).join("."),a=e[r].split("."),l=a.pop(),c=a.join(".");$t.route(i,n,c,l)})}function DB(t){return"id"in t&&"defaults"in t}class OB{constructor(){this.controllers=new S0(Ro,"datasets",!0),this.elements=new S0(En,"elements"),this.plugins=new S0(Object,"plugins"),this.scales=new S0(cl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,r,s){[...r].forEach(n=>{const i=s||this._getRegistryForType(n);s||i.isForType(n)||i===this.plugins&&n.id?this._exec(e,i,n):ct(n,a=>{const l=s||this._getRegistryForType(a);this._exec(e,l,a)})})}_exec(e,r,s){const n=Iy(e);mt(s["before"+n],[],s),r[e](s),mt(s["after"+n],[],s)}_getRegistryForType(e){for(let r=0;r<this._typedRegistries.length;r++){const s=this._typedRegistries[r];if(s.isForType(e))return s}return this.plugins}_get(e,r,s){const n=r.get(e);if(n===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return n}}var On=new OB;class LB{constructor(){this._init=[]}notify(e,r,s,n){r==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=n?this._descriptors(e).filter(n):this._descriptors(e),a=this._notify(i,e,r,s);return r==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,r,s,n){n=n||{};for(const i of e){const a=i.plugin,l=a[s],c=[r,n,i.options];if(mt(l,c,a)===!1&&n.cancelable)return!1}return!0}invalidate(){it(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),r}_createDescriptors(e,r){const s=e&&e.config,n=Ge(s.options&&s.options.plugins,{}),i=IB(s);return n===!1&&!r?[]:$B(e,i,n,r)}_notifyStateChanges(e){const r=this._oldCache||[],s=this._cache,n=(i,a)=>i.filter(l=>!a.some(c=>l.plugin.id===c.plugin.id));this._notify(n(r,s),e,"stop"),this._notify(n(s,r),e,"start")}}function IB(t){const e={},r=[],s=Object.keys(On.plugins.items);for(let i=0;i<s.length;i++)r.push(On.getPlugin(s[i]));const n=t.plugins||[];for(let i=0;i<n.length;i++){const a=n[i];r.indexOf(a)===-1&&(r.push(a),e[a.id]=!0)}return{plugins:r,localIds:e}}function BB(t,e){return!e&&t===!1?null:t===!0?{}:t}function $B(t,{plugins:e,localIds:r},s,n){const i=[],a=t.getContext();for(const l of e){const c=l.id,d=BB(s[c],n);d!==null&&i.push({plugin:l,options:zB(t.config,{plugin:l,local:r[c]},d,a)})}return i}function zB(t,{plugin:e,local:r},s,n){const i=t.pluginScopeKeys(e),a=t.getOptionScopes(s,i);return r&&e.defaults&&a.push(e.defaults),t.createResolver(a,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function I1(t,e){const r=$t.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function UB(t,e){let r=t;return t==="_index_"?r=e:t==="_value_"&&(r=e==="x"?"y":"x"),r}function VB(t,e){return t===e?"_index_":"_value_"}function $k(t){if(t==="x"||t==="y"||t==="r")return t}function WB(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function B1(t,...e){if($k(t))return t;for(const r of e){const s=r.axis||WB(r.position)||t.length>1&&$k(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function zk(t,e,r){if(r[e+"AxisID"]===t)return{axis:e}}function HB(t,e){if(e.data&&e.data.datasets){const r=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(r.length)return zk(t,"x",r[0])||zk(t,"y",r[0])}return{}}function YB(t,e){const r=Xo[t.type]||{scales:{}},s=e.scales||{},n=I1(t.type,e),i=Object.create(null);return Object.keys(s).forEach(a=>{const l=s[a];if(!Je(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=B1(a,l,HB(a,t),$t.scales[l.type]),d=VB(c,n),u=r.scales||{};i[a]=tu(Object.create(null),[{axis:c},l,u[c],u[d]])}),t.data.datasets.forEach(a=>{const l=a.type||t.type,c=a.indexAxis||I1(l,e),u=(Xo[l]||{}).scales||{};Object.keys(u).forEach(h=>{const f=UB(h,c),m=a[f+"AxisID"]||f;i[m]=i[m]||Object.create(null),tu(i[m],[{axis:f},s[m],u[h]])})}),Object.keys(i).forEach(a=>{const l=i[a];tu(l,[$t.scales[l.type],$t.scale])}),i}function XS(t){const e=t.options||(t.options={});e.plugins=Ge(e.plugins,{}),e.scales=YB(t,e)}function QS(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function qB(t){return t=t||{},t.data=QS(t.data),XS(t),t}const Uk=new Map,ZS=new Set;function C0(t,e){let r=Uk.get(t);return r||(r=e(),Uk.set(t,r),ZS.add(r)),r}const bd=(t,e,r)=>{const s=Ko(e,r);s!==void 0&&t.add(s)};class GB{constructor(e){this._config=qB(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=QS(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),XS(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return C0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,r){return C0(`${e}.transition.${r}`,()=>[[`datasets.${e}.transitions.${r}`,`transitions.${r}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,r){return C0(`${e}-${r}`,()=>[[`datasets.${e}.elements.${r}`,`datasets.${e}`,`elements.${r}`,""]])}pluginScopeKeys(e){const r=e.id,s=this.type;return C0(`${s}-plugin-${r}`,()=>[[`plugins.${r}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,r){const s=this._scopeCache;let n=s.get(e);return(!n||r)&&(n=new Map,s.set(e,n)),n}getOptionScopes(e,r,s){const{options:n,type:i}=this,a=this._cachedScopes(e,s),l=a.get(r);if(l)return l;const c=new Set;r.forEach(u=>{e&&(c.add(e),u.forEach(h=>bd(c,e,h))),u.forEach(h=>bd(c,n,h)),u.forEach(h=>bd(c,Xo[i]||{},h)),u.forEach(h=>bd(c,$t,h)),u.forEach(h=>bd(c,O1,h))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),ZS.has(r)&&a.set(r,d),d}chartOptionScopes(){const{options:e,type:r}=this;return[e,Xo[r]||{},$t.datasets[r]||{},{type:r},$t,O1]}resolveNamedOptions(e,r,s,n=[""]){const i={$shared:!0},{resolver:a,subPrefixes:l}=Vk(this._resolverCache,e,n);let c=a;if(XB(a,r)){i.$shared=!1,s=Ba(s)?s():s;const d=this.createResolver(e,s,l);c=Fc(a,s,d)}for(const d of r)i[d]=c[d];return i}createResolver(e,r,s=[""],n){const{resolver:i}=Vk(this._resolverCache,e,s);return Je(r)?Fc(i,r,void 0,n):i}}function Vk(t,e,r){let s=t.get(e);s||(s=new Map,t.set(e,s));const n=r.join();let i=s.get(n);return i||(i={resolver:Wy(e,r),subPrefixes:r.filter(l=>!l.toLowerCase().includes("hover"))},s.set(n,i)),i}const KB=t=>Je(t)&&Object.getOwnPropertyNames(t).some(e=>Ba(t[e]));function XB(t,e){const{isScriptable:r,isIndexable:s}=FS(t);for(const n of e){const i=r(n),a=s(n),l=(a||i)&&t[n];if(i&&(Ba(l)||KB(l))||a&&wt(l))return!0}return!1}var QB="4.5.0";const ZB=["top","bottom","left","right","chartArea"];function Wk(t,e){return t==="top"||t==="bottom"||ZB.indexOf(t)===-1&&e==="x"}function Hk(t,e){return function(r,s){return r[t]===s[t]?r[e]-s[e]:r[t]-s[t]}}function Yk(t){const e=t.chart,r=e.options.animation;e.notifyPlugins("afterRender"),mt(r&&r.onComplete,[t],e)}function JB(t){const e=t.chart,r=e.options.animation;mt(r&&r.onProgress,[t],e)}function JS(t){return qy()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const bf={},qk=t=>{const e=JS(t);return Object.values(bf).filter(r=>r.canvas===e).pop()};function e$(t,e,r){const s=Object.keys(t);for(const n of s){const i=+n;if(i>=e){const a=t[n];delete t[n],(r>0||i>e)&&(t[i+r]=a)}}}function t$(t,e,r,s){return!r||t.type==="mouseout"?null:s?e:t}var Hi;let vx=(Hi=class{static register(...e){On.add(...e),Gk()}static unregister(...e){On.remove(...e),Gk()}constructor(e,r){const s=this.config=new GB(r),n=JS(e),i=qk(n);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const a=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||yB(n)),this.platform.updateConfig(s);const l=this.platform.acquireContext(n,a.aspectRatio),c=l&&l.canvas,d=c&&c.height,u=c&&c.width;if(this.id=t9(),this.ctx=l,this.canvas=c,this.width=u,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new LB,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=v9(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],bf[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}oi.listen(this,"complete",Yk),oi.listen(this,"progress",JB),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:r},width:s,height:n,_aspectRatio:i}=this;return it(e)?r&&i?i:n?s/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return On}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():pk(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return fk(this.canvas,this.ctx),this}stop(){return oi.stop(this),this}resize(e,r){oi.running(this)?this._resizeBeforeDraw={width:e,height:r}:this._resize(e,r)}_resize(e,r){const s=this.options,n=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(n,e,r,i),l=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,pk(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),mt(s.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};ct(r,(s,n)=>{s.id=n})}buildOrUpdateScales(){const e=this.options,r=e.scales,s=this.scales,n=Object.keys(s).reduce((a,l)=>(a[l]=!1,a),{});let i=[];r&&(i=i.concat(Object.keys(r).map(a=>{const l=r[a],c=B1(a,l),d=c==="r",u=c==="x";return{options:l,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),ct(i,a=>{const l=a.options,c=l.id,d=B1(c,l),u=Ge(l.type,a.dtype);(l.position===void 0||Wk(l.position,d)!==Wk(a.dposition))&&(l.position=a.dposition),n[c]=!0;let h=null;if(c in s&&s[c].type===u)h=s[c];else{const f=On.getScale(u);h=new f({id:c,type:u,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(l,e)}),ct(n,(a,l)=>{a||delete s[l]}),ct(s,a=>{Hs.configure(this,a,a.options),Hs.addBox(this,a)})}_updateMetasets(){const e=this._metasets,r=this.data.datasets.length,s=e.length;if(e.sort((n,i)=>n.index-i.index),s>r){for(let n=r;n<s;++n)this._destroyDatasetMeta(n);e.splice(r,s-r)}this._sortedMetasets=e.slice(0).sort(Hk("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:r}}=this;e.length>r.length&&delete this._stacks,e.forEach((s,n)=>{r.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],r=this.data.datasets;let s,n;for(this._removeUnreferencedMetasets(),s=0,n=r.length;s<n;s++){const i=r[s];let a=this.getDatasetMeta(s);const l=i.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(s),a=this.getDatasetMeta(s)),a.type=l,a.indexAxis=i.indexAxis||I1(l,this.options),a.order=i.order||0,a.index=s,a.label=""+i.label,a.visible=this.isDatasetVisible(s),a.controller)a.controller.updateIndex(s),a.controller.linkScales();else{const c=On.getController(l),{datasetElementType:d,dataElementType:u}=$t.datasets[l];Object.assign(c,{dataElementType:On.getElement(u),datasetElementType:d&&On.getElement(d)}),a.controller=new c(this,s),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){ct(this.data.datasets,(e,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const r=this.config;r.update();const s=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:h}=this.getDatasetMeta(d),f=!n&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=s.layout.autoPadding?a:0,this._updateLayout(a),n||ct(i,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Hk("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){ct(this.scales,e=>{Hs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,r=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!nk(r,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,r=this._getUniformDataChanges()||[];for(const{method:s,start:n,count:i}of r){const a=s==="_removeElements"?-i:i;e$(e,n,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const r=this.data.datasets.length,s=i=>new Set(e.filter(a=>a[0]===i).map((a,l)=>l+","+a.splice(1).join(","))),n=s(0);for(let i=1;i<r;i++)if(!nk(n,s(i)))return;return Array.from(n).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Hs.update(this,this.width,this.height,e);const r=this.chartArea,s=r.width<=0||r.height<=0;this._layers=[],ct(this.boxes,n=>{s&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,i)=>{n._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let r=0,s=this.data.datasets.length;r<s;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,s=this.data.datasets.length;r<s;++r)this._updateDataset(r,Ba(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,r){const s=this.getDatasetMeta(e),n={meta:s,index:e,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(s.controller._update(r),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(oi.has(this)?this.attached&&!oi.running(this)&&oi.start(this):(this.draw(),Yk({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const r=this._sortedMetasets,s=[];let n,i;for(n=0,i=r.length;n<i;++n){const a=r[n];(!e||a.visible)&&s.push(a)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let r=e.length-1;r>=0;--r)this._drawDataset(e[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const r=this.ctx,s={meta:e,index:e.index,cancelable:!0},n=zS(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(n&&xx(r,n),e.controller.draw(),n&&px(r),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return bi(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,r,s,n){const i=ZI.modes[r];return typeof i=="function"?i(this,e,s,n):[]}getDatasetMeta(e){const r=this.data.datasets[e],s=this._metasets;let n=s.filter(i=>i&&i._dataset===r).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:e,_dataset:r,_parsed:[],_sorted:!1},s.push(n)),n}getContext(){return this.$context||(this.$context=Ga(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const r=this.data.datasets[e];if(!r)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!r.hidden}setDatasetVisibility(e,r){const s=this.getDatasetMeta(e);s.hidden=!r}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,r,s){const n=s?"show":"hide",i=this.getDatasetMeta(e),a=i.controller._resolveAnimations(void 0,n);Hu(r)?(i.data[r].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),a.update(i,{visible:s}),this.update(l=>l.datasetIndex===e?n:void 0))}hide(e,r){this._updateVisibility(e,r,!1)}show(e,r){this._updateVisibility(e,r,!0)}_destroyDatasetMeta(e){const r=this._metasets[e];r&&r.controller&&r.controller._destroy(),delete this._metasets[e]}_stop(){let e,r;for(this.stop(),oi.remove(this),e=0,r=this.data.datasets.length;e<r;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:r}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),fk(e,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete bf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,r=this.platform,s=(i,a)=>{r.addEventListener(this,i,a),e[i]=a},n=(i,a,l)=>{i.offsetX=a,i.offsetY=l,this._eventHandler(i)};ct(this.options.events,i=>s(i,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,r=this.platform,s=(c,d)=>{r.addEventListener(this,c,d),e[c]=d},n=(c,d)=>{e[c]&&(r.removeEventListener(this,c,d),delete e[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let a;const l=()=>{n("attach",l),this.attached=!0,this.resize(),s("resize",i),s("detach",a)};a=()=>{this.attached=!1,n("resize",i),this._stop(),this._resize(0,0),s("attach",l)},r.isAttached(this.canvas)?l():a()}unbindEvents(){ct(this._listeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._listeners={},ct(this._responsiveListeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,r,s){const n=s?"set":"remove";let i,a,l,c;for(r==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+n+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){a=e[l];const d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[n+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const r=this._active||[],s=e.map(({datasetIndex:i,index:a})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[a],index:a}});!lm(s,r)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,r))}notifyPlugins(e,r,s){return this._plugins.notify(this,e,r,s)}isPluginEnabled(e){return this._plugins._cache.filter(r=>r.plugin.id===e).length===1}_updateHoverStyles(e,r,s){const n=this.options.hover,i=(c,d)=>c.filter(u=>!d.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),a=i(r,e),l=s?e:i(e,r);a.length&&this.updateHoverStyle(a,n.mode,!1),l.length&&n.mode&&this.updateHoverStyle(l,n.mode,!0)}_eventHandler(e,r){const s={event:e,replay:r,cancelable:!0,inChartArea:this.isPointInArea(e)},n=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,n)===!1)return;const i=this._handleEvent(e,r,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,n),(i||s.changed)&&this.render(),this}_handleEvent(e,r,s){const{_active:n=[],options:i}=this,a=r,l=this._getActiveElements(e,n,s,a),c=o9(e),d=t$(e,this._lastEvent,s,c);s&&(this._lastEvent=null,mt(i.onHover,[e,l,this],this),c&&mt(i.onClick,[e,l,this],this));const u=!lm(l,n);return(u||r)&&(this._active=l,this._updateHoverStyles(l,n,r)),this._lastEvent=d,u}_getActiveElements(e,r,s,n){if(e.type==="mouseout")return[];if(!s)return r;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,n)}},_e(Hi,"defaults",$t),_e(Hi,"instances",bf),_e(Hi,"overrides",Xo),_e(Hi,"registry",On),_e(Hi,"version",QB),_e(Hi,"getChart",qk),Hi);function Gk(){return ct(vx.instances,t=>t._plugins.invalidate())}function r$(t,e,r){const{startAngle:s,x:n,y:i,outerRadius:a,innerRadius:l,options:c}=e,{borderWidth:d,borderJoinStyle:u}=c,h=Math.min(d/a,Pr(s-r));if(t.beginPath(),t.arc(n,i,a-d/2,s+h/2,r-h/2),l>0){const f=Math.min(d/l,Pr(s-r));t.arc(n,i,l+d/2,r-f/2,s+f/2,!0)}else{const f=Math.min(d/2,a*Pr(s-r));if(u==="round")t.arc(n,i,f,r-lt/2,s+lt/2,!0);else if(u==="bevel"){const m=2*f*f,x=-m*Math.cos(r+lt/2)+n,p=-m*Math.sin(r+lt/2)+i,g=m*Math.cos(s+lt/2)+n,v=m*Math.sin(s+lt/2)+i;t.lineTo(x,p),t.lineTo(g,v)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function s$(t,e,r){const{startAngle:s,pixelMargin:n,x:i,y:a,outerRadius:l,innerRadius:c}=e;let d=n/l;t.beginPath(),t.arc(i,a,l,s-d,r+d),c>n?(d=n/c,t.arc(i,a,c,r+d,s-d,!0)):t.arc(i,a,n,r+Ht,s-Ht),t.closePath(),t.clip()}function n$(t){return Vy(t,["outerStart","outerEnd","innerStart","innerEnd"])}function i$(t,e,r,s){const n=n$(t.options.borderRadius),i=(r-e)/2,a=Math.min(i,s*e/2),l=c=>{const d=(r-Math.min(i,c))*s/2;return Br(c,0,Math.min(i,d))};return{outerStart:l(n.outerStart),outerEnd:l(n.outerEnd),innerStart:Br(n.innerStart,0,a),innerEnd:Br(n.innerEnd,0,a)}}function wl(t,e,r,s){return{x:r+t*Math.cos(e),y:s+t*Math.sin(e)}}function mm(t,e,r,s,n,i){const{x:a,y:l,startAngle:c,pixelMargin:d,innerRadius:u}=e,h=Math.max(e.outerRadius+s+r-d,0),f=u>0?u+s+r+d:0;let m=0;const x=n-c;if(s){const D=u>0?u-s:0,I=h>0?h-s:0,te=(D+I)/2,re=te!==0?x*te/(te+s):x;m=(x-re)/2}const p=Math.max(.001,x*h-r/lt)/h,g=(x-p)/2,v=c+g+m,b=n-g-m,{outerStart:y,outerEnd:k,innerStart:N,innerEnd:E}=i$(e,f,h,b-v),j=h-y,_=h-k,S=v+y/j,C=b-k/_,F=f+N,P=f+E,B=v+N/F,Q=b-E/P;if(t.beginPath(),i){const D=(S+C)/2;if(t.arc(a,l,h,S,D),t.arc(a,l,h,D,C),k>0){const W=wl(_,C,a,l);t.arc(W.x,W.y,k,C,b+Ht)}const I=wl(P,b,a,l);if(t.lineTo(I.x,I.y),E>0){const W=wl(P,Q,a,l);t.arc(W.x,W.y,E,b+Ht,Q+Math.PI)}const te=(b-E/f+(v+N/f))/2;if(t.arc(a,l,f,b-E/f,te,!0),t.arc(a,l,f,te,v+N/f,!0),N>0){const W=wl(F,B,a,l);t.arc(W.x,W.y,N,B+Math.PI,v-Ht)}const re=wl(j,v,a,l);if(t.lineTo(re.x,re.y),y>0){const W=wl(j,S,a,l);t.arc(W.x,W.y,y,v-Ht,S)}}else{t.moveTo(a,l);const D=Math.cos(S)*h+a,I=Math.sin(S)*h+l;t.lineTo(D,I);const te=Math.cos(C)*h+a,re=Math.sin(C)*h+l;t.lineTo(te,re)}t.closePath()}function a$(t,e,r,s,n){const{fullCircles:i,startAngle:a,circumference:l}=e;let c=e.endAngle;if(i){mm(t,e,r,s,c,n);for(let d=0;d<i;++d)t.fill();isNaN(l)||(c=a+(l%_t||_t))}return mm(t,e,r,s,c,n),t.fill(),c}function o$(t,e,r,s,n){const{fullCircles:i,startAngle:a,circumference:l,options:c}=e,{borderWidth:d,borderJoinStyle:u,borderDash:h,borderDashOffset:f,borderRadius:m}=c,x=c.borderAlign==="inner";if(!d)return;t.setLineDash(h||[]),t.lineDashOffset=f,x?(t.lineWidth=d*2,t.lineJoin=u||"round"):(t.lineWidth=d,t.lineJoin=u||"bevel");let p=e.endAngle;if(i){mm(t,e,r,s,p,n);for(let g=0;g<i;++g)t.stroke();isNaN(l)||(p=a+(l%_t||_t))}x&&s$(t,e,p),c.selfJoin&&p-a>=lt&&m===0&&u!=="miter"&&r$(t,e,p),i||(mm(t,e,r,s,p,n),t.stroke())}class Dd extends En{constructor(r){super();_e(this,"circumference");_e(this,"endAngle");_e(this,"fullCircles");_e(this,"innerRadius");_e(this,"outerRadius");_e(this,"pixelMargin");_e(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,r&&Object.assign(this,r)}inRange(r,s,n){const i=this.getProps(["x","y"],n),{angle:a,distance:l}=_S(i,{x:r,y:s}),{startAngle:c,endAngle:d,innerRadius:u,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),m=(this.options.spacing+this.options.borderWidth)/2,x=Ge(f,d-c),p=qu(a,c,d)&&c!==d,g=x>=_t||p,v=yi(l,u+m,h+m);return g&&v}getCenterPoint(r){const{x:s,y:n,startAngle:i,endAngle:a,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],r),{offset:d,spacing:u}=this.options,h=(i+a)/2,f=(l+c+u+d)/2;return{x:s+Math.cos(h)*f,y:n+Math.sin(h)*f}}tooltipPosition(r){return this.getCenterPoint(r)}draw(r){const{options:s,circumference:n}=this,i=(s.offset||0)/4,a=(s.spacing||0)/2,l=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=n>_t?Math.floor(n/_t):0,n===0||this.innerRadius<0||this.outerRadius<0)return;r.save();const c=(this.startAngle+this.endAngle)/2;r.translate(Math.cos(c)*i,Math.sin(c)*i);const d=1-Math.sin(Math.min(lt,n||0)),u=i*d;r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor,a$(r,this,u,a,l),o$(r,this,u,a,l),r.restore()}}_e(Dd,"id","arc"),_e(Dd,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),_e(Dd,"defaultRoutes",{backgroundColor:"backgroundColor"}),_e(Dd,"descriptors",{_scriptable:!0,_indexable:r=>r!=="borderDash"});function e3(t,e,r=e){t.lineCap=Ge(r.borderCapStyle,e.borderCapStyle),t.setLineDash(Ge(r.borderDash,e.borderDash)),t.lineDashOffset=Ge(r.borderDashOffset,e.borderDashOffset),t.lineJoin=Ge(r.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Ge(r.borderWidth,e.borderWidth),t.strokeStyle=Ge(r.borderColor,e.borderColor)}function l$(t,e,r){t.lineTo(r.x,r.y)}function c$(t){return t.stepped?P9:t.tension||t.cubicInterpolationMode==="monotone"?M9:l$}function t3(t,e,r={}){const s=t.length,{start:n=0,end:i=s-1}=r,{start:a,end:l}=e,c=Math.max(n,a),d=Math.min(i,l),u=n<a&&i<a||n>l&&i>l;return{count:s,start:c,loop:e.loop,ilen:d<c&&!u?s+d-c:d-c}}function d$(t,e,r,s){const{points:n,options:i}=e,{count:a,start:l,loop:c,ilen:d}=t3(n,r,s),u=c$(i);let{move:h=!0,reverse:f}=s||{},m,x,p;for(m=0;m<=d;++m)x=n[(l+(f?d-m:m))%a],!x.skip&&(h?(t.moveTo(x.x,x.y),h=!1):u(t,p,x,f,i.stepped),p=x);return c&&(x=n[(l+(f?d:0))%a],u(t,p,x,f,i.stepped)),!!c}function u$(t,e,r,s){const n=e.points,{count:i,start:a,ilen:l}=t3(n,r,s),{move:c=!0,reverse:d}=s||{};let u=0,h=0,f,m,x,p,g,v;const b=k=>(a+(d?l-k:k))%i,y=()=>{p!==g&&(t.lineTo(u,g),t.lineTo(u,p),t.lineTo(u,v))};for(c&&(m=n[b(0)],t.moveTo(m.x,m.y)),f=0;f<=l;++f){if(m=n[b(f)],m.skip)continue;const k=m.x,N=m.y,E=k|0;E===x?(N<p?p=N:N>g&&(g=N),u=(h*u+k)/++h):(y(),t.lineTo(k,N),x=E,h=0,p=g=N),v=N}y()}function $1(t){const e=t.options,r=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!r?u$:d$}function h$(t){return t.stepped?uI:t.tension||t.cubicInterpolationMode==="monotone"?hI:ao}function f$(t,e,r,s){let n=e._path;n||(n=e._path=new Path2D,e.path(n,r,s)&&n.closePath()),e3(t,e.options),t.stroke(n)}function m$(t,e,r,s){const{segments:n,options:i}=e,a=$1(e);for(const l of n)e3(t,i,l.style),t.beginPath(),a(t,e,l,{start:r,end:r+s-1})&&t.closePath(),t.stroke()}const x$=typeof Path2D=="function";function p$(t,e,r,s){x$&&!e.options.segment?f$(t,e,r,s):m$(t,e,r,s)}class ga extends En{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const n=s.spanGaps?this._loop:this._fullLoop;sI(this._points,s,e,n,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=vI(this,this.options.segment))}first(){const e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){const e=this.segments,r=this.points,s=e.length;return s&&r[e[s-1].end]}interpolate(e,r){const s=this.options,n=e[r],i=this.points,a=$S(this,{property:r,start:n,end:n});if(!a.length)return;const l=[],c=h$(s);let d,u;for(d=0,u=a.length;d<u;++d){const{start:h,end:f}=a[d],m=i[h],x=i[f];if(m===x){l.push(m);continue}const p=Math.abs((n-m[r])/(x[r]-m[r])),g=c(m,x,p,s.stepped);g[r]=e[r],l.push(g)}return l.length===1?l[0]:l}pathSegment(e,r,s){return $1(this)(e,this,r,s)}path(e,r,s){const n=this.segments,i=$1(this);let a=this._loop;r=r||0,s=s||this.points.length-r;for(const l of n)a&=i(e,this,l,{start:r,end:r+s-1});return!!a}draw(e,r,s,n){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),p$(e,this,s,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}_e(ga,"id","line"),_e(ga,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),_e(ga,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),_e(ga,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Kk(t,e,r,s){const n=t.options,{[r]:i}=t.getProps([r],s);return Math.abs(e-i)<n.radius+n.hitRadius}class wf extends En{constructor(r){super();_e(this,"parsed");_e(this,"skip");_e(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,s,n){const i=this.options,{x:a,y:l}=this.getProps(["x","y"],n);return Math.pow(r-a,2)+Math.pow(s-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(r,s){return Kk(this,r,"x",s)}inYRange(r,s){return Kk(this,r,"y",s)}getCenterPoint(r){const{x:s,y:n}=this.getProps(["x","y"],r);return{x:s,y:n}}size(r){r=r||this.options||{};let s=r.radius||0;s=Math.max(s,s&&r.hoverRadius||0);const n=s&&r.borderWidth||0;return(s+n)*2}draw(r,s){const n=this.options;this.skip||n.radius<.1||!bi(this,s,this.size(n)/2)||(r.strokeStyle=n.borderColor,r.lineWidth=n.borderWidth,r.fillStyle=n.backgroundColor,L1(r,n,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}_e(wf,"id","point"),_e(wf,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),_e(wf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function r3(t,e){const{x:r,y:s,base:n,width:i,height:a}=t.getProps(["x","y","base","width","height"],e);let l,c,d,u,h;return t.horizontal?(h=a/2,l=Math.min(r,n),c=Math.max(r,n),d=s-h,u=s+h):(h=i/2,l=r-h,c=r+h,d=Math.min(s,n),u=Math.max(s,n)),{left:l,top:d,right:c,bottom:u}}function va(t,e,r,s){return t?0:Br(e,r,s)}function g$(t,e,r){const s=t.options.borderWidth,n=t.borderSkipped,i=AS(s);return{t:va(n.top,i.top,0,r),r:va(n.right,i.right,0,e),b:va(n.bottom,i.bottom,0,r),l:va(n.left,i.left,0,e)}}function v$(t,e,r){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),n=t.options.borderRadius,i=Po(n),a=Math.min(e,r),l=t.borderSkipped,c=s||Je(n);return{topLeft:va(!c||l.top||l.left,i.topLeft,0,a),topRight:va(!c||l.top||l.right,i.topRight,0,a),bottomLeft:va(!c||l.bottom||l.left,i.bottomLeft,0,a),bottomRight:va(!c||l.bottom||l.right,i.bottomRight,0,a)}}function y$(t){const e=r3(t),r=e.right-e.left,s=e.bottom-e.top,n=g$(t,r/2,s/2),i=v$(t,r/2,s/2);return{outer:{x:e.left,y:e.top,w:r,h:s,radius:i},inner:{x:e.left+n.l,y:e.top+n.t,w:r-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,i.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(n.b,n.r))}}}}function Tp(t,e,r,s){const n=e===null,i=r===null,l=t&&!(n&&i)&&r3(t,s);return l&&(n||yi(e,l.left,l.right))&&(i||yi(r,l.top,l.bottom))}function b$(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function w$(t,e){t.rect(e.x,e.y,e.w,e.h)}function Ap(t,e,r={}){const s=t.x!==r.x?-e:0,n=t.y!==r.y?-e:0,i=(t.x+t.w!==r.x+r.w?e:0)-s,a=(t.y+t.h!==r.y+r.h?e:0)-n;return{x:t.x+s,y:t.y+n,w:t.w+i,h:t.h+a,radius:t.radius}}class kf extends En{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:r,options:{borderColor:s,backgroundColor:n}}=this,{inner:i,outer:a}=y$(this),l=b$(a.radius)?Gu:w$;e.save(),(a.w!==i.w||a.h!==i.h)&&(e.beginPath(),l(e,Ap(a,r,i)),e.clip(),l(e,Ap(i,-r,a)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),l(e,Ap(i,r)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,r,s){return Tp(this,e,r,s)}inXRange(e,r){return Tp(this,e,null,r)}inYRange(e,r){return Tp(this,null,e,r)}getCenterPoint(e){const{x:r,y:s,base:n,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(r+n)/2:r,y:i?s:(s+n)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}_e(kf,"id","bar"),_e(kf,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),_e(kf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function k$(t,e,r){const s=t.segments,n=t.points,i=e.points,a=[];for(const l of s){let{start:c,end:d}=l;d=yx(c,d,n);const u=z1(r,n[c],n[d],l.loop);if(!e.segments){a.push({source:l,target:u,start:n[c],end:n[d]});continue}const h=$S(e,u);for(const f of h){const m=z1(r,i[f.start],i[f.end],f.loop),x=BS(l,n,m);for(const p of x)a.push({source:p,target:f,start:{[r]:Xk(u,m,"start",Math.max)},end:{[r]:Xk(u,m,"end",Math.min)}})}}return a}function z1(t,e,r,s){if(s)return;let n=e[t],i=r[t];return t==="angle"&&(n=Pr(n),i=Pr(i)),{property:t,start:n,end:i}}function _$(t,e){const{x:r=null,y:s=null}=t||{},n=e.points,i=[];return e.segments.forEach(({start:a,end:l})=>{l=yx(a,l,n);const c=n[a],d=n[l];s!==null?(i.push({x:c.x,y:s}),i.push({x:d.x,y:s})):r!==null&&(i.push({x:r,y:c.y}),i.push({x:r,y:d.y}))}),i}function yx(t,e,r){for(;e>t;e--){const s=r[e];if(!isNaN(s.x)&&!isNaN(s.y))break}return e}function Xk(t,e,r,s){return t&&e?s(t[r],e[r]):t?t[r]:e?e[r]:0}function s3(t,e){let r=[],s=!1;return wt(t)?(s=!0,r=t):r=_$(t,e),r.length?new ga({points:r,options:{tension:0},_loop:s,_fullLoop:s}):null}function Qk(t){return t&&t.fill!==!1}function N$(t,e,r){let n=t[e].fill;const i=[e];let a;if(!r)return n;for(;n!==!1&&i.indexOf(n)===-1;){if(!Bt(n))return n;if(a=t[n],!a)return!1;if(a.visible)return n;i.push(n),n=a.fill}return!1}function j$(t,e,r){const s=T$(t);if(Je(s))return isNaN(s.value)?!1:s;let n=parseFloat(s);return Bt(n)&&Math.floor(n)===n?E$(s[0],e,n,r):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function E$(t,e,r,s){return(t==="-"||t==="+")&&(r=e+r),r===e||r<0||r>=s?!1:r}function S$(t,e){let r=null;return t==="start"?r=e.bottom:t==="end"?r=e.top:Je(t)?r=e.getPixelForValue(t.value):e.getBasePixel&&(r=e.getBasePixel()),r}function C$(t,e,r){let s;return t==="start"?s=r:t==="end"?s=e.options.reverse?e.min:e.max:Je(t)?s=t.value:s=e.getBaseValue(),s}function T$(t){const e=t.options,r=e.fill;let s=Ge(r&&r.target,r);return s===void 0&&(s=!!e.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function A$(t){const{scale:e,index:r,line:s}=t,n=[],i=s.segments,a=s.points,l=F$(e,r);l.push(s3({x:null,y:e.bottom},s));for(let c=0;c<i.length;c++){const d=i[c];for(let u=d.start;u<=d.end;u++)P$(n,a[u],l)}return new ga({points:n,options:{}})}function F$(t,e){const r=[],s=t.getMatchingVisibleMetas("line");for(let n=0;n<s.length;n++){const i=s[n];if(i.index===e)break;i.hidden||r.unshift(i.dataset)}return r}function P$(t,e,r){const s=[];for(let n=0;n<r.length;n++){const i=r[n],{first:a,last:l,point:c}=M$(i,e,"x");if(!(!c||a&&l)){if(a)s.unshift(c);else if(t.push(c),!l)break}}t.push(...s)}function M$(t,e,r){const s=t.interpolate(e,r);if(!s)return{};const n=s[r],i=t.segments,a=t.points;let l=!1,c=!1;for(let d=0;d<i.length;d++){const u=i[d],h=a[u.start][r],f=a[u.end][r];if(yi(n,h,f)){l=n===h,c=n===f;break}}return{first:l,last:c,point:s}}class n3{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,r,s){const{x:n,y:i,radius:a}=this;return r=r||{start:0,end:_t},e.arc(n,i,a,r.end,r.start,!0),!s.bounds}interpolate(e){const{x:r,y:s,radius:n}=this,i=e.angle;return{x:r+Math.cos(i)*n,y:s+Math.sin(i)*n,angle:i}}}function R$(t){const{chart:e,fill:r,line:s}=t;if(Bt(r))return D$(e,r);if(r==="stack")return A$(t);if(r==="shape")return!0;const n=O$(t);return n instanceof n3?n:s3(n,s)}function D$(t,e){const r=t.getDatasetMeta(e);return r&&t.isDatasetVisible(e)?r.dataset:null}function O$(t){return(t.scale||{}).getPointPositionForValue?I$(t):L$(t)}function L$(t){const{scale:e={},fill:r}=t,s=S$(r,e);if(Bt(s)){const n=e.isHorizontal();return{x:n?s:null,y:n?null:s}}return null}function I$(t){const{scale:e,fill:r}=t,s=e.options,n=e.getLabels().length,i=s.reverse?e.max:e.min,a=C$(r,e,i),l=[];if(s.grid.circular){const c=e.getPointPositionForValue(0,i);return new n3({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(a)})}for(let c=0;c<n;++c)l.push(e.getPointPositionForValue(c,a));return l}function Fp(t,e,r){const s=R$(e),{chart:n,index:i,line:a,scale:l,axis:c}=e,d=a.options,u=d.fill,h=d.backgroundColor,{above:f=h,below:m=h}=u||{},x=n.getDatasetMeta(i),p=zS(n,x);s&&a.points.length&&(xx(t,r),B$(t,{line:a,target:s,above:f,below:m,area:r,scale:l,axis:c,clip:p}),px(t))}function B$(t,e){const{line:r,target:s,above:n,below:i,area:a,scale:l,clip:c}=e,d=r._loop?"angle":e.axis;t.save();let u=i;i!==n&&(d==="x"?(Zk(t,s,a.top),Pp(t,{line:r,target:s,color:n,scale:l,property:d,clip:c}),t.restore(),t.save(),Zk(t,s,a.bottom)):d==="y"&&(Jk(t,s,a.left),Pp(t,{line:r,target:s,color:i,scale:l,property:d,clip:c}),t.restore(),t.save(),Jk(t,s,a.right),u=n)),Pp(t,{line:r,target:s,color:u,scale:l,property:d,clip:c}),t.restore()}function Zk(t,e,r){const{segments:s,points:n}=e;let i=!0,a=!1;t.beginPath();for(const l of s){const{start:c,end:d}=l,u=n[c],h=n[yx(c,d,n)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(u.x,r),t.lineTo(u.x,u.y)),a=!!e.pathSegment(t,l,{move:a}),a?t.closePath():t.lineTo(h.x,r)}t.lineTo(e.first().x,r),t.closePath(),t.clip()}function Jk(t,e,r){const{segments:s,points:n}=e;let i=!0,a=!1;t.beginPath();for(const l of s){const{start:c,end:d}=l,u=n[c],h=n[yx(c,d,n)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(r,u.y),t.lineTo(u.x,u.y)),a=!!e.pathSegment(t,l,{move:a}),a?t.closePath():t.lineTo(r,h.y)}t.lineTo(r,e.first().y),t.closePath(),t.clip()}function Pp(t,e){const{line:r,target:s,property:n,color:i,scale:a,clip:l}=e,c=k$(r,s,n);for(const{source:d,target:u,start:h,end:f}of c){const{style:{backgroundColor:m=i}={}}=d,x=s!==!0;t.save(),t.fillStyle=m,$$(t,a,l,x&&z1(n,h,f)),t.beginPath();const p=!!r.pathSegment(t,d);let g;if(x){p?t.closePath():e_(t,s,f,n);const v=!!s.pathSegment(t,u,{move:p,reverse:!0});g=p&&v,g||e_(t,s,h,n)}t.closePath(),t.fill(g?"evenodd":"nonzero"),t.restore()}}function $$(t,e,r,s){const n=e.chart.chartArea,{property:i,start:a,end:l}=s||{};if(i==="x"||i==="y"){let c,d,u,h;i==="x"?(c=a,d=n.top,u=l,h=n.bottom):(c=n.left,d=a,u=n.right,h=l),t.beginPath(),r&&(c=Math.max(c,r.left),u=Math.min(u,r.right),d=Math.max(d,r.top),h=Math.min(h,r.bottom)),t.rect(c,d,u-c,h-d),t.clip()}}function e_(t,e,r,s){const n=e.interpolate(r,s);n&&t.lineTo(n.x,n.y)}var z$={id:"filler",afterDatasetsUpdate(t,e,r){const s=(t.data.datasets||[]).length,n=[];let i,a,l,c;for(a=0;a<s;++a)i=t.getDatasetMeta(a),l=i.dataset,c=null,l&&l.options&&l instanceof ga&&(c={visible:t.isDatasetVisible(a),index:a,fill:j$(l,a,s),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:l}),i.$filler=c,n.push(c);for(a=0;a<s;++a)c=n[a],!(!c||c.fill===!1)&&(c.fill=N$(n,a,r.propagate))},beforeDraw(t,e,r){const s=r.drawTime==="beforeDraw",n=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let a=n.length-1;a>=0;--a){const l=n[a].$filler;l&&(l.line.updateControlPoints(i,l.axis),s&&l.fill&&Fp(t.ctx,l,i))}},beforeDatasetsDraw(t,e,r){if(r.drawTime!=="beforeDatasetsDraw")return;const s=t.getSortedVisibleDatasetMetas();for(let n=s.length-1;n>=0;--n){const i=s[n].$filler;Qk(i)&&Fp(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,r){const s=e.meta.$filler;!Qk(s)||r.drawTime!=="beforeDatasetDraw"||Fp(t.ctx,s,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const t_=(t,e)=>{let{boxHeight:r=e,boxWidth:s=e}=t;return t.usePointStyle&&(r=Math.min(r,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:r,itemHeight:Math.max(e,r)}},U$=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class r_ extends En{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r,s){this.maxWidth=e,this.maxHeight=r,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let r=mt(e.generateLabels,[this.chart],this)||[];e.filter&&(r=r.filter(s=>e.filter(s,this.chart.data))),e.sort&&(r=r.sort((s,n)=>e.sort(s,n,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:e,ctx:r}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,n=lr(s.font),i=n.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=t_(s,i);let d,u;r.font=n.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(a,i,l,c)+10):(u=this.maxHeight,d=this._fitCols(a,n,l,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,r,s,n){const{ctx:i,maxWidth:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=n+l;let h=e;i.textAlign="left",i.textBaseline="middle";let f=-1,m=-u;return this.legendItems.forEach((x,p)=>{const g=s+r/2+i.measureText(x.text).width;(p===0||d[d.length-1]+g+2*l>a)&&(h+=u,d[d.length-(p>0?0:1)]=0,m+=u,f++),c[p]={left:0,top:m,row:f,width:g,height:n},d[d.length-1]+=g+l}),h}_fitCols(e,r,s,n){const{ctx:i,maxHeight:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=a-e;let h=l,f=0,m=0,x=0,p=0;return this.legendItems.forEach((g,v)=>{const{itemWidth:b,itemHeight:y}=V$(s,r,i,g,n);v>0&&m+y+2*l>u&&(h+=f+l,d.push({width:f,height:m}),x+=f+l,p++,f=m=0),c[v]={left:x,top:m,col:p,width:b,height:y},f=Math.max(f,b),m+=y+l}),h+=f,d.push({width:f,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:s,labels:{padding:n},rtl:i}}=this,a=ec(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=Fr(s,this.left+n,this.right-this.lineWidths[l]);for(const d of r)l!==d.row&&(l=d.row,c=Fr(s,this.left+n,this.right-this.lineWidths[l])),d.top+=this.top+e+n,d.left=a.leftForLtr(a.x(c),d.width),c+=d.width+n}else{let l=0,c=Fr(s,this.top+e+n,this.bottom-this.columnSizes[l].height);for(const d of r)d.col!==l&&(l=d.col,c=Fr(s,this.top+e+n,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+n,d.left=a.leftForLtr(a.x(d.left),d.width),c+=d.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;xx(e,this),this._draw(),px(e)}}_draw(){const{options:e,columnSizes:r,lineWidths:s,ctx:n}=this,{align:i,labels:a}=e,l=$t.color,c=ec(e.rtl,this.left,this.width),d=lr(a.font),{padding:u}=a,h=d.size,f=h/2;let m;this.drawTitle(),n.textAlign=c.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=d.string;const{boxWidth:x,boxHeight:p,itemHeight:g}=t_(a,h),v=function(E,j,_){if(isNaN(x)||x<=0||isNaN(p)||p<0)return;n.save();const S=Ge(_.lineWidth,1);if(n.fillStyle=Ge(_.fillStyle,l),n.lineCap=Ge(_.lineCap,"butt"),n.lineDashOffset=Ge(_.lineDashOffset,0),n.lineJoin=Ge(_.lineJoin,"miter"),n.lineWidth=S,n.strokeStyle=Ge(_.strokeStyle,l),n.setLineDash(Ge(_.lineDash,[])),a.usePointStyle){const C={radius:p*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:S},F=c.xPlus(E,x/2),P=j+f;TS(n,C,F,P,a.pointStyleWidth&&x)}else{const C=j+Math.max((h-p)/2,0),F=c.leftForLtr(E,x),P=Po(_.borderRadius);n.beginPath(),Object.values(P).some(B=>B!==0)?Gu(n,{x:F,y:C,w:x,h:p,radius:P}):n.rect(F,C,x,p),n.fill(),S!==0&&n.stroke()}n.restore()},b=function(E,j,_){Qo(n,_.text,E,j+g/2,d,{strikethrough:_.hidden,textAlign:c.textAlign(_.textAlign)})},y=this.isHorizontal(),k=this._computeTitleHeight();y?m={x:Fr(i,this.left+u,this.right-s[0]),y:this.top+u+k,line:0}:m={x:this.left+u,y:Fr(i,this.top+k+u,this.bottom-r[0].height),line:0},OS(this.ctx,e.textDirection);const N=g+u;this.legendItems.forEach((E,j)=>{n.strokeStyle=E.fontColor,n.fillStyle=E.fontColor;const _=n.measureText(E.text).width,S=c.textAlign(E.textAlign||(E.textAlign=a.textAlign)),C=x+f+_;let F=m.x,P=m.y;c.setWidth(this.width),y?j>0&&F+C+u>this.right&&(P=m.y+=N,m.line++,F=m.x=Fr(i,this.left+u,this.right-s[m.line])):j>0&&P+N>this.bottom&&(F=m.x=F+r[m.line].width+u,m.line++,P=m.y=Fr(i,this.top+k+u,this.bottom-r[m.line].height));const B=c.x(F);if(v(B,P,E),F=y9(S,F+x+f,y?F+C:this.right,e.rtl),b(c.x(F),P,E),y)m.x+=C+u;else if(typeof E.text!="string"){const Q=d.lineHeight;m.y+=i3(E,Q)+u}else m.y+=N}),LS(this.ctx,e.textDirection)}drawTitle(){const e=this.options,r=e.title,s=lr(r.font),n=Wr(r.padding);if(!r.display)return;const i=ec(e.rtl,this.left,this.width),a=this.ctx,l=r.position,c=s.size/2,d=n.top+c;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+d,h=Fr(e.align,h,this.right-f);else{const x=this.columnSizes.reduce((p,g)=>Math.max(p,g.height),0);u=d+Fr(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const m=Fr(l,h,h+f);a.textAlign=i.textAlign(zy(l)),a.textBaseline="middle",a.strokeStyle=r.color,a.fillStyle=r.color,a.font=s.string,Qo(a,r.text,m,u,s)}_computeTitleHeight(){const e=this.options.title,r=lr(e.font),s=Wr(e.padding);return e.display?r.lineHeight+s.height:0}_getLegendItemAt(e,r){let s,n,i;if(yi(e,this.left,this.right)&&yi(r,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(n=i[s],yi(e,n.left,n.left+n.width)&&yi(r,n.top,n.top+n.height))return this.legendItems[s]}return null}handleEvent(e){const r=this.options;if(!Y$(e.type,r))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const n=this._hoveredItem,i=U$(n,s);n&&!i&&mt(r.onLeave,[e,n,this],this),this._hoveredItem=s,s&&!i&&mt(r.onHover,[e,s,this],this)}else s&&mt(r.onClick,[e,s,this],this)}}function V$(t,e,r,s,n){const i=W$(s,t,e,r),a=H$(n,s,e.lineHeight);return{itemWidth:i,itemHeight:a}}function W$(t,e,r,s){let n=t.text;return n&&typeof n!="string"&&(n=n.reduce((i,a)=>i.length>a.length?i:a)),e+r.size/2+s.measureText(n).width}function H$(t,e,r){let s=t;return typeof e.text!="string"&&(s=i3(e,r)),s}function i3(t,e){const r=t.text?t.text.length:0;return e*r}function Y$(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var q$={id:"legend",_element:r_,start(t,e,r){const s=t.legend=new r_({ctx:t.ctx,options:r,chart:t});Hs.configure(t,s,r),Hs.addBox(t,s)},stop(t){Hs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,r){const s=t.legend;Hs.configure(t,s,r),s.options=r},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,r){const s=e.datasetIndex,n=r.chart;n.isDatasetVisible(s)?(n.hide(s),e.hidden=!0):(n.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:r,pointStyle:s,textAlign:n,color:i,useBorderRadius:a,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(r?0:void 0),u=Wr(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:s||d.pointStyle,rotation:d.rotation,textAlign:n||d.textAlign,borderRadius:a&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class a3 extends En{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=r;const n=wt(s.text)?s.text.length:1;this._padding=Wr(s.padding);const i=n*lr(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:r,left:s,bottom:n,right:i,options:a}=this,l=a.align;let c=0,d,u,h;return this.isHorizontal()?(u=Fr(l,s,i),h=r+e,d=i-s):(a.position==="left"?(u=s+e,h=Fr(l,n,r),c=lt*-.5):(u=i-e,h=Fr(l,r,n),c=lt*.5),d=n-r),{titleX:u,titleY:h,maxWidth:d,rotation:c}}draw(){const e=this.ctx,r=this.options;if(!r.display)return;const s=lr(r.font),i=s.lineHeight/2+this._padding.top,{titleX:a,titleY:l,maxWidth:c,rotation:d}=this._drawArgs(i);Qo(e,r.text,0,0,s,{color:r.color,maxWidth:c,rotation:d,textAlign:zy(r.align),textBaseline:"middle",translation:[a,l]})}}function G$(t,e){const r=new a3({ctx:t.ctx,options:e,chart:t});Hs.configure(t,r,e),Hs.addBox(t,r),t.titleBlock=r}var K$={id:"title",_element:a3,start(t,e,r){G$(t,r)},stop(t){const e=t.titleBlock;Hs.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,r){const s=t.titleBlock;Hs.configure(t,s,r),s.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Od={average(t){if(!t.length)return!1;let e,r,s=new Set,n=0,i=0;for(e=0,r=t.length;e<r;++e){const l=t[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();s.add(c.x),n+=c.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((l,c)=>l+c)/s.size,y:n/i}},nearest(t,e){if(!t.length)return!1;let r=e.x,s=e.y,n=Number.POSITIVE_INFINITY,i,a,l;for(i=0,a=t.length;i<a;++i){const c=t[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=D1(e,d);u<n&&(n=u,l=c)}}if(l){const c=l.tooltipPosition();r=c.x,s=c.y}return{x:r,y:s}}};function Mn(t,e){return e&&(wt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function li(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function X$(t,e){const{element:r,datasetIndex:s,index:n}=e,i=t.getDatasetMeta(s).controller,{label:a,value:l}=i.getLabelAndValue(n);return{chart:t,label:a,parsed:i.getParsed(n),raw:t.data.datasets[s].data[n],formattedValue:l,dataset:i.getDataset(),dataIndex:n,datasetIndex:s,element:r}}function s_(t,e){const r=t.chart.ctx,{body:s,footer:n,title:i}=t,{boxWidth:a,boxHeight:l}=e,c=lr(e.bodyFont),d=lr(e.titleFont),u=lr(e.footerFont),h=i.length,f=n.length,m=s.length,x=Wr(e.padding);let p=x.height,g=0,v=s.reduce((k,N)=>k+N.before.length+N.lines.length+N.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,h&&(p+=h*d.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),v){const k=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;p+=m*k+(v-m)*c.lineHeight+(v-1)*e.bodySpacing}f&&(p+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let b=0;const y=function(k){g=Math.max(g,r.measureText(k).width+b)};return r.save(),r.font=d.string,ct(t.title,y),r.font=c.string,ct(t.beforeBody.concat(t.afterBody),y),b=e.displayColors?a+2+e.boxPadding:0,ct(s,k=>{ct(k.before,y),ct(k.lines,y),ct(k.after,y)}),b=0,r.font=u.string,ct(t.footer,y),r.restore(),g+=x.width,{width:g,height:p}}function Q$(t,e){const{y:r,height:s}=e;return r<s/2?"top":r>t.height-s/2?"bottom":"center"}function Z$(t,e,r,s){const{x:n,width:i}=s,a=r.caretSize+r.caretPadding;if(t==="left"&&n+i+a>e.width||t==="right"&&n-i-a<0)return!0}function J$(t,e,r,s){const{x:n,width:i}=r,{width:a,chartArea:{left:l,right:c}}=t;let d="center";return s==="center"?d=n<=(l+c)/2?"left":"right":n<=i/2?d="left":n>=a-i/2&&(d="right"),Z$(d,t,e,r)&&(d="center"),d}function n_(t,e,r){const s=r.yAlign||e.yAlign||Q$(t,r);return{xAlign:r.xAlign||e.xAlign||J$(t,e,r,s),yAlign:s}}function ez(t,e){let{x:r,width:s}=t;return e==="right"?r-=s:e==="center"&&(r-=s/2),r}function tz(t,e,r){let{y:s,height:n}=t;return e==="top"?s+=r:e==="bottom"?s-=n+r:s-=n/2,s}function i_(t,e,r,s){const{caretSize:n,caretPadding:i,cornerRadius:a}=t,{xAlign:l,yAlign:c}=r,d=n+i,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:m}=Po(a);let x=ez(e,l);const p=tz(e,c,d);return c==="center"?l==="left"?x+=d:l==="right"&&(x-=d):l==="left"?x-=Math.max(u,f)+n:l==="right"&&(x+=Math.max(h,m)+n),{x:Br(x,0,s.width-e.width),y:Br(p,0,s.height-e.height)}}function T0(t,e,r){const s=Wr(r.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function a_(t){return Mn([],li(t))}function rz(t,e,r){return Ga(t,{tooltip:e,tooltipItems:r,type:"tooltip"})}function o_(t,e){const r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?t.override(r):t}const o3={beforeTitle:ii,title(t){if(t.length>0){const e=t[0],r=e.chart.data.labels,s=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return r[e.dataIndex]}return""},afterTitle:ii,beforeBody:ii,beforeLabel:ii,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const r=t.formattedValue;return it(r)||(e+=r),e},labelColor(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:ii,afterBody:ii,beforeFooter:ii,footer:ii,afterFooter:ii};function ls(t,e,r,s){const n=t[e].call(r,s);return typeof n>"u"?o3[e].call(r,s):n}class U1 extends En{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const r=this.chart,s=this.options.setContext(this.getContext()),n=s.enabled&&r.options.animation&&s.animations,i=new US(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=rz(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){const{callbacks:s}=r,n=ls(s,"beforeTitle",this,e),i=ls(s,"title",this,e),a=ls(s,"afterTitle",this,e);let l=[];return l=Mn(l,li(n)),l=Mn(l,li(i)),l=Mn(l,li(a)),l}getBeforeBody(e,r){return a_(ls(r.callbacks,"beforeBody",this,e))}getBody(e,r){const{callbacks:s}=r,n=[];return ct(e,i=>{const a={before:[],lines:[],after:[]},l=o_(s,i);Mn(a.before,li(ls(l,"beforeLabel",this,i))),Mn(a.lines,ls(l,"label",this,i)),Mn(a.after,li(ls(l,"afterLabel",this,i))),n.push(a)}),n}getAfterBody(e,r){return a_(ls(r.callbacks,"afterBody",this,e))}getFooter(e,r){const{callbacks:s}=r,n=ls(s,"beforeFooter",this,e),i=ls(s,"footer",this,e),a=ls(s,"afterFooter",this,e);let l=[];return l=Mn(l,li(n)),l=Mn(l,li(i)),l=Mn(l,li(a)),l}_createItems(e){const r=this._active,s=this.chart.data,n=[],i=[],a=[];let l=[],c,d;for(c=0,d=r.length;c<d;++c)l.push(X$(this.chart,r[c]));return e.filter&&(l=l.filter((u,h,f)=>e.filter(u,h,f,s))),e.itemSort&&(l=l.sort((u,h)=>e.itemSort(u,h,s))),ct(l,u=>{const h=o_(e.callbacks,u);n.push(ls(h,"labelColor",this,u)),i.push(ls(h,"labelPointStyle",this,u)),a.push(ls(h,"labelTextColor",this,u))}),this.labelColors=n,this.labelPointStyles=i,this.labelTextColors=a,this.dataPoints=l,l}update(e,r){const s=this.options.setContext(this.getContext()),n=this._active;let i,a=[];if(!n.length)this.opacity!==0&&(i={opacity:0});else{const l=Od[s.position].call(this,n,this._eventPosition);a=this._createItems(s),this.title=this.getTitle(a,s),this.beforeBody=this.getBeforeBody(a,s),this.body=this.getBody(a,s),this.afterBody=this.getAfterBody(a,s),this.footer=this.getFooter(a,s);const c=this._size=s_(this,s),d=Object.assign({},l,c),u=n_(this.chart,s,d),h=i_(s,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,s,n){const i=this.getCaretPosition(e,s,n);r.lineTo(i.x1,i.y1),r.lineTo(i.x2,i.y2),r.lineTo(i.x3,i.y3)}getCaretPosition(e,r,s){const{xAlign:n,yAlign:i}=this,{caretSize:a,cornerRadius:l}=s,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=Po(l),{x:f,y:m}=e,{width:x,height:p}=r;let g,v,b,y,k,N;return i==="center"?(k=m+p/2,n==="left"?(g=f,v=g-a,y=k+a,N=k-a):(g=f+x,v=g+a,y=k-a,N=k+a),b=g):(n==="left"?v=f+Math.max(c,u)+a:n==="right"?v=f+x-Math.max(d,h)-a:v=this.caretX,i==="top"?(y=m,k=y-a,g=v-a,b=v+a):(y=m+p,k=y+a,g=v+a,b=v-a),N=y),{x1:g,x2:v,x3:b,y1:y,y2:k,y3:N}}drawTitle(e,r,s){const n=this.title,i=n.length;let a,l,c;if(i){const d=ec(s.rtl,this.x,this.width);for(e.x=T0(this,s.titleAlign,s),r.textAlign=d.textAlign(s.titleAlign),r.textBaseline="middle",a=lr(s.titleFont),l=s.titleSpacing,r.fillStyle=s.titleColor,r.font=a.string,c=0;c<i;++c)r.fillText(n[c],d.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+l,c+1===i&&(e.y+=s.titleMarginBottom-l)}}_drawColorBox(e,r,s,n,i){const a=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:d}=i,u=lr(i.bodyFont),h=T0(this,"left",i),f=n.x(h),m=c<u.lineHeight?(u.lineHeight-c)/2:0,x=r.y+m;if(i.usePointStyle){const p={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},g=n.leftForLtr(f,d)+d/2,v=x+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,L1(e,p,g,v),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,L1(e,p,g,v)}else{e.lineWidth=Je(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const p=n.leftForLtr(f,d),g=n.leftForLtr(n.xPlus(f,1),d-2),v=Po(a.borderRadius);Object.values(v).some(b=>b!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Gu(e,{x:p,y:x,w:d,h:c,radius:v}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),Gu(e,{x:g,y:x+1,w:d-2,h:c-2,radius:v}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(p,x,d,c),e.strokeRect(p,x,d,c),e.fillStyle=a.backgroundColor,e.fillRect(g,x+1,d-2,c-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,r,s){const{body:n}=this,{bodySpacing:i,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=s,h=lr(s.bodyFont);let f=h.lineHeight,m=0;const x=ec(s.rtl,this.x,this.width),p=function(_){r.fillText(_,x.x(e.x+m),e.y+f/2),e.y+=f+i},g=x.textAlign(a);let v,b,y,k,N,E,j;for(r.textAlign=a,r.textBaseline="middle",r.font=h.string,e.x=T0(this,g,s),r.fillStyle=s.bodyColor,ct(this.beforeBody,p),m=l&&g!=="right"?a==="center"?d/2+u:d+2+u:0,k=0,E=n.length;k<E;++k){for(v=n[k],b=this.labelTextColors[k],r.fillStyle=b,ct(v.before,p),y=v.lines,l&&y.length&&(this._drawColorBox(r,e,k,x,s),f=Math.max(h.lineHeight,c)),N=0,j=y.length;N<j;++N)p(y[N]),f=h.lineHeight;ct(v.after,p)}m=0,f=h.lineHeight,ct(this.afterBody,p),e.y-=i}drawFooter(e,r,s){const n=this.footer,i=n.length;let a,l;if(i){const c=ec(s.rtl,this.x,this.width);for(e.x=T0(this,s.footerAlign,s),e.y+=s.footerMarginTop,r.textAlign=c.textAlign(s.footerAlign),r.textBaseline="middle",a=lr(s.footerFont),r.fillStyle=s.footerColor,r.font=a.string,l=0;l<i;++l)r.fillText(n[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+s.footerSpacing}}drawBackground(e,r,s,n){const{xAlign:i,yAlign:a}=this,{x:l,y:c}=e,{width:d,height:u}=s,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:x}=Po(n.cornerRadius);r.fillStyle=n.backgroundColor,r.strokeStyle=n.borderColor,r.lineWidth=n.borderWidth,r.beginPath(),r.moveTo(l+h,c),a==="top"&&this.drawCaret(e,r,s,n),r.lineTo(l+d-f,c),r.quadraticCurveTo(l+d,c,l+d,c+f),a==="center"&&i==="right"&&this.drawCaret(e,r,s,n),r.lineTo(l+d,c+u-x),r.quadraticCurveTo(l+d,c+u,l+d-x,c+u),a==="bottom"&&this.drawCaret(e,r,s,n),r.lineTo(l+m,c+u),r.quadraticCurveTo(l,c+u,l,c+u-m),a==="center"&&i==="left"&&this.drawCaret(e,r,s,n),r.lineTo(l,c+h),r.quadraticCurveTo(l,c,l+h,c),r.closePath(),r.fill(),n.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){const r=this.chart,s=this.$animations,n=s&&s.x,i=s&&s.y;if(n||i){const a=Od[e.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=s_(this,e),c=Object.assign({},a,this._size),d=n_(r,e,c),u=i_(e,c,d,r);(n._to!==u.x||i._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const r=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(r);const n={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const a=Wr(r.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&l&&(e.save(),e.globalAlpha=s,this.drawBackground(i,e,n,r),OS(e,r.textDirection),i.y+=a.top,this.drawTitle(i,e,r),this.drawBody(i,e,r),this.drawFooter(i,e,r),LS(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){const s=this._active,n=e.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),i=!lm(s,n),a=this._positionChanged(n,r);(i||a)&&(this._active=n,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,s=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,i=this._active||[],a=this._getActiveElements(e,i,r,s),l=this._positionChanged(a,e),c=r||!lm(a,i)||l;return c&&(this._active=a,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),c}_getActiveElements(e,r,s,n){const i=this.options;if(e.type==="mouseout")return[];if(!n)return r.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,i.mode,i,s);return i.reverse&&a.reverse(),a}_positionChanged(e,r){const{caretX:s,caretY:n,options:i}=this,a=Od[i.position].call(this,e,r);return a!==!1&&(s!==a.x||n!==a.y)}}_e(U1,"positioners",Od);var sz={id:"tooltip",_element:U1,positioners:Od,afterInit(t,e,r){r&&(t.tooltip=new U1({chart:t,options:r}))},beforeUpdate(t,e,r){t.tooltip&&t.tooltip.initialize(r)},reset(t,e,r){t.tooltip&&t.tooltip.initialize(r)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const r={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",r)}},afterEvent(t,e){if(t.tooltip){const r=e.replay;t.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:o3},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const nz=(t,e,r,s)=>(typeof e=="string"?(r=t.push(e)-1,s.unshift({index:r,label:e})):isNaN(e)&&(r=null),r);function iz(t,e,r,s){const n=t.indexOf(e);if(n===-1)return nz(t,e,r,s);const i=t.lastIndexOf(e);return n!==i?r:n}const az=(t,e)=>t===null?null:Br(Math.round(t),0,e);function l_(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class V1 extends cl{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const r=this._addedLabels;if(r.length){const s=this.getLabels();for(const{index:n,label:i}of r)s[n]===i&&s.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(it(e))return null;const s=this.getLabels();return r=isFinite(r)&&s[r]===e?r:iz(s,e,Ge(r,e),this._addedLabels),az(r,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:s,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),r||(n=this.getLabels().length-1)),this.min=s,this.max=n}buildTicks(){const e=this.min,r=this.max,s=this.options.offset,n=[];let i=this.getLabels();i=e===0&&r===i.length-1?i:i.slice(e,r+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let a=e;a<=r;a++)n.push({value:a});return n}getLabelForValue(e){return l_.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}_e(V1,"id","category"),_e(V1,"defaults",{ticks:{callback:l_}});function oz(t,e){const r=[],{bounds:n,step:i,min:a,max:l,precision:c,count:d,maxTicks:u,maxDigits:h,includeBounds:f}=t,m=i||1,x=u-1,{min:p,max:g}=e,v=!it(a),b=!it(l),y=!it(d),k=(g-p)/(h+1);let N=ak((g-p)/x/m)*m,E,j,_,S;if(N<1e-14&&!v&&!b)return[{value:p},{value:g}];S=Math.ceil(g/N)-Math.floor(p/N),S>x&&(N=ak(S*N/x/m)*m),it(c)||(E=Math.pow(10,c),N=Math.ceil(N*E)/E),n==="ticks"?(j=Math.floor(p/N)*N,_=Math.ceil(g/N)*N):(j=p,_=g),v&&b&&i&&h9((l-a)/i,N/1e3)?(S=Math.round(Math.min((l-a)/N,u)),N=(l-a)/S,j=a,_=l):y?(j=v?a:j,_=b?l:_,S=d-1,N=(_-j)/S):(S=(_-j)/N,ru(S,Math.round(S),N/1e3)?S=Math.round(S):S=Math.ceil(S));const C=Math.max(ok(N),ok(j));E=Math.pow(10,it(c)?C:c),j=Math.round(j*E)/E,_=Math.round(_*E)/E;let F=0;for(v&&(f&&j!==a?(r.push({value:a}),j<a&&F++,ru(Math.round((j+F*N)*E)/E,a,c_(a,k,t))&&F++):j<a&&F++);F<S;++F){const P=Math.round((j+F*N)*E)/E;if(b&&P>l)break;r.push({value:P})}return b&&f&&_!==l?r.length&&ru(r[r.length-1].value,l,c_(l,k,t))?r[r.length-1].value=l:r.push({value:l}):(!b||_===l)&&r.push({value:_}),r}function c_(t,e,{horizontal:r,minRotation:s}){const n=Wn(s),i=(r?Math.sin(n):Math.cos(n))||.001,a=.75*e*(""+t).length;return Math.min(e/i,a)}class xm extends cl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,r){return it(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:r,maxDefined:s}=this.getUserBounds();let{min:n,max:i}=this;const a=c=>n=r?n:c,l=c=>i=s?i:c;if(e){const c=Gn(n),d=Gn(i);c<0&&d<0?l(0):c>0&&d>0&&a(0)}if(n===i){let c=i===0?1:Math.abs(i*.05);l(i+c),e||a(n-c)}this.min=n,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:r,stepSize:s}=e,n;return s?(n=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),r=r||11),r&&(n=Math.min(r,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,r=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const n={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},i=this._range||this,a=oz(n,i);return e.bounds==="ticks"&&kS(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let r=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const n=(s-r)/Math.max(e.length-1,1)/2;r-=n,s+=n}this._startValue=r,this._endValue=s,this._valueRange=s-r}getLabelForValue(e){return fx(e,this.chart.options.locale,this.options.ticks.format)}}class W1 extends xm{determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=Bt(e)?e:0,this.max=Bt(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),r=e?this.width:this.height,s=Wn(this.options.ticks.minRotation),n=(e?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,i.lineHeight/n))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}_e(W1,"id","linear"),_e(W1,"defaults",{ticks:{callback:mx.formatters.numeric}});const Xu=t=>Math.floor(pa(t)),to=(t,e)=>Math.pow(10,Xu(t)+e);function d_(t){return t/Math.pow(10,Xu(t))===1}function u_(t,e,r){const s=Math.pow(10,r),n=Math.floor(t/s);return Math.ceil(e/s)-n}function lz(t,e){const r=e-t;let s=Xu(r);for(;u_(t,e,s)>10;)s++;for(;u_(t,e,s)<10;)s--;return Math.min(s,Xu(t))}function cz(t,{min:e,max:r}){e=ws(t.min,e);const s=[],n=Xu(e);let i=lz(e,r),a=i<0?Math.pow(10,Math.abs(i)):1;const l=Math.pow(10,i),c=n>i?Math.pow(10,n):0,d=Math.round((e-c)*a)/a,u=Math.floor((e-c)/l/10)*l*10;let h=Math.floor((d-u)/Math.pow(10,i)),f=ws(t.min,Math.round((c+u+h*Math.pow(10,i))*a)/a);for(;f<r;)s.push({value:f,major:d_(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(i++,h=2,a=i>=0?1:a),f=Math.round((c+u+h*Math.pow(10,i))*a)/a;const m=ws(t.max,f);return s.push({value:m,major:d_(m),significand:h}),s}class h_ extends cl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,r){const s=xm.prototype.parse.apply(this,[e,r]);if(s===0){this._zero=!0;return}return Bt(s)&&s>0?s:null}determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=Bt(e)?Math.max(0,e):null,this.max=Bt(r)?Math.max(0,r):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Bt(this._userMin)&&(this.min=e===to(this.min,0)?to(this.min,-1):to(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let s=this.min,n=this.max;const i=l=>s=e?s:l,a=l=>n=r?n:l;s===n&&(s<=0?(i(1),a(10)):(i(to(s,-1)),a(to(n,1)))),s<=0&&i(to(n,-1)),n<=0&&a(to(s,1)),this.min=s,this.max=n}buildTicks(){const e=this.options,r={min:this._userMin,max:this._userMax},s=cz(r,this);return e.bounds==="ticks"&&kS(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(e){return e===void 0?"0":fx(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=pa(e),this._valueRange=pa(this.max)-pa(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(pa(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const r=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+r*this._valueRange)}}_e(h_,"id","logarithmic"),_e(h_,"defaults",{ticks:{callback:mx.formatters.logarithmic,major:{enabled:!0}}});function H1(t){const e=t.ticks;if(e.display&&t.display){const r=Wr(e.backdropPadding);return Ge(e.font&&e.font.size,$t.font.size)+r.height}return 0}function dz(t,e,r){return r=wt(r)?r:[r],{w:F9(t,e.string,r),h:r.length*e.lineHeight}}function f_(t,e,r,s,n){return t===s||t===n?{start:e-r/2,end:e+r/2}:t<s||t>n?{start:e-r,end:e}:{start:e,end:e+r}}function uz(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},r=Object.assign({},e),s=[],n=[],i=t._pointLabels.length,a=t.options.pointLabels,l=a.centerPointLabels?lt/i:0;for(let c=0;c<i;c++){const d=a.setContext(t.getPointLabelContext(c));n[c]=d.padding;const u=t.getPointPosition(c,t.drawingArea+n[c],l),h=lr(d.font),f=dz(t.ctx,h,t._pointLabels[c]);s[c]=f;const m=Pr(t.getIndexAngle(c)+l),x=Math.round(By(m)),p=f_(x,u.x,f.w,0,180),g=f_(x,u.y,f.h,90,270);hz(r,e,m,p,g)}t.setCenterPoint(e.l-r.l,r.r-e.r,e.t-r.t,r.b-e.b),t._pointLabelItems=xz(t,s,n)}function hz(t,e,r,s,n){const i=Math.abs(Math.sin(r)),a=Math.abs(Math.cos(r));let l=0,c=0;s.start<e.l?(l=(e.l-s.start)/i,t.l=Math.min(t.l,e.l-l)):s.end>e.r&&(l=(s.end-e.r)/i,t.r=Math.max(t.r,e.r+l)),n.start<e.t?(c=(e.t-n.start)/a,t.t=Math.min(t.t,e.t-c)):n.end>e.b&&(c=(n.end-e.b)/a,t.b=Math.max(t.b,e.b+c))}function fz(t,e,r){const s=t.drawingArea,{extra:n,additionalAngle:i,padding:a,size:l}=r,c=t.getPointPosition(e,s+n+a,i),d=Math.round(By(Pr(c.angle+Ht))),u=vz(c.y,l.h,d),h=pz(d),f=gz(c.x,l.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:f,top:u,right:f+l.w,bottom:u+l.h}}function mz(t,e){if(!e)return!0;const{left:r,top:s,right:n,bottom:i}=t;return!(bi({x:r,y:s},e)||bi({x:r,y:i},e)||bi({x:n,y:s},e)||bi({x:n,y:i},e))}function xz(t,e,r){const s=[],n=t._pointLabels.length,i=t.options,{centerPointLabels:a,display:l}=i.pointLabels,c={extra:H1(i)/2,additionalAngle:a?lt/n:0};let d;for(let u=0;u<n;u++){c.padding=r[u],c.size=e[u];const h=fz(t,u,c);s.push(h),l==="auto"&&(h.visible=mz(h,d),h.visible&&(d=h))}return s}function pz(t){return t===0||t===180?"center":t<180?"left":"right"}function gz(t,e,r){return r==="right"?t-=e:r==="center"&&(t-=e/2),t}function vz(t,e,r){return r===90||r===270?t-=e/2:(r>270||r<90)&&(t-=e),t}function yz(t,e,r){const{left:s,top:n,right:i,bottom:a}=r,{backdropColor:l}=e;if(!it(l)){const c=Po(e.borderRadius),d=Wr(e.backdropPadding);t.fillStyle=l;const u=s-d.left,h=n-d.top,f=i-s+d.width,m=a-n+d.height;Object.values(c).some(x=>x!==0)?(t.beginPath(),Gu(t,{x:u,y:h,w:f,h:m,radius:c}),t.fill()):t.fillRect(u,h,f,m)}}function bz(t,e){const{ctx:r,options:{pointLabels:s}}=t;for(let n=e-1;n>=0;n--){const i=t._pointLabelItems[n];if(!i.visible)continue;const a=s.setContext(t.getPointLabelContext(n));yz(r,a,i);const l=lr(a.font),{x:c,y:d,textAlign:u}=i;Qo(r,t._pointLabels[n],c,d+l.lineHeight/2,l,{color:a.color,textAlign:u,textBaseline:"middle"})}}function l3(t,e,r,s){const{ctx:n}=t;if(r)n.arc(t.xCenter,t.yCenter,e,0,_t);else{let i=t.getPointPosition(0,e);n.moveTo(i.x,i.y);for(let a=1;a<s;a++)i=t.getPointPosition(a,e),n.lineTo(i.x,i.y)}}function wz(t,e,r,s,n){const i=t.ctx,a=e.circular,{color:l,lineWidth:c}=e;!a&&!s||!l||!c||r<0||(i.save(),i.strokeStyle=l,i.lineWidth=c,i.setLineDash(n.dash||[]),i.lineDashOffset=n.dashOffset,i.beginPath(),l3(t,r,a,s),i.closePath(),i.stroke(),i.restore())}function kz(t,e,r){return Ga(t,{label:r,index:e,type:"pointLabel"})}class A0 extends xm{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Wr(H1(this.options)/2),r=this.width=this.maxWidth-e.width,s=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+r/2+e.left),this.yCenter=Math.floor(this.top+s/2+e.top),this.drawingArea=Math.floor(Math.min(r,s)/2)}determineDataLimits(){const{min:e,max:r}=this.getMinMax(!1);this.min=Bt(e)&&!isNaN(e)?e:0,this.max=Bt(r)&&!isNaN(r)?r:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/H1(this.options))}generateTickLabels(e){xm.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((r,s)=>{const n=mt(this.options.pointLabels.callback,[r,s],this);return n||n===0?n:""}).filter((r,s)=>this.chart.getDataVisibility(s))}fit(){const e=this.options;e.display&&e.pointLabels.display?uz(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,r,s,n){this.xCenter+=Math.floor((e-r)/2),this.yCenter+=Math.floor((s-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,r,s,n))}getIndexAngle(e){const r=_t/(this._pointLabels.length||1),s=this.options.startAngle||0;return Pr(e*r+Wn(s))}getDistanceFromCenterForValue(e){if(it(e))return NaN;const r=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*r:(e-this.min)*r}getValueForDistanceFromCenter(e){if(it(e))return NaN;const r=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-r:this.min+r}getPointLabelContext(e){const r=this._pointLabels||[];if(e>=0&&e<r.length){const s=r[e];return kz(this.getContext(),e,s)}}getPointPosition(e,r,s=0){const n=this.getIndexAngle(e)-Ht+s;return{x:Math.cos(n)*r+this.xCenter,y:Math.sin(n)*r+this.yCenter,angle:n}}getPointPositionForValue(e,r){return this.getPointPosition(e,this.getDistanceFromCenterForValue(r))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:r,top:s,right:n,bottom:i}=this._pointLabelItems[e];return{left:r,top:s,right:n,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:r}}=this.options;if(e){const s=this.ctx;s.save(),s.beginPath(),l3(this,this.getDistanceFromCenterForValue(this._endValue),r,this._pointLabels.length),s.closePath(),s.fillStyle=e,s.fill(),s.restore()}}drawGrid(){const e=this.ctx,r=this.options,{angleLines:s,grid:n,border:i}=r,a=this._pointLabels.length;let l,c,d;if(r.pointLabels.display&&bz(this,a),n.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(h),m=n.setContext(f),x=i.setContext(f);wz(this,m,c,a,x)}}),s.display){for(e.save(),l=a-1;l>=0;l--){const u=s.setContext(this.getPointLabelContext(l)),{color:h,lineWidth:f}=u;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(r.reverse?this.min:this.max),d=this.getPointPosition(l,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,r=this.options,s=r.ticks;if(!s.display)return;const n=this.getIndexAngle(0);let i,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(n),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((l,c)=>{if(c===0&&this.min>=0&&!r.reverse)return;const d=s.setContext(this.getContext(c)),u=lr(d.font);if(i=this.getDistanceFromCenterForValue(this.ticks[c].value),d.showLabelBackdrop){e.font=u.string,a=e.measureText(l.label).width,e.fillStyle=d.backdropColor;const h=Wr(d.backdropPadding);e.fillRect(-a/2-h.left,-i-u.size/2-h.top,a+h.width,u.size+h.height)}Qo(e,l.label,0,-i,u,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}}_e(A0,"id","radialLinear"),_e(A0,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:mx.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),_e(A0,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),_e(A0,"descriptors",{angleLines:{_fallback:"grid"}});const bx={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ms=Object.keys(bx);function m_(t,e){return t-e}function x_(t,e){if(it(e))return null;const r=t._adapter,{parser:s,round:n,isoWeekday:i}=t._parseOpts;let a=e;return typeof s=="function"&&(a=s(a)),Bt(a)||(a=typeof s=="string"?r.parse(a,s):r.parse(a)),a===null?null:(n&&(a=n==="week"&&(Yu(i)||i===!0)?r.startOf(a,"isoWeek",i):r.startOf(a,n)),+a)}function p_(t,e,r,s){const n=ms.length;for(let i=ms.indexOf(t);i<n-1;++i){const a=bx[ms[i]],l=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((r-e)/(l*a.size))<=s)return ms[i]}return ms[n-1]}function _z(t,e,r,s,n){for(let i=ms.length-1;i>=ms.indexOf(r);i--){const a=ms[i];if(bx[a].common&&t._adapter.diff(n,s,a)>=e-1)return a}return ms[r?ms.indexOf(r):0]}function Nz(t){for(let e=ms.indexOf(t)+1,r=ms.length;e<r;++e)if(bx[ms[e]].common)return ms[e]}function g_(t,e,r){if(!r)t[e]=!0;else if(r.length){const{lo:s,hi:n}=$y(r,e),i=r[s]>=e?r[s]:r[n];t[i]=!0}}function jz(t,e,r,s){const n=t._adapter,i=+n.startOf(e[0].value,s),a=e[e.length-1].value;let l,c;for(l=i;l<=a;l=+n.add(l,1,s))c=r[l],c>=0&&(e[c].major=!0);return e}function v_(t,e,r){const s=[],n={},i=e.length;let a,l;for(a=0;a<i;++a)l=e[a],n[l]=a,s.push({value:l,major:!1});return i===0||!r?s:jz(t,s,n,r)}class pm extends cl{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){const s=e.time||(e.time={}),n=this._adapter=new qI._date(e.adapters.date);n.init(r),tu(s.displayFormats,n.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:x_(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,r=this._adapter,s=e.time.unit||"day";let{min:n,max:i,minDefined:a,maxDefined:l}=this.getUserBounds();function c(d){!a&&!isNaN(d.min)&&(n=Math.min(n,d.min)),!l&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!a||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),n=Bt(n)&&!isNaN(n)?n:+r.startOf(Date.now(),s),i=Bt(i)&&!isNaN(i)?i:+r.endOf(Date.now(),s)+1,this.min=Math.min(n,i-1),this.max=Math.max(n+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],s=e[e.length-1]),{min:r,max:s}}buildTicks(){const e=this.options,r=e.time,s=e.ticks,n=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const i=this.min,a=this.max,l=p9(n,i,a);return this._unit=r.unit||(s.autoSkip?p_(r.minUnit,this.min,this.max,this._getLabelCapacity(i)):_z(this,l.length,r.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:Nz(this._unit),this.initOffsets(n),e.reverse&&l.reverse(),v_(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,s=0,n,i;this.options.offset&&e.length&&(n=this.getDecimalForValue(e[0]),e.length===1?r=1-n:r=(this.getDecimalForValue(e[1])-n)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?s=i:s=(i-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;r=Br(r,0,a),s=Br(s,0,a),this._offsets={start:r,end:s,factor:1/(r+1+s)}}_generate(){const e=this._adapter,r=this.min,s=this.max,n=this.options,i=n.time,a=i.unit||p_(i.minUnit,r,s,this._getLabelCapacity(r)),l=Ge(n.ticks.stepSize,1),c=a==="week"?i.isoWeekday:!1,d=Yu(c)||c===!0,u={};let h=r,f,m;if(d&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,d?"day":a),e.diff(s,r,a)>1e5*l)throw new Error(r+" and "+s+" are too far apart with stepSize of "+l+" "+a);const x=n.ticks.source==="data"&&this.getDataTimestamps();for(f=h,m=0;f<s;f=+e.add(f,l,a),m++)g_(u,f,x);return(f===s||n.bounds==="ticks"||m===1)&&g_(u,f,x),Object.keys(u).sort(m_).map(p=>+p)}getLabelForValue(e){const r=this._adapter,s=this.options.time;return s.tooltipFormat?r.format(e,s.tooltipFormat):r.format(e,s.displayFormats.datetime)}format(e,r){const n=this.options.time.displayFormats,i=this._unit,a=r||n[i];return this._adapter.format(e,a)}_tickFormatFunction(e,r,s,n){const i=this.options,a=i.ticks.callback;if(a)return mt(a,[e,r,s],this);const l=i.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],h=d&&l[d],f=s[r],m=d&&h&&f&&f.major;return this._adapter.format(e,n||(m?h:u))}generateTickLabels(e){let r,s,n;for(r=0,s=e.length;r<s;++r)n=e[r],n.label=this._tickFormatFunction(n.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const r=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+s)*r.factor)}getValueForPixel(e){const r=this._offsets,s=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const r=this.options.ticks,s=this.ctx.measureText(e).width,n=Wn(this.isHorizontal()?r.maxRotation:r.minRotation),i=Math.cos(n),a=Math.sin(n),l=this._resolveTickFontOptions(0).size;return{w:s*i+l*a,h:s*a+l*i}}_getLabelCapacity(e){const r=this.options.time,s=r.displayFormats,n=s[r.unit]||s.millisecond,i=this._tickFormatFunction(e,0,v_(this,[e],this._majorUnit),n),a=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],r,s;if(e.length)return e;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(r=0,s=n.length;r<s;++r)e=e.concat(n[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let r,s;if(e.length)return e;const n=this.getLabels();for(r=0,s=n.length;r<s;++r)e.push(x_(this,n[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return jS(e.sort(m_))}}_e(pm,"id","time"),_e(pm,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function F0(t,e,r){let s=0,n=t.length-1,i,a,l,c;r?(e>=t[s].pos&&e<=t[n].pos&&({lo:s,hi:n}=po(t,"pos",e)),{pos:i,time:l}=t[s],{pos:a,time:c}=t[n]):(e>=t[s].time&&e<=t[n].time&&({lo:s,hi:n}=po(t,"time",e)),{time:i,pos:l}=t[s],{time:a,pos:c}=t[n]);const d=a-i;return d?l+(c-l)*(e-i)/d:l}class y_ extends pm{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(e);this._minPos=F0(r,this.min),this._tableRange=F0(r,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:r,max:s}=this,n=[],i=[];let a,l,c,d,u;for(a=0,l=e.length;a<l;++a)d=e[a],d>=r&&d<=s&&n.push(d);if(n.length<2)return[{time:r,pos:0},{time:s,pos:1}];for(a=0,l=n.length;a<l;++a)u=n[a+1],c=n[a-1],d=n[a],Math.round((u+c)/2)!==d&&i.push({time:d,pos:a/(l-1)});return i}_generate(){const e=this.min,r=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(r)||s.length===1)&&s.push(r),s.sort((n,i)=>n-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const r=this.getDataTimestamps(),s=this.getLabelTimestamps();return r.length&&s.length?e=this.normalize(r.concat(s)):e=r.length?r:s,e=this._cache.all=e,e}getDecimalForValue(e){return(F0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const r=this._offsets,s=this.getDecimalForPixel(e)/r.factor-r.end;return F0(this._table,s*this._tableRange+this._minPos,!0)}}_e(y_,"id","timeseries"),_e(y_,"defaults",pm.defaults);const c3="label";function b_(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Ez(t,e){const r=t.options;r&&e&&Object.assign(r,e)}function d3(t,e){t.labels=e}function u3(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:c3;const s=[];t.datasets=e.map(n=>{const i=t.datasets.find(a=>a[r]===n[r]);return!i||!n.data||s.includes(i)?{...n}:(s.push(i),Object.assign(i,n),i)})}function Sz(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c3;const r={labels:[],datasets:[]};return d3(r,t.labels),u3(r,t.datasets,e),r}function Cz(t,e){const{height:r=150,width:s=300,redraw:n=!1,datasetIdKey:i,type:a,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h,...f}=t,m=w.useRef(null),x=w.useRef(null),p=()=>{m.current&&(x.current=new vx(m.current,{type:a,data:Sz(l,i),options:c&&{...c},plugins:d}),b_(e,x.current))},g=()=>{b_(e,null),x.current&&(x.current.destroy(),x.current=null)};return w.useEffect(()=>{!n&&x.current&&c&&Ez(x.current,c)},[n,c]),w.useEffect(()=>{!n&&x.current&&d3(x.current.config.data,l.labels)},[n,l.labels]),w.useEffect(()=>{!n&&x.current&&l.datasets&&u3(x.current.config.data,l.datasets,i)},[n,l.datasets]),w.useEffect(()=>{x.current&&(n?(g(),setTimeout(p)):x.current.update(h))},[n,c,l.labels,l.datasets,h]),w.useEffect(()=>{x.current&&(g(),setTimeout(p))},[a]),w.useEffect(()=>(p(),()=>g()),[]),Ie.createElement("canvas",{ref:m,role:"img",height:r,width:s,...f},u)}const Tz=w.forwardRef(Cz);function Xy(t,e){return vx.register(e),w.forwardRef((r,s)=>Ie.createElement(Tz,{...r,ref:s,type:t}))}const w_=Xy("line",vf),Az=Xy("bar",gf),Fz=Xy("doughnut",Md);vx.register(V1,W1,wf,ga,kf,Dd,K$,sz,q$,z$);function k_({title:t,subtitle:e,type:r,data:s,height:n=300}){const{theme:i}=cx(),a=w.useRef(null),l={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:i==="dark"?"#cbd5e1":"#475569",usePointStyle:!0,padding:20}},tooltip:{backgroundColor:i==="dark"?"#1e293b":"#ffffff",titleColor:i==="dark"?"#f8fafc":"#0f172a",bodyColor:i==="dark"?"#cbd5e1":"#475569",borderColor:i==="dark"?"#475569":"#e2e8f0",borderWidth:1,cornerRadius:8,displayColors:!0}},scales:r!=="doughnut"?{x:{grid:{color:i==="dark"?"#334155":"#f1f5f9",borderColor:i==="dark"?"#475569":"#e2e8f0"},ticks:{color:i==="dark"?"#94a3b8":"#64748b"}},y:{grid:{color:i==="dark"?"#334155":"#f1f5f9",borderColor:i==="dark"?"#475569":"#e2e8f0"},ticks:{color:i==="dark"?"#94a3b8":"#64748b"}}}:void 0};w.useEffect(()=>{a.current&&a.current.update()},[i]);const c=()=>{const d={ref:a,data:s,options:l,height:n};switch(r){case"line":return o.jsx(w_,{...d});case"bar":return o.jsx(Az,{...d});case"doughnut":return o.jsx(Fz,{...d});default:return o.jsx(w_,{...d})}};return o.jsxs("div",{className:"card",children:[o.jsx("div",{className:"card-header",children:o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:t}),e&&o.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400 mt-1",children:e})]})}),o.jsx("div",{className:"card-body",children:o.jsx("div",{style:{height:`${n}px`},children:c()})})]})}function Pz(){var n,i,a,l;const{data:t,isLoading:e,error:r}=Ke({queryKey:["dashboard-stats"],queryFn:A8.getStats,refetchInterval:3e4});if(e)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx(St,{size:"lg"})});if(r)return o.jsx("div",{className:"text-center py-12",children:o.jsxs("div",{className:"text-danger-600 dark:text-danger-400 mb-4",children:[o.jsx(Lr,{className:"w-12 h-12 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium",children:"Error al cargar estadísticas"}),o.jsx("p",{className:"text-sm text-secondary-500 dark:text-secondary-400 mt-2",children:"No se pudieron cargar los datos del dashboard"})]})});const s=[{title:"Total Leads",value:(t==null?void 0:t.total_leads)||0,change:12.5,icon:Ac,color:"primary",format:"number"},{title:"Conversiones",value:(t==null?void 0:t.total_conversions)||0,change:8.2,icon:gO,color:"success",format:"number"},{title:"Tasa Conversión",value:(t==null?void 0:t.conversion_rate)||0,change:-2.1,icon:Lr,color:"warning",format:"percentage"},{title:"Usuarios Activos",value:(t==null?void 0:t.total_users)||0,change:3.4,icon:Cy,color:"primary",format:"number"},{title:"Mesas Activas",value:(t==null?void 0:t.total_desks)||0,change:5.7,icon:Xs,color:"secondary",format:"number"}];return o.jsxs("div",{className:"space-y-8 animate-fade-in",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:"Dashboard"}),o.jsx("p",{className:"text-secondary-600 dark:text-secondary-400 mt-1",children:"Resumen general de tu CRM de trading"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map((c,d)=>o.jsx(P7,{...c,className:"animate-slide-up",style:{animationDelay:`${d*100}ms`}},c.title))}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsx(k_,{title:"Leads por Estado",subtitle:"Distribución de leads por estado actual",type:"doughnut",data:{labels:((n=t==null?void 0:t.leads_by_status)==null?void 0:n.map(c=>c.status))||["Sin datos"],datasets:[{data:((i=t==null?void 0:t.leads_by_status)==null?void 0:i.map(c=>c.count))||[0],backgroundColor:["#3b82f6","#10b981","#f59e0b","#ef4444","#6b7280"]}]}}),o.jsx(k_,{title:"Leads por Mesa",subtitle:"Distribución de leads por mesa de trabajo",type:"bar",data:{labels:((a=t==null?void 0:t.leads_by_desk)==null?void 0:a.map(c=>c.desk_name))||["Sin datos"],datasets:[{label:"Leads",data:((l=t==null?void 0:t.leads_by_desk)==null?void 0:l.map(c=>c.leads_count))||[0],backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"#3b82f6",borderWidth:1}]}})]}),o.jsxs("div",{className:"card",children:[o.jsx("div",{className:"card-header",children:o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Top Usuarios por Leads"})}),o.jsx("div",{className:"card-body",children:o.jsx("div",{className:"space-y-4",children:t!=null&&t.top_users&&t.top_users.length>0?t.top_users.map((c,d)=>{var u,h;return o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-secondary-50 dark:hover:bg-secondary-800 transition-colors",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center",children:o.jsxs("span",{className:"text-sm font-medium text-primary-600 dark:text-primary-400",children:[(u=c.first_name)==null?void 0:u.charAt(0),(h=c.last_name)==null?void 0:h.charAt(0)]})}),o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm font-medium text-secondary-900 dark:text-white",children:[c.first_name," ",c.last_name]}),o.jsxs("p",{className:"text-xs text-secondary-500 dark:text-secondary-400",children:["@",c.username]})]})]}),o.jsx("div",{className:"text-right",children:o.jsxs("p",{className:"text-sm font-semibold text-secondary-900 dark:text-white",children:[c.leads_count," leads"]})})]},d)}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Ac,{className:"w-12 h-12 mx-auto text-secondary-400 mb-4"}),o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400",children:"No hay datos de usuarios disponibles"})]})})})]})]})}class Mz{constructor(){_e(this,"config",null);_e(this,"configPromise",null);_e(this,"maxRetries",3);_e(this,"retryDelay",1e3)}async getConfig(){return this.config?this.config:this.configPromise?this.configPromise:(this.configPromise=this.fetchConfigWithRetry(),this.configPromise)}async fetchConfigWithRetry(){for(let e=0;e<=this.maxRetries;e++)try{const r=await fetch("/api/config.php",{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-cache"});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const s=await r.json();if(!s.success)throw new Error(s.message||"Error en la respuesta del servidor");if(!this.validateConfig(s.data))throw new Error("Estructura de configuración inválida");return this.config=s.data,s.warning&&console.warn("ConfigManager:",s.warning),this.config}catch(r){if(console.error(`ConfigManager: Intento ${e+1} fallido:`,r),e===this.maxRetries)return console.warn("ConfigManager: Usando configuración de emergencia"),this.config=this.getEmergencyConfig(),this.config;await this.delay(this.retryDelay*(e+1))}return this.config=this.getEmergencyConfig(),this.config}validateConfig(e){try{return e&&typeof e=="object"&&e.app&&e.urls&&e.features&&e.limits&&typeof e.urls.base=="string"&&typeof e.urls.api=="string"&&e.urls.base.length>0&&e.urls.api.length>0}catch{return!1}}getEmergencyConfig(){const e=window.location.origin;return{app:{name:"IATrade CRM",version:"1.0.0",environment:"production"},urls:{base:e,api:`${e}/api`,frontend:e,login:`${e}/auth/login`,dashboard:`${e}/dashboard`},features:{trading:!0,reports:!0,notifications:!0},limits:{max_upload_size:"10MB",session_timeout:3600}}}delay(e){return new Promise(r=>setTimeout(r,e))}async getApiUrl(){return(await this.getConfig()).urls.api}async getBaseUrl(){return(await this.getConfig()).urls.base}async getLoginUrl(){return(await this.getConfig()).urls.login}async getDashboardUrl(){return(await this.getConfig()).urls.dashboard}async refreshConfig(){return this.config=null,this.configPromise=null,this.getConfig()}async isFeatureEnabled(e){return(await this.getConfig()).features[e]||!1}}const Rz=new Mz;class Dz{constructor(){this.token=localStorage.getItem("auth_token"),this.user=null,this.permissions=[],this.roles=[],this.desks=[],this.apiBaseUrl=null,this.token&&this.setAuthHeader(this.token),this.initializeConfig()}async initializeConfig(){try{this.apiBaseUrl=await Rz.getApiUrl()}catch(e){console.error("Error inicializando configuración:",e),this.apiBaseUrl=`${window.location.origin}/api`}}async getApiUrl(){return this.apiBaseUrl||await this.initializeConfig(),this.apiBaseUrl}setAuthHeader(e){ln.defaults.headers.common.Authorization=`Bearer ${e}`}removeAuthHeader(){delete ln.defaults.headers.common.Authorization}async login(e,r){var s,n;try{const i=await this.getApiUrl(),a=await ln.post(`${i}/auth/login.php`,{username:e,password:r});return a.data.success?(this.token=a.data.data.token,this.user=a.data.data.user,localStorage.setItem("auth_token",this.token),this.setAuthHeader(this.token),await this.loadUserProfile(),{success:!0,user:this.user,token:this.token}):{success:!1,message:a.data.message}}catch(i){return console.error("Error en login:",i),{success:!1,message:((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||"Error de conexión"}}}async logout(){try{const e=await this.getApiUrl();await ln.post(`${e}/auth/logout.php`)}catch(e){console.error("Error during logout:",e)}finally{this.token=null,this.user=null,this.permissions=[],this.roles=[],this.desks=[],localStorage.removeItem("auth_token"),this.removeAuthHeader()}}async loadUserProfile(){try{const e=await this.getApiUrl(),r=await ln.get(`${e}/user-permissions.php?action=user-profile`);return r.data.success?(this.user=r.data.data.user,this.permissions=r.data.data.permissions||[],this.roles=r.data.data.roles||[],this.desks=r.data.data.desks||[],!0):!1}catch(e){return console.error("Error loading user profile:",e),!1}}async hasPermission(e){try{const r=await this.getApiUrl(),s=await ln.get(`${r}/user-permissions.php?action=check-permission&permission=${e}`);return s.data.success&&s.data.data.has_permission}catch(r){return console.error("Error checking permission:",r),!1}}async hasRole(e){try{const r=await this.getApiUrl(),s=await ln.get(`${r}/user-permissions.php?action=check-role&role=${e}`);return s.data.success&&s.data.data.has_role}catch(r){return console.error("Error checking role:",r),!1}}async assignUserToDesk(e,r){try{const s=await this.getApiUrl();return(await ln.post(`${s}/user-permissions.php`,{action:"assign-user-desk",user_id:e,desk_id:r})).data.success?(await this.loadUserProfile(),!0):!1}catch(s){return console.error("Error assigning user to desk:",s),!1}}async canAccessLead(e){try{const r=await this.getApiUrl(),s=await ln.get(`${r}/user-permissions.php?action=can-access-lead&lead_id=${e}`);return s.data.success&&s.data.data.can_access}catch(r){return console.error("Error checking lead access:",r),!1}}async getLeadsFilters(){try{const e=await this.getApiUrl(),r=await ln.get(`${e}/user-permissions.php?action=leads-filters`);return r.data.success?r.data.data:{filters:{}}}catch(e){return console.error("Error obteniendo filtros de leads:",e),{filters:{}}}}hasPermission(e){const s={view_dashboard:"dashboard.view",view_leads:"leads.view","leads.view.assigned":"leads.view",create_leads:"leads.create",edit_leads:"leads.edit",delete_leads:"leads.delete",assign_leads:"leads.assign",import_leads:"leads.import",export_leads:"leads.export",view_users:"users.view",create_users:"users.create",edit_users:"users.edit",delete_users:"users.delete",view_roles:"roles.view",create_roles:"roles.create",edit_roles:"roles.edit",delete_roles:"roles.delete",manage_roles:"roles.view",view_desks:"desks.view",create_desks:"desks.create",edit_desks:"desks.edit",delete_desks:"desks.delete",manage_desks:"desks.view",view_trading:"trading.view",view_trading_accounts:"trading.view",create_trading:"trading.create",edit_trading:"trading.edit",delete_trading:"trading.delete",view_deposits_withdrawals:"transactions.view",approve_transactions:"transactions.approve",process_transactions:"transactions.process",view_reports:"reports.view",create_reports:"reports.create",manage_permissions:"system.settings",view_audit:"system.audit"}[e]||e;return!this.permissions||!Array.isArray(this.permissions)?(console.warn("Permisos no cargados o formato incorrecto:",this.permissions),!1):this.permissions.some(n=>{const i=typeof n=="string"?n:n.name;return i===e||i===s})}hasRole(e){return this.roles.some(r=>r.name===e)}hasAnyPermission(e){return e.some(r=>this.hasPermission(r))}hasAllPermissions(e){return e.every(r=>this.hasPermission(r))}isSuperAdmin(){return this.hasRole("super_admin")}isAdmin(){return this.hasRole("admin")}isManager(){return this.hasRole("manager")}hasSalesRole(){return this.hasRole("sales")}isAuthenticated(){return!!this.token&&!!this.user}getCurrentUser(){return this.user}getUserPermissions(){return this.permissions}getUserRoles(){return this.roles}getUserDesks(){return this.desks}canPerformAction(e,r=null){const n={view_leads:"leads.view",create_leads:"leads.create",edit_leads:"leads.edit",delete_leads:"leads.delete",view_users:"users.view",create_users:"users.create",edit_users:"users.edit",delete_users:"users.delete",manage_roles:"roles.view",manage_permissions:"system.settings",view_reports:"reports.view",manage_desks:"desks.view"}[e];return n?this.hasPermission(n):(console.warn(`Acción no reconocida: ${e}`),!1)}getAllowedActions(e="leads"){return({leads:["view_leads","create_leads","edit_leads","delete_leads"],users:["view_users","create_users","edit_users","delete_users"],roles:["manage_roles"],permissions:["manage_permissions"],reports:["view_reports"],desks:["manage_desks"]}[e]||[]).filter(n=>this.hasPermission(n))}canAccessRoute(e){const s={"/leads":"leads.view","/leads/create":"leads.create","/leads/edit":"leads.edit","/users":"users.view","/users/create":"users.create","/users/edit":"users.edit","/roles":"roles.view","/permissions":"system.settings","/reports":"reports.view","/desks":"desks.view","/dashboard":null}[e];return s===null?this.isAuthenticated():s===void 0?!1:this.hasPermission(s)}}const Ot=new Dz,Oz=({permission:t=null,permissions:e=[],role:r=null,roles:s=[],requireAll:n=!1,fallback:i=null,children:a})=>{const[l,c]=w.useState(!1),[d,u]=w.useState(!0);w.useEffect(()=>{h()},[t,e,r,s,n]);const h=async()=>{u(!0);try{let f=!1;if(t&&(f=Ot.hasPermission(t)),e.length>0&&(n?f=Ot.hasAllPermissions(e):f=Ot.hasAnyPermission(e)),r&&(f=f||Ot.hasRole(r)),s.length>0){const m=s.some(x=>Ot.hasRole(x));f=f||m}!t&&e.length===0&&!r&&s.length===0&&(f=Ot.isAuthenticated()),c(f)}catch(f){console.error("Error verificando permisos:",f),c(!1)}finally{u(!1)}};return d?o.jsx("div",{className:"loading",children:"Verificando permisos..."}):l?o.jsx(o.Fragment,{children:a}):i||o.jsx("div",{className:"access-denied",children:"Acceso denegado"})},h3=()=>{const[t,e]=w.useState([]),[r,s]=w.useState([]),[n,i]=w.useState(!0);w.useEffect(()=>{a()},[]);const a=async()=>{try{await Ot.loadUserProfile(),e(Ot.getUserPermissions()),s(Ot.getUserRoles())}catch(m){console.error("Error cargando permisos:",m)}finally{i(!1)}};return{permissions:t,roles:r,loading:n,hasPermission:m=>Ot.hasPermission(m),hasRole:m=>Ot.hasRole(m),hasAnyPermission:m=>Ot.hasAnyPermission(m),hasAllPermissions:m=>Ot.hasAllPermissions(m),canPerformAction:(m,x)=>Ot.canPerformAction(m,x),canAccessRoute:m=>Ot.canAccessRoute(m),isAuthenticated:Ot.isAuthenticated(),isSuperAdmin:Ot.isSuperAdmin(),isAdmin:Ot.isAdmin(),isManager:Ot.isManager(),hasSalesRole:Ot.hasSalesRole()}},Mp=({permission:t,permissions:e=[],role:r,roles:s=[],requireAll:n=!1,onClick:i,disabled:a=!1,className:l="",children:c,...d})=>{const{hasPermission:u,hasRole:h,hasAnyPermission:f,hasAllPermissions:m}=h3();return(()=>{let p=!1;if(t&&(p=u(t)),e.length>0&&(n?p=p||m(e):p=p||f(e)),r&&(p=p||h(r)),s.length>0){const g=s.some(v=>h(v));p=p||g}return p})()?o.jsx("button",{onClick:i,disabled:a,className:`permission-button ${l}`,...d,children:c}):null};function Lz({searchValues:t,onSearchChange:e,onClearSearch:r}){const[s,n]=w.useState(!1),a=(()=>Object.values(t).filter(l=>l!==""&&l!==null&&l!==void 0).length)();return o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body",children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>n(!s),children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(gn,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"}),o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-secondary-100",children:"Búsqueda Avanzada"}),a>0&&o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-200",children:[a," activas"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[a>0&&o.jsx("button",{onClick:l=>{l.stopPropagation(),r()},className:"text-sm text-secondary-500 hover:text-secondary-700 dark:text-secondary-400 dark:hover:text-secondary-200 transition-colors",children:"Limpiar búsquedas"}),s?o.jsx(zl,{className:"w-5 h-5 text-secondary-400"}):o.jsx(vi,{className:"w-5 h-5 text-secondary-400"})]})]}),o.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${s?"max-h-96 opacity-100 mt-6":"max-h-0 opacity-0"}`,children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(gn,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-secondary-400"}),o.jsx("input",{type:"text",placeholder:"Búsqueda general en todos los campos...",className:"input pl-10 pr-10",value:t.general,onChange:l=>e("general",l.target.value)}),t.general&&o.jsx("button",{onClick:()=>e("general",""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-secondary-400 hover:text-secondary-600 dark:hover:text-secondary-200 transition-colors",children:o.jsx(Wt,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Ia,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-secondary-400"}),o.jsx("input",{type:"email",placeholder:"Buscar por email...",className:"input pl-9 pr-8 text-sm",value:t.email,onChange:l=>e("email",l.target.value)}),t.email&&o.jsx("button",{onClick:()=>e("email",""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-secondary-400 hover:text-secondary-600 dark:hover:text-secondary-200 transition-colors",children:o.jsx(Wt,{className:"w-3 h-3"})})]}),o.jsxs("div",{className:"relative",children:[o.jsx(bO,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-secondary-400"}),o.jsx("input",{type:"text",placeholder:"Buscar por ID...",className:"input pl-9 pr-8 text-sm",value:t.id,onChange:l=>e("id",l.target.value)}),t.id&&o.jsx("button",{onClick:()=>e("id",""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-secondary-400 hover:text-secondary-600 dark:hover:text-secondary-200 transition-colors",children:o.jsx(Wt,{className:"w-3 h-3"})})]}),o.jsxs("div",{className:"relative",children:[o.jsx(or,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-secondary-400"}),o.jsx("input",{type:"text",placeholder:"Buscar por nombre...",className:"input pl-9 pr-8 text-sm",value:t.name,onChange:l=>e("name",l.target.value)}),t.name&&o.jsx("button",{onClick:()=>e("name",""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-secondary-400 hover:text-secondary-600 dark:hover:text-secondary-200 transition-colors",children:o.jsx(Wt,{className:"w-3 h-3"})})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Ah,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-secondary-400"}),o.jsx("input",{type:"tel",placeholder:"Buscar por teléfono...",className:"input pl-9 pr-8 text-sm",value:t.phone,onChange:l=>e("phone",l.target.value)}),t.phone&&o.jsx("button",{onClick:()=>e("phone",""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-secondary-400 hover:text-secondary-600 dark:hover:text-secondary-200 transition-colors",children:o.jsx(Wt,{className:"w-3 h-3"})})]})]}),a===0&&o.jsx("div",{className:"bg-secondary-50 dark:bg-secondary-800 rounded-lg p-4 border border-secondary-200 dark:border-secondary-700",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(gn,{className:"w-5 h-5 text-primary-600 dark:text-primary-400 mt-0.5 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-secondary-900 dark:text-secondary-100 mb-1",children:"Búsqueda Inteligente"}),o.jsx("p",{className:"text-xs text-secondary-600 dark:text-secondary-400 leading-relaxed",children:"Utiliza la búsqueda general para encontrar leads en todos los campos, o usa las búsquedas específicas para resultados más precisos. Puedes combinar múltiples criterios de búsqueda."})]})]})}),a>0&&o.jsx("div",{className:"bg-primary-50 dark:bg-primary-900/20 rounded-lg p-3 border border-primary-200 dark:border-primary-800",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(gn,{className:"w-4 h-4 text-primary-600 dark:text-primary-400"}),o.jsxs("span",{className:"text-sm font-medium text-primary-900 dark:text-primary-100",children:[a," búsqueda",a!==1?"s":""," activa",a!==1?"s":""]})]}),o.jsx("button",{onClick:r,className:"text-xs text-primary-600 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-200 font-medium transition-colors",children:"Limpiar todas"})]})})]})})]})})}function Iz({title:t,titleId:e,...r},s){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":e},r),t?w.createElement("title",{id:e},t):null,w.createElement("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z",clipRule:"evenodd"}))}const Bz=w.forwardRef(Iz),$z=Bz,kl=[{id:"status",name:"Estado del Lead",icon:sm,type:"select",options:["new","contacted","qualified","converted","lost"]},{id:"desk_id",name:"Mesa de Trabajo",icon:Xs,type:"select",options:[]},{id:"assigned_user_id",name:"Usuario Asignado",icon:or,type:"select",options:[]},{id:"country",name:"País",icon:Sy,type:"text"},{id:"source",name:"Fuente",icon:sm,type:"text"},{id:"budget",name:"Presupuesto",icon:Fs,type:"number"},{id:"created_at",name:"Fecha de Creación",icon:Bu,type:"date"},{id:"updated_at",name:"Última Actualización",icon:Bu,type:"date"}],zz={text:[{value:"contains",label:"Contiene"},{value:"equals",label:"Es igual a"},{value:"starts_with",label:"Comienza con"},{value:"ends_with",label:"Termina con"}],number:[{value:"equals",label:"Es igual a"},{value:"greater_than",label:"Mayor que"},{value:"less_than",label:"Menor que"},{value:"between",label:"Entre"}],select:[{value:"equals",label:"Es igual a"},{value:"not_equals",label:"No es igual a"},{value:"in",label:"Está en"}],date:[{value:"equals",label:"Es igual a"},{value:"after",label:"Después de"},{value:"before",label:"Antes de"},{value:"between",label:"Entre"}]},Uz=[{id:"total_leads",name:"Total de Leads",icon:Lr},{id:"conversion_rate",name:"Tasa de Conversión",icon:Lr},{id:"avg_budget",name:"Presupuesto Promedio",icon:Fs},{id:"leads_by_status",name:"Leads por Estado",icon:sm},{id:"leads_by_source",name:"Leads por Fuente",icon:Sy},{id:"leads_by_desk",name:"Leads por Mesa",icon:Xs},{id:"monthly_trend",name:"Tendencia Mensual",icon:Bu}];function Vz({isOpen:t,onClose:e,onSave:r,desksData:s,usersData:n}){const[i,a]=w.useState(1),[l,c]=w.useState({name:"",description:"",conditions:[],kpis:[],visualization:"table"}),d=4;w.useEffect(()=>{t||(a(1),c({name:"",description:"",conditions:[],kpis:[],visualization:"table"}))},[t]);const u=()=>{c(v=>({...v,conditions:[...v.conditions,{field:"",operator:"",value:"",logic:v.conditions.length>0?"AND":void 0}]}))},h=(v,b)=>{c(y=>({...y,conditions:y.conditions.map((k,N)=>N===v?{...k,...b}:k)}))},f=v=>{c(b=>({...b,conditions:b.conditions.filter((y,k)=>k!==v)}))},m=v=>{c(b=>({...b,kpis:b.kpis.includes(v)?b.kpis.filter(y=>y!==v):[...b.kpis,v]}))},x=()=>{switch(i){case 1:return l.name.trim()!=="";case 2:return l.conditions.length>0&&l.conditions.every(v=>v.field&&v.operator&&v.value);case 3:return l.kpis.length>0;case 4:return!0;default:return!1}},p=()=>{r(l),e()},g=v=>{var y,k,N,E,j;const b=kl.find(_=>_.id===v);if(!b)return[];switch(v){case"desk_id":return((k=(y=s==null?void 0:s.data)==null?void 0:y.desks)==null?void 0:k.map(_=>({value:_.id,label:_.name})))||[];case"assigned_user_id":return((E=(N=n==null?void 0:n.data)==null?void 0:N.users)==null?void 0:E.map(_=>({value:_.id,label:_.name})))||[];case"status":return[{value:"new",label:"Nuevo"},{value:"contacted",label:"Contactado"},{value:"qualified",label:"Calificado"},{value:"converted",label:"Convertido"},{value:"lost",label:"Perdido"}];default:return((j=b.options)==null?void 0:j.map(_=>({value:_,label:_})))||[]}};return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-secondary-200 dark:border-secondary-700",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900 rounded-lg flex items-center justify-center",children:o.jsx(zu,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-secondary-900 dark:text-white",children:"Asistente de Filtros Inteligentes"}),o.jsxs("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:["Paso ",i," de ",d]})]})]}),o.jsx("button",{onClick:e,className:"p-2 text-secondary-400 hover:text-secondary-600 dark:hover:text-secondary-200 transition-colors",children:o.jsx(Wt,{className:"w-6 h-6"})})]}),o.jsxs("div",{className:"px-6 py-4 bg-secondary-50 dark:bg-secondary-900",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-sm font-medium text-secondary-700 dark:text-secondary-300",children:"Progreso"}),o.jsxs("span",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:[Math.round(i/d*100),"%"]})]}),o.jsx("div",{className:"w-full bg-secondary-200 dark:bg-secondary-700 rounded-full h-2",children:o.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:`${i/d*100}%`}})})]}),o.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[i===1&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx(Tc,{className:"w-16 h-16 text-primary-600 dark:text-primary-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-2xl font-bold text-secondary-900 dark:text-white mb-2",children:"Información del Filtro"}),o.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"Comencemos definiendo el nombre y descripción de tu filtro personalizado"})]}),o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Nombre del Filtro *"}),o.jsx("input",{type:"text",className:"input w-full",placeholder:"Ej: Leads Calificados Mesa Premium",value:l.name,onChange:v=>c(b=>({...b,name:v.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Descripción (Opcional)"}),o.jsx("textarea",{className:"input w-full h-24 resize-none",placeholder:"Describe qué tipo de leads mostrará este filtro...",value:l.description,onChange:v=>c(b=>({...b,description:v.target.value}))})]})]})]}),i===2&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx(Tc,{className:"w-16 h-16 text-primary-600 dark:text-primary-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-2xl font-bold text-secondary-900 dark:text-white mb-2",children:"Condiciones de Filtrado"}),o.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"Define las reglas que determinarán qué leads se mostrarán"})]}),o.jsxs("div",{className:"space-y-4",children:[l.conditions.map((v,b)=>{var y,k,N,E,j;return o.jsxs("div",{className:"bg-secondary-50 dark:bg-secondary-900 rounded-lg p-4 border border-secondary-200 dark:border-secondary-700",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[b>0&&o.jsxs("select",{className:"input-sm",value:v.logic||"AND",onChange:_=>h(b,{logic:_.target.value}),children:[o.jsx("option",{value:"AND",children:"Y"}),o.jsx("option",{value:"OR",children:"O"})]}),o.jsxs("span",{className:"text-sm font-medium text-secondary-700 dark:text-secondary-300",children:["Condición ",b+1]})]}),o.jsx("button",{onClick:()=>f(b),className:"text-red-500 hover:text-red-700 transition-colors",children:o.jsx(Wt,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Campo"}),o.jsxs("select",{className:"input w-full",value:v.field,onChange:_=>h(b,{field:_.target.value,operator:"",value:""}),children:[o.jsx("option",{value:"",children:"Seleccionar campo"}),kl.map(_=>o.jsx("option",{value:_.id,children:_.name},_.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Operador"}),o.jsxs("select",{className:"input w-full",value:v.operator,onChange:_=>h(b,{operator:_.target.value}),disabled:!v.field,children:[o.jsx("option",{value:"",children:"Seleccionar operador"}),v.field&&((k=zz[(y=kl.find(_=>_.id===v.field))==null?void 0:y.type])==null?void 0:k.map(_=>o.jsx("option",{value:_.value,children:_.label},_.value)))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:"Valor"}),v.field&&((N=kl.find(_=>_.id===v.field))==null?void 0:N.type)==="select"?o.jsxs("select",{className:"input w-full",value:v.value,onChange:_=>h(b,{value:_.target.value}),children:[o.jsx("option",{value:"",children:"Seleccionar valor"}),g(v.field).map(_=>o.jsx("option",{value:_.value,children:_.label},_.value))]}):o.jsx("input",{type:((E=kl.find(_=>_.id===v.field))==null?void 0:E.type)==="number"?"number":((j=kl.find(_=>_.id===v.field))==null?void 0:j.type)==="date"?"date":"text",className:"input w-full",placeholder:"Ingresa el valor",value:v.value,onChange:_=>h(b,{value:_.target.value})})]})]})]},b)}),o.jsx("button",{onClick:u,className:"w-full btn-outline-primary py-3 border-2 border-dashed",children:"+ Agregar Condición"})]})]}),i===3&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx(Lr,{className:"w-16 h-16 text-primary-600 dark:text-primary-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-2xl font-bold text-secondary-900 dark:text-white mb-2",children:"Métricas y KPIs"}),o.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"Selecciona las métricas que quieres visualizar con este filtro"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Uz.map(v=>o.jsxs("div",{className:`relative p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 ${l.kpis.includes(v.id)?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-secondary-200 dark:border-secondary-700 hover:border-primary-300 dark:hover:border-primary-600"}`,onClick:()=>m(v.id),children:[l.kpis.includes(v.id)&&o.jsx("div",{className:"absolute -top-2 -right-2",children:o.jsx(pr,{className:"w-6 h-6 text-primary-600 bg-white dark:bg-secondary-800 rounded-full"})}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(v.icon,{className:"w-8 h-8 text-primary-600 dark:text-primary-400"}),o.jsx("div",{children:o.jsx("h4",{className:"font-medium text-secondary-900 dark:text-white",children:v.name})})]})]},v.id))})]}),i===4&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx(pr,{className:"w-16 h-16 text-green-600 mx-auto mb-4"}),o.jsx("h3",{className:"text-2xl font-bold text-secondary-900 dark:text-white mb-2",children:"¡Filtro Listo!"}),o.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"Revisa la configuración de tu filtro antes de guardarlo"})]}),o.jsx("div",{className:"max-w-2xl mx-auto space-y-6",children:o.jsxs("div",{className:"bg-secondary-50 dark:bg-secondary-900 rounded-lg p-6",children:[o.jsx("h4",{className:"font-semibold text-secondary-900 dark:text-white mb-4",children:"Resumen del Filtro"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-secondary-700 dark:text-secondary-300",children:"Nombre:"}),o.jsx("p",{className:"text-secondary-900 dark:text-white",children:l.name})]}),l.description&&o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-secondary-700 dark:text-secondary-300",children:"Descripción:"}),o.jsx("p",{className:"text-secondary-900 dark:text-white",children:l.description})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-secondary-700 dark:text-secondary-300",children:"Condiciones:"}),o.jsxs("p",{className:"text-secondary-900 dark:text-white",children:[l.conditions.length," condiciones configuradas"]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-secondary-700 dark:text-secondary-300",children:"KPIs:"}),o.jsxs("p",{className:"text-secondary-900 dark:text-white",children:[l.kpis.length," métricas seleccionadas"]})]})]})]})})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-secondary-200 dark:border-secondary-700",children:[o.jsxs("button",{onClick:()=>a(Math.max(1,i-1)),disabled:i===1,className:"btn-ghost flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(dx,{className:"w-4 h-4"}),o.jsx("span",{children:"Anterior"})]}),o.jsx("div",{className:"flex items-center space-x-2",children:Array.from({length:d},(v,b)=>o.jsx("div",{className:`w-2 h-2 rounded-full ${b+1<=i?"bg-primary-600":"bg-secondary-300 dark:bg-secondary-600"}`},b))}),i<d?o.jsxs("button",{onClick:()=>a(i+1),disabled:!x(),className:"btn-primary flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx("span",{children:"Siguiente"}),o.jsx(ux,{className:"w-4 h-4"})]}):o.jsxs("button",{onClick:p,className:"btn-primary flex items-center space-x-2",children:[o.jsx(pr,{className:"w-4 h-4"}),o.jsx("span",{children:"Guardar Filtro"})]})]})]})}):null}function Wz({currentFilters:t,onFilterChange:e,onLoadFilter:r,desksData:s,activeFiltersCount:n}){var E,j;const[i,a]=w.useState(!1),[l,c]=w.useState([]),[d,u]=w.useState(!1),[h,f]=w.useState(""),[m,x]=w.useState(!1);w.useEffect(()=>{const _=localStorage.getItem("leadFilters");if(_)try{c(JSON.parse(_))}catch(S){console.error("Error loading saved filters:",S)}},[]);const p=_=>{localStorage.setItem("leadFilters",JSON.stringify(_)),c(_)},g=()=>{if(!h.trim())return;const _={id:Date.now().toString(),name:h.trim(),filters:{...t},createdAt:new Date().toISOString()},S=[...l,_];p(S),f(""),u(!1)},v=_=>{const S=l.filter(C=>C.id!==_);p(S)},b=_=>{const S=l.map(C=>({...C,isDefault:C.id===_}));p(S)},y=_=>{r(_.filters)},k=_=>{const S={id:Date.now().toString(),name:_.name,filters:{..._.conditions.reduce((F,P)=>(F[P.field]=P.value,F),{}),_wizardConfig:_},createdAt:new Date().toISOString()},C=[...l,S];p(C),r(S.filters)},N=()=>Object.entries(t).filter(([_,S])=>_!=="search"&&S!==""&&S!==null&&S!==void 0).length;return o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"card-body",children:[o.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>a(!i),children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Tc,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"}),o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-secondary-100",children:"Filtros y Vistas"}),n>0&&o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-200",children:[n," activos"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("button",{onClick:_=>{_.stopPropagation(),x(!0)},className:"flex items-center space-x-2 text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 transition-colors font-medium",children:[o.jsx(zu,{className:"w-4 h-4"}),o.jsx("span",{children:"Crear Filtro"})]}),i?o.jsx(zl,{className:"w-5 h-5 text-secondary-400"}):o.jsx(vi,{className:"w-5 h-5 text-secondary-400"})]})]}),i&&o.jsxs("div",{className:"mt-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-3",children:"Filtros Básicos"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("select",{className:"input",value:t.status||"",onChange:_=>e("status",_.target.value),children:[o.jsx("option",{value:"",children:"Todos los estados"}),o.jsx("option",{value:"new",children:"Nuevo"}),o.jsx("option",{value:"contacted",children:"Contactado"}),o.jsx("option",{value:"qualified",children:"Calificado"}),o.jsx("option",{value:"converted",children:"Convertido"}),o.jsx("option",{value:"lost",children:"Perdido"})]}),o.jsxs("select",{className:"input",value:t.desk_id||"",onChange:_=>e("desk_id",_.target.value),children:[o.jsx("option",{value:"",children:"Todas las mesas"}),(j=(E=s==null?void 0:s.data)==null?void 0:E.desks)==null?void 0:j.map(_=>o.jsx("option",{value:_.id,children:_.name},_.id))]}),o.jsxs("button",{onClick:()=>u(!0),className:"btn-primary flex items-center justify-center",disabled:N()===0,children:[o.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Guardar Vista"]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-3",children:"Vistas Guardadas"}),l.length===0?o.jsxs("div",{className:"text-center py-8 text-secondary-500 dark:text-secondary-400",children:[o.jsx(fD,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"No hay vistas guardadas"}),o.jsx("p",{className:"text-sm",children:"Configura filtros y guarda tu primera vista"})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(_=>o.jsxs("div",{className:"relative group bg-white dark:bg-secondary-800 border border-secondary-200 dark:border-secondary-700 rounded-lg p-4 hover:shadow-md transition-all duration-200 hover:border-primary-300 dark:hover:border-primary-600",children:[_.isDefault&&o.jsx("div",{className:"absolute -top-2 -right-2",children:o.jsx($z,{className:"w-5 h-5 text-yellow-500"})}),o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsx("h5",{className:"font-medium text-secondary-900 dark:text-secondary-100 truncate pr-2",children:_.name}),o.jsxs("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>b(_.id),className:"p-1 text-secondary-400 hover:text-yellow-500 transition-colors",title:"Marcar como predeterminado",children:o.jsx(QO,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>v(_.id),className:"p-1 text-secondary-400 hover:text-red-500 transition-colors",title:"Eliminar vista",children:o.jsx(Go,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"space-y-1 mb-4",children:[Object.entries(_.filters).map(([S,C])=>{if(!C||S==="search"||S==="_wizardConfig")return null;const F=typeof C=="object"?JSON.stringify(C):String(C);return o.jsxs("div",{className:"flex items-center text-xs text-secondary-600 dark:text-secondary-400",children:[o.jsxs("span",{className:"capitalize font-medium mr-2",children:[S.replace("_"," "),":"]}),o.jsx("span",{className:"truncate",children:F})]},S)}),Object.keys(_.filters).filter(S=>_.filters[S]&&S!=="search").length===0&&o.jsx("span",{className:"text-xs text-secondary-500 dark:text-secondary-400",children:"Sin filtros específicos"})]}),o.jsx("div",{className:"text-xs text-secondary-500 dark:text-secondary-400 mb-3",children:new Date(_.createdAt).toLocaleDateString()}),o.jsx("button",{onClick:()=>y(_),className:"w-full btn-outline-primary text-sm py-2",children:"Aplicar Vista"})]},_.id))})]})]})]}),d&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-lg p-6 w-full max-w-md mx-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-secondary-100",children:"Guardar Vista"}),o.jsx("button",{onClick:()=>u(!1),className:"text-secondary-400 hover:text-secondary-600 dark:hover:text-secondary-200",children:o.jsx(Wt,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Nombre de la vista"}),o.jsx("input",{type:"text",className:"input w-full",placeholder:"Ej: Leads calificados mesa 1",value:h,onChange:_=>f(_.target.value),onKeyPress:_=>_.key==="Enter"&&g()})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{onClick:()=>u(!1),className:"btn-ghost",children:"Cancelar"}),o.jsx("button",{onClick:g,className:"btn-primary",disabled:!h.trim(),children:"Guardar"})]})]})]})}),o.jsx(Vz,{isOpen:m,onClose:()=>x(!1),onSave:k,desksData:s})]})}const _l=[{id:1,title:"Información Personal",icon:or},{id:2,title:"Información Adicional",icon:Xs},{id:3,title:"Asignación y Seguimiento",icon:Fs},{id:4,title:"Confirmación",icon:Ir}],Hz=["Website","Facebook","Google Ads","Referral","Cold Call","Email Campaign","Trade Show","Other"];function Yz({isOpen:t,onClose:e,onSuccess:r}){var y,k,N,E,j;const[s,n]=w.useState(1),[i,a]=w.useState({first_name:"",last_name:"",email:"",phone:"",company:"",position:"",country:"",city:"",desk_id:void 0,assigned_to:void 0,source:"Website",status:"new",interest_level:"medium",budget:void 0,notes:""}),{data:l,isLoading:c}=Ke({queryKey:["desks-for-lead"],queryFn:()=>Kn.getDesks(),enabled:t,staleTime:5*60*1e3}),{data:d,isLoading:u}=Ke({queryKey:["users-for-lead"],queryFn:()=>Zn.getUsers({status:"active"}),enabled:t,staleTime:5*60*1e3}),h=ot({mutationFn:_=>qn.createLead(_),onSuccess:()=>{me.success("Lead creado exitosamente"),r(),f()},onError:_=>{var S,C;me.error(((C=(S=_.response)==null?void 0:S.data)==null?void 0:C.message)||"Error al crear el lead")}}),f=()=>{n(1),a({first_name:"",last_name:"",email:"",phone:"",company:"",position:"",country:"",city:"",desk_id:void 0,assigned_to:void 0,source:"Website",status:"new",interest_level:"medium",budget:void 0,notes:""}),e()},m=()=>{p()&&n(_=>Math.min(_+1,_l.length))},x=()=>{n(_=>Math.max(_-1,1))},p=()=>{switch(s){case 1:return i.first_name.trim()?i.last_name.trim()?i.email.trim()?i.phone.trim()?!0:(me.error("El teléfono es requerido"),!1):(me.error("El email es requerido"),!1):(me.error("El apellido es requerido"),!1):(me.error("El nombre es requerido"),!1);case 2:return!0;case 3:return!0;default:return!0}},g=()=>{if(p()){const _={first_name:i.first_name,last_name:i.last_name,email:i.email,phone:i.phone,company:i.company||null,position:i.position||null,country:i.country||null,city:i.city||null,desk_id:i.desk_id||null,assigned_to:i.assigned_to||null,source:i.source,status:i.status,interest_level:i.interest_level,budget:i.budget||null,notes:i.notes||null};h.mutate(_)}},v=()=>{var _;return(_=l==null?void 0:l.data)==null?void 0:_.find(S=>S.id===i.desk_id)},b=()=>{var _;return(_=d==null?void 0:d.data)==null?void 0:_.find(S=>S.id===i.assigned_to)};return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-lg w-full max-w-4xl mx-4 max-h-[90vh] overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-secondary-200 dark:border-secondary-700",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-secondary-900 dark:text-white",children:"Asistente para Crear Lead"}),o.jsxs("p",{className:"text-sm text-secondary-600 dark:text-secondary-400 mt-1",children:["Paso ",s," de ",_l.length,": ",_l[s-1].title]})]}),o.jsx("button",{onClick:f,className:"text-secondary-400 hover:text-secondary-600 dark:hover:text-secondary-300",children:o.jsx(Wt,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"px-6 py-4 border-b border-secondary-200 dark:border-secondary-700",children:o.jsx("div",{className:"flex items-center justify-between",children:_l.map((_,S)=>{const C=_.icon,F=s===_.id,P=s>_.id;return o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:`
                    flex items-center justify-center w-10 h-10 rounded-full border-2 transition-colors
                    ${F?"border-primary-600 bg-primary-600 text-white":P?"border-success-600 bg-success-600 text-white":"border-secondary-300 text-secondary-400"}
                  `,children:P?o.jsx(Ir,{className:"w-5 h-5"}):o.jsx(C,{className:"w-5 h-5"})}),o.jsx("div",{className:"ml-3 hidden sm:block",children:o.jsx("p",{className:`text-sm font-medium ${F?"text-primary-600":P?"text-success-600":"text-secondary-500"}`,children:_.title})}),S<_l.length-1&&o.jsx("div",{className:`
                      w-12 h-0.5 mx-4 transition-colors
                      ${P?"bg-success-600":"bg-secondary-300"}
                    `})]},_.id)})})}),o.jsxs("div",{className:"p-6 overflow-y-auto max-h-96",children:[s===1&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx(or,{className:"w-12 h-12 text-primary-600 mx-auto mb-2"}),o.jsx("h3",{className:"text-lg font-medium text-secondary-900 dark:text-white",children:"Información Personal"}),o.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Ingresa los datos básicos del lead"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Nombre *"}),o.jsx("input",{type:"text",value:i.first_name,onChange:_=>a({...i,first_name:_.target.value}),className:"input",placeholder:"ej: Juan"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Apellido *"}),o.jsx("input",{type:"text",value:i.last_name,onChange:_=>a({...i,last_name:_.target.value}),className:"input",placeholder:"ej: Pérez"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Email *"}),o.jsx("input",{type:"email",value:i.email,onChange:_=>a({...i,email:_.target.value}),className:"input",placeholder:"ej: juan.perez@email.com"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Teléfono *"}),o.jsx("input",{type:"tel",value:i.phone,onChange:_=>a({...i,phone:_.target.value}),className:"input",placeholder:"ej: +1234567890"})]})]})]}),s===2&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx(Xs,{className:"w-12 h-12 text-primary-600 mx-auto mb-2"}),o.jsx("h3",{className:"text-lg font-medium text-secondary-900 dark:text-white",children:"Información Adicional"}),o.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Datos adicionales del lead (opcional)"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Empresa"}),o.jsx("input",{type:"text",value:i.company,onChange:_=>a({...i,company:_.target.value}),className:"input",placeholder:"ej: Empresa ABC"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Posición"}),o.jsx("input",{type:"text",value:i.position,onChange:_=>a({...i,position:_.target.value}),className:"input",placeholder:"ej: CEO, Manager"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"País"}),o.jsx("input",{type:"text",value:i.country,onChange:_=>a({...i,country:_.target.value}),className:"input",placeholder:"ej: España"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Ciudad"}),o.jsx("input",{type:"text",value:i.city,onChange:_=>a({...i,city:_.target.value}),className:"input",placeholder:"ej: Madrid"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Presupuesto Estimado"}),o.jsx("input",{type:"number",value:i.budget||"",onChange:_=>a({...i,budget:parseFloat(_.target.value)||void 0}),className:"input",placeholder:"ej: 10000",min:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Fuente"}),o.jsx("select",{value:i.source,onChange:_=>a({...i,source:_.target.value}),className:"input",children:Hz.map(_=>o.jsx("option",{value:_,children:_},_))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Notas"}),o.jsx("textarea",{value:i.notes,onChange:_=>a({...i,notes:_.target.value}),className:"input min-h-[80px]",placeholder:"Información adicional sobre el lead..."})]})]}),s===3&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx(Fs,{className:"w-12 h-12 text-primary-600 mx-auto mb-2"}),o.jsx("h3",{className:"text-lg font-medium text-secondary-900 dark:text-white",children:"Asignación y Seguimiento"}),o.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Asigna el lead a una mesa y usuario"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Mesa"}),c?o.jsxs("div",{className:"input flex items-center justify-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"}),o.jsx("span",{className:"ml-2 text-sm text-secondary-500",children:"Cargando mesas..."})]}):o.jsxs("select",{value:i.desk_id||"",onChange:_=>a({...i,desk_id:_.target.value?parseInt(_.target.value):void 0}),className:"input",children:[o.jsx("option",{value:"",children:"Sin mesa asignada"}),(y=l==null?void 0:l.data)==null?void 0:y.map(_=>o.jsx("option",{value:_.id,children:_.name},_.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Asignar a Usuario"}),u?o.jsxs("div",{className:"input flex items-center justify-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"}),o.jsx("span",{className:"ml-2 text-sm text-secondary-500",children:"Cargando usuarios..."})]}):o.jsxs("select",{value:i.assigned_to||"",onChange:_=>a({...i,assigned_to:_.target.value?parseInt(_.target.value):void 0}),className:"input",children:[o.jsx("option",{value:"",children:"Sin asignar"}),(k=d==null?void 0:d.data)==null?void 0:k.map(_=>o.jsxs("option",{value:_.id,children:[_.first_name," ",_.last_name," (",_.username,")"]},_.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Estado"}),o.jsxs("select",{value:i.status,onChange:_=>a({...i,status:_.target.value}),className:"input",children:[o.jsx("option",{value:"new",children:"Nuevo"}),o.jsx("option",{value:"contacted",children:"Contactado"}),o.jsx("option",{value:"qualified",children:"Calificado"}),o.jsx("option",{value:"proposal",children:"Propuesta"}),o.jsx("option",{value:"negotiation",children:"Negociación"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Nivel de Interés"}),o.jsxs("select",{value:i.interest_level,onChange:_=>a({...i,interest_level:_.target.value}),className:"input",children:[o.jsx("option",{value:"low",children:"Bajo"}),o.jsx("option",{value:"medium",children:"Medio"}),o.jsx("option",{value:"high",children:"Alto"}),o.jsx("option",{value:"very_high",children:"Muy Alto"})]})]})]})]}),s===4&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx(Ir,{className:"w-12 h-12 text-success-600 mx-auto mb-2"}),o.jsx("h3",{className:"text-lg font-medium text-secondary-900 dark:text-white",children:"Confirmación"}),o.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Revisa la información antes de crear el lead"})]}),o.jsxs("div",{className:"bg-secondary-50 dark:bg-secondary-900 rounded-lg p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-secondary-900 dark:text-white mb-3",children:"Información Personal"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Nombre:"}),o.jsxs("span",{className:"ml-2 font-medium",children:[i.first_name," ",i.last_name]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Email:"}),o.jsx("span",{className:"ml-2 font-medium",children:i.email})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Teléfono:"}),o.jsx("span",{className:"ml-2 font-medium",children:i.phone})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Empresa:"}),o.jsx("span",{className:"ml-2 font-medium",children:i.company||"No especificada"})]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-secondary-900 dark:text-white mb-3",children:"Asignaciones"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Mesa:"}),o.jsx("span",{className:"ml-2 font-medium",children:((N=v())==null?void 0:N.name)||"No asignada"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Usuario:"}),o.jsx("span",{className:"ml-2 font-medium",children:b()?`${(E=b())==null?void 0:E.first_name} ${(j=b())==null?void 0:j.last_name}`:"No asignado"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Estado:"}),o.jsx("span",{className:"ml-2 font-medium capitalize",children:i.status})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Fuente:"}),o.jsx("span",{className:"ml-2 font-medium",children:i.source})]})]})]})]})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-secondary-200 dark:border-secondary-700",children:[o.jsxs("button",{onClick:x,disabled:s===1,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(La,{className:"w-4 h-4 mr-2"}),"Anterior"]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:f,className:"btn-secondary",children:"Cancelar"}),s<_l.length?o.jsxs("button",{onClick:m,className:"btn-primary",children:["Siguiente",o.jsx(ji,{className:"w-4 h-4 ml-2"})]}):o.jsx("button",{onClick:g,disabled:h.isPending,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:h.isPending?"Creando...":"Crear Lead"})]})]})]})}):null}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var f3=1252,qz=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Qy={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Zy=function(t){qz.indexOf(t)!=-1&&(f3=Qy[0]=t)};function Gz(){Zy(1252)}var vn=function(t){Zy(t)};function m3(){vn(1200),Gz()}function __(t){for(var e=[],r=0,s=t.length;r<s;++r)e[r]=t.charCodeAt(r);return e}function Kz(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function x3(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var Ld=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?Kz(t.slice(2)):e==254&&r==255?x3(t.slice(2)):e==65279?t.slice(1):t},P0=function(e){return String.fromCharCode(e)},N_=function(e){return String.fromCharCode(e)},Ji,ya="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function j_(t){for(var e="",r=0,s=0,n=0,i=0,a=0,l=0,c=0,d=0;d<t.length;)r=t.charCodeAt(d++),i=r>>2,s=t.charCodeAt(d++),a=(r&3)<<4|s>>4,n=t.charCodeAt(d++),l=(s&15)<<2|n>>6,c=n&63,isNaN(s)?l=c=64:isNaN(n)&&(c=64),e+=ya.charAt(i)+ya.charAt(a)+ya.charAt(l)+ya.charAt(c);return e}function Ps(t){var e="",r=0,s=0,n=0,i=0,a=0,l=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<t.length;)i=ya.indexOf(t.charAt(d++)),a=ya.indexOf(t.charAt(d++)),r=i<<2|a>>4,e+=String.fromCharCode(r),l=ya.indexOf(t.charAt(d++)),s=(a&15)<<4|l>>2,l!==64&&(e+=String.fromCharCode(s)),c=ya.indexOf(t.charAt(d++)),n=(l&3)<<6|c,c!==64&&(e+=String.fromCharCode(n));return e}var tt=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),dl=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function $a(t){return tt?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function E_(t){return tt?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var pn=function(e){return tt?dl(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function ul(t){if(Array.isArray(t))return t.map(function(s){return String.fromCharCode(s)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function Jy(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return Jy(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var ea=tt?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:dl(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var s=new Uint8Array(r),n=0;for(e=0,r=0;e<t.length;r+=n,++e)if(n=t[e].length,t[e]instanceof Uint8Array)s.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";s.set(new Uint8Array(t[e]),r)}return s}return[].concat.apply([],t.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function Xz(t){for(var e=[],r=0,s=t.length+250,n=$a(t.length+255),i=0;i<t.length;++i){var a=t.charCodeAt(i);if(a<128)n[r++]=a;else if(a<2048)n[r++]=192|a>>6&31,n[r++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var l=t.charCodeAt(++i)&1023;n[r++]=240|a>>8&7,n[r++]=128|a>>2&63,n[r++]=128|l>>6&15|(a&3)<<4,n[r++]=128|l&63}else n[r++]=224|a>>12&15,n[r++]=128|a>>6&63,n[r++]=128|a&63;r>s&&(e.push(n.slice(0,r)),r=0,n=$a(65535),s=65530)}return e.push(n.slice(0,r)),ea(e)}var rs=/\u0000/g,Id=/[\u0001-\u0006]/g;function tc(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function yn(t,e){var r=""+t;return r.length>=e?r:It("0",e-r.length)+r}function eb(t,e){var r=""+t;return r.length>=e?r:It(" ",e-r.length)+r}function gm(t,e){var r=""+t;return r.length>=e?r:r+It(" ",e-r.length)}function Qz(t,e){var r=""+Math.round(t);return r.length>=e?r:It("0",e-r.length)+r}function Zz(t,e){var r=""+t;return r.length>=e?r:It("0",e-r.length)+r}var S_=Math.pow(2,32);function Nl(t,e){if(t>S_||t<-S_)return Qz(t,e);var r=Math.round(t);return Zz(r,e)}function vm(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var C_=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Rp=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Jz(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',t}var He={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},T_={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},eU={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function ym(t,e,r){for(var s=t<0?-1:1,n=t*s,i=0,a=1,l=0,c=1,d=0,u=0,h=Math.floor(n);d<e&&(h=Math.floor(n),l=h*a+i,u=h*d+c,!(n-h<5e-8));)n=1/(n-h),i=a,a=l,c=d,d=u;if(u>e&&(d>e?(u=c,l=i):(u=d,l=a)),!r)return[0,s*l,u];var f=Math.floor(s*l/u);return[f,s*l-f*u,u]}function go(t,e,r){if(t>2958465||t<0)return null;var s=t|0,n=Math.floor(86400*(t-s)),i=0,a=[],l={D:s,T:n,u:86400*(t-s)-n,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),e&&e.date1904&&(s+=1462),l.u>.9999&&(l.u=0,++n==86400&&(l.T=n=0,++s,++l.D)),s===60)a=r?[1317,10,29]:[1900,2,29],i=3;else if(s===0)a=r?[1317,8,29]:[1900,1,0],i=6;else{s>60&&--s;var c=new Date(1900,0,1);c.setDate(c.getDate()+s-1),a=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),s<60&&(i=(i+6)%7),r&&(i=aU(c,a))}return l.y=a[0],l.m=a[1],l.d=a[2],l.S=n%60,n=Math.floor(n/60),l.M=n%60,n=Math.floor(n/60),l.H=n,l.q=i,l}var p3=new Date(1899,11,31,0,0,0),tU=p3.getTime(),rU=new Date(1900,2,1,0,0,0);function g3(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=rU&&(r+=24*60*60*1e3),(r-(tU+(t.getTimezoneOffset()-p3.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function tb(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function sU(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function nU(t){var e=t<0?12:11,r=tb(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function iU(t){var e=tb(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function Qu(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=nU(t):e===10?r=t.toFixed(10).substr(0,12):r=iU(t),tb(sU(r.toUpperCase()))}function Zo(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):Qu(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Js(14,g3(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function aU(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function oU(t,e,r,s){var n="",i=0,a=0,l=r.y,c,d=0;switch(t){case 98:l=r.y+543;case 121:switch(e.length){case 1:case 2:c=l%100,d=2;break;default:c=l%1e4,d=4;break}break;case 109:switch(e.length){case 1:case 2:c=r.m,d=e.length;break;case 3:return Rp[r.m-1][1];case 5:return Rp[r.m-1][0];default:return Rp[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=r.d,d=e.length;break;case 3:return C_[r.q][0];default:return C_[r.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(r.H+11)%12,d=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=r.H,d=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=r.M,d=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?yn(r.S,e.length):(s>=2?a=s===3?1e3:100:a=s===1?10:1,i=Math.round(a*(r.S+r.u)),i>=60*a&&(i=0),e==="s"?i===0?"0":""+i/a:(n=yn(i,2+s),e==="ss"?n.substr(0,2):"."+n.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}d=e.length===3?1:2;break;case 101:c=l,d=1;break}var u=d>0?yn(c,d):"";return u}function ba(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,s=t.substr(0,r);r!=t.length;r+=e)s+=(s.length>0?",":"")+t.substr(r,e);return s}var v3=/%/g;function lU(t,e,r){var s=e.replace(v3,""),n=e.length-s.length;return Ei(t,s,r*Math.pow(10,2*n))+It("%",n)}function cU(t,e,r){for(var s=e.length-1;e.charCodeAt(s-1)===44;)--s;return Ei(t,e.substr(0,s),r/Math.pow(10,3*(e.length-s)))}function y3(t,e){var r,s=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+y3(t,-e);var n=t.indexOf(".");n===-1&&(n=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%n;if(i<0&&(i+=n),r=(e/Math.pow(10,i)).toPrecision(s+1+(n+i)%n),r.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,n)+"."+r.substr(2+n),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(n+i)%n)+"."+u.substr(i)+"E"})}else r=e.toExponential(s);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var b3=/# (\?+)( ?)\/( ?)(\d+)/;function dU(t,e,r){var s=parseInt(t[4],10),n=Math.round(e*s),i=Math.floor(n/s),a=n-i*s,l=s;return r+(i===0?"":""+i)+" "+(a===0?It(" ",t[1].length+1+t[4].length):eb(a,t[1].length)+t[2]+"/"+t[3]+yn(l,t[4].length))}function uU(t,e,r){return r+(e===0?"":""+e)+It(" ",t[1].length+2+t[4].length)}var w3=/^#*0*\.([0#]+)/,k3=/\).*[0#]/,_3=/\(###\) ###\\?-####/;function Zr(t){for(var e="",r,s=0;s!=t.length;++s)switch(r=t.charCodeAt(s)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function A_(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function F_(t,e){var r=t-Math.floor(t),s=Math.pow(10,e);return e<(""+Math.round(r*s)).length?0:Math.round(r*s)}function hU(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function fU(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Is(t,e,r){if(t.charCodeAt(0)===40&&!e.match(k3)){var s=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Is("n",s,r):"("+Is("n",s,-r)+")"}if(e.charCodeAt(e.length-1)===44)return cU(t,e,r);if(e.indexOf("%")!==-1)return lU(t,e,r);if(e.indexOf("E")!==-1)return y3(e,r);if(e.charCodeAt(0)===36)return"$"+Is(t,e.substr(e.charAt(1)==" "?2:1),r);var n,i,a,l,c=Math.abs(r),d=r<0?"-":"";if(e.match(/^00+$/))return d+Nl(c,e.length);if(e.match(/^[#?]+$/))return n=Nl(r,0),n==="0"&&(n=""),n.length>e.length?n:Zr(e.substr(0,e.length-n.length))+n;if(i=e.match(b3))return dU(i,c,d);if(e.match(/^#+0+$/))return d+Nl(c,e.length-e.indexOf("0"));if(i=e.match(w3))return n=A_(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Zr(i[1])).replace(/\.$/,"."+Zr(i[1])).replace(/\.(\d*)$/,function(x,p){return"."+p+It("0",Zr(i[1]).length-p.length)}),e.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return d+A_(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return d+ba(Nl(c,0));if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Is(t,e,-r):ba(""+(Math.floor(r)+hU(r,i[1].length)))+"."+yn(F_(r,i[1].length),i[1].length);if(i=e.match(/^#,#*,#0/))return Is(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return n=tc(Is(t,e.replace(/[\\-]/g,""),r)),a=0,tc(tc(e.replace(/\\/g,"")).replace(/[0#]/g,function(x){return a<n.length?n.charAt(a++):x==="0"?"0":""}));if(e.match(_3))return n=Is(t,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var u="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),l=ym(c,Math.pow(10,a)-1,!1),n=""+d,u=Ei("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),n+=u+i[2]+"/"+i[3],u=gm(l[2],a),u.length<i[4].length&&(u=Zr(i[4].substr(i[4].length-u.length))+u),n+=u,n;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),l=ym(c,Math.pow(10,a)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?eb(l[1],a)+i[2]+"/"+i[3]+gm(l[2],a):It(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return n=Nl(r,0),e.length<=n.length?n:Zr(e.substr(0,e.length-n.length))+n;if(i=e.match(/^([#0?]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=n.indexOf(".");var h=e.indexOf(".")-a,f=e.length-n.length-h;return Zr(e.substr(0,h)+n+e.substr(e.length-f))}if(i=e.match(/^00,000\.([#0]*0)$/))return a=F_(r,i[1].length),r<0?"-"+Is(t,e,-r):ba(fU(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?yn(0,3-x.length):"")+x})+"."+yn(a,i[1].length);switch(e){case"###,##0.00":return Is(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=ba(Nl(c,0));return m!=="0"?d+m:"";case"###,###.00":return Is(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Is(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function mU(t,e,r){for(var s=e.length-1;e.charCodeAt(s-1)===44;)--s;return Ei(t,e.substr(0,s),r/Math.pow(10,3*(e.length-s)))}function xU(t,e,r){var s=e.replace(v3,""),n=e.length-s.length;return Ei(t,s,r*Math.pow(10,2*n))+It("%",n)}function N3(t,e){var r,s=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+N3(t,-e);var n=t.indexOf(".");n===-1&&(n=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%n;if(i<0&&(i+=n),r=(e/Math.pow(10,i)).toPrecision(s+1+(n+i)%n),!r.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(n+i)%n)+"."+u.substr(i)+"E"})}else r=e.toExponential(s);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Rn(t,e,r){if(t.charCodeAt(0)===40&&!e.match(k3)){var s=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Rn("n",s,r):"("+Rn("n",s,-r)+")"}if(e.charCodeAt(e.length-1)===44)return mU(t,e,r);if(e.indexOf("%")!==-1)return xU(t,e,r);if(e.indexOf("E")!==-1)return N3(e,r);if(e.charCodeAt(0)===36)return"$"+Rn(t,e.substr(e.charAt(1)==" "?2:1),r);var n,i,a,l,c=Math.abs(r),d=r<0?"-":"";if(e.match(/^00+$/))return d+yn(c,e.length);if(e.match(/^[#?]+$/))return n=""+r,r===0&&(n=""),n.length>e.length?n:Zr(e.substr(0,e.length-n.length))+n;if(i=e.match(b3))return uU(i,c,d);if(e.match(/^#+0+$/))return d+yn(c,e.length-e.indexOf("0"));if(i=e.match(w3))return n=(""+r).replace(/^([^\.]+)$/,"$1."+Zr(i[1])).replace(/\.$/,"."+Zr(i[1])),n=n.replace(/\.(\d*)$/,function(x,p){return"."+p+It("0",Zr(i[1]).length-p.length)}),e.indexOf("0.")!==-1?n:n.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return d+ba(""+c);if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Rn(t,e,-r):ba(""+r)+"."+It("0",i[1].length);if(i=e.match(/^#,#*,#0/))return Rn(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return n=tc(Rn(t,e.replace(/[\\-]/g,""),r)),a=0,tc(tc(e.replace(/\\/g,"")).replace(/[0#]/g,function(x){return a<n.length?n.charAt(a++):x==="0"?"0":""}));if(e.match(_3))return n=Rn(t,"##########",r),"("+n.substr(0,3)+") "+n.substr(3,3)+"-"+n.substr(6);var u="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),l=ym(c,Math.pow(10,a)-1,!1),n=""+d,u=Ei("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),n+=u+i[2]+"/"+i[3],u=gm(l[2],a),u.length<i[4].length&&(u=Zr(i[4].substr(i[4].length-u.length))+u),n+=u,n;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),l=ym(c,Math.pow(10,a)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?eb(l[1],a)+i[2]+"/"+i[3]+gm(l[2],a):It(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return n=""+r,e.length<=n.length?n:Zr(e.substr(0,e.length-n.length))+n;if(i=e.match(/^([#0]+)\.([#0]+)$/)){n=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=n.indexOf(".");var h=e.indexOf(".")-a,f=e.length-n.length-h;return Zr(e.substr(0,h)+n+e.substr(e.length-f))}if(i=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Rn(t,e,-r):ba(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?yn(0,3-x.length):"")+x})+"."+yn(0,i[1].length);switch(e){case"###,###":case"##,###":case"#,###":var m=ba(""+c);return m!=="0"?d+m:"";default:if(e.match(/\.[0#?]*$/))return Rn(t,e.slice(0,e.lastIndexOf(".")),r)+Zr(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Ei(t,e,r){return(r|0)===r?Rn(t,e,r):Is(t,e,r)}function pU(t){for(var e=[],r=!1,s=0,n=0;s<t.length;++s)switch(t.charCodeAt(s)){case 34:r=!r;break;case 95:case 42:case 92:++s;break;case 59:e[e.length]=t.substr(n,s-n),n=s+1}if(e[e.length]=t.substr(n),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var j3=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function qc(t){for(var e=0,r="",s="";e<t.length;)switch(r=t.charAt(e)){case"G":vm(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="上午/下午")return!0;++e;break;case"[":for(s=r;t.charAt(e++)!=="]"&&e<t.length;)s+=t.charAt(e);if(s.match(j3))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function gU(t,e,r,s){for(var n=[],i="",a=0,l="",c="t",d,u,h,f="H";a<t.length;)switch(l=t.charAt(a)){case"G":if(!vm(t,a))throw new Error("unrecognized character "+l+" in "+t);n[n.length]={t:"G",v:"General"},a+=7;break;case'"':for(i="";(h=t.charCodeAt(++a))!==34&&a<t.length;)i+=String.fromCharCode(h);n[n.length]={t:"t",v:i},++a;break;case"\\":var m=t.charAt(++a),x=m==="("||m===")"?m:"t";n[n.length]={t:x,v:m},++a;break;case"_":n[n.length]={t:"t",v:" "},a+=2;break;case"@":n[n.length]={t:"T",v:e},++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2"){if(d==null&&(d=go(e,r,t.charAt(a+1)==="2"),d==null))return"";n[n.length]={t:"X",v:t.substr(a,2)},c=l,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||d==null&&(d=go(e,r),d==null))return"";for(i=l;++a<t.length&&t.charAt(a).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=f),n[n.length]={t:l,v:i},c=l;break;case"A":case"a":case"上":var p={t:l,v:l};if(d==null&&(d=go(e,r)),t.substr(a,3).toUpperCase()==="A/P"?(d!=null&&(p.v=d.H>=12?"P":"A"),p.t="T",f="h",a+=3):t.substr(a,5).toUpperCase()==="AM/PM"?(d!=null&&(p.v=d.H>=12?"PM":"AM"),p.t="T",a+=5,f="h"):t.substr(a,5).toUpperCase()==="上午/下午"?(d!=null&&(p.v=d.H>=12?"下午":"上午"),p.t="T",a+=5,f="h"):(p.t="t",++a),d==null&&p.t==="T")return"";n[n.length]=p,c=l;break;case"[":for(i=l;t.charAt(a++)!=="]"&&a<t.length;)i+=t.charAt(a);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(j3)){if(d==null&&(d=go(e,r),d==null))return"";n[n.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",qc(t)||(n[n.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=l;++a<t.length&&(l=t.charAt(a))==="0";)i+=l;n[n.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++a<t.length&&"0#?.,E+-%".indexOf(l=t.charAt(a))>-1;)i+=l;n[n.length]={t:"n",v:i};break;case"?":for(i=l;t.charAt(++a)===l;)i+=l;n[n.length]={t:l,v:i},c=l;break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":n[n.length]={t:s===1?"t":l,v:l},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;)i+=t.charAt(a);n[n.length]={t:"D",v:i};break;case" ":n[n.length]={t:l,v:l},++a;break;case"$":n[n.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+t);n[n.length]={t:"t",v:l},++a;break}var g=0,v=0,b;for(a=n.length-1,c="t";a>=0;--a)switch(n[a].t){case"h":case"H":n[a].t=f,c="h",g<1&&(g=1);break;case"s":(b=n[a].v.match(/\.0+$/))&&(v=Math.max(v,b[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=n[a].t;break;case"m":c==="s"&&(n[a].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&n[a].v.match(/[Hh]/)&&(g=1),g<2&&n[a].v.match(/[Mm]/)&&(g=2),g<3&&n[a].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var y="",k;for(a=0;a<n.length;++a)switch(n[a].t){case"t":case"T":case" ":case"D":break;case"X":n[a].v="",n[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":n[a].v=oU(n[a].t.charCodeAt(0),n[a].v,d,v),n[a].t="t";break;case"n":case"?":for(k=a+1;n[k]!=null&&((l=n[k].t)==="?"||l==="D"||(l===" "||l==="t")&&n[k+1]!=null&&(n[k+1].t==="?"||n[k+1].t==="t"&&n[k+1].v==="/")||n[a].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(n[k].v==="/"||n[k].v===" "&&n[k+1]!=null&&n[k+1].t=="?"));)n[a].v+=n[k].v,n[k]={v:"",t:";"},++k;y+=n[a].v,a=k-1;break;case"G":n[a].t="t",n[a].v=Zo(e,r);break}var N="",E,j;if(y.length>0){y.charCodeAt(0)==40?(E=e<0&&y.charCodeAt(0)===45?-e:e,j=Ei("n",y,E)):(E=e<0&&s>1?-e:e,j=Ei("n",y,E),E<0&&n[0]&&n[0].t=="t"&&(j=j.substr(1),n[0].v="-"+n[0].v)),k=j.length-1;var _=n.length;for(a=0;a<n.length;++a)if(n[a]!=null&&n[a].t!="t"&&n[a].v.indexOf(".")>-1){_=a;break}var S=n.length;if(_===n.length&&j.indexOf("E")===-1){for(a=n.length-1;a>=0;--a)n[a]==null||"n?".indexOf(n[a].t)===-1||(k>=n[a].v.length-1?(k-=n[a].v.length,n[a].v=j.substr(k+1,n[a].v.length)):k<0?n[a].v="":(n[a].v=j.substr(0,k+1),k=-1),n[a].t="t",S=a);k>=0&&S<n.length&&(n[S].v=j.substr(0,k+1)+n[S].v)}else if(_!==n.length&&j.indexOf("E")===-1){for(k=j.indexOf(".")-1,a=_;a>=0;--a)if(!(n[a]==null||"n?".indexOf(n[a].t)===-1)){for(u=n[a].v.indexOf(".")>-1&&a===_?n[a].v.indexOf(".")-1:n[a].v.length-1,N=n[a].v.substr(u+1);u>=0;--u)k>=0&&(n[a].v.charAt(u)==="0"||n[a].v.charAt(u)==="#")&&(N=j.charAt(k--)+N);n[a].v=N,n[a].t="t",S=a}for(k>=0&&S<n.length&&(n[S].v=j.substr(0,k+1)+n[S].v),k=j.indexOf(".")+1,a=_;a<n.length;++a)if(!(n[a]==null||"n?(".indexOf(n[a].t)===-1&&a!==_)){for(u=n[a].v.indexOf(".")>-1&&a===_?n[a].v.indexOf(".")+1:0,N=n[a].v.substr(0,u);u<n[a].v.length;++u)k<j.length&&(N+=j.charAt(k++));n[a].v=N,n[a].t="t",S=a}}}for(a=0;a<n.length;++a)n[a]!=null&&"n?".indexOf(n[a].t)>-1&&(E=s>1&&e<0&&a>0&&n[a-1].v==="-"?-e:e,n[a].v=Ei(n[a].t,n[a].v,E),n[a].t="t");var C="";for(a=0;a!==n.length;++a)n[a]!=null&&(C+=n[a].v);return C}var P_=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function M_(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function vU(t,e){var r=pU(t),s=r.length,n=r[s-1].indexOf("@");if(s<4&&n>-1&&--s,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||n>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=n>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=n>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=n>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[s,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var a=r[0].match(P_),l=r[1].match(P_);return M_(e,a)?[s,r[0]]:M_(e,l)?[s,r[1]]:[s,r[a!=null&&l!=null?2:1]]}return[s,i]}function Js(t,e,r){r==null&&(r={});var s="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?s=r.dateNF:s=t;break;case"number":t==14&&r.dateNF?s=r.dateNF:s=(r.table!=null?r.table:He)[t],s==null&&(s=r.table&&r.table[T_[t]]||He[T_[t]]),s==null&&(s=eU[t]||"General");break}if(vm(s,0))return Zo(e,r);e instanceof Date&&(e=g3(e,r.date1904));var n=vU(s,e);if(vm(n[1]))return Zo(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return gU(n[1],e,r,n[0])}function Do(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(He[r]==null){e<0&&(e=r);continue}if(He[r]==t){e=r;break}}e<0&&(e=391)}return He[e]=t,e}function E3(){He=Jz()}var yU={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},S3=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function bU(t){var e=typeof t=="number"?He[t]:t;return e=e.replace(S3,"(\\d+)"),new RegExp("^"+e+"$")}function wU(t,e,r){var s=-1,n=-1,i=-1,a=-1,l=-1,c=-1;(e.match(S3)||[]).forEach(function(h,f){var m=parseInt(r[f+1],10);switch(h.toLowerCase().charAt(0)){case"y":s=m;break;case"d":i=m;break;case"h":a=m;break;case"s":c=m;break;case"m":a>=0?l=m:n=m;break}}),c>=0&&l==-1&&n>=0&&(l=n,n=-1);var d=(""+(s>=0?s:new Date().getFullYear())).slice(-4)+"-"+("00"+(n>=1?n:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var u=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return a==-1&&l==-1&&c==-1?d:s==-1&&n==-1&&i==-1?u:d+"T"+u}var kU=function(){var t={};t.version="1.2.0";function e(){for(var j=0,_=new Array(256),S=0;S!=256;++S)j=S,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,_[S]=j;return typeof Int32Array<"u"?new Int32Array(_):_}var r=e();function s(j){var _=0,S=0,C=0,F=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(C=0;C!=256;++C)F[C]=j[C];for(C=0;C!=256;++C)for(S=j[C],_=256+C;_<4096;_+=256)S=F[_]=S>>>8^j[S&255];var P=[];for(C=1;C!=16;++C)P[C-1]=typeof Int32Array<"u"?F.subarray(C*256,C*256+256):F.slice(C*256,C*256+256);return P}var n=s(r),i=n[0],a=n[1],l=n[2],c=n[3],d=n[4],u=n[5],h=n[6],f=n[7],m=n[8],x=n[9],p=n[10],g=n[11],v=n[12],b=n[13],y=n[14];function k(j,_){for(var S=_^-1,C=0,F=j.length;C<F;)S=S>>>8^r[(S^j.charCodeAt(C++))&255];return~S}function N(j,_){for(var S=_^-1,C=j.length-15,F=0;F<C;)S=y[j[F++]^S&255]^b[j[F++]^S>>8&255]^v[j[F++]^S>>16&255]^g[j[F++]^S>>>24]^p[j[F++]]^x[j[F++]]^m[j[F++]]^f[j[F++]]^h[j[F++]]^u[j[F++]]^d[j[F++]]^c[j[F++]]^l[j[F++]]^a[j[F++]]^i[j[F++]]^r[j[F++]];for(C+=15;F<C;)S=S>>>8^r[(S^j[F++])&255];return~S}function E(j,_){for(var S=_^-1,C=0,F=j.length,P=0,B=0;C<F;)P=j.charCodeAt(C++),P<128?S=S>>>8^r[(S^P)&255]:P<2048?(S=S>>>8^r[(S^(192|P>>6&31))&255],S=S>>>8^r[(S^(128|P&63))&255]):P>=55296&&P<57344?(P=(P&1023)+64,B=j.charCodeAt(C++)&1023,S=S>>>8^r[(S^(240|P>>8&7))&255],S=S>>>8^r[(S^(128|P>>2&63))&255],S=S>>>8^r[(S^(128|B>>6&15|(P&3)<<4))&255],S=S>>>8^r[(S^(128|B&63))&255]):(S=S>>>8^r[(S^(224|P>>12&15))&255],S=S>>>8^r[(S^(128|P>>6&63))&255],S=S>>>8^r[(S^(128|P&63))&255]);return~S}return t.table=r,t.bstr=k,t.buf=N,t.str=E,t}(),rt=function(){var e={};e.version="1.2.1";function r(T,L){for(var R=T.split("/"),O=L.split("/"),z=0,U=0,ne=Math.min(R.length,O.length);z<ne;++z){if(U=R[z].length-O[z].length)return U;if(R[z]!=O[z])return R[z]<O[z]?-1:1}return R.length-O.length}function s(T){if(T.charAt(T.length-1)=="/")return T.slice(0,-1).indexOf("/")===-1?T:s(T.slice(0,-1));var L=T.lastIndexOf("/");return L===-1?T:T.slice(0,L+1)}function n(T){if(T.charAt(T.length-1)=="/")return n(T.slice(0,-1));var L=T.lastIndexOf("/");return L===-1?T:T.slice(L+1)}function i(T,L){typeof L=="string"&&(L=new Date(L));var R=L.getHours();R=R<<6|L.getMinutes(),R=R<<5|L.getSeconds()>>>1,T.write_shift(2,R);var O=L.getFullYear()-1980;O=O<<4|L.getMonth()+1,O=O<<5|L.getDate(),T.write_shift(2,O)}function a(T){var L=T.read_shift(2)&65535,R=T.read_shift(2)&65535,O=new Date,z=R&31;R>>>=5;var U=R&15;R>>>=4,O.setMilliseconds(0),O.setFullYear(R+1980),O.setMonth(U-1),O.setDate(z);var ne=L&31;L>>>=5;var fe=L&63;return L>>>=6,O.setHours(L),O.setMinutes(fe),O.setSeconds(ne<<1),O}function l(T){wr(T,0);for(var L={},R=0;T.l<=T.length-4;){var O=T.read_shift(2),z=T.read_shift(2),U=T.l+z,ne={};switch(O){case 21589:R=T.read_shift(1),R&1&&(ne.mtime=T.read_shift(4)),z>5&&(R&2&&(ne.atime=T.read_shift(4)),R&4&&(ne.ctime=T.read_shift(4))),ne.mtime&&(ne.mt=new Date(ne.mtime*1e3));break}T.l=U,L[O]=ne}return L}var c;function d(){return c||(c={})}function u(T,L){if(T[0]==80&&T[1]==75)return $b(T,L);if((T[0]|32)==109&&(T[1]|32)==105)return YT(T,L);if(T.length<512)throw new Error("CFB file size "+T.length+" < 512");var R=3,O=512,z=0,U=0,ne=0,fe=0,se=0,ae=[],oe=T.slice(0,512);wr(oe,0);var ve=h(oe);switch(R=ve[0],R){case 3:O=512;break;case 4:O=4096;break;case 0:if(ve[1]==0)return $b(T,L);default:throw new Error("Major Version: Expected 3 or 4 saw "+R)}O!==512&&(oe=T.slice(0,O),wr(oe,28));var Se=T.slice(0,O);f(oe,R);var Fe=oe.read_shift(4,"i");if(R===3&&Fe!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Fe);oe.l+=4,ne=oe.read_shift(4,"i"),oe.l+=4,oe.chk("00100000","Mini Stream Cutoff Size: "),fe=oe.read_shift(4,"i"),z=oe.read_shift(4,"i"),se=oe.read_shift(4,"i"),U=oe.read_shift(4,"i");for(var ke=-1,Ae=0;Ae<109&&(ke=oe.read_shift(4,"i"),!(ke<0));++Ae)ae[Ae]=ke;var We=m(T,O);g(se,U,We,O,ae);var Tt=b(We,ne,ae,O);Tt[ne].name="!Directory",z>0&&fe!==B&&(Tt[fe].name="!MiniFAT"),Tt[ae[0]].name="!FAT",Tt.fat_addrs=ae,Tt.ssz=O;var At={},Sr=[],Jc=[],ed=[];y(ne,Tt,We,Sr,z,At,Jc,fe),x(Jc,ed,Sr),Sr.shift();var td={FileIndex:Jc,FullPaths:ed};return L&&L.raw&&(td.raw={header:Se,sectors:We}),td}function h(T){if(T[T.l]==80&&T[T.l+1]==75)return[0,0];T.chk(Q,"Header Signature: "),T.l+=16;var L=T.read_shift(2,"u");return[T.read_shift(2,"u"),L]}function f(T,L){var R=9;switch(T.l+=2,R=T.read_shift(2)){case 9:if(L!=3)throw new Error("Sector Shift: Expected 9 saw "+R);break;case 12:if(L!=4)throw new Error("Sector Shift: Expected 12 saw "+R);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+R)}T.chk("0600","Mini Sector Shift: "),T.chk("000000000000","Reserved: ")}function m(T,L){for(var R=Math.ceil(T.length/L)-1,O=[],z=1;z<R;++z)O[z-1]=T.slice(z*L,(z+1)*L);return O[R-1]=T.slice(R*L),O}function x(T,L,R){for(var O=0,z=0,U=0,ne=0,fe=0,se=R.length,ae=[],oe=[];O<se;++O)ae[O]=oe[O]=O,L[O]=R[O];for(;fe<oe.length;++fe)O=oe[fe],z=T[O].L,U=T[O].R,ne=T[O].C,ae[O]===O&&(z!==-1&&ae[z]!==z&&(ae[O]=ae[z]),U!==-1&&ae[U]!==U&&(ae[O]=ae[U])),ne!==-1&&(ae[ne]=O),z!==-1&&O!=ae[O]&&(ae[z]=ae[O],oe.lastIndexOf(z)<fe&&oe.push(z)),U!==-1&&O!=ae[O]&&(ae[U]=ae[O],oe.lastIndexOf(U)<fe&&oe.push(U));for(O=1;O<se;++O)ae[O]===O&&(U!==-1&&ae[U]!==U?ae[O]=ae[U]:z!==-1&&ae[z]!==z&&(ae[O]=ae[z]));for(O=1;O<se;++O)if(T[O].type!==0){if(fe=O,fe!=ae[fe])do fe=ae[fe],L[O]=L[fe]+"/"+L[O];while(fe!==0&&ae[fe]!==-1&&fe!=ae[fe]);ae[O]=-1}for(L[0]+="/",O=1;O<se;++O)T[O].type!==2&&(L[O]+="/")}function p(T,L,R){for(var O=T.start,z=T.size,U=[],ne=O;R&&z>0&&ne>=0;)U.push(L.slice(ne*P,ne*P+P)),z-=P,ne=oo(R,ne*4);return U.length===0?rr(0):ea(U).slice(0,T.size)}function g(T,L,R,O,z){var U=B;if(T===B){if(L!==0)throw new Error("DIFAT chain shorter than expected")}else if(T!==-1){var ne=R[T],fe=(O>>>2)-1;if(!ne)return;for(var se=0;se<fe&&(U=oo(ne,se*4))!==B;++se)z.push(U);g(oo(ne,O-4),L-1,R,O,z)}}function v(T,L,R,O,z){var U=[],ne=[];z||(z=[]);var fe=O-1,se=0,ae=0;for(se=L;se>=0;){z[se]=!0,U[U.length]=se,ne.push(T[se]);var oe=R[Math.floor(se*4/O)];if(ae=se*4&fe,O<4+ae)throw new Error("FAT boundary crossed: "+se+" 4 "+O);if(!T[oe])break;se=oo(T[oe],ae)}return{nodes:U,data:V_([ne])}}function b(T,L,R,O){var z=T.length,U=[],ne=[],fe=[],se=[],ae=O-1,oe=0,ve=0,Se=0,Fe=0;for(oe=0;oe<z;++oe)if(fe=[],Se=oe+L,Se>=z&&(Se-=z),!ne[Se]){se=[];var ke=[];for(ve=Se;ve>=0;){ke[ve]=!0,ne[ve]=!0,fe[fe.length]=ve,se.push(T[ve]);var Ae=R[Math.floor(ve*4/O)];if(Fe=ve*4&ae,O<4+Fe)throw new Error("FAT boundary crossed: "+ve+" 4 "+O);if(!T[Ae]||(ve=oo(T[Ae],Fe),ke[ve]))break}U[Se]={nodes:fe,data:V_([se])}}return U}function y(T,L,R,O,z,U,ne,fe){for(var se=0,ae=O.length?2:0,oe=L[T].data,ve=0,Se=0,Fe;ve<oe.length;ve+=128){var ke=oe.slice(ve,ve+128);wr(ke,64),Se=ke.read_shift(2),Fe=ab(ke,0,Se-ae),O.push(Fe);var Ae={name:Fe,type:ke.read_shift(1),color:ke.read_shift(1),L:ke.read_shift(4,"i"),R:ke.read_shift(4,"i"),C:ke.read_shift(4,"i"),clsid:ke.read_shift(16),state:ke.read_shift(4,"i"),start:0,size:0},We=ke.read_shift(2)+ke.read_shift(2)+ke.read_shift(2)+ke.read_shift(2);We!==0&&(Ae.ct=k(ke,ke.l-8));var Tt=ke.read_shift(2)+ke.read_shift(2)+ke.read_shift(2)+ke.read_shift(2);Tt!==0&&(Ae.mt=k(ke,ke.l-8)),Ae.start=ke.read_shift(4,"i"),Ae.size=ke.read_shift(4,"i"),Ae.size<0&&Ae.start<0&&(Ae.size=Ae.type=0,Ae.start=B,Ae.name=""),Ae.type===5?(se=Ae.start,z>0&&se!==B&&(L[se].name="!StreamData")):Ae.size>=4096?(Ae.storage="fat",L[Ae.start]===void 0&&(L[Ae.start]=v(R,Ae.start,L.fat_addrs,L.ssz)),L[Ae.start].name=Ae.name,Ae.content=L[Ae.start].data.slice(0,Ae.size)):(Ae.storage="minifat",Ae.size<0?Ae.size=0:se!==B&&Ae.start!==B&&L[se]&&(Ae.content=p(Ae,L[se].data,(L[fe]||{}).data))),Ae.content&&wr(Ae.content,0),U[Fe]=Ae,ne.push(Ae)}}function k(T,L){return new Date((Ns(T,L+4)/1e7*Math.pow(2,32)+Ns(T,L)/1e7-11644473600)*1e3)}function N(T,L){return d(),u(c.readFileSync(T),L)}function E(T,L){var R=L&&L.type;switch(R||tt&&Buffer.isBuffer(T)&&(R="buffer"),R||"base64"){case"file":return N(T,L);case"base64":return u(pn(Ps(T)),L);case"binary":return u(pn(T),L)}return u(T,L)}function j(T,L){var R=L||{},O=R.root||"Root Entry";if(T.FullPaths||(T.FullPaths=[]),T.FileIndex||(T.FileIndex=[]),T.FullPaths.length!==T.FileIndex.length)throw new Error("inconsistent CFB structure");T.FullPaths.length===0&&(T.FullPaths[0]=O+"/",T.FileIndex[0]={name:O,type:5}),R.CLSID&&(T.FileIndex[0].clsid=R.CLSID),_(T)}function _(T){var L="Sh33tJ5";if(!rt.find(T,"/"+L)){var R=rr(4);R[0]=55,R[1]=R[3]=50,R[2]=54,T.FileIndex.push({name:L,type:2,content:R,size:4,L:69,R:69,C:69}),T.FullPaths.push(T.FullPaths[0]+L),S(T)}}function S(T,L){j(T);for(var R=!1,O=!1,z=T.FullPaths.length-1;z>=0;--z){var U=T.FileIndex[z];switch(U.type){case 0:O?R=!0:(T.FileIndex.pop(),T.FullPaths.pop());break;case 1:case 2:case 5:O=!0,isNaN(U.R*U.L*U.C)&&(R=!0),U.R>-1&&U.L>-1&&U.R==U.L&&(R=!0);break;default:R=!0;break}}if(!(!R&&!L)){var ne=new Date(1987,1,19),fe=0,se=Object.create?Object.create(null):{},ae=[];for(z=0;z<T.FullPaths.length;++z)se[T.FullPaths[z]]=!0,T.FileIndex[z].type!==0&&ae.push([T.FullPaths[z],T.FileIndex[z]]);for(z=0;z<ae.length;++z){var oe=s(ae[z][0]);O=se[oe],O||(ae.push([oe,{name:n(oe).replace("/",""),type:1,clsid:I,ct:ne,mt:ne,content:null}]),se[oe]=!0)}for(ae.sort(function(Fe,ke){return r(Fe[0],ke[0])}),T.FullPaths=[],T.FileIndex=[],z=0;z<ae.length;++z)T.FullPaths[z]=ae[z][0],T.FileIndex[z]=ae[z][1];for(z=0;z<ae.length;++z){var ve=T.FileIndex[z],Se=T.FullPaths[z];if(ve.name=n(Se).replace("/",""),ve.L=ve.R=ve.C=-(ve.color=1),ve.size=ve.content?ve.content.length:0,ve.start=0,ve.clsid=ve.clsid||I,z===0)ve.C=ae.length>1?1:-1,ve.size=0,ve.type=5;else if(Se.slice(-1)=="/"){for(fe=z+1;fe<ae.length&&s(T.FullPaths[fe])!=Se;++fe);for(ve.C=fe>=ae.length?-1:fe,fe=z+1;fe<ae.length&&s(T.FullPaths[fe])!=s(Se);++fe);ve.R=fe>=ae.length?-1:fe,ve.type=1}else s(T.FullPaths[z+1]||"")==s(Se)&&(ve.R=z+1),ve.type=2}}}function C(T,L){var R=L||{};if(R.fileType=="mad")return qT(T,R);switch(S(T),R.fileType){case"zip":return $T(T,R)}var O=function(Fe){for(var ke=0,Ae=0,We=0;We<Fe.FileIndex.length;++We){var Tt=Fe.FileIndex[We];if(Tt.content){var At=Tt.content.length;At>0&&(At<4096?ke+=At+63>>6:Ae+=At+511>>9)}}for(var Sr=Fe.FullPaths.length+3>>2,Jc=ke+7>>3,ed=ke+127>>7,td=Jc+Ae+Sr+ed,Xa=td+127>>7,Lx=Xa<=109?0:Math.ceil((Xa-109)/127);td+Xa+Lx+127>>7>Xa;)Lx=++Xa<=109?0:Math.ceil((Xa-109)/127);var ti=[1,Lx,Xa,ed,Sr,Ae,ke,0];return Fe.FileIndex[0].size=ke<<6,ti[7]=(Fe.FileIndex[0].start=ti[0]+ti[1]+ti[2]+ti[3]+ti[4]+ti[5])+(ti[6]+7>>3),ti}(T),z=rr(O[7]<<9),U=0,ne=0;{for(U=0;U<8;++U)z.write_shift(1,D[U]);for(U=0;U<8;++U)z.write_shift(2,0);for(z.write_shift(2,62),z.write_shift(2,3),z.write_shift(2,65534),z.write_shift(2,9),z.write_shift(2,6),U=0;U<3;++U)z.write_shift(2,0);for(z.write_shift(4,0),z.write_shift(4,O[2]),z.write_shift(4,O[0]+O[1]+O[2]+O[3]-1),z.write_shift(4,0),z.write_shift(4,4096),z.write_shift(4,O[3]?O[0]+O[1]+O[2]-1:B),z.write_shift(4,O[3]),z.write_shift(-4,O[1]?O[0]-1:B),z.write_shift(4,O[1]),U=0;U<109;++U)z.write_shift(-4,U<O[2]?O[1]+U:-1)}if(O[1])for(ne=0;ne<O[1];++ne){for(;U<236+ne*127;++U)z.write_shift(-4,U<O[2]?O[1]+U:-1);z.write_shift(-4,ne===O[1]-1?B:ne+1)}var fe=function(Fe){for(ne+=Fe;U<ne-1;++U)z.write_shift(-4,U+1);Fe&&(++U,z.write_shift(-4,B))};for(ne=U=0,ne+=O[1];U<ne;++U)z.write_shift(-4,te.DIFSECT);for(ne+=O[2];U<ne;++U)z.write_shift(-4,te.FATSECT);fe(O[3]),fe(O[4]);for(var se=0,ae=0,oe=T.FileIndex[0];se<T.FileIndex.length;++se)oe=T.FileIndex[se],oe.content&&(ae=oe.content.length,!(ae<4096)&&(oe.start=ne,fe(ae+511>>9)));for(fe(O[6]+7>>3);z.l&511;)z.write_shift(-4,te.ENDOFCHAIN);for(ne=U=0,se=0;se<T.FileIndex.length;++se)oe=T.FileIndex[se],oe.content&&(ae=oe.content.length,!(!ae||ae>=4096)&&(oe.start=ne,fe(ae+63>>6)));for(;z.l&511;)z.write_shift(-4,te.ENDOFCHAIN);for(U=0;U<O[4]<<2;++U){var ve=T.FullPaths[U];if(!ve||ve.length===0){for(se=0;se<17;++se)z.write_shift(4,0);for(se=0;se<3;++se)z.write_shift(4,-1);for(se=0;se<12;++se)z.write_shift(4,0);continue}oe=T.FileIndex[U],U===0&&(oe.start=oe.size?oe.start-1:B);var Se=U===0&&R.root||oe.name;if(ae=2*(Se.length+1),z.write_shift(64,Se,"utf16le"),z.write_shift(2,ae),z.write_shift(1,oe.type),z.write_shift(1,oe.color),z.write_shift(-4,oe.L),z.write_shift(-4,oe.R),z.write_shift(-4,oe.C),oe.clsid)z.write_shift(16,oe.clsid,"hex");else for(se=0;se<4;++se)z.write_shift(4,0);z.write_shift(4,oe.state||0),z.write_shift(4,0),z.write_shift(4,0),z.write_shift(4,0),z.write_shift(4,0),z.write_shift(4,oe.start),z.write_shift(4,oe.size),z.write_shift(4,0)}for(U=1;U<T.FileIndex.length;++U)if(oe=T.FileIndex[U],oe.size>=4096)if(z.l=oe.start+1<<9,tt&&Buffer.isBuffer(oe.content))oe.content.copy(z,z.l,0,oe.size),z.l+=oe.size+511&-512;else{for(se=0;se<oe.size;++se)z.write_shift(1,oe.content[se]);for(;se&511;++se)z.write_shift(1,0)}for(U=1;U<T.FileIndex.length;++U)if(oe=T.FileIndex[U],oe.size>0&&oe.size<4096)if(tt&&Buffer.isBuffer(oe.content))oe.content.copy(z,z.l,0,oe.size),z.l+=oe.size+63&-64;else{for(se=0;se<oe.size;++se)z.write_shift(1,oe.content[se]);for(;se&63;++se)z.write_shift(1,0)}if(tt)z.l=z.length;else for(;z.l<z.length;)z.write_shift(1,0);return z}function F(T,L){var R=T.FullPaths.map(function(se){return se.toUpperCase()}),O=R.map(function(se){var ae=se.split("/");return ae[ae.length-(se.slice(-1)=="/"?2:1)]}),z=!1;L.charCodeAt(0)===47?(z=!0,L=R[0].slice(0,-1)+L):z=L.indexOf("/")!==-1;var U=L.toUpperCase(),ne=z===!0?R.indexOf(U):O.indexOf(U);if(ne!==-1)return T.FileIndex[ne];var fe=!U.match(Id);for(U=U.replace(rs,""),fe&&(U=U.replace(Id,"!")),ne=0;ne<R.length;++ne)if((fe?R[ne].replace(Id,"!"):R[ne]).replace(rs,"")==U||(fe?O[ne].replace(Id,"!"):O[ne]).replace(rs,"")==U)return T.FileIndex[ne];return null}var P=64,B=-2,Q="d0cf11e0a1b11ae1",D=[208,207,17,224,161,177,26,225],I="00000000000000000000000000000000",te={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:B,FREESECT:-1,HEADER_SIGNATURE:Q,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:I,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function re(T,L,R){d();var O=C(T,R);c.writeFileSync(L,O)}function W(T){for(var L=new Array(T.length),R=0;R<T.length;++R)L[R]=String.fromCharCode(T[R]);return L.join("")}function K(T,L){var R=C(T,L);switch(L&&L.type||"buffer"){case"file":return d(),c.writeFileSync(L.filename,R),R;case"binary":return typeof R=="string"?R:W(R);case"base64":return j_(typeof R=="string"?R:W(R));case"buffer":if(tt)return Buffer.isBuffer(R)?R:dl(R);case"array":return typeof R=="string"?pn(R):R}return R}var Z;function M(T){try{var L=T.InflateRaw,R=new L;if(R._processChunk(new Uint8Array([3,0]),R._finishFlushFlag),R.bytesRead)Z=T;else throw new Error("zlib does not expose bytesRead")}catch(O){console.error("cannot use native zlib: "+(O.message||O))}}function X(T,L){if(!Z)return Zc(T,L);var R=Z.InflateRaw,O=new R,z=O._processChunk(T.slice(T.l),O._finishFlushFlag);return T.l+=O.bytesRead,z}function V(T){return Z?Z.deflateRawSync(T):ee(T)}var Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ie=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function de(T){var L=(T<<1|T<<11)&139536|(T<<5|T<<15)&558144;return(L>>16|L>>8|L)&255}for(var xe=typeof Uint8Array<"u",le=xe?new Uint8Array(256):[],he=0;he<256;++he)le[he]=de(he);function A(T,L){var R=le[T&255];return L<=8?R>>>8-L:(R=R<<8|le[T>>8&255],L<=16?R>>>16-L:(R=R<<8|le[T>>16&255],R>>>24-L))}function Ce(T,L){var R=L&7,O=L>>>3;return(T[O]|(R<=6?0:T[O+1]<<8))>>>R&3}function be(T,L){var R=L&7,O=L>>>3;return(T[O]|(R<=5?0:T[O+1]<<8))>>>R&7}function ze(T,L){var R=L&7,O=L>>>3;return(T[O]|(R<=4?0:T[O+1]<<8))>>>R&15}function Be(T,L){var R=L&7,O=L>>>3;return(T[O]|(R<=3?0:T[O+1]<<8))>>>R&31}function Ee(T,L){var R=L&7,O=L>>>3;return(T[O]|(R<=1?0:T[O+1]<<8))>>>R&127}function gt(T,L,R){var O=L&7,z=L>>>3,U=(1<<R)-1,ne=T[z]>>>O;return R<8-O||(ne|=T[z+1]<<8-O,R<16-O)||(ne|=T[z+2]<<16-O,R<24-O)||(ne|=T[z+3]<<24-O),ne&U}function ur(T,L,R){var O=L&7,z=L>>>3;return O<=5?T[z]|=(R&7)<<O:(T[z]|=R<<O&255,T[z+1]=(R&7)>>8-O),L+3}function q(T,L,R){var O=L&7,z=L>>>3;return R=(R&1)<<O,T[z]|=R,L+1}function J(T,L,R){var O=L&7,z=L>>>3;return R<<=O,T[z]|=R&255,R>>>=8,T[z+1]=R,L+8}function ue(T,L,R){var O=L&7,z=L>>>3;return R<<=O,T[z]|=R&255,R>>>=8,T[z+1]=R&255,T[z+2]=R>>>8,L+16}function Ne(T,L){var R=T.length,O=2*R>L?2*R:L+5,z=0;if(R>=L)return T;if(tt){var U=E_(O);if(T.copy)T.copy(U);else for(;z<T.length;++z)U[z]=T[z];return U}else if(xe){var ne=new Uint8Array(O);if(ne.set)ne.set(T);else for(;z<R;++z)ne[z]=T[z];return ne}return T.length=O,T}function ge(T){for(var L=new Array(T),R=0;R<T;++R)L[R]=0;return L}function pe(T,L,R){var O=1,z=0,U=0,ne=0,fe=0,se=T.length,ae=xe?new Uint16Array(32):ge(32);for(U=0;U<32;++U)ae[U]=0;for(U=se;U<R;++U)T[U]=0;se=T.length;var oe=xe?new Uint16Array(se):ge(se);for(U=0;U<se;++U)ae[z=T[U]]++,O<z&&(O=z),oe[U]=0;for(ae[0]=0,U=1;U<=O;++U)ae[U+16]=fe=fe+ae[U-1]<<1;for(U=0;U<se;++U)fe=T[U],fe!=0&&(oe[U]=ae[fe+16]++);var ve=0;for(U=0;U<se;++U)if(ve=T[U],ve!=0)for(fe=A(oe[U],O)>>O-ve,ne=(1<<O+4-ve)-1;ne>=0;--ne)L[fe|ne<<ve]=ve&15|U<<4;return O}var Pe=xe?new Uint16Array(512):ge(512),Qe=xe?new Uint16Array(32):ge(32);if(!xe){for(var Ue=0;Ue<512;++Ue)Pe[Ue]=0;for(Ue=0;Ue<32;++Ue)Qe[Ue]=0}(function(){for(var T=[],L=0;L<32;L++)T.push(5);pe(T,Qe,32);var R=[];for(L=0;L<=143;L++)R.push(8);for(;L<=255;L++)R.push(9);for(;L<=279;L++)R.push(7);for(;L<=287;L++)R.push(8);pe(R,Pe,288)})();var ft=function(){for(var L=xe?new Uint8Array(32768):[],R=0,O=0;R<ie.length-1;++R)for(;O<ie[R+1];++O)L[O]=R;for(;O<32768;++O)L[O]=29;var z=xe?new Uint8Array(259):[];for(R=0,O=0;R<H.length-1;++R)for(;O<H[R+1];++O)z[O]=R;function U(fe,se){for(var ae=0;ae<fe.length;){var oe=Math.min(65535,fe.length-ae),ve=ae+oe==fe.length;for(se.write_shift(1,+ve),se.write_shift(2,oe),se.write_shift(2,~oe&65535);oe-- >0;)se[se.l++]=fe[ae++]}return se.l}function ne(fe,se){for(var ae=0,oe=0,ve=xe?new Uint16Array(32768):[];oe<fe.length;){var Se=Math.min(65535,fe.length-oe);if(Se<10){for(ae=ur(se,ae,+(oe+Se==fe.length)),ae&7&&(ae+=8-(ae&7)),se.l=ae/8|0,se.write_shift(2,Se),se.write_shift(2,~Se&65535);Se-- >0;)se[se.l++]=fe[oe++];ae=se.l*8;continue}ae=ur(se,ae,+(oe+Se==fe.length)+2);for(var Fe=0;Se-- >0;){var ke=fe[oe];Fe=(Fe<<5^ke)&32767;var Ae=-1,We=0;if((Ae=ve[Fe])&&(Ae|=oe&-32768,Ae>oe&&(Ae-=32768),Ae<oe))for(;fe[Ae+We]==fe[oe+We]&&We<250;)++We;if(We>2){ke=z[We],ke<=22?ae=J(se,ae,le[ke+1]>>1)-1:(J(se,ae,3),ae+=5,J(se,ae,le[ke-23]>>5),ae+=3);var Tt=ke<8?0:ke-4>>2;Tt>0&&(ue(se,ae,We-H[ke]),ae+=Tt),ke=L[oe-Ae],ae=J(se,ae,le[ke]>>3),ae-=3;var At=ke<4?0:ke-2>>1;At>0&&(ue(se,ae,oe-Ae-ie[ke]),ae+=At);for(var Sr=0;Sr<We;++Sr)ve[Fe]=oe&32767,Fe=(Fe<<5^fe[oe])&32767,++oe;Se-=We-1}else ke<=143?ke=ke+48:ae=q(se,ae,1),ae=J(se,ae,le[ke]),ve[Fe]=oe&32767,++oe}ae=J(se,ae,0)-1}return se.l=(ae+7)/8|0,se.l}return function(se,ae){return se.length<8?U(se,ae):ne(se,ae)}}();function ee(T){var L=rr(50+Math.floor(T.length*1.1)),R=ft(T,L);return L.slice(0,R)}var Le=xe?new Uint16Array(32768):ge(32768),vt=xe?new Uint16Array(32768):ge(32768),ut=xe?new Uint16Array(128):ge(128),sn=1,Wh=1;function Hh(T,L){var R=Be(T,L)+257;L+=5;var O=Be(T,L)+1;L+=5;var z=ze(T,L)+4;L+=4;for(var U=0,ne=xe?new Uint8Array(19):ge(19),fe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],se=1,ae=xe?new Uint8Array(8):ge(8),oe=xe?new Uint8Array(8):ge(8),ve=ne.length,Se=0;Se<z;++Se)ne[Y[Se]]=U=be(T,L),se<U&&(se=U),ae[U]++,L+=3;var Fe=0;for(ae[0]=0,Se=1;Se<=se;++Se)oe[Se]=Fe=Fe+ae[Se-1]<<1;for(Se=0;Se<ve;++Se)(Fe=ne[Se])!=0&&(fe[Se]=oe[Fe]++);var ke=0;for(Se=0;Se<ve;++Se)if(ke=ne[Se],ke!=0){Fe=le[fe[Se]]>>8-ke;for(var Ae=(1<<7-ke)-1;Ae>=0;--Ae)ut[Fe|Ae<<ke]=ke&7|Se<<3}var We=[];for(se=1;We.length<R+O;)switch(Fe=ut[Ee(T,L)],L+=Fe&7,Fe>>>=3){case 16:for(U=3+Ce(T,L),L+=2,Fe=We[We.length-1];U-- >0;)We.push(Fe);break;case 17:for(U=3+be(T,L),L+=3;U-- >0;)We.push(0);break;case 18:for(U=11+Ee(T,L),L+=7;U-- >0;)We.push(0);break;default:We.push(Fe),se<Fe&&(se=Fe);break}var Tt=We.slice(0,R),At=We.slice(R);for(Se=R;Se<286;++Se)Tt[Se]=0;for(Se=O;Se<30;++Se)At[Se]=0;return sn=pe(Tt,Le,286),Wh=pe(At,vt,30),L}function Dx(T,L){if(T[0]==3&&!(T[1]&3))return[$a(L),2];for(var R=0,O=0,z=E_(L||1<<18),U=0,ne=z.length>>>0,fe=0,se=0;!(O&1);){if(O=be(T,R),R+=3,O>>>1)O>>1==1?(fe=9,se=5):(R=Hh(T,R),fe=sn,se=Wh);else{R&7&&(R+=8-(R&7));var ae=T[R>>>3]|T[(R>>>3)+1]<<8;if(R+=32,ae>0)for(!L&&ne<U+ae&&(z=Ne(z,U+ae),ne=z.length);ae-- >0;)z[U++]=T[R>>>3],R+=8;continue}for(;;){!L&&ne<U+32767&&(z=Ne(z,U+32767),ne=z.length);var oe=gt(T,R,fe),ve=O>>>1==1?Pe[oe]:Le[oe];if(R+=ve&15,ve>>>=4,!(ve>>>8&255))z[U++]=ve;else{if(ve==256)break;ve-=257;var Se=ve<8?0:ve-4>>2;Se>5&&(Se=0);var Fe=U+H[ve];Se>0&&(Fe+=gt(T,R,Se),R+=Se),oe=gt(T,R,se),ve=O>>>1==1?Qe[oe]:vt[oe],R+=ve&15,ve>>>=4;var ke=ve<4?0:ve-2>>1,Ae=ie[ve];for(ke>0&&(Ae+=gt(T,R,ke),R+=ke),!L&&ne<Fe&&(z=Ne(z,Fe+100),ne=z.length);U<Fe;)z[U]=z[U-Ae],++U}}}return L?[z,R+7>>>3]:[z.slice(0,U),R+7>>>3]}function Zc(T,L){var R=T.slice(T.l||0),O=Dx(R,L);return T.l+=O[1],O[0]}function Bb(T,L){if(T)typeof console<"u"&&console.error(L);else throw new Error(L)}function $b(T,L){var R=T;wr(R,0);var O=[],z=[],U={FileIndex:O,FullPaths:z};j(U,{root:L.root});for(var ne=R.length-4;(R[ne]!=80||R[ne+1]!=75||R[ne+2]!=5||R[ne+3]!=6)&&ne>=0;)--ne;R.l=ne+4,R.l+=4;var fe=R.read_shift(2);R.l+=6;var se=R.read_shift(4);for(R.l=se,ne=0;ne<fe;++ne){R.l+=20;var ae=R.read_shift(4),oe=R.read_shift(4),ve=R.read_shift(2),Se=R.read_shift(2),Fe=R.read_shift(2);R.l+=8;var ke=R.read_shift(4),Ae=l(R.slice(R.l+ve,R.l+ve+Se));R.l+=ve+Se+Fe;var We=R.l;R.l=ke+4,BT(R,ae,oe,U,Ae),R.l=We}return U}function BT(T,L,R,O,z){T.l+=2;var U=T.read_shift(2),ne=T.read_shift(2),fe=a(T);if(U&8257)throw new Error("Unsupported ZIP encryption");for(var se=T.read_shift(4),ae=T.read_shift(4),oe=T.read_shift(4),ve=T.read_shift(2),Se=T.read_shift(2),Fe="",ke=0;ke<ve;++ke)Fe+=String.fromCharCode(T[T.l++]);if(Se){var Ae=l(T.slice(T.l,T.l+Se));(Ae[21589]||{}).mt&&(fe=Ae[21589].mt),((z||{})[21589]||{}).mt&&(fe=z[21589].mt)}T.l+=Se;var We=T.slice(T.l,T.l+ae);switch(ne){case 8:We=X(T,oe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ne)}var Tt=!1;U&8&&(se=T.read_shift(4),se==134695760&&(se=T.read_shift(4),Tt=!0),ae=T.read_shift(4),oe=T.read_shift(4)),ae!=L&&Bb(Tt,"Bad compressed size: "+L+" != "+ae),oe!=R&&Bb(Tt,"Bad uncompressed size: "+R+" != "+oe),Ox(O,Fe,We,{unsafe:!0,mt:fe})}function $T(T,L){var R=L||{},O=[],z=[],U=rr(1),ne=R.compression?8:0,fe=0,se=0,ae=0,oe=0,ve=0,Se=T.FullPaths[0],Fe=Se,ke=T.FileIndex[0],Ae=[],We=0;for(se=1;se<T.FullPaths.length;++se)if(Fe=T.FullPaths[se].slice(Se.length),ke=T.FileIndex[se],!(!ke.size||!ke.content||Fe=="Sh33tJ5")){var Tt=oe,At=rr(Fe.length);for(ae=0;ae<Fe.length;++ae)At.write_shift(1,Fe.charCodeAt(ae)&127);At=At.slice(0,At.l),Ae[ve]=kU.buf(ke.content,0);var Sr=ke.content;ne==8&&(Sr=V(Sr)),U=rr(30),U.write_shift(4,67324752),U.write_shift(2,20),U.write_shift(2,fe),U.write_shift(2,ne),ke.mt?i(U,ke.mt):U.write_shift(4,0),U.write_shift(-4,Ae[ve]),U.write_shift(4,Sr.length),U.write_shift(4,ke.content.length),U.write_shift(2,At.length),U.write_shift(2,0),oe+=U.length,O.push(U),oe+=At.length,O.push(At),oe+=Sr.length,O.push(Sr),U=rr(46),U.write_shift(4,33639248),U.write_shift(2,0),U.write_shift(2,20),U.write_shift(2,fe),U.write_shift(2,ne),U.write_shift(4,0),U.write_shift(-4,Ae[ve]),U.write_shift(4,Sr.length),U.write_shift(4,ke.content.length),U.write_shift(2,At.length),U.write_shift(2,0),U.write_shift(2,0),U.write_shift(2,0),U.write_shift(2,0),U.write_shift(4,0),U.write_shift(4,Tt),We+=U.l,z.push(U),We+=At.length,z.push(At),++ve}return U=rr(22),U.write_shift(4,101010256),U.write_shift(2,0),U.write_shift(2,0),U.write_shift(2,ve),U.write_shift(2,ve),U.write_shift(4,We),U.write_shift(4,oe),U.write_shift(2,0),ea([ea(O),ea(z),U])}var Yh={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function zT(T,L){if(T.ctype)return T.ctype;var R=T.name||"",O=R.match(/\.([^\.]+)$/);return O&&Yh[O[1]]||L&&(O=(R=L).match(/[\.\\]([^\.\\])+$/),O&&Yh[O[1]])?Yh[O[1]]:"application/octet-stream"}function UT(T){for(var L=j_(T),R=[],O=0;O<L.length;O+=76)R.push(L.slice(O,O+76));return R.join(`\r
`)+`\r
`}function VT(T){var L=T.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ae){var oe=ae.charCodeAt(0).toString(16).toUpperCase();return"="+(oe.length==1?"0"+oe:oe)});L=L.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),L.charAt(0)==`
`&&(L="=0D"+L.slice(1)),L=L.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var R=[],O=L.split(`\r
`),z=0;z<O.length;++z){var U=O[z];if(U.length==0){R.push("");continue}for(var ne=0;ne<U.length;){var fe=76,se=U.slice(ne,ne+fe);se.charAt(fe-1)=="="?fe--:se.charAt(fe-2)=="="?fe-=2:se.charAt(fe-3)=="="&&(fe-=3),se=U.slice(ne,ne+fe),ne+=fe,ne<U.length&&(se+="="),R.push(se)}}return R.join(`\r
`)}function WT(T){for(var L=[],R=0;R<T.length;++R){for(var O=T[R];R<=T.length&&O.charAt(O.length-1)=="=";)O=O.slice(0,O.length-1)+T[++R];L.push(O)}for(var z=0;z<L.length;++z)L[z]=L[z].replace(/[=][0-9A-Fa-f]{2}/g,function(U){return String.fromCharCode(parseInt(U.slice(1),16))});return pn(L.join(`\r
`))}function HT(T,L,R){for(var O="",z="",U="",ne,fe=0;fe<10;++fe){var se=L[fe];if(!se||se.match(/^\s*$/))break;var ae=se.match(/^(.*?):\s*([^\s].*)$/);if(ae)switch(ae[1].toLowerCase()){case"content-location":O=ae[2].trim();break;case"content-type":U=ae[2].trim();break;case"content-transfer-encoding":z=ae[2].trim();break}}switch(++fe,z.toLowerCase()){case"base64":ne=pn(Ps(L.slice(fe).join("")));break;case"quoted-printable":ne=WT(L.slice(fe));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+z)}var oe=Ox(T,O.slice(R.length),ne,{unsafe:!0});U&&(oe.ctype=U)}function YT(T,L){if(W(T.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var R=L&&L.root||"",O=(tt&&Buffer.isBuffer(T)?T.toString("binary"):W(T)).split(`\r
`),z=0,U="";for(z=0;z<O.length;++z)if(U=O[z],!!/^Content-Location:/i.test(U)&&(U=U.slice(U.indexOf("file")),R||(R=U.slice(0,U.lastIndexOf("/")+1)),U.slice(0,R.length)!=R))for(;R.length>0&&(R=R.slice(0,R.length-1),R=R.slice(0,R.lastIndexOf("/")+1),U.slice(0,R.length)!=R););var ne=(O[1]||"").match(/boundary="(.*?)"/);if(!ne)throw new Error("MAD cannot find boundary");var fe="--"+(ne[1]||""),se=[],ae=[],oe={FileIndex:se,FullPaths:ae};j(oe);var ve,Se=0;for(z=0;z<O.length;++z){var Fe=O[z];Fe!==fe&&Fe!==fe+"--"||(Se++&&HT(oe,O.slice(ve,z),R),ve=z)}return oe}function qT(T,L){var R=L||{},O=R.boundary||"SheetJS";O="------="+O;for(var z=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+O.slice(2)+'"',"","",""],U=T.FullPaths[0],ne=U,fe=T.FileIndex[0],se=1;se<T.FullPaths.length;++se)if(ne=T.FullPaths[se].slice(U.length),fe=T.FileIndex[se],!(!fe.size||!fe.content||ne=="Sh33tJ5")){ne=ne.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(We){return"_x"+We.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(We){return"_u"+We.charCodeAt(0).toString(16)+"_"});for(var ae=fe.content,oe=tt&&Buffer.isBuffer(ae)?ae.toString("binary"):W(ae),ve=0,Se=Math.min(1024,oe.length),Fe=0,ke=0;ke<=Se;++ke)(Fe=oe.charCodeAt(ke))>=32&&Fe<128&&++ve;var Ae=ve>=Se*4/5;z.push(O),z.push("Content-Location: "+(R.root||"file:///C:/SheetJS/")+ne),z.push("Content-Transfer-Encoding: "+(Ae?"quoted-printable":"base64")),z.push("Content-Type: "+zT(fe,ne)),z.push(""),z.push(Ae?VT(oe):UT(oe))}return z.push(O+`--\r
`),z.join(`\r
`)}function GT(T){var L={};return j(L,T),L}function Ox(T,L,R,O){var z=O&&O.unsafe;z||j(T);var U=!z&&rt.find(T,L);if(!U){var ne=T.FullPaths[0];L.slice(0,ne.length)==ne?ne=L:(ne.slice(-1)!="/"&&(ne+="/"),ne=(ne+L).replace("//","/")),U={name:n(L),type:2},T.FileIndex.push(U),T.FullPaths.push(ne),z||rt.utils.cfb_gc(T)}return U.content=R,U.size=R?R.length:0,O&&(O.CLSID&&(U.clsid=O.CLSID),O.mt&&(U.mt=O.mt),O.ct&&(U.ct=O.ct)),U}function KT(T,L){j(T);var R=rt.find(T,L);if(R){for(var O=0;O<T.FileIndex.length;++O)if(T.FileIndex[O]==R)return T.FileIndex.splice(O,1),T.FullPaths.splice(O,1),!0}return!1}function XT(T,L,R){j(T);var O=rt.find(T,L);if(O){for(var z=0;z<T.FileIndex.length;++z)if(T.FileIndex[z]==O)return T.FileIndex[z].name=n(R),T.FullPaths[z]=R,!0}return!1}function QT(T){S(T,!0)}return e.find=F,e.read=E,e.parse=u,e.write=K,e.writeFile=re,e.utils={cfb_new:GT,cfb_add:Ox,cfb_del:KT,cfb_mov:XT,cfb_gc:QT,ReadShift:iu,CheckField:X3,prep_blob:wr,bconcat:ea,use_zlib:M,_deflateRaw:ee,_inflateRaw:Zc,consts:te},e}();function _U(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(s){if(!s.message||!s.message.match(/onstruct/))throw s}throw new Error("Cannot access file "+t)}function Xn(t){for(var e=Object.keys(t),r=[],s=0;s<e.length;++s)Object.prototype.hasOwnProperty.call(t,e[s])&&r.push(e[s]);return r}function rb(t){for(var e=[],r=Xn(t),s=0;s!==r.length;++s)e[t[r[s]]]=r[s];return e}var bm=new Date(1899,11,30,0,0,0);function ns(t,e){var r=t.getTime();e&&(r-=1462*24*60*60*1e3);var s=bm.getTime()+(t.getTimezoneOffset()-bm.getTimezoneOffset())*6e4;return(r-s)/(24*60*60*1e3)}var C3=new Date,NU=bm.getTime()+(C3.getTimezoneOffset()-bm.getTimezoneOffset())*6e4,R_=C3.getTimezoneOffset();function wx(t){var e=new Date;return e.setTime(t*24*60*60*1e3+NU),e.getTimezoneOffset()!==R_&&e.setTime(e.getTime()+(e.getTimezoneOffset()-R_)*6e4),e}function jU(t){var e=0,r=0,s=!1,n=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!n)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var i=1;i!=n.length;++i)if(n[i]){switch(r=1,i>3&&(s=!0),n[i].slice(n[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+n[i].slice(n[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(s)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(n[i],10)}return e}var D_=new Date("2017-02-19T19:06:09.000Z"),T3=isNaN(D_.getFullYear())?new Date("2/19/17"):D_,EU=T3.getFullYear()==2017;function vr(t,e){var r=new Date(t);if(EU)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(T3.getFullYear()==1917&&!isNaN(r.getFullYear())){var s=r.getFullYear();return t.indexOf(""+s)>-1||r.setFullYear(r.getFullYear()+100),r}var n=t.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+n[0],+n[1]-1,+n[2],+n[3]||0,+n[4]||0,+n[5]||0);return t.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Jo(t,e){if(tt&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return $d(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return $d(x3(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return $d(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return $d(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(i){return r[i]||i})}catch{}for(var s=[],n=0;n!=t.length;++n)s.push(String.fromCharCode(t[n]));return s.join("")}function Nr(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=Nr(t[r]));return e}function It(t,e){for(var r="";r.length<e;)r+=t;return r}function _n(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,s=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(s))||(s=s.replace(/[(](.*)[)]/,function(n,i){return r=-r,i}),!isNaN(e=Number(s)))?e/r:e}var SU=["january","february","march","april","may","june","july","august","september","october","november","december"];function Mc(t){var e=new Date(t),r=new Date(NaN),s=e.getYear(),n=e.getMonth(),i=e.getDate();if(isNaN(i))return r;var a=t.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&SU.indexOf(a)==-1)return r}else if(a.match(/[a-z]/))return r;return s<0||s>8099?r:(n>0||i>1)&&s!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var CU=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,s,n){if(t||typeof s=="string")return r.split(s);for(var i=r.split(s),a=[i[0]],l=1;l<i.length;++l)a.push(n),a.push(i[l]);return a}}();function A3(t){return t?t.content&&t.type?Jo(t.content,!0):t.data?Ld(t.data):t.asNodeBuffer&&tt?Ld(t.asNodeBuffer().toString("binary")):t.asBinary?Ld(t.asBinary()):t._data&&t._data.getContent?Ld(Jo(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function F3(t){if(!t)return null;if(t.data)return __(t.data);if(t.asNodeBuffer&&tt)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?__(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function TU(t){return t&&t.name.slice(-4)===".bin"?F3(t):A3(t)}function Bs(t,e){for(var r=t.FullPaths||Xn(t.files),s=e.toLowerCase().replace(/[\/]/g,"\\"),n=s.replace(/\\/g,"/"),i=0;i<r.length;++i){var a=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(s==a||n==a)return t.files?t.files[r[i]]:t.FileIndex[i]}return null}function sb(t,e){var r=Bs(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function Qt(t,e,r){if(!r)return TU(sb(t,e));if(!e)return null;try{return Qt(t,e)}catch{return null}}function Es(t,e,r){if(!r)return A3(sb(t,e));if(!e)return null;try{return Es(t,e)}catch{return null}}function P3(t,e,r){if(!r)return F3(sb(t,e));if(!e)return null;try{return P3(t,e)}catch{return null}}function O_(t){for(var e=t.FullPaths||Xn(t.files),r=[],s=0;s<e.length;++s)e[s].slice(-1)!="/"&&r.push(e[s].replace(/^Root Entry[\/]/,""));return r.sort()}function AU(t,e,r){if(t.FullPaths){if(typeof r=="string"){var s;return tt?s=dl(r):s=Xz(r),rt.utils.cfb_add(t,e,s)}rt.utils.cfb_add(t,e,r)}else t.file(e,r)}function M3(t,e){switch(e.type){case"base64":return rt.read(t,{type:"base64"});case"binary":return rt.read(t,{type:"binary"});case"buffer":case"array":return rt.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function Bd(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var s=t.split("/");s.length!==0;){var n=s.shift();n===".."?r.pop():n!=="."&&r.push(n)}return r.join("/")}var R3=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,FU=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,L_=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,PU=/<[^>]*>/g,Yr=R3.match(L_)?L_:PU,MU=/<\w*:/,RU=/<(\/?)\w+:/;function $e(t,e,r){for(var s={},n=0,i=0;n!==t.length&&!((i=t.charCodeAt(n))===32||i===10||i===13);++n);if(e||(s[0]=t.slice(0,n)),n===t.length)return s;var a=t.match(FU),l=0,c="",d=0,u="",h="",f=1;if(a)for(d=0;d!=a.length;++d){for(h=a[d],i=0;i!=h.length&&h.charCodeAt(i)!==61;++i);for(u=h.slice(0,i).trim();h.charCodeAt(i+1)==32;)++i;for(f=(n=h.charCodeAt(i+1))==34||n==39?1:0,c=h.slice(i+1+f,h.length-f),l=0;l!=u.length&&u.charCodeAt(l)!==58;++l);if(l===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),s[u]=c,r||(s[u.toLowerCase()]=c);else{var m=(l===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(l+1);if(s[m]&&u.slice(l-3,l)=="ext")continue;s[m]=c,r||(s[m.toLowerCase()]=c)}}return s}function Jn(t){return t.replace(RU,"<$1")}var D3={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},DU=rb(D3),at=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(s){var n=s+"",i=n.indexOf("<![CDATA[");if(i==-1)return n.replace(t,function(l,c){return D3[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(e,function(l,c){return String.fromCharCode(parseInt(c,16))});var a=n.indexOf("]]>");return r(n.slice(0,i))+n.slice(i+9,a)+r(n.slice(a+3))}}(),OU=/[&<>'"]/g,LU=/[\u0000-\u001f]/g;function nb(t){var e=t+"";return e.replace(OU,function(r){return DU[r]}).replace(/\n/g,"<br/>").replace(LU,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var I_=function(){var t=/&#(\d+);/g;function e(r,s){return String.fromCharCode(parseInt(s,10))}return function(s){return s.replace(t,e)}}();function jt(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Dp(t){for(var e="",r=0,s=0,n=0,i=0,a=0,l=0;r<t.length;){if(s=t.charCodeAt(r++),s<128){e+=String.fromCharCode(s);continue}if(n=t.charCodeAt(r++),s>191&&s<224){a=(s&31)<<6,a|=n&63,e+=String.fromCharCode(a);continue}if(i=t.charCodeAt(r++),s<240){e+=String.fromCharCode((s&15)<<12|(n&63)<<6|i&63);continue}a=t.charCodeAt(r++),l=((s&7)<<18|(n&63)<<12|(i&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(l>>>10&1023)),e+=String.fromCharCode(56320+(l&1023))}return e}function B_(t){var e=$a(2*t.length),r,s,n=1,i=0,a=0,l;for(s=0;s<t.length;s+=n)n=1,(l=t.charCodeAt(s))<128?r=l:l<224?(r=(l&31)*64+(t.charCodeAt(s+1)&63),n=2):l<240?(r=(l&15)*4096+(t.charCodeAt(s+1)&63)*64+(t.charCodeAt(s+2)&63),n=3):(n=4,r=(l&7)*262144+(t.charCodeAt(s+1)&63)*4096+(t.charCodeAt(s+2)&63)*64+(t.charCodeAt(s+3)&63),r-=65536,a=55296+(r>>>10&1023),r=56320+(r&1023)),a!==0&&(e[i++]=a&255,e[i++]=a>>>8,a=0),e[i++]=r%256,e[i++]=r>>>8;return e.slice(0,i).toString("ucs2")}function $_(t){return dl(t,"binary").toString("utf8")}var M0="foo bar bazâð£",pt=tt&&($_(M0)==Dp(M0)&&$_||B_(M0)==Dp(M0)&&B_)||Dp,$d=tt?function(t){return dl(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,s=0,n=0;r<t.length;)switch(s=t.charCodeAt(r++),!0){case s<128:e.push(String.fromCharCode(s));break;case s<2048:e.push(String.fromCharCode(192+(s>>6))),e.push(String.fromCharCode(128+(s&63)));break;case(s>=55296&&s<57344):s-=55296,n=t.charCodeAt(r++)-56320+(s<<10),e.push(String.fromCharCode(240+(n>>18&7))),e.push(String.fromCharCode(144+(n>>12&63))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)));break;default:e.push(String.fromCharCode(224+(s>>12))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)))}return e.join("")},Zu=function(){var t={};return function(r,s){var n=r+"|"+(s||"");return t[n]?t[n]:t[n]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",s||"")}}(),O3=function(){var t=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var s=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),n=0;n<t.length;++n)s=s.replace(t[n][0],t[n][1]);return s}}(),IU=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),BU=/<\/?(?:vt:)?variant>/g,$U=/<(?:vt:)([^>]*)>([\s\S]*)</;function z_(t,e){var r=$e(t),s=t.match(IU(r.baseType))||[],n=[];if(s.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+s.length+" != "+r.size);return n}return s.forEach(function(i){var a=i.replace(BU,"").match($U);a&&n.push({v:pt(a[2]),t:a[1]})}),n}var zU=/(^\s|\s$|\n)/;function UU(t){return Xn(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function VU(t,e,r){return"<"+t+(r!=null?UU(r):"")+(e!=null?(e.match(zU)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function ib(t){if(tt&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return pt(ul(Jy(t)));throw new Error("Bad input format: expected Buffer or string")}var Ju=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,WU={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},HU=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function YU(t,e){for(var r=1-2*(t[e+7]>>>7),s=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),n=t[e+6]&15,i=5;i>=0;--i)n=n*256+t[e+i];return s==2047?n==0?r*(1/0):NaN:(s==0?s=-1022:(s-=1023,n+=Math.pow(2,52)),r*Math.pow(2,s-52)*n)}function qU(t,e,r){var s=(e<0||1/e==-1/0?1:0)<<7,n=0,i=0,a=s?-e:e;isFinite(a)?a==0?n=i=0:(n=Math.floor(Math.log(a)/Math.LN2),i=a*Math.pow(2,52-n),n<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?n=-1022:(i-=Math.pow(2,52),n+=1023)):(n=2047,i=isNaN(e)?26985:0);for(var l=0;l<=5;++l,i/=256)t[r+l]=i&255;t[r+6]=(n&15)<<4|i&15,t[r+7]=n>>4|s}var U_=function(t){for(var e=[],r=10240,s=0;s<t[0].length;++s)if(t[0][s])for(var n=0,i=t[0][s].length;n<i;n+=r)e.push.apply(e,t[0][s].slice(n,n+r));return e},V_=tt?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:dl(e)})):U_(t)}:U_,W_=function(t,e,r){for(var s=[],n=e;n<r;n+=2)s.push(String.fromCharCode(wi(t,n)));return s.join("").replace(rs,"")},ab=tt?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(rs,""):W_(t,e,r)}:W_,H_=function(t,e,r){for(var s=[],n=e;n<e+r;++n)s.push(("0"+t[n].toString(16)).slice(-2));return s.join("")},L3=tt?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):H_(t,e,r)}:H_,Y_=function(t,e,r){for(var s=[],n=e;n<r;n++)s.push(String.fromCharCode(Cl(t,n)));return s.join("")},Rh=tt?function(e,r,s){return Buffer.isBuffer(e)?e.toString("utf8",r,s):Y_(e,r,s)}:Y_,I3=function(t,e){var r=Ns(t,e);return r>0?Rh(t,e+4,e+4+r-1):""},B3=I3,$3=function(t,e){var r=Ns(t,e);return r>0?Rh(t,e+4,e+4+r-1):""},z3=$3,U3=function(t,e){var r=2*Ns(t,e);return r>0?Rh(t,e+4,e+4+r-1):""},V3=U3,W3=function(e,r){var s=Ns(e,r);return s>0?ab(e,r+4,r+4+s):""},H3=W3,Y3=function(t,e){var r=Ns(t,e);return r>0?Rh(t,e+4,e+4+r):""},q3=Y3,G3=function(t,e){return YU(t,e)},wm=G3,K3=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};tt&&(B3=function(e,r){if(!Buffer.isBuffer(e))return I3(e,r);var s=e.readUInt32LE(r);return s>0?e.toString("utf8",r+4,r+4+s-1):""},z3=function(e,r){if(!Buffer.isBuffer(e))return $3(e,r);var s=e.readUInt32LE(r);return s>0?e.toString("utf8",r+4,r+4+s-1):""},V3=function(e,r){if(!Buffer.isBuffer(e))return U3(e,r);var s=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+s-1)},H3=function(e,r){if(!Buffer.isBuffer(e))return W3(e,r);var s=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+s)},q3=function(e,r){if(!Buffer.isBuffer(e))return Y3(e,r);var s=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+s)},wm=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):G3(e,r)},K3=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Cl=function(t,e){return t[e]},wi=function(t,e){return t[e+1]*256+t[e]},GU=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},Ns=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},oo=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},KU=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function iu(t,e){var r="",s,n,i=[],a,l,c,d;switch(e){case"dbcs":if(d=this.l,tt&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)r+=String.fromCharCode(wi(this,d)),d+=2;t*=2;break;case"utf8":r=Rh(this,this.l,this.l+t);break;case"utf16le":t*=2,r=ab(this,this.l,this.l+t);break;case"wstr":return iu.call(this,t,"dbcs");case"lpstr-ansi":r=B3(this,this.l),t=4+Ns(this,this.l);break;case"lpstr-cp":r=z3(this,this.l),t=4+Ns(this,this.l);break;case"lpwstr":r=V3(this,this.l),t=4+2*Ns(this,this.l);break;case"lpp4":t=4+Ns(this,this.l),r=H3(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Ns(this,this.l),r=q3(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(a=Cl(this,this.l+t++))!==0;)i.push(P0(a));r=i.join("");break;case"_wstr":for(t=0,r="";(a=wi(this,this.l+t))!==0;)i.push(P0(a)),t+=2;t+=2,r=i.join("");break;case"dbcs-cont":for(r="",d=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return a=Cl(this,d),this.l=d+1,l=iu.call(this,t-c,a?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(P0(wi(this,d))),d+=2}r=i.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return a=Cl(this,d),this.l=d+1,l=iu.call(this,t-c,a?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(P0(Cl(this,d))),d+=1}r=i.join("");break;default:switch(t){case 1:return s=Cl(this,this.l),this.l++,s;case 2:return s=(e==="i"?GU:wi)(this,this.l),this.l+=2,s;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(s=(t>0?oo:KU)(this,this.l),this.l+=4,s):(n=Ns(this,this.l),this.l+=4,n);case 8:case-8:if(e==="f")return t==8?n=wm(this,this.l):n=wm([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;t=8;case 16:r=L3(this,this.l,t);break}}return this.l+=t,r}var XU=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},QU=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},ZU=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function JU(t,e,r){var s=0,n=0;if(r==="dbcs"){for(n=0;n!=e.length;++n)ZU(this,e.charCodeAt(n),this.l+2*n);s=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),n=0;n!=e.length;++n)this[this.l+n]=e.charCodeAt(n)&255;s=e.length}else if(r==="hex"){for(;n<t;++n)this[this.l++]=parseInt(e.slice(2*n,2*n+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+t,this.length);for(n=0;n<Math.min(e.length,t);++n){var a=e.charCodeAt(n);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(t){case 1:s=1,this[this.l]=e&255;break;case 2:s=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:s=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:s=4,XU(this,e,this.l);break;case 8:if(s=8,r==="f"){qU(this,e,this.l);break}case 16:break;case-4:s=4,QU(this,e,this.l);break}return this.l+=s,this}function X3(t,e){var r=L3(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function wr(t,e){t.l=e,t.read_shift=iu,t.chk=X3,t.write_shift=JU}function Hr(t,e){t.l+=e}function rr(t){var e=$a(t);return wr(e,0),e}function Li(t,e,r){if(t){var s,n,i;wr(t,t.l||0);for(var a=t.length,l=0,c=0;t.l<a;){l=t.read_shift(1),l&128&&(l=(l&127)+((t.read_shift(1)&127)<<7));var d=Sm[l]||Sm[65535];for(s=t.read_shift(1),i=s&127,n=1;n<4&&s&128;++n)i+=((s=t.read_shift(1))&127)<<7*n;c=t.l+i;var u=d.f&&d.f(t,i,r);if(t.l=c,e(u,d,l))return}}}function Y1(){var t=[],e=tt?256:2048,r=function(d){var u=rr(d);return wr(u,0),u},s=r(e),n=function(){s&&(s.length>s.l&&(s=s.slice(0,s.l),s.l=s.length),s.length>0&&t.push(s),s=null)},i=function(d){return s&&d<s.length-s.l?s:(n(),s=r(Math.max(d+1,e)))},a=function(){return n(),ea(t)},l=function(d){n(),s=d,s.l==null&&(s.l=s.length),i(e)};return{next:i,push:l,end:a,_bufs:t}}function au(t,e,r){var s=Nr(t);if(e.s?(s.cRel&&(s.c+=e.s.c),s.rRel&&(s.r+=e.s.r)):(s.cRel&&(s.c+=e.c),s.rRel&&(s.r+=e.r)),!r||r.biff<12){for(;s.c>=256;)s.c-=256;for(;s.r>=65536;)s.r-=65536}return s}function q_(t,e,r){var s=Nr(t);return s.s=au(s.s,e.s,r),s.e=au(s.e,e.s,r),s}function ou(t,e){if(t.cRel&&t.c<0)for(t=Nr(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Nr(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Ve(t);return!t.cRel&&t.cRel!=null&&(r=rV(r)),!t.rRel&&t.rRel!=null&&(r=eV(r)),r}function Op(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+cr(t.s.c)+":"+(t.e.cRel?"":"$")+cr(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+jr(t.s.r)+":"+(t.e.rRel?"":"$")+jr(t.e.r):ou(t.s,e.biff)+":"+ou(t.e,e.biff)}function ob(t){return parseInt(tV(t),10)-1}function jr(t){return""+(t+1)}function eV(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function tV(t){return t.replace(/\$(\d+)$/,"$1")}function lb(t){for(var e=sV(t),r=0,s=0;s!==e.length;++s)r=26*r+e.charCodeAt(s)-64;return r-1}function cr(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function rV(t){return t.replace(/^([A-Z])/,"$$$1")}function sV(t){return t.replace(/^\$([A-Z])/,"$1")}function nV(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function es(t){for(var e=0,r=0,s=0;s<t.length;++s){var n=t.charCodeAt(s);n>=48&&n<=57?e=10*e+(n-48):n>=65&&n<=90&&(r=26*r+(n-64))}return{c:r-1,r:e-1}}function Ve(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Gc(t){var e=t.indexOf(":");return e==-1?{s:es(t),e:es(t)}:{s:es(t.slice(0,e)),e:es(t.slice(e+1))}}function st(t,e){return typeof e>"u"||typeof e=="number"?st(t.s,t.e):(typeof t!="string"&&(t=Ve(t)),typeof e!="string"&&(e=Ve(e)),t==e?t:t+":"+e)}function zt(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,s=0,n=0,i=t.length;for(r=0;s<i&&!((n=t.charCodeAt(s)-64)<1||n>26);++s)r=26*r+n;for(e.s.c=--r,r=0;s<i&&!((n=t.charCodeAt(s)-48)<0||n>9);++s)r=10*r+n;if(e.s.r=--r,s===i||n!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++s,r=0;s!=i&&!((n=t.charCodeAt(s)-64)<1||n>26);++s)r=26*r+n;for(e.e.c=--r,r=0;s!=i&&!((n=t.charCodeAt(s)-48)<0||n>9);++s)r=10*r+n;return e.e.r=--r,e}function G_(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Js(t.z,r?ns(e):e)}catch{}try{return t.w=Js((t.XF||{}).numFmtId||(r?14:0),r?ns(e):e)}catch{return""+e}}function Di(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?ml[t.v]||t.v:e==null?G_(t,t.v):G_(t,e))}function Ka(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",s={};return s[r]=t,{SheetNames:[r],Sheets:s}}function Q3(t,e,r){var s=r||{},n=t?Array.isArray(t):s.dense,i=t||(n?[]:{}),a=0,l=0;if(i&&s.origin!=null){if(typeof s.origin=="number")a=s.origin;else{var c=typeof s.origin=="string"?es(s.origin):s.origin;a=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=zt(i["!ref"]);d.s.c=u.s.c,d.s.r=u.s.r,d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),a==-1&&(d.e.r=a=u.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var f=0;f!=e[h].length;++f)if(!(typeof e[h][f]>"u")){var m={v:e[h][f]},x=a+h,p=l+f;if(d.s.r>x&&(d.s.r=x),d.s.c>p&&(d.s.c=p),d.e.r<x&&(d.e.r=x),d.e.c<p&&(d.e.c=p),e[h][f]&&typeof e[h][f]=="object"&&!Array.isArray(e[h][f])&&!(e[h][f]instanceof Date))m=e[h][f];else if(Array.isArray(m.v)&&(m.f=e[h][f][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(s.nullError)m.t="e",m.v=0;else if(s.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=s.dateNF||He[14],s.cellDates?(m.t="d",m.w=Js(m.z,ns(m.v))):(m.t="n",m.v=ns(m.v),m.w=Js(m.z,m.v))):m.t="s";if(n)i[x]||(i[x]=[]),i[x][p]&&i[x][p].z&&(m.z=i[x][p].z),i[x][p]=m;else{var g=Ve({c:p,r:x});i[g]&&i[g].z&&(m.z=i[g].z),i[g]=m}}}return d.s.c<1e7&&(i["!ref"]=st(d)),i}function Kc(t,e){return Q3(null,t,e)}function iV(t){return t.read_shift(4,"i")}function Ur(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function aV(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function cb(t,e){var r=t.l,s=t.read_shift(1),n=Ur(t),i=[],a={t:n,h:n};if(s&1){for(var l=t.read_shift(4),c=0;c!=l;++c)i.push(aV(t));a.r=i}else a.r=[{ich:0,ifnt:0}];return t.l=r+e,a}var oV=cb;function tn(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function hl(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}var lV=Ur;function db(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}var cV=Ur,q1=db;function ub(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,s=e[0]&2;t.l+=4;var n=s===0?wm([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):oo(e,0)>>2;return r?n/100:n}function Z3(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}var fl=Z3;function Or(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function dV(t){var e={},r=t.read_shift(1),s=r>>>1,n=t.read_shift(1),i=t.read_shift(2,"i"),a=t.read_shift(1),l=t.read_shift(1),c=t.read_shift(1);switch(t.l++,s){case 0:e.auto=1;break;case 1:e.index=n;var d=Oo[n];d&&(e.rgb=th(d));break;case 2:e.rgb=th([a,l,c]);break;case 3:e.theme=n;break}return i!=0&&(e.tint=i>0?i/32767:i/32768),e}function uV(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function J3(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},s=t.read_shift(4);switch(s){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(s>400)throw new Error("Unsupported Clipboard: "+s.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function hV(t){return J3(t,1)}function fV(t){return J3(t,2)}var hb=2,hs=3,R0=11,K_=12,km=19,D0=64,mV=65,xV=71,pV=4108,gV=4126,mr=80,eC=81,vV=[mr,eC],yV={1:{n:"CodePage",t:hb},2:{n:"Category",t:mr},3:{n:"PresentationFormat",t:mr},4:{n:"ByteCount",t:hs},5:{n:"LineCount",t:hs},6:{n:"ParagraphCount",t:hs},7:{n:"SlideCount",t:hs},8:{n:"NoteCount",t:hs},9:{n:"HiddenCount",t:hs},10:{n:"MultimediaClipCount",t:hs},11:{n:"ScaleCrop",t:R0},12:{n:"HeadingPairs",t:pV},13:{n:"TitlesOfParts",t:gV},14:{n:"Manager",t:mr},15:{n:"Company",t:mr},16:{n:"LinksUpToDate",t:R0},17:{n:"CharacterCount",t:hs},19:{n:"SharedDoc",t:R0},22:{n:"HyperlinksChanged",t:R0},23:{n:"AppVersion",t:hs,p:"version"},24:{n:"DigSig",t:mV},26:{n:"ContentType",t:mr},27:{n:"ContentStatus",t:mr},28:{n:"Language",t:mr},29:{n:"Version",t:mr},255:{},2147483648:{n:"Locale",t:km},2147483651:{n:"Behavior",t:km},1919054434:{}},bV={1:{n:"CodePage",t:hb},2:{n:"Title",t:mr},3:{n:"Subject",t:mr},4:{n:"Author",t:mr},5:{n:"Keywords",t:mr},6:{n:"Comments",t:mr},7:{n:"Template",t:mr},8:{n:"LastAuthor",t:mr},9:{n:"RevNumber",t:mr},10:{n:"EditTime",t:D0},11:{n:"LastPrinted",t:D0},12:{n:"CreatedDate",t:D0},13:{n:"ModifiedDate",t:D0},14:{n:"PageCount",t:hs},15:{n:"WordCount",t:hs},16:{n:"CharCount",t:hs},17:{n:"Thumbnail",t:xV},18:{n:"Application",t:mr},19:{n:"DocSecurity",t:hs},255:{},2147483648:{n:"Locale",t:km},2147483651:{n:"Behavior",t:km},1919054434:{}},X_={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},wV=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function kV(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var _V=kV([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Oo=Nr(_V),ml={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},tC={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},Q_={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function NV(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function jV(t){var e=NV();if(!t||!t.match)return e;var r={};if((t.match(Yr)||[]).forEach(function(s){var n=$e(s);switch(n[0].replace(MU,"<")){case"<?xml":break;case"<Types":e.xmlns=n["xmlns"+(n[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[n.Extension]=n.ContentType;break;case"<Override":e[Q_[n.ContentType]]!==void 0&&e[Q_[n.ContentType]].push(n.PartName);break}}),e.xmlns!==WU.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}var Ul={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function G1(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function lu(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var s={};return(t.match(Yr)||[]).forEach(function(n){var i=$e(n);if(i[0]==="<Relationship"){var a={};a.Type=i.Type,a.Target=i.Target,a.Id=i.Id,i.TargetMode&&(a.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:Bd(i.Target,e);r[l]=a,s[i.Id]=a}}),r["!id"]=s,r}var EV="application/vnd.oasis.opendocument.spreadsheet";function SV(t,e){for(var r=ib(t),s,n;s=Ju.exec(r);)switch(s[3]){case"manifest":break;case"file-entry":if(n=$e(s[0],!1),n.path=="/"&&n.type!==EV)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw s}}var cu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],CV=function(){for(var t=new Array(cu.length),e=0;e<cu.length;++e){var r=cu[e],s="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+s+"[^>]*>([\\s\\S]*?)</"+s+">")}return t}();function rC(t){var e={};t=pt(t);for(var r=0;r<cu.length;++r){var s=cu[r],n=t.match(CV[r]);n!=null&&n.length>0&&(e[s[1]]=at(n[1])),s[2]==="date"&&e[s[1]]&&(e[s[1]]=vr(e[s[1]]))}return e}var TV=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function sC(t,e,r,s){var n=[];if(typeof t=="string")n=z_(t,s);else for(var i=0;i<t.length;++i)n=n.concat(t[i].map(function(u){return{v:u}}));var a=typeof e=="string"?z_(e,s).map(function(u){return u.v}):e,l=0,c=0;if(a.length>0)for(var d=0;d!==n.length;d+=2){switch(c=+n[d+1].v,n[d].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=a.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=c,r.DefinedNames=a.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=a.slice(l,l+c);break}l+=c}}function AV(t,e,r){var s={};return e||(e={}),t=pt(t),TV.forEach(function(n){var i=(t.match(Zu(n[0]))||[])[1];switch(n[2]){case"string":i&&(e[n[1]]=at(i));break;case"bool":e[n[1]]=i==="true";break;case"raw":var a=t.match(new RegExp("<"+n[0]+"[^>]*>([\\s\\S]*?)</"+n[0]+">"));a&&a.length>0&&(s[n[1]]=a[1]);break}}),s.HeadingPairs&&s.TitlesOfParts&&sC(s.HeadingPairs,s.TitlesOfParts,e,r),e}var FV=/<[^>]+>[^<]*/g;function PV(t,e){var r={},s="",n=t.match(FV);if(n)for(var i=0;i!=n.length;++i){var a=n[i],l=$e(a);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":s=at(l.name);break;case"</property>":s=null;break;default:if(a.indexOf("<vt:")===0){var c=a.split(">"),d=c[0].slice(4),u=c[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[s]=at(u);break;case"bool":r[s]=jt(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[s]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[s]=parseFloat(u);break;case"filetime":case"date":r[s]=vr(u);break;case"cy":case"error":r[s]=at(u);break;default:if(d.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",a,d,c)}}else if(a.slice(0,2)!=="</"){if(e.WTF)throw new Error(a)}}}return r}var MV={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Lp;function RV(t,e,r){Lp||(Lp=rb(MV)),e=Lp[e]||e,t[e]=r}function fb(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function nC(t,e,r){var s=t.l,n=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-s&3;)++t.l;return n}function iC(t,e,r){var s=t.read_shift(0,"lpwstr");return r&&(t.l+=4-(s.length+1&3)&3),s}function aC(t,e,r){return e===31?iC(t):nC(t,e,r)}function K1(t,e,r){return aC(t,e,r===!1?0:4)}function DV(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return aC(t,e,0)}function OV(t){for(var e=t.read_shift(4),r=[],s=0;s!=e;++s){var n=t.l;r[s]=t.read_shift(0,"lpwstr").replace(rs,""),t.l-n&2&&(t.l+=2)}return r}function LV(t){for(var e=t.read_shift(4),r=[],s=0;s!=e;++s)r[s]=t.read_shift(0,"lpstr-cp").replace(rs,"");return r}function IV(t){var e=t.l,r=_m(t,eC);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var s=_m(t,hs);return[r,s]}function BV(t){for(var e=t.read_shift(4),r=[],s=0;s<e/2;++s)r.push(IV(t));return r}function Z_(t,e){for(var r=t.read_shift(4),s={},n=0;n!=r;++n){var i=t.read_shift(4),a=t.read_shift(4);s[i]=t.read_shift(a,e===1200?"utf16le":"utf8").replace(rs,"").replace(Id,"!"),e===1200&&a%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>2+1<<2),s}function oC(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function $V(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function _m(t,e,r){var s=t.read_shift(2),n,i=r||{};if(t.l+=2,e!==K_&&s!==e&&vV.indexOf(e)===-1&&!((e&65534)==4126&&(s&65534)==4126))throw new Error("Expected type "+e+" saw "+s);switch(e===K_?s:e){case 2:return n=t.read_shift(2,"i"),i.raw||(t.l+=2),n;case 3:return n=t.read_shift(4,"i"),n;case 11:return t.read_shift(4)!==0;case 19:return n=t.read_shift(4),n;case 30:return nC(t,s,4).replace(rs,"");case 31:return iC(t);case 64:return fb(t);case 65:return oC(t);case 71:return $V(t);case 80:return K1(t,s,!i.raw).replace(rs,"");case 81:return DV(t,s).replace(rs,"");case 4108:return BV(t);case 4126:case 4127:return s==4127?OV(t):LV(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+s)}}function J_(t,e){var r=t.l,s=t.read_shift(4),n=t.read_shift(4),i=[],a=0,l=0,c=-1,d={};for(a=0;a!=n;++a){var u=t.read_shift(4),h=t.read_shift(4);i[a]=[u,h+r]}i.sort(function(b,y){return b[1]-y[1]});var f={};for(a=0;a!=n;++a){if(t.l!==i[a][1]){var m=!0;if(a>0&&e)switch(e[i[a-1][0]].t){case 2:t.l+2===i[a][1]&&(t.l+=2,m=!1);break;case 80:t.l<=i[a][1]&&(t.l=i[a][1],m=!1);break;case 4108:t.l<=i[a][1]&&(t.l=i[a][1],m=!1);break}if((!e||a==0)&&t.l<=i[a][1]&&(m=!1,t.l=i[a][1]),m)throw new Error("Read Error: Expected address "+i[a][1]+" at "+t.l+" :"+a)}if(e){var x=e[i[a][0]];if(f[x.n]=_m(t,x.t,{raw:!0}),x.p==="version"&&(f[x.n]=String(f[x.n]>>16)+"."+("0000"+String(f[x.n]&65535)).slice(-4)),x.n=="CodePage")switch(f[x.n]){case 0:f[x.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:vn(l=f[x.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+f[x.n])}}else if(i[a][0]===1){if(l=f.CodePage=_m(t,hb),vn(l),c!==-1){var p=t.l;t.l=i[c][1],d=Z_(t,l),t.l=p}}else if(i[a][0]===0){if(l===0){c=a,t.l=i[a+1][1];continue}d=Z_(t,l)}else{var g=d[i[a][0]],v;switch(t[t.l]){case 65:t.l+=4,v=oC(t);break;case 30:t.l+=4,v=K1(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,v=K1(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,v=t.read_shift(4,"i");break;case 19:t.l+=4,v=t.read_shift(4);break;case 5:t.l+=4,v=t.read_shift(8,"f");break;case 11:t.l+=4,v=Ut(t,4);break;case 64:t.l+=4,v=vr(fb(t));break;default:throw new Error("unparsed value: "+t[t.l])}f[g]=v}}return t.l=r+s,f}function eN(t,e,r){var s=t.content;if(!s)return{};wr(s,0);var n,i,a,l,c=0;s.chk("feff","Byte Order: "),s.read_shift(2);var d=s.read_shift(4),u=s.read_shift(16);if(u!==rt.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(n=s.read_shift(4),n!==1&&n!==2)throw new Error("Unrecognized #Sets: "+n);if(i=s.read_shift(16),l=s.read_shift(4),n===1&&l!==s.l)throw new Error("Length mismatch: "+l+" !== "+s.l);n===2&&(a=s.read_shift(16),c=s.read_shift(4));var h=J_(s,e),f={SystemIdentifier:d};for(var m in h)f[m]=h[m];if(f.FMTID=i,n===1)return f;if(c-s.l==2&&(s.l+=2),s.l!==c)throw new Error("Length mismatch 2: "+s.l+" !== "+c);var x;try{x=J_(s,null)}catch{}for(m in x)f[m]=x[m];return f.FMTID=[i,a],f}function zi(t,e){return t.read_shift(e),null}function zV(t,e,r){for(var s=[],n=t.l+e;t.l<n;)s.push(r(t,n-t.l));if(n!==t.l)throw new Error("Slurp error");return s}function Ut(t,e){return t.read_shift(e)===1}function Zt(t){return t.read_shift(2,"u")}function lC(t,e){return zV(t,e,Zt)}function UV(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function Dh(t,e,r){var s=t.read_shift(r&&r.biff>=12?2:1),n="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=t.read_shift(1);i&&(n="dbcs-cont")}else r.biff==12&&(n="wstr");r.biff>=2&&r.biff<=5&&(n="cpstr");var a=s?t.read_shift(s,n):"";return a}function VV(t){var e=t.read_shift(2),r=t.read_shift(1),s=r&4,n=r&8,i=1+(r&1),a=0,l,c={};n&&(a=t.read_shift(2)),s&&(l=t.read_shift(4));var d=i==2?"dbcs-cont":"sbcs-cont",u=e===0?"":t.read_shift(e,d);return n&&(t.l+=4*a),s&&(t.l+=l),c.t=u,n||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function el(t,e,r){var s;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var n=t.read_shift(1);return n===0?s=t.read_shift(e,"sbcs-cont"):s=t.read_shift(e,"dbcs-cont"),s}function Oh(t,e,r){var s=t.read_shift(r&&r.biff==2?1:2);return s===0?(t.l++,""):el(t,s,r)}function xl(t,e,r){if(r.biff>5)return Oh(t,e,r);var s=t.read_shift(1);return s===0?(t.l++,""):t.read_shift(s,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function WV(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function HV(t){var e=t.read_shift(4),r=t.l,s=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(s=!0),t.l=r);var n=t.read_shift((s?e-24:e)>>1,"utf16le").replace(rs,"");return s&&(t.l+=24),n}function YV(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var s=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var n=t.read_shift(4);if(n===0)return r+s.replace(/\\/g,"/");var i=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var a=t.read_shift(i>>1,"utf16le").replace(rs,"");return r+a}function qV(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return HV(t);case"0303000000000000c000000000000046":return YV(t);default:throw new Error("Unsupported Moniker "+r)}}function O0(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(rs,""):"";return r}function GV(t,e){var r=t.l+e,s=t.read_shift(4);if(s!==2)throw new Error("Unrecognized streamVersion: "+s);var n=t.read_shift(2);t.l+=2;var i,a,l,c,d="",u,h;n&16&&(i=O0(t,r-t.l)),n&128&&(a=O0(t,r-t.l)),(n&257)===257&&(l=O0(t,r-t.l)),(n&257)===1&&(c=qV(t,r-t.l)),n&8&&(d=O0(t,r-t.l)),n&32&&(u=t.read_shift(16)),n&64&&(h=fb(t)),t.l=r;var f=a||l||c||"";f&&d&&(f+="#"+d),f||(f="#"+d),n&2&&f.charAt(0)=="/"&&f.charAt(1)!="/"&&(f="file://"+f);var m={Target:f};return u&&(m.guid=u),h&&(m.time=h),i&&(m.Tooltip=i),m}function cC(t){var e=t.read_shift(1),r=t.read_shift(1),s=t.read_shift(1),n=t.read_shift(1);return[e,r,s,n]}function dC(t,e){var r=cC(t);return r[3]=0,r}function ei(t){var e=t.read_shift(2),r=t.read_shift(2),s=t.read_shift(2);return{r:e,c:r,ixfe:s}}function KV(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function XV(t,e,r){return e===0?"":xl(t,e,r)}function QV(t,e,r){var s=r.biff>8?4:2,n=t.read_shift(s),i=t.read_shift(s,"i"),a=t.read_shift(s,"i");return[n,i,a]}function uC(t){var e=t.read_shift(2),r=ub(t);return[e,r]}function ZV(t,e,r){t.l+=4,e-=4;var s=t.l+e,n=Dh(t,e,r),i=t.read_shift(2);if(s-=t.l,i!==s)throw new Error("Malformed AddinUdf: padding = "+s+" != "+i);return t.l+=i,n}function kx(t){var e=t.read_shift(2),r=t.read_shift(2),s=t.read_shift(2),n=t.read_shift(2);return{s:{c:s,r:e},e:{c:n,r}}}function hC(t){var e=t.read_shift(2),r=t.read_shift(2),s=t.read_shift(1),n=t.read_shift(1);return{s:{c:s,r:e},e:{c:n,r}}}var JV=hC;function fC(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),s=t.read_shift(2);return t.l+=12,[r,e,s]}function eW(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function tW(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Ar(t){t.l+=2,t.l+=t.read_shift(2)}var rW={0:Ar,4:Ar,5:Ar,6:Ar,7:tW,8:Ar,9:Ar,10:Ar,11:Ar,12:Ar,13:eW,14:Ar,15:Ar,16:Ar,17:Ar,18:Ar,19:Ar,20:Ar,21:fC};function sW(t,e){for(var r=t.l+e,s=[];t.l<r;){var n=t.read_shift(2);t.l-=2;try{s.push(rW[n](t,r-t.l))}catch{return t.l=r,s}}return t.l!=r&&(t.l=r),s}function L0(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function nW(t,e){return e===0||t.read_shift(2),1200}function iW(t,e,r){if(r.enc)return t.l+=e,"";var s=t.l,n=xl(t,0,r);return t.read_shift(e+s-t.l),n}function aW(t,e,r){var s=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:s&16,fBelow:s&64,fRight:s&128}}function oW(t,e,r){var s=t.read_shift(4),n=t.read_shift(1)&3,i=t.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var a=Dh(t,0,r);return a.length===0&&(a="Sheet1"),{pos:s,hs:n,dt:i,name:a}}function lW(t,e){for(var r=t.l+e,s=t.read_shift(4),n=t.read_shift(4),i=[],a=0;a!=n&&t.l<r;++a)i.push(VV(t));return i.Count=s,i.Unique=n,i}function cW(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function dW(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var s=t.read_shift(1);return t.l+=3,s&7&&(e.level=s&7),s&32&&(e.hidden=!0),s&64&&(e.hpt=r/20),e}function uW(t){var e=KV(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function hW(t){return t.read_shift(2),t.read_shift(4)}function tN(t,e,r){var s=0;r&&r.biff==2||(s=t.read_shift(2));var n=t.read_shift(2);r&&r.biff==2&&(s=1-(n>>15),n&=32767);var i={Unsynced:s&1,DyZero:(s&2)>>1,ExAsc:(s&4)>>2,ExDsc:(s&8)>>3};return[i,n]}function fW(t){var e=t.read_shift(2),r=t.read_shift(2),s=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2),a=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2),d=t.read_shift(2);return{Pos:[e,r],Dim:[s,n],Flags:i,CurTab:a,FirstTab:l,Selected:c,TabRatio:d}}function mW(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var s=t.read_shift(2);return{RTL:s&64}}function xW(){}function pW(t,e,r){var s={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return s.name=Dh(t,0,r),s}function gW(t){var e=ei(t);return e.isst=t.read_shift(4),e}function vW(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var s=t.l+e,n=ei(t);r.biff==2&&t.l++;var i=Oh(t,s-t.l,r);return n.val=i,n}function yW(t,e,r){var s=t.read_shift(2),n=xl(t,0,r);return[s,n]}var bW=xl;function rN(t,e,r){var s=t.l+e,n=r.biff==8||!r.biff?4:2,i=t.read_shift(n),a=t.read_shift(n),l=t.read_shift(2),c=t.read_shift(2);return t.l=s,{s:{r:i,c:l},e:{r:a,c}}}function wW(t){var e=t.read_shift(2),r=t.read_shift(2),s=uC(t);return{r:e,c:r,ixfe:s[0],rknum:s[1]}}function kW(t,e){for(var r=t.l+e-2,s=t.read_shift(2),n=t.read_shift(2),i=[];t.l<r;)i.push(uC(t));if(t.l!==r)throw new Error("MulRK read error");var a=t.read_shift(2);if(i.length!=a-n+1)throw new Error("MulRK length mismatch");return{r:s,c:n,C:a,rkrec:i}}function _W(t,e){for(var r=t.l+e-2,s=t.read_shift(2),n=t.read_shift(2),i=[];t.l<r;)i.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var a=t.read_shift(2);if(i.length!=a-n+1)throw new Error("MulBlank length mismatch");return{r:s,c:n,C:a,ixfe:i}}function NW(t,e,r,s){var n={},i=t.read_shift(4),a=t.read_shift(4),l=t.read_shift(4),c=t.read_shift(2);return n.patternType=wV[l>>26],s.cellStyles&&(n.alc=i&7,n.fWrap=i>>3&1,n.alcV=i>>4&7,n.fJustLast=i>>7&1,n.trot=i>>8&255,n.cIndent=i>>16&15,n.fShrinkToFit=i>>20&1,n.iReadOrder=i>>22&2,n.fAtrNum=i>>26&1,n.fAtrFnt=i>>27&1,n.fAtrAlc=i>>28&1,n.fAtrBdr=i>>29&1,n.fAtrPat=i>>30&1,n.fAtrProt=i>>31&1,n.dgLeft=a&15,n.dgRight=a>>4&15,n.dgTop=a>>8&15,n.dgBottom=a>>12&15,n.icvLeft=a>>16&127,n.icvRight=a>>23&127,n.grbitDiag=a>>30&3,n.icvTop=l&127,n.icvBottom=l>>7&127,n.icvDiag=l>>14&127,n.dgDiag=l>>21&15,n.icvFore=c&127,n.icvBack=c>>7&127,n.fsxButton=c>>14&1),n}function jW(t,e,r){var s={};return s.ifnt=t.read_shift(2),s.numFmtId=t.read_shift(2),s.flags=t.read_shift(2),s.fStyle=s.flags>>2&1,e-=6,s.data=NW(t,e,s.fStyle,r),s}function EW(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function sN(t,e,r){var s=ei(t);(r.biff==2||e==9)&&++t.l;var n=UV(t);return s.val=n,s.t=n===!0||n===!1?"b":"e",s}function SW(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var s=ei(t),n=Or(t);return s.val=n,s}var nN=XV;function CW(t,e,r){var s=t.l+e,n=t.read_shift(2),i=t.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,n];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var a=el(t,i),l=[];s>t.l;)l.push(Oh(t));return[i,n,a,l]}function iN(t,e,r){var s=t.read_shift(2),n,i={fBuiltIn:s&1,fWantAdvise:s>>>1&1,fWantPict:s>>>2&1,fOle:s>>>3&1,fOleLink:s>>>4&1,cf:s>>>5&1023,fIcon:s>>>15&1};return r.sbcch===14849&&(n=ZV(t,e-2,r)),i.body=n||t.read_shift(e-2),typeof n=="string"&&(i.Name=n),i}var TW=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function aN(t,e,r){var s=t.l+e,n=t.read_shift(2),i=t.read_shift(1),a=t.read_shift(1),l=t.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),c=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var d=el(t,a,r);n&32&&(d=TW[d.charCodeAt(0)]);var u=s-t.l;r&&r.biff==2&&--u;var h=s==t.l||l===0||!(u>0)?[]:dG(t,u,r,l);return{chKey:i,Name:d,itab:c,rgce:h}}function mC(t,e,r){if(r.biff<8)return AW(t,e,r);for(var s=[],n=t.l+e,i=t.read_shift(r.biff>8?4:2);i--!==0;)s.push(QV(t,r.biff>8?12:6,r));if(t.l!=n)throw new Error("Bad ExternSheet: "+t.l+" != "+n);return s}function AW(t,e,r){t[t.l+1]==3&&t[t.l]++;var s=Dh(t,e,r);return s.charCodeAt(0)==3?s.slice(1):s}function FW(t,e,r){if(r.biff<8){t.l+=e;return}var s=t.read_shift(2),n=t.read_shift(2),i=el(t,s,r),a=el(t,n,r);return[i,a]}function PW(t,e,r){var s=hC(t);t.l++;var n=t.read_shift(1);return e-=8,[uG(t,e,r),n,s]}function oN(t,e,r){var s=JV(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[s,lG(t,e,r)]}function MW(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,s=t.read_shift(4);return[e,r,s]}function RW(t,e,r){if(!(r.biff<8)){var s=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2),a=t.read_shift(2),l=xl(t,0,r);return r.biff<8&&t.read_shift(1),[{r:s,c:n},l,a,i]}}function DW(t,e,r){return RW(t,e,r)}function OW(t,e){for(var r=[],s=t.read_shift(2);s--;)r.push(kx(t));return r}function LW(t,e,r){if(r&&r.biff<8)return BW(t,e,r);var s=fC(t),n=sW(t,e-22,s[1]);return{cmo:s,ft:n}}var IW={8:function(t,e){var r=t.l+e;t.l+=10;var s=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var n=t.read_shift(1);return t.l+=n,t.l=r,{fmt:s}}};function BW(t,e,r){t.l+=4;var s=t.read_shift(2),n=t.read_shift(2),i=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var a=[];return a.push((IW[s]||Hr)(t,e,r)),{cmo:[n,s,i],ft:a}}function $W(t,e,r){var s=t.l,n="";try{t.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],a;[0,5,7,11,12,14].indexOf(i)==-1?t.l+=6:a=WV(t,6,r);var l=t.read_shift(2);t.read_shift(2),Zt(t,2);var c=t.read_shift(2);t.l+=c;for(var d=1;d<t.lens.length-1;++d){if(t.l-s!=t.lens[d])throw new Error("TxO: bad continue record");var u=t[t.l],h=el(t,t.lens[d+1]-t.lens[d]-1);if(n+=h,n.length>=(u?l:2*l))break}if(n.length!==l&&n.length!==l*2)throw new Error("cchText: "+l+" != "+n.length);return t.l=s+e,{t:n}}catch{return t.l=s+e,{t:n}}}function zW(t,e){var r=kx(t);t.l+=16;var s=GV(t,e-24);return[r,s]}function UW(t,e){t.read_shift(2);var r=kx(t),s=t.read_shift((e-10)/2,"dbcs-cont");return s=s.replace(rs,""),[r,s]}function VW(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=X_[r]||r,r=t.read_shift(2),e[1]=X_[r]||r,e}function WW(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(dC(t));return r}function HW(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(dC(t));return r}function YW(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function xC(t,e,r){if(!r.cellStyles)return Hr(t,e);var s=r&&r.biff>=12?4:2,n=t.read_shift(s),i=t.read_shift(s),a=t.read_shift(s),l=t.read_shift(s),c=t.read_shift(2);s==2&&(t.l+=2);var d={s:n,e:i,w:a,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(d.level=c>>8&7),d}function qW(t,e){var r={};return e<32||(t.l+=16,r.header=Or(t),r.footer=Or(t),t.l+=2),r}function GW(t,e,r){var s={area:!1};if(r.biff!=5)return t.l+=e,s;var n=t.read_shift(1);return t.l+=3,n&16&&(s.area=!0),s}var KW=ei,XW=lC,QW=Oh;function ZW(t){var e=t.read_shift(2),r=t.read_shift(2),s=t.read_shift(4),n={fmt:e,env:r,len:s,data:t.slice(t.l,t.l+s)};return t.l+=s,n}function JW(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var s=ei(t);++t.l;var n=xl(t,e-7,r);return s.t="str",s.val=n,s}function eH(t){var e=ei(t);++t.l;var r=Or(t);return e.t="n",e.val=r,e}function tH(t){var e=ei(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function rH(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function sH(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function nH(t,e,r){var s=t.l+e,n=ei(t),i=t.read_shift(2),a=el(t,i,r);return t.l=s,n.t="str",n.val=a,n}var iH=[2,3,48,49,131,139,140,245],lN=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=rb({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var d=[],u=$a(1);switch(c.type){case"base64":u=pn(Ps(l));break;case"binary":u=pn(l);break;case"buffer":case"array":u=l;break}wr(u,0);var h=u.read_shift(1),f=!!(h&136),m=!1,x=!1;switch(h){case 2:break;case 3:break;case 48:m=!0,f=!0;break;case 49:m=!0,f=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var p=0,g=521;h==2&&(p=u.read_shift(2)),u.l+=3,h!=2&&(p=u.read_shift(4)),p>1048576&&(p=1e6),h!=2&&(g=u.read_shift(2));var v=u.read_shift(2),b=c.codepage||1252;h!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(b=t[u[u.l]]),u.l+=1,u.l+=2),x&&(u.l+=36);for(var y=[],k={},N=Math.min(u.length,h==2?521:g-10-(m?264:0)),E=x?32:11;u.l<N&&u[u.l]!=13;)switch(k={},k.name=Ji.utils.decode(b,u.slice(u.l,u.l+E)).replace(/[\u0000\r\n].*$/g,""),u.l+=E,k.type=String.fromCharCode(u.read_shift(1)),h!=2&&!x&&(k.offset=u.read_shift(4)),k.len=u.read_shift(1),h==2&&(k.offset=u.read_shift(2)),k.dec=u.read_shift(1),k.name.length&&y.push(k),h!=2&&(u.l+=x?13:14),k.type){case"B":(!m||k.len!=8)&&c.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+k.type)}if(u[u.l]!==13&&(u.l=g-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=g;var j=0,_=0;for(d[0]=[],_=0;_!=y.length;++_)d[0][_]=y[_].name;for(;p-- >0;){if(u[u.l]===42){u.l+=v;continue}for(++u.l,d[++j]=[],_=0,_=0;_!=y.length;++_){var S=u.slice(u.l,u.l+y[_].len);u.l+=y[_].len,wr(S,0);var C=Ji.utils.decode(b,S);switch(y[_].type){case"C":C.trim().length&&(d[j][_]=C.replace(/\s+$/,""));break;case"D":C.length===8?d[j][_]=new Date(+C.slice(0,4),+C.slice(4,6)-1,+C.slice(6,8)):d[j][_]=C;break;case"F":d[j][_]=parseFloat(C.trim());break;case"+":case"I":d[j][_]=x?S.read_shift(-4,"i")^2147483648:S.read_shift(4,"i");break;case"L":switch(C.trim().toUpperCase()){case"Y":case"T":d[j][_]=!0;break;case"N":case"F":d[j][_]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+C+"|")}break;case"M":if(!f)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));d[j][_]="##MEMO##"+(x?parseInt(C.trim(),10):S.read_shift(4));break;case"N":C=C.replace(/\u0000/g,"").trim(),C&&C!="."&&(d[j][_]=+C||0);break;case"@":d[j][_]=new Date(S.read_shift(-8,"f")-621356832e5);break;case"T":d[j][_]=new Date((S.read_shift(4)-2440588)*864e5+S.read_shift(4));break;case"Y":d[j][_]=S.read_shift(4,"i")/1e4+S.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[j][_]=-S.read_shift(-8,"f");break;case"B":if(m&&y[_].len==8){d[j][_]=S.read_shift(8,"f");break}case"G":case"P":S.l+=y[_].len;break;case"0":if(y[_].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+y[_].type)}}}if(h!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=y,d}function s(l,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var u=Kc(r(l,d),d);return u["!cols"]=d.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete d.DBF,u}function n(l,c){try{return Ka(s(l,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function a(l,c){var d=c||{};if(+d.codepage>=0&&vn(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var u=Y1(),h=rv(l,{header:1,raw:!0,cellDates:!0}),f=h[0],m=h.slice(1),x=l["!cols"]||[],p=0,g=0,v=0,b=1;for(p=0;p<f.length;++p){if(((x[p]||{}).DBF||{}).name){f[p]=x[p].DBF.name,++v;continue}if(f[p]!=null){if(++v,typeof f[p]=="number"&&(f[p]=f[p].toString(10)),typeof f[p]!="string")throw new Error("DBF Invalid column name "+f[p]+" |"+typeof f[p]+"|");if(f.indexOf(f[p])!==p){for(g=0;g<1024;++g)if(f.indexOf(f[p]+"_"+g)==-1){f[p]+="_"+g;break}}}}var y=zt(l["!ref"]),k=[],N=[],E=[];for(p=0;p<=y.e.c-y.s.c;++p){var j="",_="",S=0,C=[];for(g=0;g<m.length;++g)m[g][p]!=null&&C.push(m[g][p]);if(C.length==0||f[p]==null){k[p]="?";continue}for(g=0;g<C.length;++g){switch(typeof C[g]){case"number":_="B";break;case"string":_="C";break;case"boolean":_="L";break;case"object":_=C[g]instanceof Date?"D":"C";break;default:_="C"}S=Math.max(S,String(C[g]).length),j=j&&j!=_?"C":_}S>250&&(S=250),_=((x[p]||{}).DBF||{}).type,_=="C"&&x[p].DBF.len>S&&(S=x[p].DBF.len),j=="B"&&_=="N"&&(j="N",E[p]=x[p].DBF.dec,S=x[p].DBF.len),N[p]=j=="C"||_=="N"?S:i[j]||0,b+=N[p],k[p]=j}var F=u.next(32);for(F.write_shift(4,318902576),F.write_shift(4,m.length),F.write_shift(2,296+32*v),F.write_shift(2,b),p=0;p<4;++p)F.write_shift(4,0);for(F.write_shift(4,0|(+e[f3]||3)<<8),p=0,g=0;p<f.length;++p)if(f[p]!=null){var P=u.next(32),B=(f[p].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);P.write_shift(1,B,"sbcs"),P.write_shift(1,k[p]=="?"?"C":k[p],"sbcs"),P.write_shift(4,g),P.write_shift(1,N[p]||i[k[p]]||0),P.write_shift(1,E[p]||0),P.write_shift(1,2),P.write_shift(4,0),P.write_shift(1,0),P.write_shift(4,0),P.write_shift(4,0),g+=N[p]||i[k[p]]||0}var Q=u.next(264);for(Q.write_shift(4,13),p=0;p<65;++p)Q.write_shift(4,0);for(p=0;p<m.length;++p){var D=u.next(b);for(D.write_shift(1,0),g=0;g<f.length;++g)if(f[g]!=null)switch(k[g]){case"L":D.write_shift(1,m[p][g]==null?63:m[p][g]?84:70);break;case"B":D.write_shift(8,m[p][g]||0,"f");break;case"N":var I="0";for(typeof m[p][g]=="number"&&(I=m[p][g].toFixed(E[g]||0)),v=0;v<N[g]-I.length;++v)D.write_shift(1,32);D.write_shift(1,I,"sbcs");break;case"D":m[p][g]?(D.write_shift(4,("0000"+m[p][g].getFullYear()).slice(-4),"sbcs"),D.write_shift(2,("00"+(m[p][g].getMonth()+1)).slice(-2),"sbcs"),D.write_shift(2,("00"+m[p][g].getDate()).slice(-2),"sbcs")):D.write_shift(8,"00000000","sbcs");break;case"C":var te=String(m[p][g]!=null?m[p][g]:"").slice(0,N[g]);for(D.write_shift(1,te,"sbcs"),v=0;v<N[g]-te.length;++v)D.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:n,to_sheet:s,from_sheet:a}}(),aH=function(){var t={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Xn(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(f,m){var x=t[m];return typeof x=="number"?N_(x):x},s=function(f,m,x){var p=m.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return p==59?f:N_(p)};t["|"]=254;function n(f,m){switch(m.type){case"base64":return i(Ps(f),m);case"binary":return i(f,m);case"buffer":return i(tt&&Buffer.isBuffer(f)?f.toString("binary"):ul(f),m);case"array":return i(Jo(f),m)}throw new Error("Unrecognized type "+m.type)}function i(f,m){var x=f.split(/[\n\r]+/),p=-1,g=-1,v=0,b=0,y=[],k=[],N=null,E={},j=[],_=[],S=[],C=0,F;for(+m.codepage>=0&&vn(+m.codepage);v!==x.length;++v){C=0;var P=x[v].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,s).replace(e,r),B=P.replace(/;;/g,"\0").split(";").map(function(Y){return Y.replace(/\u0000/g,";")}),Q=B[0],D;if(P.length>0)switch(Q){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":B[1].charAt(0)=="P"&&k.push(P.slice(3).replace(/;;/g,";"));break;case"C":var I=!1,te=!1,re=!1,W=!1,K=-1,Z=-1;for(b=1;b<B.length;++b)switch(B[b].charAt(0)){case"A":break;case"X":g=parseInt(B[b].slice(1))-1,te=!0;break;case"Y":for(p=parseInt(B[b].slice(1))-1,te||(g=0),F=y.length;F<=p;++F)y[F]=[];break;case"K":D=B[b].slice(1),D.charAt(0)==='"'?D=D.slice(1,D.length-1):D==="TRUE"?D=!0:D==="FALSE"?D=!1:isNaN(_n(D))?isNaN(Mc(D).getDate())||(D=vr(D)):(D=_n(D),N!==null&&qc(N)&&(D=wx(D))),I=!0;break;case"E":W=!0;var M=rc(B[b].slice(1),{r:p,c:g});y[p][g]=[y[p][g],M];break;case"S":re=!0,y[p][g]=[y[p][g],"S5S"];break;case"G":break;case"R":K=parseInt(B[b].slice(1))-1;break;case"C":Z=parseInt(B[b].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+P)}if(I&&(y[p][g]&&y[p][g].length==2?y[p][g][0]=D:y[p][g]=D,N=null),re){if(W)throw new Error("SYLK shared formula cannot have own formula");var X=K>-1&&y[K][Z];if(!X||!X[1])throw new Error("SYLK shared formula cannot find base");y[p][g][1]=jC(X[1],{r:p-K,c:g-Z})}break;case"F":var V=0;for(b=1;b<B.length;++b)switch(B[b].charAt(0)){case"X":g=parseInt(B[b].slice(1))-1,++V;break;case"Y":for(p=parseInt(B[b].slice(1))-1,F=y.length;F<=p;++F)y[F]=[];break;case"M":C=parseInt(B[b].slice(1))/20;break;case"F":break;case"G":break;case"P":N=k[parseInt(B[b].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(S=B[b].slice(1).split(" "),F=parseInt(S[0],10);F<=parseInt(S[1],10);++F)C=parseInt(S[2],10),_[F-1]=C===0?{hidden:!0}:{wch:C},Rc(_[F-1]);break;case"C":g=parseInt(B[b].slice(1))-1,_[g]||(_[g]={});break;case"R":p=parseInt(B[b].slice(1))-1,j[p]||(j[p]={}),C>0?(j[p].hpt=C,j[p].hpx=rh(C)):C===0&&(j[p].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+P)}V<1&&(N=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+P)}}return j.length>0&&(E["!rows"]=j),_.length>0&&(E["!cols"]=_),m&&m.sheetRows&&(y=y.slice(0,m.sheetRows)),[y,E]}function a(f,m){var x=n(f,m),p=x[0],g=x[1],v=Kc(p,m);return Xn(g).forEach(function(b){v[b]=g[b]}),v}function l(f,m){return Ka(a(f,m),m)}function c(f,m,x,p){var g="C;Y"+(x+1)+";X"+(p+1)+";K";switch(f.t){case"n":g+=f.v||0,f.f&&!f.F&&(g+=";E"+YY(f.f,{r:x,c:p}));break;case"b":g+=f.v?"TRUE":"FALSE";break;case"e":g+=f.w||f.v;break;case"d":g+='"'+(f.w||f.v)+'"';break;case"s":g+='"'+f.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function d(f,m){m.forEach(function(x,p){var g="F;W"+(p+1)+" "+(p+1)+" ";x.hidden?g+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=jm(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=Em(x.wpx)),typeof x.wch=="number"&&(g+=Math.round(x.wch))),g.charAt(g.length-1)!=" "&&f.push(g)})}function u(f,m){m.forEach(function(x,p){var g="F;";x.hidden?g+="M0;":x.hpt?g+="M"+20*x.hpt+";":x.hpx&&(g+="M"+20*kC(x.hpx)+";"),g.length>2&&f.push(g+"R"+(p+1))})}function h(f,m){var x=["ID;PWXL;N;E"],p=[],g=zt(f["!ref"]),v,b=Array.isArray(f),y=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),f["!cols"]&&d(x,f["!cols"]),f["!rows"]&&u(x,f["!rows"]),x.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var k=g.s.r;k<=g.e.r;++k)for(var N=g.s.c;N<=g.e.c;++N){var E=Ve({r:k,c:N});v=b?(f[k]||[])[N]:f[E],!(!v||v.v==null&&(!v.f||v.F))&&p.push(c(v,f,k,N))}return x.join(y)+y+p.join(y)+y+"E"+y}return{to_workbook:l,to_sheet:a,from_sheet:h}}(),oH=function(){function t(i,a){switch(a.type){case"base64":return e(Ps(i),a);case"binary":return e(i,a);case"buffer":return e(tt&&Buffer.isBuffer(i)?i.toString("binary"):ul(i),a);case"array":return e(Jo(i),a)}throw new Error("Unrecognized type "+a.type)}function e(i,a){for(var l=i.split(`
`),c=-1,d=-1,u=0,h=[];u!==l.length;++u){if(l[u].trim()==="BOT"){h[++c]=[],d=0;continue}if(!(c<0)){var f=l[u].trim().split(","),m=f[0],x=f[1];++u;for(var p=l[u]||"";(p.match(/["]/g)||[]).length&1&&u<l.length-1;)p+=`
`+l[++u];switch(p=p.trim(),+m){case-1:if(p==="BOT"){h[++c]=[],d=0;continue}else if(p!=="EOD")throw new Error("Unrecognized DIF special command "+p);break;case 0:p==="TRUE"?h[c][d]=!0:p==="FALSE"?h[c][d]=!1:isNaN(_n(x))?isNaN(Mc(x).getDate())?h[c][d]=x:h[c][d]=vr(x):h[c][d]=_n(x),++d;break;case 1:p=p.slice(1,p.length-1),p=p.replace(/""/g,'"'),p&&p.match(/^=".*"$/)&&(p=p.slice(2,-1)),h[c][d++]=p!==""?p:null;break}if(p==="EOD")break}}return a&&a.sheetRows&&(h=h.slice(0,a.sheetRows)),h}function r(i,a){return Kc(t(i,a),a)}function s(i,a){return Ka(r(i,a),a)}var n=function(){var i=function(c,d,u,h,f){c.push(d),c.push(u+","+h),c.push('"'+f.replace(/"/g,'""')+'"')},a=function(c,d,u,h){c.push(d+","+u),c.push(d==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(c){var d=[],u=zt(c["!ref"]),h,f=Array.isArray(c);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,u.e.r-u.s.r+1,""),i(d,"TUPLES",0,u.e.c-u.s.c+1,""),i(d,"DATA",0,0,"");for(var m=u.s.r;m<=u.e.r;++m){a(d,-1,0,"BOT");for(var x=u.s.c;x<=u.e.c;++x){var p=Ve({r:m,c:x});if(h=f?(c[m]||[])[x]:c[p],!h){a(d,1,0,"");continue}switch(h.t){case"n":var g=h.w;!g&&h.v!=null&&(g=h.v),g==null?h.f&&!h.F?a(d,1,0,"="+h.f):a(d,1,0,""):a(d,0,g,"V");break;case"b":a(d,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":a(d,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=Js(h.z||He[14],ns(vr(h.v)))),a(d,0,h.w,"V");break;default:a(d,1,0,"")}}}a(d,-1,0,"EOD");var v=`\r
`,b=d.join(v);return b}}();return{to_workbook:s,to_sheet:r,from_sheet:n}}(),lH=function(){function t(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(h,f){for(var m=h.split(`
`),x=-1,p=-1,g=0,v=[];g!==m.length;++g){var b=m[g].trim().split(":");if(b[0]==="cell"){var y=es(b[1]);if(v.length<=y.r)for(x=v.length;x<=y.r;++x)v[x]||(v[x]=[]);switch(x=y.r,p=y.c,b[2]){case"t":v[x][p]=t(b[3]);break;case"v":v[x][p]=+b[3];break;case"vtf":var k=b[b.length-1];case"vtc":switch(b[3]){case"nl":v[x][p]=!!+b[4];break;default:v[x][p]=+b[4];break}b[2]=="vtf"&&(v[x][p]=[v[x][p],k])}}}return f&&f.sheetRows&&(v=v.slice(0,f.sheetRows)),v}function s(h,f){return Kc(r(h,f),f)}function n(h,f){return Ka(s(h,f),f)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(h){if(!h||!h["!ref"])return"";for(var f=[],m=[],x,p="",g=Gc(h["!ref"]),v=Array.isArray(h),b=g.s.r;b<=g.e.r;++b)for(var y=g.s.c;y<=g.e.c;++y)if(p=Ve({r:b,c:y}),x=v?(h[b]||[])[y]:h[p],!(!x||x.v==null||x.t==="z")){switch(m=["cell",p,"t"],x.t){case"s":case"str":m.push(e(x.v));break;case"n":x.f?(m[2]="vtf",m[3]="n",m[4]=x.v,m[5]=e(x.f)):(m[2]="v",m[3]=x.v);break;case"b":m[2]="vt"+(x.f?"f":"c"),m[3]="nl",m[4]=x.v?"1":"0",m[5]=e(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var k=ns(vr(x.v));m[2]="vtc",m[3]="nd",m[4]=""+k,m[5]=x.w||Js(x.z||He[14],k);break;case"e":continue}f.push(m.join(":"))}return f.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),f.push("valueformat:1:text-wiki"),f.join(`
`)}function u(h){return[i,a,l,a,d(h),c].join(`
`)}return{to_workbook:n,to_sheet:s,from_sheet:u}}(),eh=function(){function t(u,h,f,m,x){x.raw?h[f][m]=u:u===""||(u==="TRUE"?h[f][m]=!0:u==="FALSE"?h[f][m]=!1:isNaN(_n(u))?isNaN(Mc(u).getDate())?h[f][m]=u:h[f][m]=vr(u):h[f][m]=_n(u))}function e(u,h){var f=h||{},m=[];if(!u||u.length===0)return m;for(var x=u.split(/[\r\n]/),p=x.length-1;p>=0&&x[p].length===0;)--p;for(var g=10,v=0,b=0;b<=p;++b)v=x[b].indexOf(" "),v==-1?v=x[b].length:v++,g=Math.max(g,v);for(b=0;b<=p;++b){m[b]=[];var y=0;for(t(x[b].slice(0,g).trim(),m,b,y,f),y=1;y<=(x[b].length-g)/10+1;++y)t(x[b].slice(g+(y-1)*10,g+y*10).trim(),m,b,y,f)}return f.sheetRows&&(m=m.slice(0,f.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},s={44:3,9:2,59:1,124:0};function n(u){for(var h={},f=!1,m=0,x=0;m<u.length;++m)(x=u.charCodeAt(m))==34?f=!f:!f&&x in r&&(h[x]=(h[x]||0)+1);x=[];for(m in h)Object.prototype.hasOwnProperty.call(h,m)&&x.push([h[m],m]);if(!x.length){h=s;for(m in h)Object.prototype.hasOwnProperty.call(h,m)&&x.push([h[m],m])}return x.sort(function(p,g){return p[0]-g[0]||s[p[1]]-s[g[1]]}),r[x.pop()[1]]||44}function i(u,h){var f=h||{},m="",x=f.dense?[]:{},p={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(m=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(m=u.charAt(4),u=u.slice(6)):m=n(u.slice(0,1024)):f&&f.FS?m=f.FS:m=n(u.slice(0,1024));var g=0,v=0,b=0,y=0,k=0,N=m.charCodeAt(0),E=!1,j=0,_=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var S=f.dateNF!=null?bU(f.dateNF):null;function C(){var F=u.slice(y,k),P={};if(F.charAt(0)=='"'&&F.charAt(F.length-1)=='"'&&(F=F.slice(1,-1).replace(/""/g,'"')),F.length===0)P.t="z";else if(f.raw)P.t="s",P.v=F;else if(F.trim().length===0)P.t="s",P.v=F;else if(F.charCodeAt(0)==61)F.charCodeAt(1)==34&&F.charCodeAt(F.length-1)==34?(P.t="s",P.v=F.slice(2,-1).replace(/""/g,'"')):GY(F)?(P.t="n",P.f=F.slice(1)):(P.t="s",P.v=F);else if(F=="TRUE")P.t="b",P.v=!0;else if(F=="FALSE")P.t="b",P.v=!1;else if(!isNaN(b=_n(F)))P.t="n",f.cellText!==!1&&(P.w=F),P.v=b;else if(!isNaN(Mc(F).getDate())||S&&F.match(S)){P.z=f.dateNF||He[14];var B=0;S&&F.match(S)&&(F=wU(F,f.dateNF,F.match(S)||[]),B=1),f.cellDates?(P.t="d",P.v=vr(F,B)):(P.t="n",P.v=ns(vr(F,B))),f.cellText!==!1&&(P.w=Js(P.z,P.v instanceof Date?ns(P.v):P.v)),f.cellNF||delete P.z}else P.t="s",P.v=F;if(P.t=="z"||(f.dense?(x[g]||(x[g]=[]),x[g][v]=P):x[Ve({c:v,r:g})]=P),y=k+1,_=u.charCodeAt(y),p.e.c<v&&(p.e.c=v),p.e.r<g&&(p.e.r=g),j==N)++v;else if(v=0,++g,f.sheetRows&&f.sheetRows<=g)return!0}e:for(;k<u.length;++k)switch(j=u.charCodeAt(k)){case 34:_===34&&(E=!E);break;case N:case 10:case 13:if(!E&&C())break e;break}return k-y>0&&C(),x["!ref"]=st(p),x}function a(u,h){return!(h&&h.PRN)||h.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,h):Kc(e(u,h),h)}function l(u,h){var f="",m=h.type=="string"?[0,0,0,0]:wb(u,h);switch(h.type){case"base64":f=Ps(u);break;case"binary":f=u;break;case"buffer":h.codepage==65001?f=u.toString("utf8"):h.codepage&&typeof Ji<"u"?f=Ji.utils.decode(h.codepage,u):f=tt&&Buffer.isBuffer(u)?u.toString("binary"):ul(u);break;case"array":f=Jo(u);break;case"string":f=u;break;default:throw new Error("Unrecognized type "+h.type)}return m[0]==239&&m[1]==187&&m[2]==191?f=pt(f.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?f=pt(f):h.type=="binary"&&typeof Ji<"u"&&h.codepage&&(f=Ji.utils.decode(h.codepage,Ji.utils.encode(28591,f))),f.slice(0,19)=="socialcalc:version:"?lH.to_sheet(h.type=="string"?f:pt(f),h):a(f,h)}function c(u,h){return Ka(l(u,h),h)}function d(u){for(var h=[],f=zt(u["!ref"]),m,x=Array.isArray(u),p=f.s.r;p<=f.e.r;++p){for(var g=[],v=f.s.c;v<=f.e.c;++v){var b=Ve({r:p,c:v});if(m=x?(u[p]||[])[v]:u[b],!m||m.v==null){g.push("          ");continue}for(var y=(m.w||(Di(m),m.w)||"").slice(0,10);y.length<10;)y+=" ";g.push(y+(v===0?" ":""))}h.push(g.join(""))}return h.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:d}}();function cH(t,e){var r=e||{},s=!!r.WTF;r.WTF=!0;try{var n=aH.to_workbook(t,r);return r.WTF=s,n}catch(i){if(r.WTF=s,!i.message.match(/SYLK bad record ID/)&&s)throw i;return eh.to_workbook(t,e)}}var du=function(){function t(M,X,V){if(M){wr(M,M.l||0);for(var Y=V.Enum||K;M.l<M.length;){var H=M.read_shift(2),ie=Y[H]||Y[65535],de=M.read_shift(2),xe=M.l+de,le=ie.f&&ie.f(M,de,V);if(M.l=xe,X(le,ie,H))return}}}function e(M,X){switch(X.type){case"base64":return r(pn(Ps(M)),X);case"binary":return r(pn(M),X);case"buffer":case"array":return r(M,X)}throw"Unsupported type "+X.type}function r(M,X){if(!M)return M;var V=X||{},Y=V.dense?[]:{},H="Sheet1",ie="",de=0,xe={},le=[],he=[],A={s:{r:0,c:0},e:{r:0,c:0}},Ce=V.sheetRows||0;if(M[2]==0&&(M[3]==8||M[3]==9)&&M.length>=16&&M[14]==5&&M[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(M[2]==2)V.Enum=K,t(M,function(Ee,gt,ur){switch(ur){case 0:V.vers=Ee,Ee>=4096&&(V.qpro=!0);break;case 6:A=Ee;break;case 204:Ee&&(ie=Ee);break;case 222:ie=Ee;break;case 15:case 51:V.qpro||(Ee[1].v=Ee[1].v.slice(1));case 13:case 14:case 16:ur==14&&(Ee[2]&112)==112&&(Ee[2]&15)>1&&(Ee[2]&15)<15&&(Ee[1].z=V.dateNF||He[14],V.cellDates&&(Ee[1].t="d",Ee[1].v=wx(Ee[1].v))),V.qpro&&Ee[3]>de&&(Y["!ref"]=st(A),xe[H]=Y,le.push(H),Y=V.dense?[]:{},A={s:{r:0,c:0},e:{r:0,c:0}},de=Ee[3],H=ie||"Sheet"+(de+1),ie="");var q=V.dense?(Y[Ee[0].r]||[])[Ee[0].c]:Y[Ve(Ee[0])];if(q){q.t=Ee[1].t,q.v=Ee[1].v,Ee[1].z!=null&&(q.z=Ee[1].z),Ee[1].f!=null&&(q.f=Ee[1].f);break}V.dense?(Y[Ee[0].r]||(Y[Ee[0].r]=[]),Y[Ee[0].r][Ee[0].c]=Ee[1]):Y[Ve(Ee[0])]=Ee[1];break}},V);else if(M[2]==26||M[2]==14)V.Enum=Z,M[2]==14&&(V.qpro=!0,M.l=0),t(M,function(Ee,gt,ur){switch(ur){case 204:H=Ee;break;case 22:Ee[1].v=Ee[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ee[3]>de&&(Y["!ref"]=st(A),xe[H]=Y,le.push(H),Y=V.dense?[]:{},A={s:{r:0,c:0},e:{r:0,c:0}},de=Ee[3],H="Sheet"+(de+1)),Ce>0&&Ee[0].r>=Ce)break;V.dense?(Y[Ee[0].r]||(Y[Ee[0].r]=[]),Y[Ee[0].r][Ee[0].c]=Ee[1]):Y[Ve(Ee[0])]=Ee[1],A.e.c<Ee[0].c&&(A.e.c=Ee[0].c),A.e.r<Ee[0].r&&(A.e.r=Ee[0].r);break;case 27:Ee[14e3]&&(he[Ee[14e3][0]]=Ee[14e3][1]);break;case 1537:he[Ee[0]]=Ee[1],Ee[0]==de&&(H=Ee[1]);break}},V);else throw new Error("Unrecognized LOTUS BOF "+M[2]);if(Y["!ref"]=st(A),xe[ie||H]=Y,le.push(ie||H),!he.length)return{SheetNames:le,Sheets:xe};for(var be={},ze=[],Be=0;Be<he.length;++Be)xe[le[Be]]?(ze.push(he[Be]||le[Be]),be[he[Be]]=xe[he[Be]]||xe[le[Be]]):(ze.push(he[Be]),be[he[Be]]={"!ref":"A1"});return{SheetNames:ze,Sheets:be}}function s(M,X){var V=X||{};if(+V.codepage>=0&&vn(+V.codepage),V.type=="string")throw new Error("Cannot write WK1 to JS string");var Y=Y1(),H=zt(M["!ref"]),ie=Array.isArray(M),de=[];on(Y,0,i(1030)),on(Y,6,c(H));for(var xe=Math.min(H.e.r,8191),le=H.s.r;le<=xe;++le)for(var he=jr(le),A=H.s.c;A<=H.e.c;++A){le===H.s.r&&(de[A]=cr(A));var Ce=de[A]+he,be=ie?(M[le]||[])[A]:M[Ce];if(!(!be||be.t=="z"))if(be.t=="n")(be.v|0)==be.v&&be.v>=-32768&&be.v<=32767?on(Y,13,m(le,A,be.v)):on(Y,14,p(le,A,be.v));else{var ze=Di(be);on(Y,15,h(le,A,ze.slice(0,239)))}}return on(Y,1),Y.end()}function n(M,X){var V=X||{};if(+V.codepage>=0&&vn(+V.codepage),V.type=="string")throw new Error("Cannot write WK3 to JS string");var Y=Y1();on(Y,0,a(M));for(var H=0,ie=0;H<M.SheetNames.length;++H)(M.Sheets[M.SheetNames[H]]||{})["!ref"]&&on(Y,27,W(M.SheetNames[H],ie++));var de=0;for(H=0;H<M.SheetNames.length;++H){var xe=M.Sheets[M.SheetNames[H]];if(!(!xe||!xe["!ref"])){for(var le=zt(xe["!ref"]),he=Array.isArray(xe),A=[],Ce=Math.min(le.e.r,8191),be=le.s.r;be<=Ce;++be)for(var ze=jr(be),Be=le.s.c;Be<=le.e.c;++Be){be===le.s.r&&(A[Be]=cr(Be));var Ee=A[Be]+ze,gt=he?(xe[be]||[])[Be]:xe[Ee];if(!(!gt||gt.t=="z"))if(gt.t=="n")on(Y,23,C(be,Be,de,gt.v));else{var ur=Di(gt);on(Y,22,j(be,Be,de,ur.slice(0,239)))}}++de}}return on(Y,1),Y.end()}function i(M){var X=rr(2);return X.write_shift(2,M),X}function a(M){var X=rr(26);X.write_shift(2,4096),X.write_shift(2,4),X.write_shift(4,0);for(var V=0,Y=0,H=0,ie=0;ie<M.SheetNames.length;++ie){var de=M.SheetNames[ie],xe=M.Sheets[de];if(!(!xe||!xe["!ref"])){++H;var le=Gc(xe["!ref"]);V<le.e.r&&(V=le.e.r),Y<le.e.c&&(Y=le.e.c)}}return V>8191&&(V=8191),X.write_shift(2,V),X.write_shift(1,H),X.write_shift(1,Y),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(1,1),X.write_shift(1,2),X.write_shift(4,0),X.write_shift(4,0),X}function l(M,X,V){var Y={s:{c:0,r:0},e:{c:0,r:0}};return X==8&&V.qpro?(Y.s.c=M.read_shift(1),M.l++,Y.s.r=M.read_shift(2),Y.e.c=M.read_shift(1),M.l++,Y.e.r=M.read_shift(2),Y):(Y.s.c=M.read_shift(2),Y.s.r=M.read_shift(2),X==12&&V.qpro&&(M.l+=2),Y.e.c=M.read_shift(2),Y.e.r=M.read_shift(2),X==12&&V.qpro&&(M.l+=2),Y.s.c==65535&&(Y.s.c=Y.e.c=Y.s.r=Y.e.r=0),Y)}function c(M){var X=rr(8);return X.write_shift(2,M.s.c),X.write_shift(2,M.s.r),X.write_shift(2,M.e.c),X.write_shift(2,M.e.r),X}function d(M,X,V){var Y=[{c:0,r:0},{t:"n",v:0},0,0];return V.qpro&&V.vers!=20768?(Y[0].c=M.read_shift(1),Y[3]=M.read_shift(1),Y[0].r=M.read_shift(2),M.l+=2):(Y[2]=M.read_shift(1),Y[0].c=M.read_shift(2),Y[0].r=M.read_shift(2)),Y}function u(M,X,V){var Y=M.l+X,H=d(M,X,V);if(H[1].t="s",V.vers==20768){M.l++;var ie=M.read_shift(1);return H[1].v=M.read_shift(ie,"utf8"),H}return V.qpro&&M.l++,H[1].v=M.read_shift(Y-M.l,"cstr"),H}function h(M,X,V){var Y=rr(7+V.length);Y.write_shift(1,255),Y.write_shift(2,X),Y.write_shift(2,M),Y.write_shift(1,39);for(var H=0;H<Y.length;++H){var ie=V.charCodeAt(H);Y.write_shift(1,ie>=128?95:ie)}return Y.write_shift(1,0),Y}function f(M,X,V){var Y=d(M,X,V);return Y[1].v=M.read_shift(2,"i"),Y}function m(M,X,V){var Y=rr(7);return Y.write_shift(1,255),Y.write_shift(2,X),Y.write_shift(2,M),Y.write_shift(2,V,"i"),Y}function x(M,X,V){var Y=d(M,X,V);return Y[1].v=M.read_shift(8,"f"),Y}function p(M,X,V){var Y=rr(13);return Y.write_shift(1,255),Y.write_shift(2,X),Y.write_shift(2,M),Y.write_shift(8,V,"f"),Y}function g(M,X,V){var Y=M.l+X,H=d(M,X,V);if(H[1].v=M.read_shift(8,"f"),V.qpro)M.l=Y;else{var ie=M.read_shift(2);k(M.slice(M.l,M.l+ie),H),M.l+=ie}return H}function v(M,X,V){var Y=X&32768;return X&=-32769,X=(Y?M:0)+(X>=8192?X-16384:X),(Y?"":"$")+(V?cr(X):jr(X))}var b={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},y=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function k(M,X){wr(M,0);for(var V=[],Y=0,H="",ie="",de="",xe="";M.l<M.length;){var le=M[M.l++];switch(le){case 0:V.push(M.read_shift(8,"f"));break;case 1:ie=v(X[0].c,M.read_shift(2),!0),H=v(X[0].r,M.read_shift(2),!1),V.push(ie+H);break;case 2:{var he=v(X[0].c,M.read_shift(2),!0),A=v(X[0].r,M.read_shift(2),!1);ie=v(X[0].c,M.read_shift(2),!0),H=v(X[0].r,M.read_shift(2),!1),V.push(he+A+":"+ie+H)}break;case 3:if(M.l<M.length){console.error("WK1 premature formula end");return}break;case 4:V.push("("+V.pop()+")");break;case 5:V.push(M.read_shift(2));break;case 6:{for(var Ce="";le=M[M.l++];)Ce+=String.fromCharCode(le);V.push('"'+Ce.replace(/"/g,'""')+'"')}break;case 8:V.push("-"+V.pop());break;case 23:V.push("+"+V.pop());break;case 22:V.push("NOT("+V.pop()+")");break;case 20:case 21:xe=V.pop(),de=V.pop(),V.push(["AND","OR"][le-20]+"("+de+","+xe+")");break;default:if(le<32&&y[le])xe=V.pop(),de=V.pop(),V.push(de+y[le]+xe);else if(b[le]){if(Y=b[le][1],Y==69&&(Y=M[M.l++]),Y>V.length){console.error("WK1 bad formula parse 0x"+le.toString(16)+":|"+V.join("|")+"|");return}var be=V.slice(-Y);V.length-=Y,V.push(b[le][0]+"("+be.join(",")+")")}else return le<=7?console.error("WK1 invalid opcode "+le.toString(16)):le<=24?console.error("WK1 unsupported op "+le.toString(16)):le<=30?console.error("WK1 invalid opcode "+le.toString(16)):le<=115?console.error("WK1 unsupported function opcode "+le.toString(16)):console.error("WK1 unrecognized opcode "+le.toString(16))}}V.length==1?X[1].f=""+V[0]:console.error("WK1 bad formula parse |"+V.join("|")+"|")}function N(M){var X=[{c:0,r:0},{t:"n",v:0},0];return X[0].r=M.read_shift(2),X[3]=M[M.l++],X[0].c=M[M.l++],X}function E(M,X){var V=N(M);return V[1].t="s",V[1].v=M.read_shift(X-4,"cstr"),V}function j(M,X,V,Y){var H=rr(6+Y.length);H.write_shift(2,M),H.write_shift(1,V),H.write_shift(1,X),H.write_shift(1,39);for(var ie=0;ie<Y.length;++ie){var de=Y.charCodeAt(ie);H.write_shift(1,de>=128?95:de)}return H.write_shift(1,0),H}function _(M,X){var V=N(M);V[1].v=M.read_shift(2);var Y=V[1].v>>1;if(V[1].v&1)switch(Y&7){case 0:Y=(Y>>3)*5e3;break;case 1:Y=(Y>>3)*500;break;case 2:Y=(Y>>3)/20;break;case 3:Y=(Y>>3)/200;break;case 4:Y=(Y>>3)/2e3;break;case 5:Y=(Y>>3)/2e4;break;case 6:Y=(Y>>3)/16;break;case 7:Y=(Y>>3)/64;break}return V[1].v=Y,V}function S(M,X){var V=N(M),Y=M.read_shift(4),H=M.read_shift(4),ie=M.read_shift(2);if(ie==65535)return Y===0&&H===3221225472?(V[1].t="e",V[1].v=15):Y===0&&H===3489660928?(V[1].t="e",V[1].v=42):V[1].v=0,V;var de=ie&32768;return ie=(ie&32767)-16446,V[1].v=(1-de*2)*(H*Math.pow(2,ie+32)+Y*Math.pow(2,ie)),V}function C(M,X,V,Y){var H=rr(14);if(H.write_shift(2,M),H.write_shift(1,V),H.write_shift(1,X),Y==0)return H.write_shift(4,0),H.write_shift(4,0),H.write_shift(2,65535),H;var ie=0,de=0,xe=0,le=0;return Y<0&&(ie=1,Y=-Y),de=Math.log2(Y)|0,Y/=Math.pow(2,de-31),le=Y>>>0,le&2147483648||(Y/=2,++de,le=Y>>>0),Y-=le,le|=2147483648,le>>>=0,Y*=Math.pow(2,32),xe=Y>>>0,H.write_shift(4,xe),H.write_shift(4,le),de+=16383+(ie?32768:0),H.write_shift(2,de),H}function F(M,X){var V=S(M);return M.l+=X-14,V}function P(M,X){var V=N(M),Y=M.read_shift(4);return V[1].v=Y>>6,V}function B(M,X){var V=N(M),Y=M.read_shift(8,"f");return V[1].v=Y,V}function Q(M,X){var V=B(M);return M.l+=X-10,V}function D(M,X){return M[M.l+X-1]==0?M.read_shift(X,"cstr"):""}function I(M,X){var V=M[M.l++];V>X-1&&(V=X-1);for(var Y="";Y.length<V;)Y+=String.fromCharCode(M[M.l++]);return Y}function te(M,X,V){if(!(!V.qpro||X<21)){var Y=M.read_shift(1);M.l+=17,M.l+=1,M.l+=2;var H=M.read_shift(X-21,"cstr");return[Y,H]}}function re(M,X){for(var V={},Y=M.l+X;M.l<Y;){var H=M.read_shift(2);if(H==14e3){for(V[H]=[0,""],V[H][0]=M.read_shift(2);M[M.l];)V[H][1]+=String.fromCharCode(M[M.l]),M.l++;M.l++}}return V}function W(M,X){var V=rr(5+M.length);V.write_shift(2,14e3),V.write_shift(2,X);for(var Y=0;Y<M.length;++Y){var H=M.charCodeAt(Y);V[V.l++]=H>127?95:H}return V[V.l++]=0,V}var K={0:{n:"BOF",f:Zt},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:D},222:{n:"SHEETNAMELP",f:I},65535:{n:""}},Z={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:E},23:{n:"NUMBER17",f:S},24:{n:"NUMBER18",f:_},25:{n:"FORMULA19",f:F},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:re},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:P},38:{n:"??"},39:{n:"NUMBER27",f:B},40:{n:"FORMULA28",f:Q},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:D},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:te},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:s,book_to_wk3:n,to_workbook:e}}();function dH(t){var e={},r=t.match(Yr),s=0,n=!1;if(r)for(;s!=r.length;++s){var i=$e(r[s]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;e.cp=Qy[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=i.val;break;case"<sz":e.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":i.rgb&&(e.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(i[0].charCodeAt(1)!==47&&!n)throw new Error("Unrecognized rich format "+i[0])}}return e}var uH=function(){var t=Zu("t"),e=Zu("rPr");function r(i){var a=i.match(t);if(!a)return{t:"s",v:""};var l={t:"s",v:at(a[1])},c=i.match(e);return c&&(l.s=dH(c[1])),l}var s=/<(?:\w+:)?r>/g,n=/<\/(?:\w+:)?r>/;return function(a){return a.replace(s,"").split(n).map(r).filter(function(l){return l.v})}}(),hH=function(){var e=/(\r\n|\n)/g;function r(n,i,a){var l=[];n.u&&l.push("text-decoration: underline;"),n.uval&&l.push("text-underline-style:"+n.uval+";"),n.sz&&l.push("font-size:"+n.sz+"pt;"),n.outline&&l.push("text-effect: outline;"),n.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),n.b&&(i.push("<b>"),a.push("</b>")),n.i&&(i.push("<i>"),a.push("</i>")),n.strike&&(i.push("<s>"),a.push("</s>"));var c=n.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),a.push("</"+c+">")),a.push("</span>"),n}function s(n){var i=[[],n.v,[]];return n.v?(n.s&&r(n.s,i[0],i[2]),i[0].join("")+i[1].replace(e,"<br/>")+i[2].join("")):""}return function(i){return i.map(s).join("")}}(),fH=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,mH=/<(?:\w+:)?r>/,xH=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function mb(t,e){var r=e?e.cellHTML:!0,s={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(s.t=at(pt(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),s.r=pt(t),r&&(s.h=nb(s.t))):t.match(mH)&&(s.r=pt(t),s.t=at(pt((t.replace(xH,"").match(fH)||[]).join("").replace(Yr,""))),r&&(s.h=hH(uH(s.r)))),s):{t:""}}var pH=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,gH=/<(?:\w+:)?(?:si|sstItem)>/g,vH=/<\/(?:\w+:)?(?:si|sstItem)>/;function yH(t,e){var r=[],s="";if(!t)return r;var n=t.match(pH);if(n){s=n[2].replace(gH,"").split(vH);for(var i=0;i!=s.length;++i){var a=mb(s[i].trim(),e);a!=null&&(r[r.length]=a)}n=$e(n[1]),r.Count=n.count,r.Unique=n.uniqueCount}return r}function bH(t){return[t.read_shift(4),t.read_shift(4)]}function wH(t,e){var r=[],s=!1;return Li(t,function(i,a,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:s=!0;break;case 36:s=!1;break;default:if(a.T,!s||e.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function pC(t){for(var e=[],r=t.split(""),s=0;s<r.length;++s)e[s]=r[s].charCodeAt(0);return e}function Si(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function kH(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=Si(t,4),e.U=Si(t,4),e.W=Si(t,4),e}function _H(t){for(var e=t.read_shift(4),r=t.l+e-4,s={},n=t.read_shift(4),i=[];n-- >0;)i.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(s.name=t.read_shift(0,"lpp4"),s.comps=i,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return s}function NH(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(_H(t));return e}function jH(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function EH(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=Si(t,4),e.U=Si(t,4),e.W=Si(t,4),e}function SH(t){var e=EH(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function gC(t,e){var r=t.l+e,s={};s.Flags=t.read_shift(4)&63,t.l+=4,s.AlgID=t.read_shift(4);var n=!1;switch(s.AlgID){case 26126:case 26127:case 26128:n=s.Flags==36;break;case 26625:n=s.Flags==4;break;case 0:n=s.Flags==16||s.Flags==4||s.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+s.AlgID}if(!n)throw new Error("Encryption Flags/AlgID mismatch");return s.AlgIDHash=t.read_shift(4),s.KeySize=t.read_shift(4),s.ProviderType=t.read_shift(4),t.l+=8,s.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,s}function vC(t,e){var r={},s=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,s),t.l=s,r}function CH(t){var e=Si(t);switch(e.Minor){case 2:return[e.Minor,TH(t)];case 3:return[e.Minor,AH()];case 4:return[e.Minor,FH(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function TH(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),s=gC(t,r),n=vC(t,t.length-t.l);return{t:"Std",h:s,v:n}}function AH(){throw new Error("File is password-protected: ECMA-376 Extensible")}function FH(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),s={};return r.replace(Yr,function(i){var a=$e(i);switch(Jn(a[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(l){s[l]=a[l]});break;case"<dataIntegrity":s.encryptedHmacKey=a.encryptedHmacKey,s.encryptedHmacValue=a.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":s.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":s.uri=a.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":s.encs.push(a);break;default:throw a[0]}}),s}function PH(t,e){var r={},s=r.EncryptionVersionInfo=Si(t,4);if(e-=4,s.Minor!=2)throw new Error("unrecognized minor version code: "+s.Minor);if(s.Major>4||s.Major<2)throw new Error("unrecognized major version code: "+s.Major);r.Flags=t.read_shift(4),e-=4;var n=t.read_shift(4);return e-=4,r.EncryptionHeader=gC(t,n),e-=n,r.EncryptionVerifier=vC(t,e),r}function MH(t){var e={},r=e.EncryptionVersionInfo=Si(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function RH(t){var e=0,r,s=pC(t),n=s.length+1,i,a,l,c,d;for(r=$a(n),r[0]=s.length,i=1;i!=n;++i)r[i]=s[i-1];for(i=n-1;i>=0;--i)a=r[i],l=e&16384?1:0,c=e<<1&32767,d=l|c,e=d^a;return e^52811}var yC=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],s=function(a){return(a/2|a*128)&255},n=function(a,l){return s(a^l)},i=function(a){for(var l=e[a.length-1],c=104,d=a.length-1;d>=0;--d)for(var u=a[d],h=0;h!=7;++h)u&64&&(l^=r[c]),u*=2,--c;return l};return function(a){for(var l=pC(a),c=i(l),d=l.length,u=$a(16),h=0;h!=16;++h)u[h]=0;var f,m,x;for((d&1)===1&&(f=c>>8,u[d]=n(t[0],f),--d,f=c&255,m=l[l.length-1],u[d]=n(m,f));d>0;)--d,f=c>>8,u[d]=n(l[d],f),--d,f=c&255,u[d]=n(l[d],f);for(d=15,x=15-l.length;x>0;)f=c>>8,u[d]=n(t[x],f),--d,--x,f=c&255,u[d]=n(l[d],f),--d,--x;return u}}(),DH=function(t,e,r,s,n){n||(n=e),s||(s=yC(t));var i,a;for(i=0;i!=e.length;++i)a=e[i],a^=s[r],a=(a>>5|a<<3)&255,n[i]=a,++r;return[n,r,s]},OH=function(t){var e=0,r=yC(t);return function(s){var n=DH("",s,e,r);return e=n[1],n[0]}};function LH(t,e,r,s){var n={key:Zt(t),verificationBytes:Zt(t)};return r.password&&(n.verifier=RH(r.password)),s.valid=n.verificationBytes===n.verifier,s.valid&&(s.insitu=OH(r.password)),n}function IH(t,e,r){var s=r||{};return s.Info=t.read_shift(2),t.l-=2,s.Info===1?s.Data=MH(t):s.Data=PH(t,e),s}function BH(t,e,r){var s={Type:r.biff>=8?t.read_shift(2):0};return s.Type?IH(t,e-2,s):LH(t,r.biff>=8?e:e-2,r,s),s}var $H=function(){function t(n,i){switch(i.type){case"base64":return e(Ps(n),i);case"binary":return e(n,i);case"buffer":return e(tt&&Buffer.isBuffer(n)?n.toString("binary"):ul(n),i);case"array":return e(Jo(n),i)}throw new Error("Unrecognized type "+i.type)}function e(n,i){var a=i||{},l=a.dense?[]:{},c=n.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(u,h){Array.isArray(l)&&(l[h]=[]);for(var f=/\\\w+\b/g,m=0,x,p=-1;x=f.exec(u);){switch(x[0]){case"\\cell":var g=u.slice(m,f.lastIndex-x[0].length);if(g[0]==" "&&(g=g.slice(1)),++p,g.length){var v={v:g,t:"s"};Array.isArray(l)?l[h][p]=v:l[Ve({r:h,c:p})]=v}break}m=f.lastIndex}p>d.e.c&&(d.e.c=p)}),l["!ref"]=st(d),l}function r(n,i){return Ka(t(n,i),i)}function s(n){for(var i=["{\\rtf1\\ansi"],a=zt(n["!ref"]),l,c=Array.isArray(n),d=a.s.r;d<=a.e.r;++d){i.push("\\trowd\\trautofit1");for(var u=a.s.c;u<=a.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=a.s.c;u<=a.e.c;++u){var h=Ve({r:d,c:u});l=c?(n[d]||[])[u]:n[h],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(Di(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:s}}();function zH(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function th(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function UH(t){var e=t[0]/255,r=t[1]/255,s=t[2]/255,n=Math.max(e,r,s),i=Math.min(e,r,s),a=n-i;if(a===0)return[0,0,e];var l=0,c=0,d=n+i;switch(c=a/(d>1?2-d:d),n){case e:l=((r-s)/a+6)%6;break;case r:l=(s-e)/a+2;break;case s:l=(e-r)/a+4;break}return[l/6,c,d/2]}function VH(t){var e=t[0],r=t[1],s=t[2],n=r*2*(s<.5?s:1-s),i=s-n/2,a=[i,i,i],l=6*e,c;if(r!==0)switch(l|0){case 0:case 6:c=n*l,a[0]+=n,a[1]+=c;break;case 1:c=n*(2-l),a[0]+=c,a[1]+=n;break;case 2:c=n*(l-2),a[1]+=n,a[2]+=c;break;case 3:c=n*(4-l),a[1]+=c,a[2]+=n;break;case 4:c=n*(l-4),a[2]+=n,a[0]+=c;break;case 5:c=n*(6-l),a[2]+=c,a[0]+=n;break}for(var d=0;d!=3;++d)a[d]=Math.round(a[d]*255);return a}function Nm(t,e){if(e===0)return t;var r=UH(zH(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),th(VH(r))}var bC=6,WH=15,HH=1,Jr=bC;function jm(t){return Math.floor((t+Math.round(128/Jr)/256)*Jr)}function Em(t){return Math.floor((t-5)/Jr*100+.5)/100}function X1(t){return Math.round((t*Jr+5)/Jr*256)/256}function Ip(t){return X1(Em(jm(t)))}function xb(t){var e=Math.abs(t-Ip(t)),r=Jr;if(e>.005)for(Jr=HH;Jr<WH;++Jr)Math.abs(t-Ip(t))<=e&&(e=Math.abs(t-Ip(t)),r=Jr);Jr=r}function Rc(t){t.width?(t.wpx=jm(t.width),t.wch=Em(t.wpx),t.MDW=Jr):t.wpx?(t.wch=Em(t.wpx),t.width=X1(t.wch),t.MDW=Jr):typeof t.wch=="number"&&(t.width=X1(t.wch),t.wpx=jm(t.width),t.MDW=Jr),t.customWidth&&delete t.customWidth}var YH=96,wC=YH;function kC(t){return t*96/wC}function rh(t){return t*wC/96}var qH={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function GH(t,e,r,s){e.Borders=[];var n={},i=!1;(t[0].match(Yr)||[]).forEach(function(a){var l=$e(a);switch(Jn(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":n={},l.diagonalUp&&(n.diagonalUp=jt(l.diagonalUp)),l.diagonalDown&&(n.diagonalDown=jt(l.diagonalDown)),e.Borders.push(n);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s&&s.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function KH(t,e,r,s){e.Fills=[];var n={},i=!1;(t[0].match(Yr)||[]).forEach(function(a){var l=$e(a);switch(Jn(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":n={},e.Fills.push(n);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(n),n={};break;case"<patternFill":case"<patternFill>":l.patternType&&(n.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":n.bgColor||(n.bgColor={}),l.indexed&&(n.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(n.bgColor.theme=parseInt(l.theme,10)),l.tint&&(n.bgColor.tint=parseFloat(l.tint)),l.rgb&&(n.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":n.fgColor||(n.fgColor={}),l.theme&&(n.fgColor.theme=parseInt(l.theme,10)),l.tint&&(n.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(n.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s&&s.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function XH(t,e,r,s){e.Fonts=[];var n={},i=!1;(t[0].match(Yr)||[]).forEach(function(a){var l=$e(a);switch(Jn(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(n),n={};break;case"<name":l.val&&(n.name=pt(l.val));break;case"<name/>":case"</name>":break;case"<b":n.bold=l.val?jt(l.val):1;break;case"<b/>":n.bold=1;break;case"<i":n.italic=l.val?jt(l.val):1;break;case"<i/>":n.italic=1;break;case"<u":switch(l.val){case"none":n.underline=0;break;case"single":n.underline=1;break;case"double":n.underline=2;break;case"singleAccounting":n.underline=33;break;case"doubleAccounting":n.underline=34;break}break;case"<u/>":n.underline=1;break;case"<strike":n.strike=l.val?jt(l.val):1;break;case"<strike/>":n.strike=1;break;case"<outline":n.outline=l.val?jt(l.val):1;break;case"<outline/>":n.outline=1;break;case"<shadow":n.shadow=l.val?jt(l.val):1;break;case"<shadow/>":n.shadow=1;break;case"<condense":n.condense=l.val?jt(l.val):1;break;case"<condense/>":n.condense=1;break;case"<extend":n.extend=l.val?jt(l.val):1;break;case"<extend/>":n.extend=1;break;case"<sz":l.val&&(n.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(n.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(n.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(n.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=Qy[parseInt(l.val,10)];break;case"<color":if(n.color||(n.color={}),l.auto&&(n.color.auto=jt(l.auto)),l.rgb)n.color.rgb=l.rgb.slice(-6);else if(l.indexed){n.color.index=parseInt(l.indexed,10);var c=Oo[n.color.index];n.color.index==81&&(c=Oo[1]),c||(c=Oo[1]),n.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(n.color.theme=parseInt(l.theme,10),l.tint&&(n.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(n.color.rgb=Nm(r.themeElements.clrScheme[n.color.theme].rgb,n.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s&&s.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function QH(t,e,r){e.NumberFmt=[];for(var s=Xn(He),n=0;n<s.length;++n)e.NumberFmt[s[n]]=He[s[n]];var i=t[0].match(Yr);if(i)for(n=0;n<i.length;++n){var a=$e(i[n]);switch(Jn(a[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=at(pt(a.formatCode)),c=parseInt(a.numFmtId,10);if(e.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&e.NumberFmt[c]!=null;--c);e.NumberFmt[c]=l}Do(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+a[0]+" in numFmts")}}}var I0=["numFmtId","fillId","fontId","borderId","xfId"],B0=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function ZH(t,e,r){e.CellXf=[];var s,n=!1;(t[0].match(Yr)||[]).forEach(function(i){var a=$e(i),l=0;switch(Jn(a[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(s=a,delete s[0],l=0;l<I0.length;++l)s[I0[l]]&&(s[I0[l]]=parseInt(s[I0[l]],10));for(l=0;l<B0.length;++l)s[B0[l]]&&(s[B0[l]]=jt(s[B0[l]]));if(e.NumberFmt&&s.numFmtId>392){for(l=392;l>60;--l)if(e.NumberFmt[s.numFmtId]==e.NumberFmt[l]){s.numFmtId=l;break}}e.CellXf.push(s);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};a.vertical&&(c.vertical=a.vertical),a.horizontal&&(c.horizontal=a.horizontal),a.textRotation!=null&&(c.textRotation=a.textRotation),a.indent&&(c.indent=a.indent),a.wrapText&&(c.wrapText=jt(a.wrapText)),s.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":n=!0;break;case"</AlternateContent>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(r&&r.WTF&&!n)throw new Error("unrecognized "+a[0]+" in cellXfs")}})}var JH=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,s=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,n=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,d){var u={};if(!l)return u;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var h;return(h=l.match(e))&&QH(h,u,d),(h=l.match(n))&&XH(h,u,c,d),(h=l.match(s))&&KH(h,u,c,d),(h=l.match(i))&&GH(h,u,c,d),(h=l.match(r))&&ZH(h,u,d),u}}();function eY(t,e){var r=t.read_shift(2),s=Ur(t);return[r,s]}function tY(t,e,r){var s={};s.sz=t.read_shift(2)/20;var n=uV(t);n.fItalic&&(s.italic=1),n.fCondense&&(s.condense=1),n.fExtend&&(s.extend=1),n.fShadow&&(s.shadow=1),n.fOutline&&(s.outline=1),n.fStrikeout&&(s.strike=1);var i=t.read_shift(2);switch(i===700&&(s.bold=1),t.read_shift(2)){case 1:s.vertAlign="superscript";break;case 2:s.vertAlign="subscript";break}var a=t.read_shift(1);a!=0&&(s.underline=a);var l=t.read_shift(1);l>0&&(s.family=l);var c=t.read_shift(1);switch(c>0&&(s.charset=c),t.l++,s.color=dV(t),t.read_shift(1)){case 1:s.scheme="major";break;case 2:s.scheme="minor";break}return s.name=Ur(t),s}var rY=Hr;function sY(t,e){var r=t.l+e,s=t.read_shift(2),n=t.read_shift(2);return t.l=r,{ixfe:s,numFmtId:n}}var nY=Hr;function iY(t,e,r){var s={};s.NumberFmt=[];for(var n in He)s.NumberFmt[n]=He[n];s.CellXf=[],s.Fonts=[];var i=[],a=!1;return Li(t,function(c,d,u){switch(u){case 44:s.NumberFmt[c[0]]=c[1],Do(c[1],c[0]);break;case 43:s.Fonts.push(c),c.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(c.color.rgb=Nm(e.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&s.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:i.push(u),a=!0;break;case 38:i.pop(),a=!1;break;default:if(d.T>0)i.push(u);else if(d.T<0)i.pop();else if(!a||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),s}var aY=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function oY(t,e,r){e.themeElements.clrScheme=[];var s={};(t[0].match(Yr)||[]).forEach(function(n){var i=$e(n);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":s.rgb=i.val;break;case"<a:sysClr":s.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(e.themeElements.clrScheme[aY.indexOf(i[0])]=s,s={}):s.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function lY(){}function cY(){}var dY=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,uY=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,hY=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function fY(t,e,r){e.themeElements={};var s;[["clrScheme",dY,oY],["fontScheme",uY,lY],["fmtScheme",hY,cY]].forEach(function(n){if(!(s=t.match(n[1])))throw new Error(n[0]+" not found in themeElements");n[2](s,e,r)})}var mY=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function _C(t,e){(!t||t.length===0)&&(t=xY());var r,s={};if(!(r=t.match(mY)))throw new Error("themeElements not found in theme");return fY(r[0],s,e),s.raw=t,s}function xY(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[R3];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function pY(t,e,r){var s=t.l+e,n=t.read_shift(4);if(n!==124226){if(!r.cellStyles){t.l=s;return}var i=t.slice(t.l);t.l=s;var a;try{a=M3(i,{type:"array"})}catch{return}var l=Es(a,"theme/theme/theme1.xml",!0);if(l)return _C(l,r)}}function gY(t){return t.read_shift(4)}function vY(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=yY(t,4);break;case 2:e.xclrValue=cC(t);break;case 3:e.xclrValue=gY(t);break;case 4:t.l+=4;break}return t.l+=8,e}function yY(t,e){return Hr(t,e)}function bY(t,e){return Hr(t,e)}function wY(t){var e=t.read_shift(2),r=t.read_shift(2)-4,s=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:s[1]=vY(t);break;case 6:s[1]=bY(t,r);break;case 14:case 15:s[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return s}function kY(t,e){var r=t.l+e;t.l+=2;var s=t.read_shift(2);t.l+=2;for(var n=t.read_shift(2),i=[];n-- >0;)i.push(wY(t,r-t.l));return{ixfe:s,ext:i}}function _Y(t,e){e.forEach(function(r){switch(r[0]){}})}function NY(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Ur(t)}}function jY(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function EY(t){return t.l+=4,t.read_shift(4)!=0}function SY(t,e,r){var s={Types:[],Cell:[],Value:[]},n=r||{},i=[],a=!1,l=2;return Li(t,function(c,d,u){switch(u){case 335:s.Types.push({name:c.name});break;case 51:c.forEach(function(h){l==1?s.Cell.push({type:s.Types[h[0]-1].name,index:h[1]}):l==0&&s.Value.push({type:s.Types[h[0]-1].name,index:h[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:i.push(u),a=!0;break;case 36:i.pop(),a=!1;break;default:if(!d.T){if(!a||n.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),s}function CY(t,e,r){var s={Types:[],Cell:[],Value:[]};if(!t)return s;var n=!1,i=2,a;return t.replace(Yr,function(l){var c=$e(l);switch(Jn(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":s.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<s.Types.length;++d)s.Types[d].name==c.name&&(a=s.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?s.Cell.push({type:s.Types[c.t-1].name,index:+c.v}):i==0&&s.Value.push({type:s.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<rvb":if(!a)break;a.offsets||(a.offsets=[]),a.offsets.push(+c.i);break;default:if(!n&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),s}function TY(t){var e=[];if(!t)return e;var r=1;return(t.match(Yr)||[]).forEach(function(s){var n=$e(s);switch(n[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete n[0],n.i?r=n.i:n.i=r,e.push(n);break}}),e}function AY(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Ve(r);var s=t.read_shift(1);return s&2&&(e.l="1"),s&8&&(e.a="1"),e}function FY(t,e,r){var s=[];return Li(t,function(i,a,l){switch(l){case 63:s.push(i);break;default:if(!a.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),s}function PY(t,e,r,s){if(!t)return t;var n=s||{},i=!1;Li(t,function(l,c,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||n.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},n)}function MY(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}function cN(t,e,r,s){var n=Array.isArray(t),i;e.forEach(function(a){var l=es(a.ref);if(n?(t[l.r]||(t[l.r]=[]),i=t[l.r][l.c]):i=t[a.ref],!i){i={t:"z"},n?t[l.r][l.c]=i:t[a.ref]=i;var c=zt(t["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var d=st(c);d!==t["!ref"]&&(t["!ref"]=d)}i.c||(i.c=[]);var u={a:a.author,t:a.t,r:a.r,T:r};a.h&&(u.h=a.h);for(var h=i.c.length-1;h>=0;--h){if(!r&&i.c[h].T)return;r&&!i.c[h].T&&i.c.splice(h,1)}if(r&&s){for(h=0;h<s.length;++h)if(u.a==s[h].id){u.a=s[h].name||u.a;break}}i.c.push(u)})}function RY(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],s=[],n=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);n&&n[1]&&n[1].split(/<\/\w*:?author>/).forEach(function(a){if(!(a===""||a.trim()==="")){var l=a.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(a){if(!(a===""||a.trim()==="")){var l=a.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=$e(l[0]),d={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},u=es(c.ref);if(!(e.sheetRows&&e.sheetRows<=u.r)){var h=a.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),f=!!h&&!!h[1]&&mb(h[1])||{r:"",t:"",h:""};d.r=f.r,f.r=="<t></t>"&&(f.t=f.h=""),d.t=(f.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(d.h=f.h),s.push(d)}}}}),s}function DY(t,e){var r=[],s=!1,n={},i=0;return t.replace(Yr,function(l,c){var d=$e(l);switch(Jn(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":n={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":n.t!=null&&r.push(n);break;case"<text>":case"<text":i=c+l.length;break;case"</text>":n.t=t.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":s=!0;break;case"</mentions>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(!s&&e.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return l}),r}function OY(t,e){var r=[],s=!1;return t.replace(Yr,function(i){var a=$e(i);switch(Jn(a[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:a.displayname,id:a.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(!s&&e.WTF)throw new Error("unrecognized "+a[0]+" in threaded comments")}return i}),r}function LY(t){var e={};e.iauthor=t.read_shift(4);var r=fl(t);return e.rfx=r.s,e.ref=Ve(r.s),t.l+=16,e}var IY=Ur;function BY(t,e){var r=[],s=[],n={},i=!1;return Li(t,function(l,c,d){switch(d){case 632:s.push(l);break;case 635:n=l;break;case 637:n.t=l.t,n.h=l.h,n.r=l.r;break;case 636:if(n.author=s[n.iauthor],delete n.iauthor,e.sheetRows&&n.rfx&&e.sheetRows<=n.rfx.r)break;n.t||(n.t=""),delete n.rfx,r.push(n);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}var $Y="application/vnd.ms-office.vbaProject";function zY(t){var e=rt.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,s){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var n=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");rt.utils.cfb_add(e,n,t.FileIndex[s].content)}}),rt.write(e)}function UY(){return{"!type":"dialog"}}function VY(){return{"!type":"dialog"}}function WY(){return{"!type":"macro"}}function HY(){return{"!type":"macro"}}var rc=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(s,n,i,a){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),a.length==0?l=!0:a.charAt(0)=="["&&(l=!0,a=a.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,u=a.length>0?parseInt(a,10)|0:0;return l?u+=e.c:--u,c?d+=e.r:--d,n+(l?"":"$")+cr(u)+(c?"":"$")+jr(d)}return function(n,i){return e=i,n.replace(t,r)}}(),NC=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,YY=function(){return function(e,r){return e.replace(NC,function(s,n,i,a,l,c){var d=lb(a)-(i?0:r.c),u=ob(c)-(l?0:r.r),h=u==0?"":l?u+1:"["+u+"]",f=d==0?"":i?d+1:"["+d+"]";return n+"R"+h+"C"+f})}}();function jC(t,e){return t.replace(NC,function(r,s,n,i,a,l){return s+(n=="$"?n+i:cr(lb(i)+e.c))+(a=="$"?a+l:jr(ob(l)+e.r))})}function qY(t,e,r){var s=Gc(e),n=s.s,i=es(r),a={r:i.r-n.r,c:i.c-n.c};return jC(t,a)}function GY(t){return t.length!=1}function dN(t){return t.replace(/_xlfn\./g,"")}function Kt(t){t.l+=1}function za(t,e){var r=t.read_shift(e==1?1:2);return[r&16383,r>>14&1,r>>15&1]}function EC(t,e,r){var s=2;if(r){if(r.biff>=2&&r.biff<=5)return SC(t);r.biff==12&&(s=4)}var n=t.read_shift(s),i=t.read_shift(s),a=za(t,2),l=za(t,2);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function SC(t){var e=za(t,2),r=za(t,2),s=t.read_shift(1),n=t.read_shift(1);return{s:{r:e[0],c:s,cRel:e[1],rRel:e[2]},e:{r:r[0],c:n,cRel:r[1],rRel:r[2]}}}function KY(t,e,r){if(r.biff<8)return SC(t);var s=t.read_shift(r.biff==12?4:2),n=t.read_shift(r.biff==12?4:2),i=za(t,2),a=za(t,2);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:n,c:a[0],cRel:a[1],rRel:a[2]}}}function CC(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return XY(t);var s=t.read_shift(r&&r.biff==12?4:2),n=za(t,2);return{r:s,c:n[0],cRel:n[1],rRel:n[2]}}function XY(t){var e=za(t,2),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function QY(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function ZY(t,e,r){var s=r&&r.biff?r.biff:8;if(s>=2&&s<=5)return JY(t);var n=t.read_shift(s>=12?4:2),i=t.read_shift(2),a=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;n>524287;)n-=1048576;if(a==1)for(;i>8191;)i=i-16384;return{r:n,c:i,cRel:a,rRel:l}}function JY(t){var e=t.read_shift(2),r=t.read_shift(1),s=(e&32768)>>15,n=(e&16384)>>14;return e&=16383,s==1&&e>=8192&&(e=e-16384),n==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:n,rRel:s}}function eq(t,e,r){var s=(t[t.l++]&96)>>5,n=EC(t,r.biff>=2&&r.biff<=5?6:8,r);return[s,n]}function tq(t,e,r){var s=(t[t.l++]&96)>>5,n=t.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}var a=EC(t,i,r);return[s,n,a]}function rq(t,e,r){var s=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[s]}function sq(t,e,r){var s=(t[t.l++]&96)>>5,n=t.read_shift(2),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}return t.l+=i,[s,n]}function nq(t,e,r){var s=(t[t.l++]&96)>>5,n=KY(t,e-1,r);return[s,n]}function iq(t,e,r){var s=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[s]}function uN(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function aq(t,e,r){t.l+=2;for(var s=t.read_shift(r&&r.biff==2?1:2),n=[],i=0;i<=s;++i)n.push(t.read_shift(r&&r.biff==2?1:2));return n}function oq(t,e,r){var s=t[t.l+1]&255?1:0;return t.l+=2,[s,t.read_shift(r&&r.biff==2?1:2)]}function lq(t,e,r){var s=t[t.l+1]&255?1:0;return t.l+=2,[s,t.read_shift(r&&r.biff==2?1:2)]}function cq(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function dq(t,e,r){var s=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[s]}function TC(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function uq(t){return t.read_shift(2),TC(t)}function hq(t){return t.read_shift(2),TC(t)}function fq(t,e,r){var s=(t[t.l]&96)>>5;t.l+=1;var n=CC(t,0,r);return[s,n]}function mq(t,e,r){var s=(t[t.l]&96)>>5;t.l+=1;var n=ZY(t,0,r);return[s,n]}function xq(t,e,r){var s=(t[t.l]&96)>>5;t.l+=1;var n=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var i=CC(t,0,r);return[s,n,i]}function pq(t,e,r){var s=(t[t.l]&96)>>5;t.l+=1;var n=t.read_shift(r&&r.biff<=3?1:2);return[gG[n],PC[n],s]}function gq(t,e,r){var s=t[t.l++],n=t.read_shift(1),i=r&&r.biff<=3?[s==88?-1:0,t.read_shift(1)]:vq(t);return[n,(i[0]===0?PC:pG)[i[1]]]}function vq(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function yq(t,e,r){t.l+=r&&r.biff==2?3:4}function bq(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var s=t.read_shift(2),n=t.read_shift(r&&r.biff==2?1:2);return[s,n]}function wq(t){return t.l++,ml[t.read_shift(1)]}function kq(t){return t.l++,t.read_shift(2)}function _q(t){return t.l++,t.read_shift(1)!==0}function Nq(t){return t.l++,Or(t)}function jq(t,e,r){return t.l++,Dh(t,e-1,r)}function Eq(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Ut(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=ml[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=Or(t);break;case 2:r[1]=xl(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Sq(t,e,r){for(var s=t.read_shift(r.biff==12?4:2),n=[],i=0;i!=s;++i)n.push((r.biff==12?fl:kx)(t));return n}function Cq(t,e,r){var s=0,n=0;r.biff==12?(s=t.read_shift(4),n=t.read_shift(4)):(n=1+t.read_shift(1),s=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--s,--n==0&&(n=256));for(var i=0,a=[];i!=s&&(a[i]=[]);++i)for(var l=0;l!=n;++l)a[i][l]=Eq(t,r.biff);return a}function Tq(t,e,r){var s=t.read_shift(1)>>>5&3,n=!r||r.biff>=8?4:2,i=t.read_shift(n);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[s,0,i]}function Aq(t,e,r){if(r.biff==5)return Fq(t);var s=t.read_shift(1)>>>5&3,n=t.read_shift(2),i=t.read_shift(4);return[s,n,i]}function Fq(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var s=t.read_shift(2);return t.l+=12,[e,r,s]}function Pq(t,e,r){var s=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var n=t.read_shift(r&&r.biff==2?1:2);return[s,n]}function Mq(t,e,r){var s=t.read_shift(1)>>>5&3,n=t.read_shift(r&&r.biff==2?1:2);return[s,n]}function Rq(t,e,r){var s=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[s]}function Dq(t,e,r){var s=(t[t.l++]&96)>>5,n=t.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return t.l+=i,[s,n]}var Oq=Hr,Lq=Hr,Iq=Hr;function Lh(t,e,r){return t.l+=2,[QY(t)]}function pb(t){return t.l+=6,[]}var Bq=Lh,$q=pb,zq=pb,Uq=Lh;function AC(t){return t.l+=2,[Zt(t),t.read_shift(2)&1]}var Vq=Lh,Wq=AC,Hq=pb,Yq=Lh,qq=Lh,Gq=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Kq(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),s=t.read_shift(4),n=t.read_shift(2),i=t.read_shift(2),a=Gq[r>>2&31];return{ixti:e,coltype:r&3,rt:a,idx:s,c:n,C:i}}function Xq(t){return t.l+=2,[t.read_shift(4)]}function Qq(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function Zq(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Jq(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function eG(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function tG(t){return t.l+=4,[0,0]}var hN={1:{n:"PtgExp",f:bq},2:{n:"PtgTbl",f:Iq},3:{n:"PtgAdd",f:Kt},4:{n:"PtgSub",f:Kt},5:{n:"PtgMul",f:Kt},6:{n:"PtgDiv",f:Kt},7:{n:"PtgPower",f:Kt},8:{n:"PtgConcat",f:Kt},9:{n:"PtgLt",f:Kt},10:{n:"PtgLe",f:Kt},11:{n:"PtgEq",f:Kt},12:{n:"PtgGe",f:Kt},13:{n:"PtgGt",f:Kt},14:{n:"PtgNe",f:Kt},15:{n:"PtgIsect",f:Kt},16:{n:"PtgUnion",f:Kt},17:{n:"PtgRange",f:Kt},18:{n:"PtgUplus",f:Kt},19:{n:"PtgUminus",f:Kt},20:{n:"PtgPercent",f:Kt},21:{n:"PtgParen",f:Kt},22:{n:"PtgMissArg",f:Kt},23:{n:"PtgStr",f:jq},26:{n:"PtgSheet",f:Qq},27:{n:"PtgEndSheet",f:Zq},28:{n:"PtgErr",f:wq},29:{n:"PtgBool",f:_q},30:{n:"PtgInt",f:kq},31:{n:"PtgNum",f:Nq},32:{n:"PtgArray",f:iq},33:{n:"PtgFunc",f:pq},34:{n:"PtgFuncVar",f:gq},35:{n:"PtgName",f:Tq},36:{n:"PtgRef",f:fq},37:{n:"PtgArea",f:eq},38:{n:"PtgMemArea",f:Pq},39:{n:"PtgMemErr",f:Oq},40:{n:"PtgMemNoMem",f:Lq},41:{n:"PtgMemFunc",f:Mq},42:{n:"PtgRefErr",f:Rq},43:{n:"PtgAreaErr",f:rq},44:{n:"PtgRefN",f:mq},45:{n:"PtgAreaN",f:nq},46:{n:"PtgMemAreaN",f:Jq},47:{n:"PtgMemNoMemN",f:eG},57:{n:"PtgNameX",f:Aq},58:{n:"PtgRef3d",f:xq},59:{n:"PtgArea3d",f:tq},60:{n:"PtgRefErr3d",f:Dq},61:{n:"PtgAreaErr3d",f:sq},255:{}},rG={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},sG={1:{n:"PtgElfLel",f:AC},2:{n:"PtgElfRw",f:Yq},3:{n:"PtgElfCol",f:Bq},6:{n:"PtgElfRwV",f:qq},7:{n:"PtgElfColV",f:Uq},10:{n:"PtgElfRadical",f:Vq},11:{n:"PtgElfRadicalS",f:Hq},13:{n:"PtgElfColS",f:$q},15:{n:"PtgElfColSV",f:zq},16:{n:"PtgElfRadicalLel",f:Wq},25:{n:"PtgList",f:Kq},29:{n:"PtgSxName",f:Xq},255:{}},nG={0:{n:"PtgAttrNoop",f:tG},1:{n:"PtgAttrSemi",f:dq},2:{n:"PtgAttrIf",f:lq},4:{n:"PtgAttrChoose",f:aq},8:{n:"PtgAttrGoto",f:oq},16:{n:"PtgAttrSum",f:yq},32:{n:"PtgAttrBaxcel",f:uN},33:{n:"PtgAttrBaxcel",f:uN},64:{n:"PtgAttrSpace",f:uq},65:{n:"PtgAttrSpaceSemi",f:hq},128:{n:"PtgAttrIfError",f:cq},255:{}};function Ih(t,e,r,s){if(s.biff<8)return Hr(t,e);for(var n=t.l+e,i=[],a=0;a!==r.length;++a)switch(r[a][0]){case"PtgArray":r[a][1]=Cq(t,0,s),i.push(r[a][1]);break;case"PtgMemArea":r[a][2]=Sq(t,r[a][1],s),i.push(r[a][2]);break;case"PtgExp":s&&s.biff==12&&(r[a][1][1]=t.read_shift(4),i.push(r[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[a][0]}return e=n-t.l,e!==0&&i.push(Hr(t,e)),i}function Bh(t,e,r){for(var s=t.l+e,n,i,a=[];s!=t.l;)e=s-t.l,i=t[t.l],n=hN[i]||hN[rG[i]],(i===24||i===25)&&(n=(i===24?sG:nG)[t[t.l+1]]),!n||!n.f?Hr(t,e):a.push([n.n,n.f(t,e,r)]);return a}function iG(t){for(var e=[],r=0;r<t.length;++r){for(var s=t[r],n=[],i=0;i<s.length;++i){var a=s[i];if(a)switch(a[0]){case 2:n.push('"'+a[1].replace(/"/g,'""')+'"');break;default:n.push(a[1])}else n.push("")}e.push(n.join(","))}return e.join(";")}var aG={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function oG(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function FC(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var s=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!s)return"SH33TJSERR1";var n="";if(r.biff>8)switch(t[s[0]][0]){case 357:return n=s[1]==-1?"#REF":t.SheetNames[s[1]],s[1]==s[2]?n:n+":"+t.SheetNames[s[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[s[0]][0];case 355:default:return"SH33TJSSRC"+t[s[0]][0]}switch(t[s[0]][0][0]){case 1025:return n=s[1]==-1?"#REF":t.SheetNames[s[1]]||"SH33TJSERR3",s[1]==s[2]?n:n+":"+t.SheetNames[s[2]];case 14849:return t[s[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return t[s[0]][0][3]?(n=s[1]==-1?"#REF":t[s[0]][0][3][s[1]]||"SH33TJSERR4",s[1]==s[2]?n:n+":"+t[s[0]][0][3][s[2]]):"SH33TJSERR2"}}function fN(t,e,r){var s=FC(t,e,r);return s=="#REF"?s:oG(s,r)}function Mr(t,e,r,s,n){var i=n&&n.biff||8,a={s:{c:0,r:0},e:{c:0,r:0}},l=[],c,d,u,h=0,f=0,m,x="";if(!t[0]||!t[0][0])return"";for(var p=-1,g="",v=0,b=t[0].length;v<b;++v){var y=t[0][v];switch(y[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),d=l.pop(),p>=0){switch(t[0][p][1][0]){case 0:g=It(" ",t[0][p][1][1]);break;case 1:g=It("\r",t[0][p][1][1]);break;default:if(g="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}d=d+g,p=-1}l.push(d+aG[y[0]]+c);break;case"PtgIsect":c=l.pop(),d=l.pop(),l.push(d+" "+c);break;case"PtgUnion":c=l.pop(),d=l.pop(),l.push(d+","+c);break;case"PtgRange":c=l.pop(),d=l.pop(),l.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=au(y[1][1],a,n),l.push(ou(u,i));break;case"PtgRefN":u=r?au(y[1][1],r,n):y[1][1],l.push(ou(u,i));break;case"PtgRef3d":h=y[1][1],u=au(y[1][2],a,n),x=fN(s,h,n),l.push(x+"!"+ou(u,i));break;case"PtgFunc":case"PtgFuncVar":var k=y[1][0],N=y[1][1];k||(k=0),k&=127;var E=k==0?[]:l.slice(-k);l.length-=k,N==="User"&&(N=E.shift()),l.push(N+"("+E.join(",")+")");break;case"PtgBool":l.push(y[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(y[1]);break;case"PtgNum":l.push(String(y[1]));break;case"PtgStr":l.push('"'+y[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(y[1]);break;case"PtgAreaN":m=q_(y[1][1],r?{s:r}:a,n),l.push(Op(m,n));break;case"PtgArea":m=q_(y[1][1],a,n),l.push(Op(m,n));break;case"PtgArea3d":h=y[1][1],m=y[1][2],x=fN(s,h,n),l.push(x+"!"+Op(m,n));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":f=y[1][2];var j=(s.names||[])[f-1]||(s[0]||[])[f],_=j?j.Name:"SH33TJSNAME"+String(f);_&&_.slice(0,6)=="_xlfn."&&!n.xlfn&&(_=_.slice(6)),l.push(_);break;case"PtgNameX":var S=y[1][1];f=y[1][2];var C;if(n.biff<=5)S<0&&(S=-S),s[S]&&(C=s[S][f]);else{var F="";if(((s[S]||[])[0]||[])[0]==14849||(((s[S]||[])[0]||[])[0]==1025?s[S][f]&&s[S][f].itab>0&&(F=s.SheetNames[s[S][f].itab-1]+"!"):F=s.SheetNames[f-1]+"!"),s[S]&&s[S][f])F+=s[S][f].Name;else if(s[0]&&s[0][f])F+=s[0][f].Name;else{var P=(FC(s,S,n)||"").split(";;");P[f-1]?F=P[f-1]:F+="SH33TJSERRX"}l.push(F);break}C||(C={Name:"SH33TJSERRY"}),l.push(C.Name);break;case"PtgParen":var B="(",Q=")";if(p>=0){switch(g="",t[0][p][1][0]){case 2:B=It(" ",t[0][p][1][1])+B;break;case 3:B=It("\r",t[0][p][1][1])+B;break;case 4:Q=It(" ",t[0][p][1][1])+Q;break;case 5:Q=It("\r",t[0][p][1][1])+Q;break;default:if(n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][p][1][0])}p=-1}l.push(B+l.pop()+Q);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":u={c:y[1][1],r:y[1][0]};var D={c:r.c,r:r.r};if(s.sharedf[Ve(u)]){var I=s.sharedf[Ve(u)];l.push(Mr(I,a,D,s,n))}else{var te=!1;for(c=0;c!=s.arrayf.length;++c)if(d=s.arrayf[c],!(u.c<d[0].s.c||u.c>d[0].e.c)&&!(u.r<d[0].s.r||u.r>d[0].e.r)){l.push(Mr(d[1],a,D,s,n)),te=!0;break}te||l.push(y[1])}break;case"PtgArray":l.push("{"+iG(y[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":p=v;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+y[1].idx+"[#"+y[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(y));default:throw new Error("Unrecognized Formula Token: "+String(y))}var re=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(n.biff!=3&&p>=0&&re.indexOf(t[0][v][0])==-1){y=t[0][p];var W=!0;switch(y[1][0]){case 4:W=!1;case 0:g=It(" ",y[1][1]);break;case 5:W=!1;case 1:g=It("\r",y[1][1]);break;default:if(g="",n.WTF)throw new Error("Unexpected PtgAttrSpaceType "+y[1][0])}l.push((W?g:"")+l.pop()+(W?"":g)),p=-1}}if(l.length>1&&n.WTF)throw new Error("bad formula stack");return l[0]}function lG(t,e,r){var s=t.l+e,n=r.biff==2?1:2,i,a=t.read_shift(n);if(a==65535)return[[],Hr(t,e-2)];var l=Bh(t,a,r);return e!==a+n&&(i=Ih(t,e-a-n,l,r)),t.l=s,[l,i]}function cG(t,e,r){var s=t.l+e,n=r.biff==2?1:2,i,a=t.read_shift(n);if(a==65535)return[[],Hr(t,e-2)];var l=Bh(t,a,r);return e!==a+n&&(i=Ih(t,e-a-n,l,r)),t.l=s,[l,i]}function dG(t,e,r,s){var n=t.l+e,i=Bh(t,s,r),a;return n!==t.l&&(a=Ih(t,n-t.l,i,r)),[i,a]}function uG(t,e,r){var s=t.l+e,n,i=t.read_shift(2),a=Bh(t,i,r);return i==65535?[[],Hr(t,e-2)]:(e!==i+2&&(n=Ih(t,s-i-2,a,r)),[a,n])}function hG(t){var e;if(wi(t,t.l+6)!==65535)return[Or(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function Bp(t,e,r){var s=t.l+e,n=ei(t);r.biff==2&&++t.l;var i=hG(t),a=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var l=cG(t,s-t.l,r);return{cell:n,val:i[0],formula:l,shared:a>>3&1,tt:i[1]}}function _x(t,e,r){var s=t.read_shift(4),n=Bh(t,s,r),i=t.read_shift(4),a=i>0?Ih(t,i,n,r):null;return[n,a]}var fG=_x,Nx=_x,mG=_x,xG=_x,pG={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},PC={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},gG={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function mN(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function $p(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}var uu={},sc={};function hu(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function MC(t,e,r,s,n,i){try{s.cellNF&&(t.z=He[e])}catch(l){if(s.WTF)throw l}if(!(t.t==="z"&&!s.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=vr(t.v)),(!s||s.cellText!==!1)&&t.t!=="z")try{if(He[e]==null&&Do(yU[e]||"General",e),t.t==="e")t.w=t.w||ml[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Qu(t.v);else if(t.t==="d"){var a=ns(t.v);(a|0)===a?t.w=a.toString(10):t.w=Qu(a)}else{if(t.v===void 0)return"";t.w=Zo(t.v,sc)}else t.t==="d"?t.w=Js(e,ns(t.v),sc):t.w=Js(e,t.v,sc)}catch(l){if(s.WTF)throw l}if(s.cellStyles&&r!=null)try{t.s=i.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=Nm(n.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),s.WTF&&(t.s.fgColor.raw_rgb=n.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=Nm(n.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),s.WTF&&(t.s.bgColor.raw_rgb=n.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(l){if(s.WTF&&i.Fills)throw l}}}function vG(t,e){var r=zt(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=st(r))}var yG=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,bG=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,wG=/<(?:\w:)?hyperlink [^>]*>/mg,kG=/"(\w*:\w*)"/,_G=/<(?:\w:)?col\b[^>]*[\/]?>/g,NG=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,jG=/<(?:\w:)?pageMargins[^>]*\/>/g,RC=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,EG=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,SG=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function CG(t,e,r,s,n,i,a){if(!t)return t;s||(s={"!id":{}});var l=e.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",u="",h=t.match(bG);h?(d=t.slice(0,h.index),u=t.slice(h.index+h[0].length)):d=u=t;var f=d.match(RC);f?gb(f[0],l,n,r):(f=d.match(EG))&&TG(f[0],f[1]||"",l,n,r);var m=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var x=d.slice(m,m+50).match(kG);x&&vG(l,x[1])}var p=d.match(SG);p&&p[1]&&DG(p[1],n);var g=[];if(e.cellStyles){var v=d.match(_G);v&&PG(g,v)}h&&OG(h[1],l,e,c,i,a);var b=u.match(NG);b&&(l["!autofilter"]=MG(b[0]));var y=[],k=u.match(yG);if(k)for(m=0;m!=k.length;++m)y[m]=zt(k[m].slice(k[m].indexOf('"')+1));var N=u.match(wG);N&&AG(l,N,s);var E=u.match(jG);if(E&&(l["!margins"]=FG($e(E[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=st(c)),e.sheetRows>0&&l["!ref"]){var j=zt(l["!ref"]);e.sheetRows<=+j.e.r&&(j.e.r=e.sheetRows-1,j.e.r>c.e.r&&(j.e.r=c.e.r),j.e.r<j.s.r&&(j.s.r=j.e.r),j.e.c>c.e.c&&(j.e.c=c.e.c),j.e.c<j.s.c&&(j.s.c=j.e.c),l["!fullref"]=l["!ref"],l["!ref"]=st(j))}return g.length>0&&(l["!cols"]=g),y.length>0&&(l["!merges"]=y),l}function gb(t,e,r,s){var n=$e(t);r.Sheets[s]||(r.Sheets[s]={}),n.codeName&&(r.Sheets[s].CodeName=at(pt(n.codeName)))}function TG(t,e,r,s,n){gb(t.slice(0,t.indexOf(">")),r,s,n)}function AG(t,e,r){for(var s=Array.isArray(t),n=0;n!=e.length;++n){var i=$e(pt(e[n]),!0);if(!i.ref)return;var a=((r||{})["!id"]||[])[i.id];a?(i.Target=a.Target,i.location&&(i.Target+="#"+at(i.location))):(i.Target="#"+at(i.location),a={Target:i.Target,TargetMode:"Internal"}),i.Rel=a,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=zt(i.ref),c=l.s.r;c<=l.e.r;++c)for(var d=l.s.c;d<=l.e.c;++d){var u=Ve({c:d,r:c});s?(t[c]||(t[c]=[]),t[c][d]||(t[c][d]={t:"z",v:void 0}),t[c][d].l=i):(t[u]||(t[u]={t:"z",v:void 0}),t[u].l=i)}}}function FG(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function PG(t,e){for(var r=!1,s=0;s!=e.length;++s){var n=$e(e[s],!0);n.hidden&&(n.hidden=jt(n.hidden));var i=parseInt(n.min,10)-1,a=parseInt(n.max,10)-1;for(n.outlineLevel&&(n.level=+n.outlineLevel||0),delete n.min,delete n.max,n.width=+n.width,!r&&n.width&&(r=!0,xb(n.width)),Rc(n);i<=a;)t[i++]=Nr(n)}}function MG(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}var RG=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function DG(t,e){e.Views||(e.Views=[{}]),(t.match(RG)||[]).forEach(function(r,s){var n=$e(r);e.Views[s]||(e.Views[s]={}),+n.zoomScale&&(e.Views[s].zoom=+n.zoomScale),jt(n.rightToLeft)&&(e.Views[s].RTL=!0)})}var OG=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,s=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,n=/ref=["']([^"']*)["']/,i=Zu("v"),a=Zu("f");return function(c,d,u,h,f,m){for(var x=0,p="",g=[],v=[],b=0,y=0,k=0,N="",E,j,_=0,S=0,C,F,P=0,B=0,Q=Array.isArray(m.CellXf),D,I=[],te=[],re=Array.isArray(d),W=[],K={},Z=!1,M=!!u.sheetStubs,X=c.split(e),V=0,Y=X.length;V!=Y;++V){p=X[V].trim();var H=p.length;if(H!==0){var ie=0;e:for(x=0;x<H;++x)switch(p[x]){case">":if(p[x-1]!="/"){++x;break e}if(u&&u.cellStyles){if(j=$e(p.slice(ie,x),!0),_=j.r!=null?parseInt(j.r,10):_+1,S=-1,u.sheetRows&&u.sheetRows<_)continue;K={},Z=!1,j.ht&&(Z=!0,K.hpt=parseFloat(j.ht),K.hpx=rh(K.hpt)),j.hidden=="1"&&(Z=!0,K.hidden=!0),j.outlineLevel!=null&&(Z=!0,K.level=+j.outlineLevel),Z&&(W[_-1]=K)}break;case"<":ie=x;break}if(ie>=x)break;if(j=$e(p.slice(ie,x),!0),_=j.r!=null?parseInt(j.r,10):_+1,S=-1,!(u.sheetRows&&u.sheetRows<_)){h.s.r>_-1&&(h.s.r=_-1),h.e.r<_-1&&(h.e.r=_-1),u&&u.cellStyles&&(K={},Z=!1,j.ht&&(Z=!0,K.hpt=parseFloat(j.ht),K.hpx=rh(K.hpt)),j.hidden=="1"&&(Z=!0,K.hidden=!0),j.outlineLevel!=null&&(Z=!0,K.level=+j.outlineLevel),Z&&(W[_-1]=K)),g=p.slice(x).split(t);for(var de=0;de!=g.length&&g[de].trim().charAt(0)=="<";++de);for(g=g.slice(de),x=0;x!=g.length;++x)if(p=g[x].trim(),p.length!==0){if(v=p.match(r),b=x,y=0,k=0,p="<c "+(p.slice(0,1)=="<"?">":"")+p,v!=null&&v.length===2){for(b=0,N=v[1],y=0;y!=N.length&&!((k=N.charCodeAt(y)-64)<1||k>26);++y)b=26*b+k;--b,S=b}else++S;for(y=0;y!=p.length&&p.charCodeAt(y)!==62;++y);if(++y,j=$e(p.slice(0,y),!0),j.r||(j.r=Ve({r:_-1,c:S})),N=p.slice(y),E={t:""},(v=N.match(i))!=null&&v[1]!==""&&(E.v=at(v[1])),u.cellFormula){if((v=N.match(a))!=null&&v[1]!==""){if(E.f=at(pt(v[1])).replace(/\r\n/g,`
`),u.xlfn||(E.f=dN(E.f)),v[0].indexOf('t="array"')>-1)E.F=(N.match(n)||[])[1],E.F.indexOf(":")>-1&&I.push([zt(E.F),E.F]);else if(v[0].indexOf('t="shared"')>-1){F=$e(v[0]);var xe=at(pt(v[1]));u.xlfn||(xe=dN(xe)),te[parseInt(F.si,10)]=[F,xe,j.r]}}else(v=N.match(/<f[^>]*\/>/))&&(F=$e(v[0]),te[F.si]&&(E.f=qY(te[F.si][1],te[F.si][2],j.r)));var le=es(j.r);for(y=0;y<I.length;++y)le.r>=I[y][0].s.r&&le.r<=I[y][0].e.r&&le.c>=I[y][0].s.c&&le.c<=I[y][0].e.c&&(E.F=I[y][1])}if(j.t==null&&E.v===void 0)if(E.f||E.F)E.v=0,E.t="n";else if(M)E.t="z";else continue;else E.t=j.t||"n";switch(h.s.c>S&&(h.s.c=S),h.e.c<S&&(h.e.c=S),E.t){case"n":if(E.v==""||E.v==null){if(!M)continue;E.t="z"}else E.v=parseFloat(E.v);break;case"s":if(typeof E.v>"u"){if(!M)continue;E.t="z"}else C=uu[parseInt(E.v,10)],E.v=C.t,E.r=C.r,u.cellHTML&&(E.h=C.h);break;case"str":E.t="s",E.v=E.v!=null?pt(E.v):"",u.cellHTML&&(E.h=nb(E.v));break;case"inlineStr":v=N.match(s),E.t="s",v!=null&&(C=mb(v[1]))?(E.v=C.t,u.cellHTML&&(E.h=C.h)):E.v="";break;case"b":E.v=jt(E.v);break;case"d":u.cellDates?E.v=vr(E.v,1):(E.v=ns(vr(E.v,1)),E.t="n");break;case"e":(!u||u.cellText!==!1)&&(E.w=E.v),E.v=tC[E.v];break}if(P=B=0,D=null,Q&&j.s!==void 0&&(D=m.CellXf[j.s],D!=null&&(D.numFmtId!=null&&(P=D.numFmtId),u.cellStyles&&D.fillId!=null&&(B=D.fillId))),MC(E,P,B,u,f,m),u.cellDates&&Q&&E.t=="n"&&qc(He[P])&&(E.t="d",E.v=wx(E.v)),j.cm&&u.xlmeta){var he=(u.xlmeta.Cell||[])[+j.cm-1];he&&he.type=="XLDAPR"&&(E.D=!0)}if(re){var A=es(j.r);d[A.r]||(d[A.r]=[]),d[A.r][A.c]=E}else d[j.r]=E}}}}W.length>0&&(d["!rows"]=W)}}();function LG(t,e){var r={},s=t.l+e;r.r=t.read_shift(4),t.l+=4;var n=t.read_shift(2);t.l+=1;var i=t.read_shift(1);return t.l=s,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=n/20),r}var IG=fl;function BG(){}function $G(t,e){var r={},s=t[t.l];return++t.l,r.above=!(s&64),r.left=!(s&128),t.l+=18,r.name=lV(t),r}function zG(t){var e=tn(t);return[e]}function UG(t){var e=hl(t);return[e]}function VG(t){var e=tn(t),r=t.read_shift(1);return[e,r,"b"]}function WG(t){var e=hl(t),r=t.read_shift(1);return[e,r,"b"]}function HG(t){var e=tn(t),r=t.read_shift(1);return[e,r,"e"]}function YG(t){var e=hl(t),r=t.read_shift(1);return[e,r,"e"]}function qG(t){var e=tn(t),r=t.read_shift(4);return[e,r,"s"]}function GG(t){var e=hl(t),r=t.read_shift(4);return[e,r,"s"]}function KG(t){var e=tn(t),r=Or(t);return[e,r,"n"]}function DC(t){var e=hl(t),r=Or(t);return[e,r,"n"]}function XG(t){var e=tn(t),r=ub(t);return[e,r,"n"]}function QG(t){var e=hl(t),r=ub(t);return[e,r,"n"]}function ZG(t){var e=tn(t),r=cb(t);return[e,r,"is"]}function JG(t){var e=tn(t),r=Ur(t);return[e,r,"str"]}function eK(t){var e=hl(t),r=Ur(t);return[e,r,"str"]}function tK(t,e,r){var s=t.l+e,n=tn(t);n.r=r["!row"];var i=t.read_shift(1),a=[n,i,"b"];if(r.cellFormula){t.l+=2;var l=Nx(t,s-t.l,r);a[3]=Mr(l,null,n,r.supbooks,r)}else t.l=s;return a}function rK(t,e,r){var s=t.l+e,n=tn(t);n.r=r["!row"];var i=t.read_shift(1),a=[n,i,"e"];if(r.cellFormula){t.l+=2;var l=Nx(t,s-t.l,r);a[3]=Mr(l,null,n,r.supbooks,r)}else t.l=s;return a}function sK(t,e,r){var s=t.l+e,n=tn(t);n.r=r["!row"];var i=Or(t),a=[n,i,"n"];if(r.cellFormula){t.l+=2;var l=Nx(t,s-t.l,r);a[3]=Mr(l,null,n,r.supbooks,r)}else t.l=s;return a}function nK(t,e,r){var s=t.l+e,n=tn(t);n.r=r["!row"];var i=Ur(t),a=[n,i,"str"];if(r.cellFormula){t.l+=2;var l=Nx(t,s-t.l,r);a[3]=Mr(l,null,n,r.supbooks,r)}else t.l=s;return a}var iK=fl;function aK(t,e){var r=t.l+e,s=fl(t),n=db(t),i=Ur(t),a=Ur(t),l=Ur(t);t.l=r;var c={rfx:s,relId:n,loc:i,display:l};return a&&(c.Tooltip=a),c}function oK(){}function lK(t,e,r){var s=t.l+e,n=Z3(t),i=t.read_shift(1),a=[n];if(a[2]=i,r.cellFormula){var l=fG(t,s-t.l,r);a[1]=l}else t.l=s;return a}function cK(t,e,r){var s=t.l+e,n=fl(t),i=[n];if(r.cellFormula){var a=xG(t,s-t.l,r);i[1]=a,t.l=s}else t.l=s;return i}var dK=["left","right","top","bottom","header","footer"];function uK(t){var e={};return dK.forEach(function(r){e[r]=Or(t)}),e}function hK(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function fK(){}function mK(){}function xK(t,e,r,s,n,i,a){if(!t)return t;var l=e||{};s||(s={"!id":{}});var c=l.dense?[]:{},d,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},h=!1,f=!1,m,x,p,g,v,b,y,k,N,E=[];l.biff=12,l["!row"]=0;var j=0,_=!1,S=[],C={},F=l.supbooks||n.supbooks||[[]];if(F.sharedf=C,F.arrayf=S,F.SheetNames=n.SheetNames||n.Sheets.map(function(re){return re.name}),!l.supbooks&&(l.supbooks=F,n.Names))for(var P=0;P<n.Names.length;++P)F[0][P+1]=n.Names[P];var B=[],Q=[],D=!1;Sm[16]={n:"BrtShortReal",f:DC};var I;if(Li(t,function(W,K,Z){if(!f)switch(Z){case 148:d=W;break;case 0:m=W,l.sheetRows&&l.sheetRows<=m.r&&(f=!0),k=jr(g=m.r),l["!row"]=m.r,(W.hidden||W.hpt||W.level!=null)&&(W.hpt&&(W.hpx=rh(W.hpt)),Q[W.r]=W);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(x={t:W[2]},W[2]){case"n":x.v=W[1];break;case"s":y=uu[W[1]],x.v=y.t,x.r=y.r;break;case"b":x.v=!!W[1];break;case"e":x.v=W[1],l.cellText!==!1&&(x.w=ml[x.v]);break;case"str":x.t="s",x.v=W[1];break;case"is":x.t="s",x.v=W[1].t;break}if((p=a.CellXf[W[0].iStyleRef])&&MC(x,p.numFmtId,null,l,i,a),v=W[0].c==-1?v+1:W[0].c,l.dense?(c[g]||(c[g]=[]),c[g][v]=x):c[cr(v)+k]=x,l.cellFormula){for(_=!1,j=0;j<S.length;++j){var M=S[j];m.r>=M[0].s.r&&m.r<=M[0].e.r&&v>=M[0].s.c&&v<=M[0].e.c&&(x.F=st(M[0]),_=!0)}!_&&W.length>3&&(x.f=W[3])}if(u.s.r>m.r&&(u.s.r=m.r),u.s.c>v&&(u.s.c=v),u.e.r<m.r&&(u.e.r=m.r),u.e.c<v&&(u.e.c=v),l.cellDates&&p&&x.t=="n"&&qc(He[p.numFmtId])){var X=go(x.v);X&&(x.t="d",x.v=new Date(X.y,X.m-1,X.d,X.H,X.M,X.S,X.u))}I&&(I.type=="XLDAPR"&&(x.D=!0),I=void 0);break;case 1:case 12:if(!l.sheetStubs||h)break;x={t:"z",v:void 0},v=W[0].c==-1?v+1:W[0].c,l.dense?(c[g]||(c[g]=[]),c[g][v]=x):c[cr(v)+k]=x,u.s.r>m.r&&(u.s.r=m.r),u.s.c>v&&(u.s.c=v),u.e.r<m.r&&(u.e.r=m.r),u.e.c<v&&(u.e.c=v),I&&(I.type=="XLDAPR"&&(x.D=!0),I=void 0);break;case 176:E.push(W);break;case 49:I=((l.xlmeta||{}).Cell||[])[W-1];break;case 494:var V=s["!id"][W.relId];for(V?(W.Target=V.Target,W.loc&&(W.Target+="#"+W.loc),W.Rel=V):W.relId==""&&(W.Target="#"+W.loc),g=W.rfx.s.r;g<=W.rfx.e.r;++g)for(v=W.rfx.s.c;v<=W.rfx.e.c;++v)l.dense?(c[g]||(c[g]=[]),c[g][v]||(c[g][v]={t:"z",v:void 0}),c[g][v].l=W):(b=Ve({c:v,r:g}),c[b]||(c[b]={t:"z",v:void 0}),c[b].l=W);break;case 426:if(!l.cellFormula)break;S.push(W),N=l.dense?c[g][v]:c[cr(v)+k],N.f=Mr(W[1],u,{r:m.r,c:v},F,l),N.F=st(W[0]);break;case 427:if(!l.cellFormula)break;C[Ve(W[0].s)]=W[1],N=l.dense?c[g][v]:c[cr(v)+k],N.f=Mr(W[1],u,{r:m.r,c:v},F,l);break;case 60:if(!l.cellStyles)break;for(;W.e>=W.s;)B[W.e--]={width:W.w/256,hidden:!!(W.flags&1),level:W.level},D||(D=!0,xb(W.w/256)),Rc(B[W.e+1]);break;case 161:c["!autofilter"]={ref:st(W)};break;case 476:c["!margins"]=W;break;case 147:n.Sheets[r]||(n.Sheets[r]={}),W.name&&(n.Sheets[r].CodeName=W.name),(W.above||W.left)&&(c["!outline"]={above:W.above,left:W.left});break;case 137:n.Views||(n.Views=[{}]),n.Views[0]||(n.Views[0]={}),W.RTL&&(n.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:h=!0;break;case 36:h=!1;break;case 37:h=!0;break;case 38:h=!1;break;default:if(!K.T){if(!h||l.WTF)throw new Error("Unexpected record 0x"+Z.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(u.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(c["!ref"]=st(d||u)),l.sheetRows&&c["!ref"]){var te=zt(c["!ref"]);l.sheetRows<=+te.e.r&&(te.e.r=l.sheetRows-1,te.e.r>u.e.r&&(te.e.r=u.e.r),te.e.r<te.s.r&&(te.s.r=te.e.r),te.e.c>u.e.c&&(te.e.c=u.e.c),te.e.c<te.s.c&&(te.s.c=te.e.c),c["!fullref"]=c["!ref"],c["!ref"]=st(te))}return E.length>0&&(c["!merges"]=E),B.length>0&&(c["!cols"]=B),Q.length>0&&(c["!rows"]=Q),c}function pK(t){var e=[],r=t.match(/^<c:numCache>/),s;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var a=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);a&&(e[+a[1]]=r?+a[2]:a[2])});var n=at((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){s=i.replace(/<.*?>/g,"")}),[e,n,s]}function gK(t,e,r,s,n,i){var a=i||{"!type":"chart"};if(!t)return i;var l=0,c=0,d="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(h){var f=pK(h);u.s.r=u.s.c=0,u.e.c=l,d=cr(l),f[0].forEach(function(m,x){a[d+jr(x)]={t:"n",v:m,z:f[1]},c=x}),u.e.r<c&&(u.e.r=c),++l}),l>0&&(a["!ref"]=st(u)),a}function vK(t,e,r,s,n){if(!t)return t;s||(s={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},a,l=t.match(RC);return l&&gb(l[0],i,n,r),(a=t.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=a[1]),s["!id"][i["!rel"]]&&(i["!drawel"]=s["!id"][i["!rel"]]),i}function yK(t,e){t.l+=10;var r=Ur(t);return{name:r}}function bK(t,e,r,s,n){if(!t)return t;s||(s={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},a=!1;return Li(t,function(c,d,u){switch(u){case 550:i["!rel"]=c;break;case 651:n.Sheets[r]||(n.Sheets[r]={}),c.name&&(n.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!a||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},e),s["!id"][i["!rel"]]&&(i["!drawel"]=s["!id"][i["!rel"]]),i}var OC=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],wK=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],kK=[],_K=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function xN(t,e){for(var r=0;r!=t.length;++r)for(var s=t[r],n=0;n!=e.length;++n){var i=e[n];if(s[i[0]]==null)s[i[0]]=i[1];else switch(i[2]){case"bool":typeof s[i[0]]=="string"&&(s[i[0]]=jt(s[i[0]]));break;case"int":typeof s[i[0]]=="string"&&(s[i[0]]=parseInt(s[i[0]],10));break}}}function pN(t,e){for(var r=0;r!=e.length;++r){var s=e[r];if(t[s[0]]==null)t[s[0]]=s[1];else switch(s[2]){case"bool":typeof t[s[0]]=="string"&&(t[s[0]]=jt(t[s[0]]));break;case"int":typeof t[s[0]]=="string"&&(t[s[0]]=parseInt(t[s[0]],10));break}}}function LC(t){pN(t.WBProps,OC),pN(t.CalcPr,_K),xN(t.WBView,wK),xN(t.Sheets,kK),sc.date1904=jt(t.WBProps.date1904)}var NK="][*?/\\".split("");function jK(t,e){if(t.length>31){if(e)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var r=!0;return NK.forEach(function(s){if(t.indexOf(s)!=-1){if(!e)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");r=!1}}),r}var EK=/<\w+:workbook/;function SK(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},s=!1,n="xmlns",i={},a=0;if(t.replace(Yr,function(c,d){var u=$e(c);switch(Jn(u[0])){case"<?xml":break;case"<workbook":c.match(EK)&&(n="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=u[n];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":OC.forEach(function(h){if(u[h[0]]!=null)switch(h[2]){case"bool":r.WBProps[h[0]]=jt(u[h[0]]);break;case"int":r.WBProps[h[0]]=parseInt(u[h[0]],10);break;default:r.WBProps[h[0]]=u[h[0]]}}),u.codeName&&(r.WBProps.CodeName=pt(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=at(pt(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":s=!0;break;case"</definedNames>":s=!1;break;case"<definedName":i={},i.Name=pt(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),jt(u.hidden||"0")&&(i.Hidden=!0),a=d+c.length;break;case"</definedName>":i.Ref=at(pt(t.slice(a,d))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":s=!0;break;case"</AlternateContent>":s=!1;break;case"<revisionPtr":break;default:if(!s&&e.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return c}),HU.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return LC(r),r}function CK(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=q1(t),r.name=Ur(t),r}function TK(t,e){var r={},s=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var n=e>8?Ur(t):"";return n.length>0&&(r.CodeName=n),r.autoCompressPictures=!!(s&65536),r.backupFile=!!(s&64),r.checkCompatibility=!!(s&4096),r.date1904=!!(s&1),r.filterPrivacy=!!(s&8),r.hidePivotFieldList=!!(s&1024),r.promptedSolutions=!!(s&16),r.publishItems=!!(s&2048),r.refreshAllConnections=!!(s&262144),r.saveExternalLinkValues=!!(s&128),r.showBorderUnselectedTables=!!(s&4),r.showInkAnnotation=!!(s&32),r.showObjects=["all","placeholders","none"][s>>13&3],r.showPivotChartFilter=!!(s&32768),r.updateLinks=["userSet","never","always"][s>>8&3],r}function AK(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function FK(t,e,r){var s=t.l+e;t.l+=4,t.l+=1;var n=t.read_shift(4),i=cV(t),a=mG(t,0,r),l=db(t);t.l=s;var c={Name:i,Ptg:a};return n<268435455&&(c.Sheet=n),l&&(c.Comment=l),c}function PK(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},s=[],n=!1;e||(e={}),e.biff=12;var i=[],a=[[]];return a.SheetNames=[],a.XTI=[],Sm[16]={n:"BrtFRTArchID$",f:AK},Li(t,function(c,d,u){switch(u){case 156:a.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(e.SID=c.Sheet),c.Ref=Mr(c.Ptg,null,null,a,e),delete e.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:a[0].length?a.push([u,c]):a[0]=[u,c],a[a.length-1].XTI=[];break;case 362:a.length===0&&(a[0]=[],a[0].XTI=[]),a[a.length-1].XTI=a[a.length-1].XTI.concat(c),a.XTI=a.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:s.push(u),n=!0;break;case 36:s.pop(),n=!1;break;case 37:s.push(u),n=!0;break;case 38:s.pop(),n=!1;break;case 16:break;default:if(!d.T){if(!n||e.WTF&&s[s.length-1]!=37&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},e),LC(r),r.Names=i,r.supbooks=a,r}function MK(t,e,r){return e.slice(-4)===".bin"?PK(t,r):SK(t,r)}function RK(t,e,r,s,n,i,a,l){return e.slice(-4)===".bin"?xK(t,s,r,n,i,a,l):CG(t,s,r,n,i,a,l)}function DK(t,e,r,s,n,i,a,l){return e.slice(-4)===".bin"?bK(t,s,r,n,i):vK(t,s,r,n,i)}function OK(t,e,r,s,n,i,a,l){return e.slice(-4)===".bin"?WY():HY()}function LK(t,e,r,s,n,i,a,l){return e.slice(-4)===".bin"?UY():VY()}function IK(t,e,r,s){return e.slice(-4)===".bin"?iY(t,r,s):JH(t,r,s)}function BK(t,e,r){return _C(t,r)}function $K(t,e,r){return e.slice(-4)===".bin"?wH(t,r):yH(t,r)}function zK(t,e,r){return e.slice(-4)===".bin"?BY(t,r):RY(t,r)}function UK(t,e,r){return e.slice(-4)===".bin"?FY(t):TY(t)}function VK(t,e,r,s){return r.slice(-4)===".bin"?PY(t,e,r,s):void 0}function WK(t,e,r){return e.slice(-4)===".bin"?SY(t,e,r):CY(t,e,r)}var IC=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,BC=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function an(t,e){var r=t.split(/\s+/),s=[];if(e||(s[0]=r[0]),r.length===1)return s;var n=t.match(IC),i,a,l,c;if(n)for(c=0;c!=n.length;++c)i=n[c].match(BC),(a=i[1].indexOf(":"))===-1?s[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(a+1),s[l]=i[2].slice(1,i[2].length-1));return s}function HK(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var s=t.match(IC),n,i,a,l;if(s)for(l=0;l!=s.length;++l)n=s[l].match(BC),(i=n[1].indexOf(":"))===-1?r[n[1]]=n[2].slice(1,n[2].length-1):(n[1].slice(0,6)==="xmlns:"?a="xmlns"+n[1].slice(6):a=n[1].slice(i+1),r[a]=n[2].slice(1,n[2].length-1));return r}var fu;function YK(t,e){var r=fu[t]||at(t);return r==="General"?Zo(e):Js(r,e)}function qK(t,e,r,s){var n=s;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":n=jt(s);break;case"i2":case"int":n=parseInt(s,10);break;case"r4":case"float":n=parseFloat(s);break;case"date":case"dateTime.tz":n=vr(s);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[at(e)]=n}function GK(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||ml[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Qu(t.v):t.w=Zo(t.v):t.w=YK(e||"General",t.v)}catch(i){if(r.WTF)throw i}try{var s=fu[e]||e||"General";if(r.cellNF&&(t.z=s),r.cellDates&&t.t=="n"&&qc(s)){var n=go(t.v);n&&(t.t="d",t.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}catch(i){if(r.WTF)throw i}}}function KK(t,e,r){if(r.cellStyles&&e.Interior){var s=e.Interior;s.Pattern&&(s.patternType=qH[s.Pattern]||s.Pattern)}t[e.ID]=e}function XK(t,e,r,s,n,i,a,l,c,d){var u="General",h=s.StyleID,f={};d=d||{};var m=[],x=0;for(h===void 0&&l&&(h=l.StyleID),h===void 0&&a&&(h=a.StyleID);i[h]!==void 0&&(i[h].nf&&(u=i[h].nf),i[h].Interior&&m.push(i[h].Interior),!!i[h].Parent);)h=i[h].Parent;switch(r.Type){case"Boolean":s.t="b",s.v=jt(t);break;case"String":s.t="s",s.r=I_(at(t)),s.v=t.indexOf("<")>-1?at(e||t).replace(/<.*?>/g,""):s.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),s.v=(vr(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),s.v!==s.v?s.v=at(t):s.v<60&&(s.v=s.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":s.v===void 0&&(s.v=+t),s.t||(s.t="n");break;case"Error":s.t="e",s.v=tC[t],d.cellText!==!1&&(s.w=t);break;default:t==""&&e==""?s.t="z":(s.t="s",s.v=I_(e||t));break}if(GK(s,u,d),d.cellFormula!==!1)if(s.Formula){var p=at(s.Formula);p.charCodeAt(0)==61&&(p=p.slice(1)),s.f=rc(p,n),delete s.Formula,s.ArrayRange=="RC"?s.F=rc("RC:RC",n):s.ArrayRange&&(s.F=rc(s.ArrayRange,n),c.push([zt(s.F),s.F]))}else for(x=0;x<c.length;++x)n.r>=c[x][0].s.r&&n.r<=c[x][0].e.r&&n.c>=c[x][0].s.c&&n.c<=c[x][0].e.c&&(s.F=c[x][1]);d.cellStyles&&(m.forEach(function(g){!f.patternType&&g.patternType&&(f.patternType=g.patternType)}),s.s=f),s.StyleID!==void 0&&(s.ixfe=s.StyleID)}function QK(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function zp(t,e){var r=e||{};E3();var s=Ld(ib(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(s=pt(s));var n=s.slice(0,1024).toLowerCase(),i=!1;if(n=n.replace(/".*?"/g,""),(n.indexOf(">")&1023)>Math.min(n.indexOf(",")&1023,n.indexOf(";")&1023)){var a=Nr(r);return a.type="string",eh.to_workbook(s,a)}if(n.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(gt){n.indexOf("<"+gt)>=0&&(i=!0)}),i)return aX(s,r);fu={"General Number":"General","General Date":He[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":He[15],"Short Date":He[14],"Long Time":He[19],"Medium Time":He[18],"Short Time":He[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:He[2],Standard:He[4],Percent:He[10],Scientific:He[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],d,u={},h=[],f=r.dense?[]:{},m="",x={},p={},g=an('<Data ss:Type="String">'),v=0,b=0,y=0,k={s:{r:2e6,c:2e6},e:{r:0,c:0}},N={},E={},j="",_=0,S=[],C={},F={},P=0,B=[],Q=[],D={},I=[],te,re=!1,W=[],K=[],Z={},M=0,X=0,V={Sheets:[],WBProps:{date1904:!1}},Y={};Ju.lastIndex=0,s=s.replace(/<!--([\s\S]*?)-->/mg,"");for(var H="";l=Ju.exec(s);)switch(l[3]=(H=l[3]).toLowerCase()){case"data":if(H=="data"){if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?XK(s.slice(v,l.index),j,g,c[c.length-1][0]=="comment"?D:x,{c:b,r:y},N,I[b],p,W,r):(j="",g=an(l[0]),v=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(Q.length>0&&(x.c=Q),(!r.sheetRows||r.sheetRows>y)&&x.v!==void 0&&(r.dense?(f[y]||(f[y]=[]),f[y][b]=x):f[cr(b)+jr(y)]=x),x.HRef&&(x.l={Target:at(x.HRef)},x.HRefScreenTip&&(x.l.Tooltip=x.HRefScreenTip),delete x.HRef,delete x.HRefScreenTip),(x.MergeAcross||x.MergeDown)&&(M=b+(parseInt(x.MergeAcross,10)|0),X=y+(parseInt(x.MergeDown,10)|0),S.push({s:{c:b,r:y},e:{c:M,r:X}})),!r.sheetStubs)x.MergeAcross?b=M+1:++b;else if(x.MergeAcross||x.MergeDown){for(var ie=b;ie<=M;++ie)for(var de=y;de<=X;++de)(ie>b||de>y)&&(r.dense?(f[de]||(f[de]=[]),f[de][ie]={t:"z"}):f[cr(ie)+jr(de)]={t:"z"});b=M+1}else++b;else x=HK(l[0]),x.Index&&(b=+x.Index-1),b<k.s.c&&(k.s.c=b),b>k.e.c&&(k.e.c=b),l[0].slice(-2)==="/>"&&++b,Q=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(y<k.s.r&&(k.s.r=y),y>k.e.r&&(k.e.r=y),l[0].slice(-2)==="/>"&&(p=an(l[0]),p.Index&&(y=+p.Index-1)),b=0,++y):(p=an(l[0]),p.Index&&(y=+p.Index-1),Z={},(p.AutoFitHeight=="0"||p.Height)&&(Z.hpx=parseInt(p.Height,10),Z.hpt=kC(Z.hpx),K[y]=Z),p.Hidden=="1"&&(Z.hidden=!0,K[y]=Z));break;case"worksheet":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));h.push(m),k.s.r<=k.e.r&&k.s.c<=k.e.c&&(f["!ref"]=st(k),r.sheetRows&&r.sheetRows<=k.e.r&&(f["!fullref"]=f["!ref"],k.e.r=r.sheetRows-1,f["!ref"]=st(k))),S.length&&(f["!merges"]=S),I.length>0&&(f["!cols"]=I),K.length>0&&(f["!rows"]=K),u[m]=f}else k={s:{r:2e6,c:2e6},e:{r:0,c:0}},y=b=0,c.push([l[3],!1]),d=an(l[0]),m=at(d.Name),f=r.dense?[]:{},S=[],W=[],K=[],Y={name:m,Hidden:0},V.Sheets.push(Y);break;case"table":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),I=[],re=!1}break;case"style":l[1]==="/"?KK(N,E,r):E=an(l[0]);break;case"numberformat":E.nf=at(an(l[0]).Format||"General"),fu[E.nf]&&(E.nf=fu[E.nf]);for(var xe=0;xe!=392&&He[xe]!=E.nf;++xe);if(xe==392){for(xe=57;xe!=392;++xe)if(He[xe]==null){Do(E.nf,xe);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(te=an(l[0]),te.Hidden&&(te.hidden=!0,delete te.Hidden),te.Width&&(te.wpx=parseInt(te.Width,10)),!re&&te.wpx>10){re=!0,Jr=bC;for(var le=0;le<I.length;++le)I[le]&&Rc(I[le])}re&&Rc(te),I[te.Index-1||I.length]=te;for(var he=0;he<+te.Span;++he)I[I.length]=Nr(te);break;case"namedrange":if(l[1]==="/")break;V.Names||(V.Names=[]);var A=$e(l[0]),Ce={Name:A.Name,Ref:rc(A.RefersTo.slice(1),{r:0,c:0})};V.Sheets.length>0&&(Ce.Sheet=V.Sheets.length-1),V.Names.push(Ce);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?j+=s.slice(_,l.index):_=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;E.Interior=an(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?RV(C,H,s.slice(P,l.index)):P=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));QK(D),Q.push(D)}else c.push([l[3],!1]),d=an(l[0]),D={a:d.Author};break;case"autofilter":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var be=an(l[0]);f["!autofilter"]={ref:rc(be.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return kN(s,r);var ze=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ze=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ze=!1}break;case"excelworkbook":switch(l[3]){case"date1904":V.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ze=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:ze=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(s.slice(P,l.index)){case"SheetHidden":Y.Hidden=1;break;case"SheetVeryHidden":Y.Hidden=2;break}else P=l.index+l[0].length;break;case"header":f["!margins"]||hu(f["!margins"]={},"xlml"),isNaN(+$e(l[0]).Margin)||(f["!margins"].header=+$e(l[0]).Margin);break;case"footer":f["!margins"]||hu(f["!margins"]={},"xlml"),isNaN(+$e(l[0]).Margin)||(f["!margins"].footer=+$e(l[0]).Margin);break;case"pagemargins":var Be=$e(l[0]);f["!margins"]||hu(f["!margins"]={},"xlml"),isNaN(+Be.Top)||(f["!margins"].top=+Be.Top),isNaN(+Be.Left)||(f["!margins"].left=+Be.Left),isNaN(+Be.Right)||(f["!margins"].right=+Be.Right),isNaN(+Be.Bottom)||(f["!margins"].bottom=+Be.Bottom);break;case"displayrighttoleft":V.Views||(V.Views=[]),V.Views[0]||(V.Views[0]={}),V.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ze=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ze=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ze=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ze=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ze=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ze=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ze=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ze=!1}break;case"smarttags":break;default:ze=!1;break}if(ze||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?qK(F,H,B,s.slice(P,l.index)):(B=l,P=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var Ee={};return!r.bookSheets&&!r.bookProps&&(Ee.Sheets=u),Ee.SheetNames=h,Ee.Workbook=V,Ee.SSF=Nr(He),Ee.Props=C,Ee.Custprops=F,Ee}function Q1(t,e){switch(bb(e=e||{}),e.type||"base64"){case"base64":return zp(Ps(t),e);case"binary":case"buffer":case"file":return zp(t,e);case"array":return zp(ul(t),e)}}function ZK(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=hV(r),r.length-r.l<=4)return e;var s=r.read_shift(4);if(s==0||s>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(s=r.read_shift(4),s!==1907505652)||(e.UnicodeClipboardFormat=fV(r),s=r.read_shift(4),s==0||s>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var JK=[60,1084,2066,2165,2175];function eX(t,e,r,s,n){var i=s,a=[],l=r.slice(r.l,r.l+i);if(n&&n.enc&&n.enc.insitu&&l.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:n.enc.insitu(l)}a.push(l),r.l+=i;for(var c=wi(r,r.l),d=Z1[c],u=0;d!=null&&JK.indexOf(c)>-1;)i=wi(r,r.l+2),u=r.l+4,c==2066?u+=4:(c==2165||c==2175)&&(u+=12),l=r.slice(u,r.l+4+i),a.push(l),r.l+=4+i,d=Z1[c=wi(r,r.l)];var h=ea(a);wr(h,0);var f=0;h.lens=[];for(var m=0;m<a.length;++m)h.lens.push(f),f+=a[m].length;if(h.length<s)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+h.length+" < "+s;return e.f(h,h.length,n)}function Fn(t,e,r){if(t.t!=="z"&&t.XF){var s=0;try{s=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=He[s])}catch(i){if(e.WTF)throw i}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||ml[t.v]:s===0||s=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Qu(t.v):t.w=Zo(t.v):t.w=Js(s,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(i){if(e.WTF)throw i}if(e.cellDates&&s&&t.t=="n"&&qc(He[s]||String(s))){var n=go(t.v);n&&(t.t="d",t.v=new Date(n.y,n.m-1,n.d,n.H,n.M,n.S,n.u))}}}function $0(t,e,r){return{v:t,ixfe:e,t:r}}function tX(t,e){var r={opts:{}},s={},n=e.dense?[]:{},i={},a={},l=null,c=[],d="",u={},h,f="",m,x,p,g,v={},b=[],y,k,N=[],E=[],j={Sheets:[],WBProps:{date1904:!1},Views:[{}]},_={},S=function(ee){return ee<8?Oo[ee]:ee<64&&E[ee-8]||Oo[ee]},C=function(ee,Le,vt){var ut=Le.XF.data;if(!(!ut||!ut.patternType||!vt||!vt.cellStyles)){Le.s={},Le.s.patternType=ut.patternType;var sn;(sn=th(S(ut.icvFore)))&&(Le.s.fgColor={rgb:sn}),(sn=th(S(ut.icvBack)))&&(Le.s.bgColor={rgb:sn})}},F=function(ee,Le,vt){if(!(Z>1)&&!(vt.sheetRows&&ee.r>=vt.sheetRows)){if(vt.cellStyles&&Le.XF&&Le.XF.data&&C(ee,Le,vt),delete Le.ixfe,delete Le.XF,h=ee,f=Ve(ee),(!a||!a.s||!a.e)&&(a={s:{r:0,c:0},e:{r:0,c:0}}),ee.r<a.s.r&&(a.s.r=ee.r),ee.c<a.s.c&&(a.s.c=ee.c),ee.r+1>a.e.r&&(a.e.r=ee.r+1),ee.c+1>a.e.c&&(a.e.c=ee.c+1),vt.cellFormula&&Le.f){for(var ut=0;ut<b.length;++ut)if(!(b[ut][0].s.c>ee.c||b[ut][0].s.r>ee.r)&&!(b[ut][0].e.c<ee.c||b[ut][0].e.r<ee.r)){Le.F=st(b[ut][0]),(b[ut][0].s.c!=ee.c||b[ut][0].s.r!=ee.r)&&delete Le.f,Le.f&&(Le.f=""+Mr(b[ut][1],a,ee,W,P));break}}vt.dense?(n[ee.r]||(n[ee.r]=[]),n[ee.r][ee.c]=Le):n[f]=Le}},P={enc:!1,sbcch:0,snames:[],sharedf:v,arrayf:b,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(P.password=e.password);var B,Q=[],D=[],I=[],te=[],re=!1,W=[];W.SheetNames=P.snames,W.sharedf=P.sharedf,W.arrayf=P.arrayf,W.names=[],W.XTI=[];var K=0,Z=0,M=0,X=[],V=[],Y;P.codepage=1200,vn(1200);for(var H=!1;t.l<t.length-1;){var ie=t.l,de=t.read_shift(2);if(de===0&&K===10)break;var xe=t.l===t.length?0:t.read_shift(2),le=Z1[de];if(le&&le.f){if(e.bookSheets&&K===133&&de!==133)break;if(K=de,le.r===2||le.r==12){var he=t.read_shift(2);if(xe-=2,!P.enc&&he!==de&&((he&255)<<8|he>>8)!==de)throw new Error("rt mismatch: "+he+"!="+de);le.r==12&&(t.l+=10,xe-=10)}var A={};if(de===10?A=le.f(t,xe,P):A=eX(de,le,t,xe,P),Z==0&&[9,521,1033,2057].indexOf(K)===-1)continue;switch(de){case 34:r.opts.Date1904=j.WBProps.date1904=A;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(P.enc||(t.l=0),P.enc=A,!e.password)throw new Error("File is password-protected");if(A.valid==null)throw new Error("Encryption scheme unsupported");if(!A.valid)throw new Error("Password is incorrect");break;case 92:P.lastuser=A;break;case 66:var Ce=Number(A);switch(Ce){case 21010:Ce=1200;break;case 32768:Ce=1e4;break;case 32769:Ce=1252;break}vn(P.codepage=Ce),H=!0;break;case 317:P.rrtabid=A;break;case 25:P.winlocked=A;break;case 439:r.opts.RefreshAll=A;break;case 12:r.opts.CalcCount=A;break;case 16:r.opts.CalcDelta=A;break;case 17:r.opts.CalcIter=A;break;case 13:r.opts.CalcMode=A;break;case 14:r.opts.CalcPrecision=A;break;case 95:r.opts.CalcSaveRecalc=A;break;case 15:P.CalcRefMode=A;break;case 2211:r.opts.FullCalc=A;break;case 129:A.fDialog&&(n["!type"]="dialog"),A.fBelow||((n["!outline"]||(n["!outline"]={})).above=!0),A.fRight||((n["!outline"]||(n["!outline"]={})).left=!0);break;case 224:N.push(A);break;case 430:W.push([A]),W[W.length-1].XTI=[];break;case 35:case 547:W[W.length-1].push(A);break;case 24:case 536:Y={Name:A.Name,Ref:Mr(A.rgce,a,null,W,P)},A.itab>0&&(Y.Sheet=A.itab-1),W.names.push(Y),W[0]||(W[0]=[],W[0].XTI=[]),W[W.length-1].push(A),A.Name=="_xlnm._FilterDatabase"&&A.itab>0&&A.rgce&&A.rgce[0]&&A.rgce[0][0]&&A.rgce[0][0][0]=="PtgArea3d"&&(V[A.itab-1]={ref:st(A.rgce[0][0][1][2])});break;case 22:P.ExternCount=A;break;case 23:W.length==0&&(W[0]=[],W[0].XTI=[]),W[W.length-1].XTI=W[W.length-1].XTI.concat(A),W.XTI=W.XTI.concat(A);break;case 2196:if(P.biff<8)break;Y!=null&&(Y.Comment=A[1]);break;case 18:n["!protect"]=A;break;case 19:A!==0&&P.WTF&&console.error("Password verifier: "+A);break;case 133:i[A.pos]=A,P.snames.push(A.name);break;case 10:{if(--Z)break;if(a.e){if(a.e.r>0&&a.e.c>0){if(a.e.r--,a.e.c--,n["!ref"]=st(a),e.sheetRows&&e.sheetRows<=a.e.r){var be=a.e.r;a.e.r=e.sheetRows-1,n["!fullref"]=n["!ref"],n["!ref"]=st(a),a.e.r=be}a.e.r++,a.e.c++}Q.length>0&&(n["!merges"]=Q),D.length>0&&(n["!objects"]=D),I.length>0&&(n["!cols"]=I),te.length>0&&(n["!rows"]=te),j.Sheets.push(_)}d===""?u=n:s[d]=n,n=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(P.biff===8&&(P.biff={9:2,521:3,1033:4}[de]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[A.BIFFVer]||8),P.biffguess=A.BIFFVer==0,A.BIFFVer==0&&A.dt==4096&&(P.biff=5,H=!0,vn(P.codepage=28591)),P.biff==8&&A.BIFFVer==0&&A.dt==16&&(P.biff=2),Z++)break;if(n=e.dense?[]:{},P.biff<8&&!H&&(H=!0,vn(P.codepage=e.codepage||1252)),P.biff<5||A.BIFFVer==0&&A.dt==4096){d===""&&(d="Sheet1"),a={s:{r:0,c:0},e:{r:0,c:0}};var ze={pos:t.l-xe,name:d};i[ze.pos]=ze,P.snames.push(d)}else d=(i[ie]||{name:""}).name;A.dt==32&&(n["!type"]="chart"),A.dt==64&&(n["!type"]="macro"),Q=[],D=[],P.arrayf=b=[],I=[],te=[],re=!1,_={Hidden:(i[ie]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:n["!type"]=="chart"&&(e.dense?(n[A.r]||[])[A.c]:n[Ve({c:A.c,r:A.r})])&&++A.c,y={ixfe:A.ixfe,XF:N[A.ixfe]||{},v:A.val,t:"n"},M>0&&(y.z=X[y.ixfe>>8&63]),Fn(y,e,r.opts.Date1904),F({c:A.c,r:A.r},y,e);break;case 5:case 517:y={ixfe:A.ixfe,XF:N[A.ixfe],v:A.val,t:A.t},M>0&&(y.z=X[y.ixfe>>8&63]),Fn(y,e,r.opts.Date1904),F({c:A.c,r:A.r},y,e);break;case 638:y={ixfe:A.ixfe,XF:N[A.ixfe],v:A.rknum,t:"n"},M>0&&(y.z=X[y.ixfe>>8&63]),Fn(y,e,r.opts.Date1904),F({c:A.c,r:A.r},y,e);break;case 189:for(var Be=A.c;Be<=A.C;++Be){var Ee=A.rkrec[Be-A.c][0];y={ixfe:Ee,XF:N[Ee],v:A.rkrec[Be-A.c][1],t:"n"},M>0&&(y.z=X[y.ixfe>>8&63]),Fn(y,e,r.opts.Date1904),F({c:Be,r:A.r},y,e)}break;case 6:case 518:case 1030:{if(A.val=="String"){l=A;break}if(y=$0(A.val,A.cell.ixfe,A.tt),y.XF=N[y.ixfe],e.cellFormula){var gt=A.formula;if(gt&&gt[0]&&gt[0][0]&&gt[0][0][0]=="PtgExp"){var ur=gt[0][0][1][0],q=gt[0][0][1][1],J=Ve({r:ur,c:q});v[J]?y.f=""+Mr(A.formula,a,A.cell,W,P):y.F=((e.dense?(n[ur]||[])[q]:n[J])||{}).F}else y.f=""+Mr(A.formula,a,A.cell,W,P)}M>0&&(y.z=X[y.ixfe>>8&63]),Fn(y,e,r.opts.Date1904),F(A.cell,y,e),l=A}break;case 7:case 519:if(l)l.val=A,y=$0(A,l.cell.ixfe,"s"),y.XF=N[y.ixfe],e.cellFormula&&(y.f=""+Mr(l.formula,a,l.cell,W,P)),M>0&&(y.z=X[y.ixfe>>8&63]),Fn(y,e,r.opts.Date1904),F(l.cell,y,e),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{b.push(A);var ue=Ve(A[0].s);if(m=e.dense?(n[A[0].s.r]||[])[A[0].s.c]:n[ue],e.cellFormula&&m){if(!l||!ue||!m)break;m.f=""+Mr(A[1],a,A[0],W,P),m.F=st(A[0])}}break;case 1212:{if(!e.cellFormula)break;if(f){if(!l)break;v[Ve(l.cell)]=A[0],m=e.dense?(n[l.cell.r]||[])[l.cell.c]:n[Ve(l.cell)],(m||{}).f=""+Mr(A[0],a,h,W,P)}}break;case 253:y=$0(c[A.isst].t,A.ixfe,"s"),c[A.isst].h&&(y.h=c[A.isst].h),y.XF=N[y.ixfe],M>0&&(y.z=X[y.ixfe>>8&63]),Fn(y,e,r.opts.Date1904),F({c:A.c,r:A.r},y,e);break;case 513:e.sheetStubs&&(y={ixfe:A.ixfe,XF:N[A.ixfe],t:"z"},M>0&&(y.z=X[y.ixfe>>8&63]),Fn(y,e,r.opts.Date1904),F({c:A.c,r:A.r},y,e));break;case 190:if(e.sheetStubs)for(var Ne=A.c;Ne<=A.C;++Ne){var ge=A.ixfe[Ne-A.c];y={ixfe:ge,XF:N[ge],t:"z"},M>0&&(y.z=X[y.ixfe>>8&63]),Fn(y,e,r.opts.Date1904),F({c:Ne,r:A.r},y,e)}break;case 214:case 516:case 4:y=$0(A.val,A.ixfe,"s"),y.XF=N[y.ixfe],M>0&&(y.z=X[y.ixfe>>8&63]),Fn(y,e,r.opts.Date1904),F({c:A.c,r:A.r},y,e);break;case 0:case 512:Z===1&&(a=A);break;case 252:c=A;break;case 1054:if(P.biff==4){X[M++]=A[1];for(var pe=0;pe<M+163&&He[pe]!=A[1];++pe);pe>=163&&Do(A[1],M+163)}else Do(A[1],A[0]);break;case 30:{X[M++]=A;for(var Pe=0;Pe<M+163&&He[Pe]!=A;++Pe);Pe>=163&&Do(A,M+163)}break;case 229:Q=Q.concat(A);break;case 93:D[A.cmo[0]]=P.lastobj=A;break;case 438:P.lastobj.TxO=A;break;case 127:P.lastobj.ImData=A;break;case 440:for(g=A[0].s.r;g<=A[0].e.r;++g)for(p=A[0].s.c;p<=A[0].e.c;++p)m=e.dense?(n[g]||[])[p]:n[Ve({c:p,r:g})],m&&(m.l=A[1]);break;case 2048:for(g=A[0].s.r;g<=A[0].e.r;++g)for(p=A[0].s.c;p<=A[0].e.c;++p)m=e.dense?(n[g]||[])[p]:n[Ve({c:p,r:g})],m&&m.l&&(m.l.Tooltip=A[1]);break;case 28:{if(P.biff<=5&&P.biff>=2)break;m=e.dense?(n[A[0].r]||[])[A[0].c]:n[Ve(A[0])];var Qe=D[A[2]];m||(e.dense?(n[A[0].r]||(n[A[0].r]=[]),m=n[A[0].r][A[0].c]={t:"z"}):m=n[Ve(A[0])]={t:"z"},a.e.r=Math.max(a.e.r,A[0].r),a.s.r=Math.min(a.s.r,A[0].r),a.e.c=Math.max(a.e.c,A[0].c),a.s.c=Math.min(a.s.c,A[0].c)),m.c||(m.c=[]),x={a:A[1],t:Qe.TxO.t},m.c.push(x)}break;case 2173:_Y(N[A.ixfe],A.ext);break;case 125:{if(!P.cellStyles)break;for(;A.e>=A.s;)I[A.e--]={width:A.w/256,level:A.level||0,hidden:!!(A.flags&1)},re||(re=!0,xb(A.w/256)),Rc(I[A.e+1])}break;case 520:{var Ue={};A.level!=null&&(te[A.r]=Ue,Ue.level=A.level),A.hidden&&(te[A.r]=Ue,Ue.hidden=!0),A.hpt&&(te[A.r]=Ue,Ue.hpt=A.hpt,Ue.hpx=rh(A.hpt))}break;case 38:case 39:case 40:case 41:n["!margins"]||hu(n["!margins"]={}),n["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[de]]=A;break;case 161:n["!margins"]||hu(n["!margins"]={}),n["!margins"].header=A.header,n["!margins"].footer=A.footer;break;case 574:A.RTL&&(j.Views[0].RTL=!0);break;case 146:E=A;break;case 2198:B=A;break;case 140:k=A;break;case 442:d?_.CodeName=A||_.name:j.WBProps.CodeName=A||"ThisWorkbook";break}}else le||console.error("Missing Info for XLS Record 0x"+de.toString(16)),t.l+=xe}return r.SheetNames=Xn(i).sort(function(ft,ee){return Number(ft)-Number(ee)}).map(function(ft){return i[ft].name}),e.bookSheets||(r.Sheets=s),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&V.forEach(function(ft,ee){r.Sheets[r.SheetNames[ee]]["!autofilter"]=ft}),r.Strings=c,r.SSF=Nr(He),P.enc&&(r.Encryption=P.enc),B&&(r.Themes=B),r.Metadata={},k!==void 0&&(r.Metadata.Country=k),W.names.length>0&&(j.Names=W.names),r.Workbook=j,r}var gN={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function rX(t,e,r){var s=rt.find(t,"/!DocumentSummaryInformation");if(s&&s.size>0)try{var n=eN(s,yV,gN.DSI);for(var i in n)e[i]=n[i]}catch(d){if(r.WTF)throw d}var a=rt.find(t,"/!SummaryInformation");if(a&&a.size>0)try{var l=eN(a,bV,gN.SI);for(var c in l)e[c]==null&&(e[c]=l[c])}catch(d){if(r.WTF)throw d}e.HeadingPairs&&e.TitlesOfParts&&(sC(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function $C(t,e){e||(e={}),bb(e),m3(),e.codepage&&Zy(e.codepage);var r,s;if(t.FullPaths){if(rt.find(t,"/encryption"))throw new Error("File is password-protected");r=rt.find(t,"!CompObj"),s=rt.find(t,"/Workbook")||rt.find(t,"/Book")}else{switch(e.type){case"base64":t=pn(Ps(t));break;case"binary":t=pn(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}wr(t,0),s={content:t}}var n,i;if(r&&ZK(r),e.bookProps&&!e.bookSheets)n={};else{var a=tt?"buffer":"array";if(s&&s.content)n=tX(s.content,e);else if((i=rt.find(t,"PerfectOffice_MAIN"))&&i.content)n=du.to_workbook(i.content,(e.type=a,e));else if((i=rt.find(t,"NativeContent_MAIN"))&&i.content)n=du.to_workbook(i.content,(e.type=a,e));else throw(i=rt.find(t,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&rt.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(n.vbaraw=zY(t))}var l={};return t.FullPaths&&rX(t,l,e),n.Props=n.Custprops=l,e.bookFiles&&(n.cfb=t),n}var Sm={0:{f:LG},1:{f:zG},2:{f:XG},3:{f:HG},4:{f:VG},5:{f:KG},6:{f:JG},7:{f:qG},8:{f:nK},9:{f:sK},10:{f:tK},11:{f:rK},12:{f:UG},13:{f:QG},14:{f:YG},15:{f:WG},16:{f:DC},17:{f:eK},18:{f:GG},19:{f:cb},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:FK},40:{},42:{},43:{f:tY},44:{f:eY},45:{f:rY},46:{f:nY},47:{f:sY},48:{},49:{f:iV},50:{},51:{f:jY},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:xC},62:{f:ZG},63:{f:AY},64:{f:fK},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Hr,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:hK},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:$G},148:{f:IG,p:16},151:{f:oK},152:{},153:{f:TK},154:{},155:{},156:{f:CK},157:{},158:{},159:{T:1,f:bH},160:{T:-1},161:{T:1,f:fl},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:iK},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:NY},336:{T:-1},337:{f:EY,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:q1},357:{},358:{},359:{},360:{T:1},361:{},362:{f:mC},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:lK},427:{f:cK},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:uK},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:BG},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:aK},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:q1},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:IY},633:{T:1},634:{T:-1},635:{T:1,f:LY},636:{T:-1},637:{f:oV},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:yK},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:mK},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Z1={6:{f:Bp},10:{f:zi},12:{f:Zt},13:{f:Zt},14:{f:Ut},15:{f:Ut},16:{f:Or},17:{f:Ut},18:{f:Ut},19:{f:Zt},20:{f:nN},21:{f:nN},23:{f:mC},24:{f:aN},25:{f:Ut},26:{},27:{},28:{f:DW},29:{},34:{f:Ut},35:{f:iN},38:{f:Or},39:{f:Or},40:{f:Or},41:{f:Or},42:{f:Ut},43:{f:Ut},47:{f:BH},49:{f:pW},51:{f:Zt},60:{},61:{f:fW},64:{f:Ut},65:{f:xW},66:{f:Zt},77:{},80:{},81:{},82:{},85:{f:Zt},89:{},90:{},91:{},92:{f:iW},93:{f:LW},94:{},95:{f:Ut},96:{},97:{},99:{f:Ut},125:{f:xC},128:{f:EW},129:{f:aW},130:{f:Zt},131:{f:Ut},132:{f:Ut},133:{f:oW},134:{},140:{f:VW},141:{f:Zt},144:{},146:{f:HW},151:{},152:{},153:{},154:{},155:{},156:{f:Zt},157:{},158:{},160:{f:XW},161:{f:qW},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:kW},190:{f:_W},193:{f:zi},197:{},198:{},199:{},200:{},201:{},202:{f:Ut},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Zt},220:{},221:{f:Ut},222:{},224:{f:jW},225:{f:nW},226:{f:zi},227:{},229:{f:OW},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:lW},253:{f:gW},255:{f:cW},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:lC},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Ut},353:{f:zi},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:CW},431:{f:Ut},432:{},433:{},434:{},437:{},438:{f:$W},439:{f:Ut},440:{f:zW},441:{},442:{f:Oh},443:{},444:{f:Zt},445:{},446:{},448:{f:zi},449:{f:hW,r:2},450:{f:zi},512:{f:rN},513:{f:KW},515:{f:SW},516:{f:vW},517:{f:sN},519:{f:QW},520:{f:dW},523:{},545:{f:oN},549:{f:tN},566:{},574:{f:mW},638:{f:wW},659:{},1048:{},1054:{f:yW},1084:{},1212:{f:PW},2048:{f:UW},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:L0},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:zi},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:YW,r:12},2173:{f:kY,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Ut,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:FW,r:12},2197:{},2198:{f:pY,r:12},2199:{},2200:{},2201:{},2202:{f:MW,r:12},2203:{f:zi},2204:{},2205:{},2206:{},2207:{},2211:{f:uW},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Zt},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:GW},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:WW},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:rN},1:{},2:{f:tH},3:{f:eH},4:{f:JW},5:{f:sN},7:{f:rH},8:{},9:{f:L0},11:{},22:{f:Zt},30:{f:bW},31:{},32:{},33:{f:oN},36:{},37:{f:tN},50:{f:sH},62:{},52:{},67:{},68:{f:Zt},69:{},86:{},126:{},127:{f:ZW},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:nH},223:{},234:{},354:{},421:{},518:{f:Bp},521:{f:L0},536:{f:aN},547:{f:iN},561:{},579:{},1030:{f:Bp},1033:{f:L0},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function on(t,e,r,s){var n=e;if(!isNaN(n)){var i=s||(r||[]).length||0,a=t.next(4);a.write_shift(2,n),a.write_shift(2,i),i>0&&K3(r)&&t.push(r)}}function vN(t,e){var r=e||{},s=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var n=t.match(/<table/i);if(!n)throw new Error("Invalid HTML: could not find <table>");var i=t.match(/<\/table/i),a=n.index,l=i&&i.index||t.length,c=CU(t.slice(a,l),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,u=0,h=0,f=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},x=[];for(a=0;a<c.length;++a){var p=c[a].trim(),g=p.slice(0,3).toLowerCase();if(g=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}u=0;continue}if(!(g!="<td"&&g!="<th")){var v=p.split(/<\/t[dh]>/i);for(l=0;l<v.length;++l){var b=v[l].trim();if(b.match(/<t[dh]/i)){for(var y=b,k=0;y.charAt(0)=="<"&&(k=y.indexOf(">"))>-1;)y=y.slice(k+1);for(var N=0;N<x.length;++N){var E=x[N];E.s.c==u&&E.s.r<d&&d<=E.e.r&&(u=E.e.c+1,N=-1)}var j=$e(b.slice(0,b.indexOf(">")));f=j.colspan?+j.colspan:1,((h=+j.rowspan)>1||f>1)&&x.push({s:{r:d,c:u},e:{r:d+(h||1)-1,c:u+f-1}});var _=j.t||j["data-t"]||"";if(!y.length){u+=f;continue}if(y=O3(y),m.s.r>d&&(m.s.r=d),m.e.r<d&&(m.e.r=d),m.s.c>u&&(m.s.c=u),m.e.c<u&&(m.e.c=u),!y.length){u+=f;continue}var S={t:"s",v:y};r.raw||!y.trim().length||_=="s"||(y==="TRUE"?S={t:"b",v:!0}:y==="FALSE"?S={t:"b",v:!1}:isNaN(_n(y))?isNaN(Mc(y).getDate())||(S={t:"d",v:vr(y)},r.cellDates||(S={t:"n",v:ns(S.v)}),S.z=r.dateNF||He[14]):S={t:"n",v:_n(y)}),r.dense?(s[d]||(s[d]=[]),s[d][u]=S):s[Ve({r:d,c:u})]=S,u+=f}}}}return s["!ref"]=st(m),x.length&&(s["!merges"]=x),s}function sX(t,e,r,s){for(var n=t["!merges"]||[],i=[],a=e.s.c;a<=e.e.c;++a){for(var l=0,c=0,d=0;d<n.length;++d)if(!(n[d].s.r>r||n[d].s.c>a)&&!(n[d].e.r<r||n[d].e.c<a)){if(n[d].s.r<r||n[d].s.c<a){l=-1;break}l=n[d].e.r-n[d].s.r+1,c=n[d].e.c-n[d].s.c+1;break}if(!(l<0)){var u=Ve({r,c:a}),h=s.dense?(t[r]||[])[a]:t[u],f=h&&h.v!=null&&(h.h||nb(h.w||(Di(h),h.w)||""))||"",m={};l>1&&(m.rowspan=l),c>1&&(m.colspan=c),s.editable?f='<span contenteditable="true">'+f+"</span>":h&&(m["data-t"]=h&&h.t||"z",h.v!=null&&(m["data-v"]=h.v),h.z!=null&&(m["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(f='<a href="'+h.l.Target+'">'+f+"</a>")),m.id=(s.id||"sjs")+"-"+u,i.push(VU("td",f,m))}}var x="<tr>";return x+i.join("")+"</tr>"}var nX='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',iX="</body></html>";function aX(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Ka(vN(r[0],e),e);var s=kb();return r.forEach(function(n,i){_b(s,vN(n,e),"Sheet"+(i+1))}),s}function oX(t,e,r){var s=[];return s.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function lX(t,e){var r=e||{},s=r.header!=null?r.header:nX,n=r.footer!=null?r.footer:iX,i=[s],a=Gc(t["!ref"]);r.dense=Array.isArray(t),i.push(oX(t,a,r));for(var l=a.s.r;l<=a.e.r;++l)i.push(sX(t,a,l,r));return i.push("</table>"+n),i.join("")}function zC(t,e,r){var s=r||{},n=0,i=0;if(s.origin!=null)if(typeof s.origin=="number")n=s.origin;else{var a=typeof s.origin=="string"?es(s.origin):s.origin;n=a.r,i=a.c}var l=e.getElementsByTagName("tr"),c=Math.min(s.sheetRows||1e7,l.length),d={s:{r:0,c:0},e:{r:n,c:i}};if(t["!ref"]){var u=Gc(t["!ref"]);d.s.r=Math.min(d.s.r,u.s.r),d.s.c=Math.min(d.s.c,u.s.c),d.e.r=Math.max(d.e.r,u.e.r),d.e.c=Math.max(d.e.c,u.e.c),n==-1&&(d.e.r=n=u.e.r+1)}var h=[],f=0,m=t["!rows"]||(t["!rows"]=[]),x=0,p=0,g=0,v=0,b=0,y=0;for(t["!cols"]||(t["!cols"]=[]);x<l.length&&p<c;++x){var k=l[x];if(yN(k)){if(s.display)continue;m[p]={hidden:!0}}var N=k.children;for(g=v=0;g<N.length;++g){var E=N[g];if(!(s.display&&yN(E))){var j=E.hasAttribute("data-v")?E.getAttribute("data-v"):E.hasAttribute("v")?E.getAttribute("v"):O3(E.innerHTML),_=E.getAttribute("data-z")||E.getAttribute("z");for(f=0;f<h.length;++f){var S=h[f];S.s.c==v+i&&S.s.r<p+n&&p+n<=S.e.r&&(v=S.e.c+1-i,f=-1)}y=+E.getAttribute("colspan")||1,((b=+E.getAttribute("rowspan")||1)>1||y>1)&&h.push({s:{r:p+n,c:v+i},e:{r:p+n+(b||1)-1,c:v+i+(y||1)-1}});var C={t:"s",v:j},F=E.getAttribute("data-t")||E.getAttribute("t")||"";j!=null&&(j.length==0?C.t=F||"z":s.raw||j.trim().length==0||F=="s"||(j==="TRUE"?C={t:"b",v:!0}:j==="FALSE"?C={t:"b",v:!1}:isNaN(_n(j))?isNaN(Mc(j).getDate())||(C={t:"d",v:vr(j)},s.cellDates||(C={t:"n",v:ns(C.v)}),C.z=s.dateNF||He[14]):C={t:"n",v:_n(j)})),C.z===void 0&&_!=null&&(C.z=_);var P="",B=E.getElementsByTagName("A");if(B&&B.length)for(var Q=0;Q<B.length&&!(B[Q].hasAttribute("href")&&(P=B[Q].getAttribute("href"),P.charAt(0)!="#"));++Q);P&&P.charAt(0)!="#"&&(C.l={Target:P}),s.dense?(t[p+n]||(t[p+n]=[]),t[p+n][v+i]=C):t[Ve({c:v+i,r:p+n})]=C,d.e.c<v+i&&(d.e.c=v+i),v+=y}}++p}return h.length&&(t["!merges"]=(t["!merges"]||[]).concat(h)),d.e.r=Math.max(d.e.r,p-1+n),t["!ref"]=st(d),p>=c&&(t["!fullref"]=st((d.e.r=l.length-x+p-1+n,d))),t}function UC(t,e){var r=e||{},s=r.dense?[]:{};return zC(s,t,e)}function cX(t,e){return Ka(UC(t,e),e)}function yN(t){var e="",r=dX(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function dX(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function uX(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(s,n){return Array(parseInt(n,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=at(e.replace(/<[^>]*>/g,""));return[r]}var bN={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function VC(t,e){var r=e||{},s=ib(t),n=[],i,a,l={name:""},c="",d=0,u,h,f={},m=[],x=r.dense?[]:{},p,g,v={value:""},b="",y=0,k=[],N=-1,E=-1,j={s:{r:1e6,c:1e7},e:{r:0,c:0}},_=0,S={},C=[],F={},P=0,B=0,Q=[],D=1,I=1,te=[],re={Names:[]},W={},K=["",""],Z=[],M={},X="",V=0,Y=!1,H=!1,ie=0;for(Ju.lastIndex=0,s=s.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");p=Ju.exec(s);)switch(p[3]=p[3].replace(/_.*$/,"")){case"table":case"工作表":p[1]==="/"?(j.e.c>=j.s.c&&j.e.r>=j.s.r?x["!ref"]=st(j):x["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=j.e.r&&(x["!fullref"]=x["!ref"],j.e.r=r.sheetRows-1,x["!ref"]=st(j)),C.length&&(x["!merges"]=C),Q.length&&(x["!rows"]=Q),u.name=u.名称||u.name,typeof JSON<"u"&&JSON.stringify(u),m.push(u.name),f[u.name]=x,H=!1):p[0].charAt(p[0].length-2)!=="/"&&(u=$e(p[0],!1),N=E=-1,j.s.r=j.s.c=1e7,j.e.r=j.e.c=0,x=r.dense?[]:{},C=[],Q=[],H=!0);break;case"table-row-group":p[1]==="/"?--_:++_;break;case"table-row":case"行":if(p[1]==="/"){N+=D,D=1;break}if(h=$e(p[0],!1),h.行号?N=h.行号-1:N==-1&&(N=0),D=+h["number-rows-repeated"]||1,D<10)for(ie=0;ie<D;++ie)_>0&&(Q[N+ie]={level:_});E=-1;break;case"covered-table-cell":p[1]!=="/"&&++E,r.sheetStubs&&(r.dense?(x[N]||(x[N]=[]),x[N][E]={t:"z"}):x[Ve({r:N,c:E})]={t:"z"}),b="",k=[];break;case"table-cell":case"数据":if(p[0].charAt(p[0].length-2)==="/")++E,v=$e(p[0],!1),I=parseInt(v["number-columns-repeated"]||"1",10),g={t:"z",v:null},v.formula&&r.cellFormula!=!1&&(g.f=mN(at(v.formula))),(v.数据类型||v["value-type"])=="string"&&(g.t="s",g.v=at(v["string-value"]||""),r.dense?(x[N]||(x[N]=[]),x[N][E]=g):x[Ve({r:N,c:E})]=g),E+=I-1;else if(p[1]!=="/"){++E,b="",y=0,k=[],I=1;var de=D?N+D-1:N;if(E>j.e.c&&(j.e.c=E),E<j.s.c&&(j.s.c=E),N<j.s.r&&(j.s.r=N),de>j.e.r&&(j.e.r=de),v=$e(p[0],!1),Z=[],M={},g={t:v.数据类型||v["value-type"],v:null},r.cellFormula)if(v.formula&&(v.formula=at(v.formula)),v["number-matrix-columns-spanned"]&&v["number-matrix-rows-spanned"]&&(P=parseInt(v["number-matrix-rows-spanned"],10)||0,B=parseInt(v["number-matrix-columns-spanned"],10)||0,F={s:{r:N,c:E},e:{r:N+P-1,c:E+B-1}},g.F=st(F),te.push([F,g.F])),v.formula)g.f=mN(v.formula);else for(ie=0;ie<te.length;++ie)N>=te[ie][0].s.r&&N<=te[ie][0].e.r&&E>=te[ie][0].s.c&&E<=te[ie][0].e.c&&(g.F=te[ie][1]);switch((v["number-columns-spanned"]||v["number-rows-spanned"])&&(P=parseInt(v["number-rows-spanned"],10)||0,B=parseInt(v["number-columns-spanned"],10)||0,F={s:{r:N,c:E},e:{r:N+P-1,c:E+B-1}},C.push(F)),v["number-columns-repeated"]&&(I=parseInt(v["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=jt(v["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(v.value);break;case"percentage":g.t="n",g.v=parseFloat(v.value);break;case"currency":g.t="n",g.v=parseFloat(v.value);break;case"date":g.t="d",g.v=vr(v["date-value"]),r.cellDates||(g.t="n",g.v=ns(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=jU(v["time-value"])/86400,r.cellDates&&(g.t="d",g.v=wx(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(v.数据数值);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",v["string-value"]!=null&&(b=at(v["string-value"]),k=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(Y=!1,g.t==="s"&&(g.v=b||"",k.length&&(g.R=k),Y=y==0),W.Target&&(g.l=W),Z.length>0&&(g.c=Z,Z=[]),b&&r.cellText!==!1&&(g.w=b),Y&&(g.t="z",delete g.v),(!Y||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=N))for(var xe=0;xe<D;++xe){if(I=parseInt(v["number-columns-repeated"]||"1",10),r.dense)for(x[N+xe]||(x[N+xe]=[]),x[N+xe][E]=xe==0?g:Nr(g);--I>0;)x[N+xe][E+I]=Nr(g);else for(x[Ve({r:N+xe,c:E})]=g;--I>0;)x[Ve({r:N+xe,c:E+I})]=Nr(g);j.e.c<=E&&(j.e.c=E)}I=parseInt(v["number-columns-repeated"]||"1",10),E+=I-1,I=0,g={},b="",k=[]}W={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(p[1]==="/"){if((i=n.pop())[0]!==p[3])throw"Bad state: "+i}else p[0].charAt(p[0].length-2)!=="/"&&n.push([p[3],!0]);break;case"annotation":if(p[1]==="/"){if((i=n.pop())[0]!==p[3])throw"Bad state: "+i;M.t=b,k.length&&(M.R=k),M.a=X,Z.push(M)}else p[0].charAt(p[0].length-2)!=="/"&&n.push([p[3],!1]);X="",V=0,b="",y=0,k=[];break;case"creator":p[1]==="/"?X=s.slice(V,p.index):V=p.index+p[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(p[1]==="/"){if((i=n.pop())[0]!==p[3])throw"Bad state: "+i}else p[0].charAt(p[0].length-2)!=="/"&&n.push([p[3],!1]);b="",y=0,k=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(p[1]==="/"){if(S[l.name]=c,(i=n.pop())[0]!==p[3])throw"Bad state: "+i}else p[0].charAt(p[0].length-2)!=="/"&&(c="",l=$e(p[0],!1),n.push([p[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(n[n.length-1][0]){case"time-style":case"date-style":a=$e(p[0],!1),c+=bN[p[3]][a.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(n[n.length-1][0]){case"time-style":case"date-style":a=$e(p[0],!1),c+=bN[p[3]][a.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(p[0].slice(-2)==="/>")break;if(p[1]==="/")switch(n[n.length-1][0]){case"number-style":case"date-style":case"time-style":c+=s.slice(d,p.index);break}else d=p.index+p[0].length;break;case"named-range":a=$e(p[0],!1),K=$p(a["cell-range-address"]);var le={Name:a.name,Ref:K[0]+"!"+K[1]};H&&(le.Sheet=m.length),re.Names.push(le);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(n[n.length-1][0])>-1)break;if(p[1]==="/"&&(!v||!v["string-value"])){var he=uX(s.slice(y,p.index));b=(b.length>0?b+`
`:"")+he[0]}else $e(p[0],!1),y=p.index+p[0].length;break;case"s":break;case"database-range":if(p[1]==="/")break;try{K=$p($e(p[0])["target-range-address"]),f[K[0]]["!autofilter"]={ref:K[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(p[1]!=="/"){if(W=$e(p[0],!1),!W.href)break;W.Target=at(W.href),delete W.href,W.Target.charAt(0)=="#"&&W.Target.indexOf(".")>-1?(K=$p(W.Target.slice(1)),W.Target="#"+K[0]+"!"+K[1]):W.Target.match(/^\.\.[\\\/]/)&&(W.Target=W.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(p[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(p)}}var A={Sheets:f,SheetNames:m,Workbook:re};return r.bookSheets&&delete A.Sheets,A}function wN(t,e){e=e||{},Bs(t,"META-INF/manifest.xml")&&SV(Qt(t,"META-INF/manifest.xml"),e);var r=Es(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var s=VC(pt(r),e);return Bs(t,"meta.xml")&&(s.Props=rC(Qt(t,"meta.xml"))),s}function kN(t,e){return VC(t,e)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function vb(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function J1(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):pt(ul(t))}function ev(t){var e=t.reduce(function(n,i){return n+i.length},0),r=new Uint8Array(e),s=0;return t.forEach(function(n){r.set(n,s),s+=n.length}),r}function _N(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function hX(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,s=t[e+14]&1,n=e+13;n>=e;--n)s=s*256+t[n];return(t[e+15]&128?-s:s)*Math.pow(10,r-6176)}function sh(t,e){var r=e?e[0]:0,s=t[r]&127;e:if(t[r++]>=128&&(s|=(t[r]&127)<<7,t[r++]<128||(s|=(t[r]&127)<<14,t[r++]<128)||(s|=(t[r]&127)<<21,t[r++]<128)||(s+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(s+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(s+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),s}function dr(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function $r(t){for(var e=[],r=[0];r[0]<t.length;){var s=r[0],n=sh(t,r),i=n&7;n=Math.floor(n/8);var a=0,l;if(n==0)break;switch(i){case 0:{for(var c=r[0];t[r[0]++]>=128;);l=t.slice(c,r[0])}break;case 5:a=4,l=t.slice(r[0],r[0]+a),r[0]+=a;break;case 1:a=8,l=t.slice(r[0],r[0]+a),r[0]+=a;break;case 2:a=sh(t,r),l=t.slice(r[0],r[0]+a),r[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(n," at offset ").concat(s))}var d={data:l,type:i};e[n]==null?e[n]=[d]:e[n].push(d)}return e}function yb(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function fX(t){for(var e,r=[],s=[0];s[0]<t.length;){var n=sh(t,s),i=$r(t.slice(s[0],s[0]+n));s[0]+=n;var a={id:dr(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=$r(l.data),d=dr(c[3][0].data);a.messages.push({meta:c,data:t.slice(s[0],s[0]+d)}),s[0]+=d}),(e=i[3])!=null&&e[0]&&(a.merge=dr(i[3][0].data)>>>0>0),r.push(a)}return r}function mX(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],s=sh(e,r),n=[];r[0]<e.length;){var i=e[r[0]]&3;if(i==0){var a=e[r[0]++]>>2;if(a<60)++a;else{var l=a-59;a=e[r[0]],l>1&&(a|=e[r[0]+1]<<8),l>2&&(a|=e[r[0]+2]<<16),l>3&&(a|=e[r[0]+3]<<24),a>>>=0,a++,r[0]+=l}n.push(e.slice(r[0],r[0]+a)),r[0]+=a;continue}else{var c=0,d=0;if(i==1?(d=(e[r[0]]>>2&7)+4,c=(e[r[0]++]&224)<<3,c|=e[r[0]++]):(d=(e[r[0]++]>>2)+1,i==2?(c=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(c=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),n=[ev(n)],c==0)throw new Error("Invalid offset 0");if(c>n[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(n.push(n[0].slice(-c)),d-=c;d>=n[n.length-1].length;)n.push(n[n.length-1]),d-=n[n.length-1].length;n.push(n[0].slice(-c,-c+d))}}var u=ev(n);if(u.length!=s)throw new Error("Unexpected length: ".concat(u.length," != ").concat(s));return u}function xX(t){for(var e=[],r=0;r<t.length;){var s=t[r++],n=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(mX(s,t.slice(r,r+n))),r+=n}if(r!==t.length)throw new Error("data is not a valid framed stream!");return ev(e)}function pX(t,e,r,s){var n=vb(t),i=n.getUint32(4,!0),a=(s>1?12:8)+_N(i&(s>1?3470:398))*4,l=-1,c=-1,d=NaN,u=new Date(2001,0,1);i&512&&(l=n.getUint32(a,!0),a+=4),a+=_N(i&(s>1?12288:4096))*4,i&16&&(c=n.getUint32(a,!0),a+=4),i&32&&(d=n.getFloat64(a,!0),a+=8),i&64&&(u.setTime(u.getTime()+n.getFloat64(a,!0)*1e3),a+=8);var h;switch(t[2]){case 0:break;case 2:h={t:"n",v:d};break;case 3:h={t:"s",v:e[c]};break;case 5:h={t:"d",v:u};break;case 6:h={t:"b",v:d>0};break;case 7:h={t:"n",v:d/86400};break;case 8:h={t:"e",v:0};break;case 9:if(l>-1)h={t:"s",v:r[l]};else if(c>-1)h={t:"s",v:e[c]};else if(!isNaN(d))h={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return h}function gX(t,e,r){var s=vb(t),n=s.getUint32(8,!0),i=12,a=-1,l=-1,c=NaN,d=NaN,u=new Date(2001,0,1);n&1&&(c=hX(t,i),i+=16),n&2&&(d=s.getFloat64(i,!0),i+=8),n&4&&(u.setTime(u.getTime()+s.getFloat64(i,!0)*1e3),i+=8),n&8&&(l=s.getUint32(i,!0),i+=4),n&16&&(a=s.getUint32(i,!0),i+=4);var h;switch(t[1]){case 0:break;case 2:h={t:"n",v:c};break;case 3:h={t:"s",v:e[l]};break;case 5:h={t:"d",v:u};break;case 6:h={t:"b",v:d>0};break;case 7:h={t:"n",v:d/86400};break;case 8:h={t:"e",v:0};break;case 9:if(a>-1)h={t:"s",v:r[a]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(n&31," : ").concat(t.slice(0,4)));break;case 10:h={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(n&31," : ").concat(t.slice(0,4)))}return h}function vX(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return pX(t,e,r,t[0]);case 5:return gX(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Ra(t){var e=$r(t);return sh(e[1][0].data)}function NN(t,e){var r=$r(e.data),s=dr(r[1][0].data),n=r[3],i=[];return(n||[]).forEach(function(a){var l=$r(a.data),c=dr(l[1][0].data)>>>0;switch(s){case 1:i[c]=J1(l[3][0].data);break;case 8:{var d=t[Ra(l[9][0].data)][0],u=$r(d.data),h=t[Ra(u[1][0].data)][0],f=dr(h.meta[1][0].data);if(f!=2001)throw new Error("2000 unexpected reference to ".concat(f));var m=$r(h.data);i[c]=m[3].map(function(x){return J1(x.data)}).join("")}break}}),i}function yX(t,e){var r,s,n,i,a,l,c,d,u,h,f,m,x,p,g=$r(t),v=dr(g[1][0].data)>>>0,b=dr(g[2][0].data)>>>0,y=((s=(r=g[8])==null?void 0:r[0])==null?void 0:s.data)&&dr(g[8][0].data)>0||!1,k,N;if((i=(n=g[7])==null?void 0:n[0])!=null&&i.data&&e!=0)k=(l=(a=g[7])==null?void 0:a[0])==null?void 0:l.data,N=(d=(c=g[6])==null?void 0:c[0])==null?void 0:d.data;else if((h=(u=g[4])==null?void 0:u[0])!=null&&h.data&&e!=1)k=(m=(f=g[4])==null?void 0:f[0])==null?void 0:m.data,N=(p=(x=g[3])==null?void 0:x[0])==null?void 0:p.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var E=y?4:1,j=vb(k),_=[],S=0;S<k.length/2;++S){var C=j.getUint16(S*2,!0);C<65535&&_.push([S,C])}if(_.length!=b)throw"Expected ".concat(b," cells, found ").concat(_.length);var F=[];for(S=0;S<_.length-1;++S)F[_[S][0]]=N.subarray(_[S][1]*E,_[S+1][1]*E);return _.length>=1&&(F[_[_.length-1][0]]=N.subarray(_[_.length-1][1]*E)),{R:v,cells:F}}function bX(t,e){var r,s=$r(e.data),n=(r=s==null?void 0:s[7])!=null&&r[0]?dr(s[7][0].data)>>>0>0?1:0:-1,i=yb(s[5],function(a){return yX(a,n)});return{nrows:dr(s[4][0].data)>>>0,data:i.reduce(function(a,l){return a[l.R]||(a[l.R]=[]),l.cells.forEach(function(c,d){if(a[l.R][d])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(d));a[l.R][d]=c}),a},[])}}function wX(t,e,r){var s,n=$r(e.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(dr(n[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(n[6][0].data));if(i.e.c=(dr(n[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(n[7][0].data));r["!ref"]=st(i);var a=$r(n[4][0].data),l=NN(t,t[Ra(a[4][0].data)][0]),c=(s=a[17])!=null&&s[0]?NN(t,t[Ra(a[17][0].data)][0]):[],d=$r(a[3][0].data),u=0;d[1].forEach(function(h){var f=$r(h.data),m=t[Ra(f[2][0].data)][0],x=dr(m.meta[1][0].data);if(x!=6002)throw new Error("6001 unexpected reference to ".concat(x));var p=bX(t,m);p.data.forEach(function(g,v){g.forEach(function(b,y){var k=Ve({r:u+v,c:y}),N=vX(b,l,c);N&&(r[k]=N)})}),u+=p.nrows})}function kX(t,e){var r=$r(e.data),s={"!ref":"A1"},n=t[Ra(r[2][0].data)],i=dr(n[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return wX(t,n[0],s),s}function _X(t,e){var r,s=$r(e.data),n={name:(r=s[1])!=null&&r[0]?J1(s[1][0].data):"",sheets:[]},i=yb(s[2],Ra);return i.forEach(function(a){t[a].forEach(function(l){var c=dr(l.meta[1][0].data);c==6e3&&n.sheets.push(kX(t,l))})}),n}function NX(t,e){var r=kb(),s=$r(e.data),n=yb(s[1],Ra);if(n.forEach(function(i){t[i].forEach(function(a){var l=dr(a.meta[1][0].data);if(l==2){var c=_X(t,a);c.sheets.forEach(function(d,u){_b(r,d,u==0?c.name:c.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function Up(t){var e,r,s,n,i={},a=[];if(t.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var d;try{d=xX(c.content)}catch(h){return console.log("?? "+c.content.length+" "+(h.message||h))}var u;try{u=fX(d)}catch(h){return console.log("## "+(h.message||h))}u.forEach(function(h){i[h.id]=h.messages,a.push(h.id)})}}),!a.length)throw new Error("File has no messages");var l=((n=(s=(r=(e=i==null?void 0:i[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:s[1])==null?void 0:n[0].data)&&dr(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||a.forEach(function(c){i[c].forEach(function(d){var u=dr(d.meta[1][0].data)>>>0;if(u==1)if(!l)l=d;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return NX(i,l)}function jX(t){return function(r){for(var s=0;s!=t.length;++s){var n=t[s];r[n[0]]===void 0&&(r[n[0]]=n[1]),n[2]==="n"&&(r[n[0]]=Number(r[n[0]]))}}}function bb(t){jX([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function EX(t){return Ul.WS.indexOf(t)>-1?"sheet":t==Ul.CS?"chart":t==Ul.DS?"dialog":t==Ul.MS?"macro":t&&t.length?t:"sheet"}function SX(t,e){if(!t)return 0;try{t=e.map(function(s){return s.id||(s.id=s.strRelID),[s.name,t["!id"][s.id].Target,EX(t["!id"][s.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function CX(t,e,r,s,n,i,a,l,c,d,u,h){try{i[s]=lu(Es(t,r,!0),e);var f=Qt(t,e),m;switch(l){case"sheet":m=RK(f,e,n,c,i[s],d,u,h);break;case"chart":if(m=DK(f,e,n,c,i[s],d,u,h),!m||!m["!drawel"])break;var x=Bd(m["!drawel"].Target,e),p=G1(x),g=MY(Es(t,x,!0),lu(Es(t,p,!0),x)),v=Bd(g,x),b=G1(v);m=gK(Es(t,v,!0),v,c,lu(Es(t,b,!0),v),d,m);break;case"macro":m=OK(f,e,n,c,i[s],d,u,h);break;case"dialog":m=LK(f,e,n,c,i[s],d,u,h);break;default:throw new Error("Unrecognized sheet type "+l)}a[s]=m;var y=[];i&&i[s]&&Xn(i[s]).forEach(function(k){var N="";if(i[s][k].Type==Ul.CMNT){N=Bd(i[s][k].Target,e);var E=zK(Qt(t,N,!0),N,c);if(!E||!E.length)return;cN(m,E,!1)}i[s][k].Type==Ul.TCMNT&&(N=Bd(i[s][k].Target,e),y=y.concat(DY(Qt(t,N,!0),c)))}),y&&y.length&&cN(m,y,!0,c.people||[])}catch(k){if(c.WTF)throw k}}function Ls(t){return t.charAt(0)=="/"?t.slice(1):t}function TX(t,e){if(E3(),e=e||{},bb(e),Bs(t,"META-INF/manifest.xml")||Bs(t,"objectdata.xml"))return wN(t,e);if(Bs(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof Up<"u"){if(t.FileIndex)return Up(t);var r=rt.utils.cfb_new();return O_(t).forEach(function(Q){AU(r,Q,P3(t,Q))}),Up(r)}throw new Error("Unsupported NUMBERS file")}if(!Bs(t,"[Content_Types].xml"))throw Bs(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Bs(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var s=O_(t),n=jV(Es(t,"[Content_Types].xml")),i=!1,a,l;if(n.workbooks.length===0&&(l="xl/workbook.xml",Qt(t,l,!0)&&n.workbooks.push(l)),n.workbooks.length===0){if(l="xl/workbook.bin",!Qt(t,l,!0))throw new Error("Could not find workbook");n.workbooks.push(l),i=!0}n.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},d={};if(!e.bookSheets&&!e.bookProps){if(uu=[],n.sst)try{uu=$K(Qt(t,Ls(n.sst)),n.sst,e)}catch(Q){if(e.WTF)throw Q}e.cellStyles&&n.themes.length&&(c=BK(Es(t,n.themes[0].replace(/^\//,""),!0)||"",n.themes[0],e)),n.style&&(d=IK(Qt(t,Ls(n.style)),n.style,c,e))}n.links.map(function(Q){try{var D=lu(Es(t,G1(Ls(Q))),Q);return VK(Qt(t,Ls(Q)),D,Q,e)}catch{}});var u=MK(Qt(t,Ls(n.workbooks[0])),n.workbooks[0],e),h={},f="";n.coreprops.length&&(f=Qt(t,Ls(n.coreprops[0]),!0),f&&(h=rC(f)),n.extprops.length!==0&&(f=Qt(t,Ls(n.extprops[0]),!0),f&&AV(f,h,e)));var m={};(!e.bookSheets||e.bookProps)&&n.custprops.length!==0&&(f=Es(t,Ls(n.custprops[0]),!0),f&&(m=PV(f,e)));var x={};if((e.bookSheets||e.bookProps)&&(u.Sheets?a=u.Sheets.map(function(D){return D.name}):h.Worksheets&&h.SheetNames.length>0&&(a=h.SheetNames),e.bookProps&&(x.Props=h,x.Custprops=m),e.bookSheets&&typeof a<"u"&&(x.SheetNames=a),e.bookSheets?x.SheetNames:e.bookProps))return x;a={};var p={};e.bookDeps&&n.calcchain&&(p=UK(Qt(t,Ls(n.calcchain)),n.calcchain));var g=0,v={},b,y;{var k=u.Sheets;h.Worksheets=k.length,h.SheetNames=[];for(var N=0;N!=k.length;++N)h.SheetNames[N]=k[N].name}var E=i?"bin":"xml",j=n.workbooks[0].lastIndexOf("/"),_=(n.workbooks[0].slice(0,j+1)+"_rels/"+n.workbooks[0].slice(j+1)+".rels").replace(/^\//,"");Bs(t,_)||(_="xl/_rels/workbook."+E+".rels");var S=lu(Es(t,_,!0),_.replace(/_rels.*/,"s5s"));(n.metadata||[]).length>=1&&(e.xlmeta=WK(Qt(t,Ls(n.metadata[0])),n.metadata[0],e)),(n.people||[]).length>=1&&(e.people=OY(Qt(t,Ls(n.people[0])),e)),S&&(S=SX(S,u.Sheets));var C=Qt(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=h.Worksheets;++g){var F="sheet";if(S&&S[g]?(b="xl/"+S[g][1].replace(/[\/]?xl\//,""),Bs(t,b)||(b=S[g][1]),Bs(t,b)||(b=_.replace(/_rels\/.*$/,"")+S[g][1]),F=S[g][2]):(b="xl/worksheets/sheet"+(g+1-C)+"."+E,b=b.replace(/sheet0\./,"sheet.")),y=b.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(g!=e.sheets)continue e;break;case"string":if(h.SheetNames[g].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var P=!1,B=0;B!=e.sheets.length;++B)typeof e.sheets[B]=="number"&&e.sheets[B]==g&&(P=1),typeof e.sheets[B]=="string"&&e.sheets[B].toLowerCase()==h.SheetNames[g].toLowerCase()&&(P=1);if(!P)continue e}}CX(t,b,y,h.SheetNames[g],g,v,a,F,e,u,c,d)}return x={Directory:n,Workbook:u,Props:h,Custprops:m,Deps:p,Sheets:a,SheetNames:h.SheetNames,Strings:uu,Styles:d,Themes:c,SSF:Nr(He)},e&&e.bookFiles&&(t.files?(x.keys=s,x.files=t.files):(x.keys=[],x.files={},t.FullPaths.forEach(function(Q,D){Q=Q.replace(/^Root Entry[\/]/,""),x.keys.push(Q),x.files[Q]=t.FileIndex[D]}))),e&&e.bookVBA&&(n.vba.length>0?x.vbaraw=Qt(t,Ls(n.vba[0]),!0):n.defaults&&n.defaults.bin===$Y&&(x.vbaraw=Qt(t,"xl/vbaProject.bin",!0))),x}function AX(t,e){var r=e||{},s="Workbook",n=rt.find(t,s);try{if(s="/!DataSpaces/Version",n=rt.find(t,s),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+s);if(kH(n.content),s="/!DataSpaces/DataSpaceMap",n=rt.find(t,s),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+s);var i=NH(n.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+s);if(s="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",n=rt.find(t,s),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+s);var a=jH(n.content);if(a.length!=1||a[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+s);if(s="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",n=rt.find(t,s),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+s);SH(n.content)}catch{}if(s="/EncryptionInfo",n=rt.find(t,s),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+s);var l=CH(n.content);if(s="/EncryptedPackage",n=rt.find(t,s),!n||!n.content)throw new Error("ECMA-376 Encrypted file missing "+s);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],n.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],n.content,r.password||"",r);throw new Error("File is password-protected")}function wb(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Ps(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function FX(t,e){return rt.find(t,"EncryptedPackage")?AX(t,e):$C(t,e)}function PX(t,e){var r,s=t,n=e||{};return n.type||(n.type=tt&&Buffer.isBuffer(t)?"buffer":"base64"),r=M3(s,n),TX(r,n)}function WC(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Q1(t.slice(r),e);default:break e}return eh.to_workbook(t,e)}function MX(t,e){var r="",s=wb(t,e);switch(e.type){case"base64":r=Ps(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=Jo(t);break;default:throw new Error("Unrecognized type "+e.type)}return s[0]==239&&s[1]==187&&s[2]==191&&(r=pt(r)),e.type="binary",WC(r,e)}function RX(t,e){var r=t;return e.type=="base64"&&(r=Ps(r)),r=Ji.utils.decode(1200,r.slice(2),"str"),e.type="binary",WC(r,e)}function DX(t){return t.match(/[^\x00-\x7F]/)?$d(t):t}function Vp(t,e,r,s){return s?(r.type="string",eh.to_workbook(t,r)):eh.to_workbook(e,r)}function tv(t,e){m3();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return tv(new Uint8Array(t),(r=Nr(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var s=t,n=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),sc={},r.dateNF&&(sc.dateNF=r.dateNF),r.type||(r.type=tt&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=tt?"buffer":"binary",s=_U(t),typeof Uint8Array<"u"&&!tt&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,s=DX(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var a=new ArrayBuffer(3),l=new Uint8Array(a);if(l.foo="bar",!l.foo)return r=Nr(r),r.type="array",tv(Jy(s),r)}switch((n=wb(s,r))[0]){case 208:if(n[1]===207&&n[2]===17&&n[3]===224&&n[4]===161&&n[5]===177&&n[6]===26&&n[7]===225)return FX(rt.read(s,r),r);break;case 9:if(n[1]<=8)return $C(s,r);break;case 60:return Q1(s,r);case 73:if(n[1]===73&&n[2]===42&&n[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(n[1]===68)return cH(s,r);break;case 84:if(n[1]===65&&n[2]===66&&n[3]===76)return oH.to_workbook(s,r);break;case 80:return n[1]===75&&n[2]<9&&n[3]<9?PX(s,r):Vp(t,s,r,i);case 239:return n[3]===60?Q1(s,r):Vp(t,s,r,i);case 255:if(n[1]===254)return RX(s,r);if(n[1]===0&&n[2]===2&&n[3]===0)return du.to_workbook(s,r);break;case 0:if(n[1]===0&&(n[2]>=2&&n[3]===0||n[2]===0&&(n[3]===8||n[3]===9)))return du.to_workbook(s,r);break;case 3:case 131:case 139:case 140:return lN.to_workbook(s,r);case 123:if(n[1]===92&&n[2]===114&&n[3]===116)return $H.to_workbook(s,r);break;case 10:case 13:case 32:return MX(s,r);case 137:if(n[1]===80&&n[2]===78&&n[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return iH.indexOf(n[0])>-1&&n[2]<=12&&n[3]<=31?lN.to_workbook(s,r):Vp(t,s,r,i)}function OX(t,e,r,s,n,i,a,l){var c=jr(r),d=l.defval,u=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),h=!0,f=n===1?[]:{};if(n!==1)if(Object.defineProperty)try{Object.defineProperty(f,"__rowNum__",{value:r,enumerable:!1})}catch{f.__rowNum__=r}else f.__rowNum__=r;if(!a||t[r])for(var m=e.s.c;m<=e.e.c;++m){var x=a?t[r][m]:t[s[m]+c];if(x===void 0||x.t===void 0){if(d===void 0)continue;i[m]!=null&&(f[i[m]]=d);continue}var p=x.v;switch(x.t){case"z":if(p==null)break;continue;case"e":p=p==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(i[m]!=null){if(p==null)if(x.t=="e"&&p===null)f[i[m]]=null;else if(d!==void 0)f[i[m]]=d;else if(u&&p===null)f[i[m]]=null;else continue;else f[i[m]]=u&&(x.t!=="n"||x.t==="n"&&l.rawNumbers!==!1)?p:Di(x,p,l);p!=null&&(h=!1)}}return{row:f,isempty:h}}function rv(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},s=0,n=1,i=[],a=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},d=e||{},u=d.range!=null?d.range:t["!ref"];switch(d.header===1?s=1:d.header==="A"?s=2:Array.isArray(d.header)?s=3:d.header==null&&(s=0),typeof u){case"string":c=zt(u);break;case"number":c=zt(t["!ref"]),c.s.r=u;break;default:c=u}s>0&&(n=0);var h=jr(c.s.r),f=[],m=[],x=0,p=0,g=Array.isArray(t),v=c.s.r,b=0,y={};g&&!t[v]&&(t[v]=[]);var k=d.skipHidden&&t["!cols"]||[],N=d.skipHidden&&t["!rows"]||[];for(b=c.s.c;b<=c.e.c;++b)if(!(k[b]||{}).hidden)switch(f[b]=cr(b),r=g?t[v][b]:t[f[b]+h],s){case 1:i[b]=b-c.s.c;break;case 2:i[b]=f[b];break;case 3:i[b]=d.header[b-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=a=Di(r,null,d),p=y[a]||0,!p)y[a]=1;else{do l=a+"_"+p++;while(y[l]);y[a]=p,y[l]=1}i[b]=l}for(v=c.s.r+n;v<=c.e.r;++v)if(!(N[v]||{}).hidden){var E=OX(t,c,v,f,s,i,g,d);(E.isempty===!1||(s===1?d.blankrows!==!1:d.blankrows))&&(m[x++]=E.row)}return m.length=x,m}var jN=/"/g;function LX(t,e,r,s,n,i,a,l){for(var c=!0,d=[],u="",h=jr(r),f=e.s.c;f<=e.e.c;++f)if(s[f]){var m=l.dense?(t[r]||[])[f]:t[s[f]+h];if(m==null)u="";else if(m.v!=null){c=!1,u=""+(l.rawNumbers&&m.t=="n"?m.v:Di(m,null,l));for(var x=0,p=0;x!==u.length;++x)if((p=u.charCodeAt(x))===n||p===i||p===34||l.forceQuotes){u='"'+u.replace(jN,'""')+'"';break}u=="ID"&&(u='"ID"')}else m.f!=null&&!m.F?(c=!1,u="="+m.f,u.indexOf(",")>=0&&(u='"'+u.replace(jN,'""')+'"')):u="";d.push(u)}return l.blankrows===!1&&c?null:d.join(a)}function HC(t,e){var r=[],s=e??{};if(t==null||t["!ref"]==null)return"";var n=zt(t["!ref"]),i=s.FS!==void 0?s.FS:",",a=i.charCodeAt(0),l=s.RS!==void 0?s.RS:`
`,c=l.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),u="",h=[];s.dense=Array.isArray(t);for(var f=s.skipHidden&&t["!cols"]||[],m=s.skipHidden&&t["!rows"]||[],x=n.s.c;x<=n.e.c;++x)(f[x]||{}).hidden||(h[x]=cr(x));for(var p=0,g=n.s.r;g<=n.e.r;++g)(m[g]||{}).hidden||(u=LX(t,n,g,h,a,c,i,s),u!=null&&(s.strip&&(u=u.replace(d,"")),(u||s.blankrows!==!1)&&r.push((p++?l:"")+u)));return delete s.dense,r.join("")}function IX(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=HC(t,e);return r}function BX(t){var e="",r,s="";if(t==null||t["!ref"]==null)return[];var n=zt(t["!ref"]),i="",a=[],l,c=[],d=Array.isArray(t);for(l=n.s.c;l<=n.e.c;++l)a[l]=cr(l);for(var u=n.s.r;u<=n.e.r;++u)for(i=jr(u),l=n.s.c;l<=n.e.c;++l)if(e=a[l]+i,r=d?(t[u]||[])[l]:t[e],s="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;s=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)s=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)s=""+r.v;else if(r.t=="b")s=r.v?"TRUE":"FALSE";else if(r.w!==void 0)s="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?s="'"+r.v:s=""+r.v}}c[c.length]=e+"="+s}return c}function YC(t,e,r){var s=r||{},n=+!s.skipHeader,i=t||{},a=0,l=0;if(i&&s.origin!=null)if(typeof s.origin=="number")a=s.origin;else{var c=typeof s.origin=="string"?es(s.origin):s.origin;a=c.r,l=c.c}var d,u={s:{c:0,r:0},e:{c:l,r:a+e.length-1+n}};if(i["!ref"]){var h=zt(i["!ref"]);u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),a==-1&&(a=h.e.r+1,u.e.r=a+e.length-1+n)}else a==-1&&(a=0,u.e.r=e.length-1+n);var f=s.header||[],m=0;e.forEach(function(p,g){Xn(p).forEach(function(v){(m=f.indexOf(v))==-1&&(f[m=f.length]=v);var b=p[v],y="z",k="",N=Ve({c:l+m,r:a+g+n});d=nh(i,N),b&&typeof b=="object"&&!(b instanceof Date)?i[N]=b:(typeof b=="number"?y="n":typeof b=="boolean"?y="b":typeof b=="string"?y="s":b instanceof Date?(y="d",s.cellDates||(y="n",b=ns(b)),k=s.dateNF||He[14]):b===null&&s.nullError&&(y="e",b=0),d?(d.t=y,d.v=b,delete d.w,delete d.R,k&&(d.z=k)):i[N]=d={t:y,v:b},k&&(d.z=k))})}),u.e.c=Math.max(u.e.c,l+f.length-1);var x=jr(a);if(n)for(m=0;m<f.length;++m)i[cr(m+l)+x]={t:"s",v:f[m]};return i["!ref"]=st(u),i}function $X(t,e){return YC(null,t,e)}function nh(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var s=es(e);return t[s.r]||(t[s.r]=[]),t[s.r][s.c]||(t[s.r][s.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?nh(t,Ve(e)):nh(t,Ve({r:e,c:r||0}))}function zX(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function kb(){return{SheetNames:[],Sheets:{}}}function _b(t,e,r,s){var n=1;if(!r)for(;n<=65535&&t.SheetNames.indexOf(r="Sheet"+n)!=-1;++n,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(s&&t.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);n=i&&+i[2]||0;var a=i&&i[1]||r;for(++n;n<=65535&&t.SheetNames.indexOf(r=a+n)!=-1;++n);}if(jK(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function UX(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var s=zX(t,e);switch(t.Workbook.Sheets[s]||(t.Workbook.Sheets[s]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[s].Hidden=r}function VX(t,e){return t.z=e,t}function qC(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function WX(t,e,r){return qC(t,"#"+e,r)}function HX(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function YX(t,e,r,s){for(var n=typeof e!="string"?e:zt(e),i=typeof e=="string"?e:st(e),a=n.s.r;a<=n.e.r;++a)for(var l=n.s.c;l<=n.e.c;++l){var c=nh(t,a,l);c.t="n",c.F=i,delete c.v,a==n.s.r&&l==n.s.c&&(c.f=r,s&&(c.D=!0))}return t}var qX={encode_col:cr,encode_row:jr,encode_cell:Ve,encode_range:st,decode_col:lb,decode_row:ob,split_cell:nV,decode_cell:es,decode_range:Gc,format_cell:Di,sheet_add_aoa:Q3,sheet_add_json:YC,sheet_add_dom:zC,aoa_to_sheet:Kc,json_to_sheet:$X,table_to_sheet:UC,table_to_book:cX,sheet_to_csv:HC,sheet_to_txt:IX,sheet_to_json:rv,sheet_to_html:lX,sheet_to_formulae:BX,sheet_to_row_object_array:rv,sheet_get_cell:nh,book_new:kb,book_append_sheet:_b,book_set_sheet_visibility:UX,cell_set_number_format:VX,cell_set_hyperlink:qC,cell_set_internal_link:WX,cell_add_comment:HX,sheet_set_array_formula:YX,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const jl=[{id:1,title:"Subir Archivo",icon:Zl},{id:2,title:"Mapear Columnas",icon:rS},{id:3,title:"Configuración",icon:qs},{id:4,title:"Importar",icon:Ir}],z0=[{key:"first_name",label:"Nombre",required:!0},{key:"last_name",label:"Apellido",required:!0},{key:"email",label:"Email",required:!0},{key:"phone",label:"Teléfono",required:!0}],Wp=[{key:"company",label:"Empresa",required:!1},{key:"position",label:"Posición",required:!1},{key:"country",label:"País",required:!1},{key:"city",label:"Ciudad",required:!1},{key:"budget",label:"Presupuesto",required:!1},{key:"notes",label:"Notas",required:!1}];function GX({isOpen:t,onClose:e,onSuccess:r}){var Q,D,I,te,re,W;const[s,n]=w.useState(1),[i,a]=w.useState(null),[l,c]=w.useState([]),[d,u]=w.useState([]),[h,f]=w.useState({}),[m,x]=w.useState({source:"Import",status:"new",skipDuplicates:!1}),[p,g]=w.useState([]),v=w.useRef(null),{data:b}=Ke({queryKey:["desks-for-import"],queryFn:()=>Kn.getDesks(),enabled:t,staleTime:5*60*1e3}),{data:y}=Ke({queryKey:["users-for-import"],queryFn:()=>Zn.getUsers({status:"active"}),enabled:t,staleTime:5*60*1e3}),k=ot({mutationFn:K=>qn.importLeads(K),onSuccess:K=>{me.dismiss("import-progress");const{imported:Z=0,errors:M=0,duplicates:X=0,total:V=0,error_details:Y=[]}=K;Z>0?me.success(`¡Importación completada! ${Z} leads importados exitosamente`):me("Importación completada sin nuevos leads",{icon:"ℹ️",style:{background:"#3b82f6",color:"#1e40af"},duration:4e3}),setTimeout(()=>{me(`📊 Resumen completo: ${Z} importados, ${M} errores, ${X} duplicados de ${V} procesados`,{duration:1e4,style:{background:Z>0?"#10b981":"#6b7280",color:Z>0?"#065f46":"#374151"}})},1e3),M>0&&(setTimeout(()=>{me(`⚠️ ${M} leads tuvieron errores durante la importación`,{icon:"⚠️",style:{background:"#fbbf24",color:"#92400e"},duration:8e3})},2e3),Y.length>0&&console.log("Detalles de errores:",Y)),X>0&&setTimeout(()=>{me(`🔄 ${X} leads duplicados fueron omitidos`,{icon:"ℹ️",style:{background:"#3b82f6",color:"#1e40af"},duration:6e3})},3e3),r(),N()},onError:K=>{var Z,M;me.dismiss("import-progress"),me.error(((M=(Z=K.response)==null?void 0:Z.data)==null?void 0:M.message)||"Error al importar leads")}}),N=()=>{n(1),a(null),c([]),u([]),f({}),x({source:"Import",status:"new",skipDuplicates:!1}),g([]),e()},E=K=>{var X,V;const Z=(X=K.target.files)==null?void 0:X[0];if(!Z)return;const M=(V=Z.name.split(".").pop())==null?void 0:V.toLowerCase();if(!["csv","xlsx","xls"].includes(M||"")){me.error("Solo se permiten archivos CSV, XLS o XLSX");return}a(Z),j(Z)},j=K=>{var M;const Z=(M=K.name.split(".").pop())==null?void 0:M.toLowerCase();if(Z==="csv"){const X=new FileReader;X.onload=V=>{var H;const Y=(H=V.target)==null?void 0:H.result;_(Y)},X.onerror=()=>{me.error("Error al leer el archivo CSV")},X.readAsText(K,"UTF-8")}else if(Z==="xlsx"||Z==="xls"){const X=new FileReader;X.onload=V=>{var Y;try{const H=new Uint8Array((Y=V.target)==null?void 0:Y.result),ie=tv(H,{type:"array"}),de=ie.SheetNames[0],xe=ie.Sheets[de],le=qX.sheet_to_json(xe,{header:1});if(le.length===0){me.error("El archivo Excel está vacío");return}const he=le[0].map(Ce=>String(Ce||"").trim()),A=le.slice(1).filter(Ce=>Ce&&Ce.some(be=>be!=null&&String(be).trim()!=="")).map(Ce=>{const be={};return he.forEach((ze,Be)=>{be[ze]=String(Ce[Be]||"").trim()}),be});S(he,A)}catch(H){console.error("Error parsing Excel:",H),me.error("Error al procesar el archivo Excel")}},X.onerror=()=>{me.error("Error al leer el archivo Excel")},X.readAsArrayBuffer(K)}},_=K=>{const Z=K.split(`
`).filter(de=>de.trim());if(Z.length===0){me.error("El archivo CSV está vacío");return}const M=Z[0];let X=",";const V=[",",";","	","|"];let Y=0;for(const de of V){const xe=M.split(de);xe.length>Y&&(Y=xe.length,X=de)}const H=Z[0].split(X).map(de=>de.trim().replace(/['"]/g,"")),ie=Z.slice(1).filter(de=>de.trim()).map(de=>{const xe=de.split(X).map(he=>he.trim().replace(/['"]/g,"")),le={};return H.forEach((he,A)=>{le[he]=xe[A]||""}),le});S(H,ie)},S=(K,Z)=>{if(K.length===0||Z.length===0){me.error("No se pudieron detectar columnas o datos en el archivo");return}u(K),c(Z),g(Z.slice(0,5));const M={};z0.concat(Wp).forEach(X=>{const V=K.find(Y=>{const H=Y.toLowerCase(),ie=X.key.toLowerCase(),de=X.label.toLowerCase();return H.includes(ie)||H.includes(de)||ie.includes(H)||de.includes(H)||ie==="first_name"&&(H.includes("nombre")||H.includes("name"))||ie==="last_name"&&(H.includes("apellido")||H.includes("surname"))||ie==="email"&&(H.includes("correo")||H.includes("mail"))||ie==="phone"&&(H.includes("telefono")||H.includes("tel")||H.includes("phone"))||ie==="company"&&(H.includes("empresa")||H.includes("company"))||ie==="position"&&(H.includes("cargo")||H.includes("puesto")||H.includes("position"))});V&&(M[X.key]=V)}),f(M),me.success(`Archivo procesado: ${K.length} columnas, ${Z.length} filas`)},C=()=>{P()&&n(K=>Math.min(K+1,jl.length))},F=()=>{n(K=>Math.max(K-1,1))},P=()=>{switch(s){case 1:return i?l.length===0?(me.error("El archivo está vacío o no se pudo procesar"),!1):!0:(me.error("Debe seleccionar un archivo"),!1);case 2:const K=z0.filter(Z=>!h[Z.key]);return K.length>0?(me.error(`Debe mapear los campos requeridos: ${K.map(Z=>Z.label).join(", ")}`),!1):!0;case 3:return!0;default:return!0}},B=()=>{if(!P())return;const K=l.map(Z=>{const M={};return Object.keys(h).forEach(X=>{const V=h[X];V&&Z[V]&&(M[X]=Z[V])}),M.desk_id=m.desk_id||null,M.assigned_to=m.assigned_to||null,M.source=m.source,M.status=m.status,M});K.length>100&&me.loading(`Procesando ${K.length} leads...`,{duration:4e3,id:"import-progress"}),k.mutate({leads:K,skipDuplicates:m.skipDuplicates})};return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-lg w-full max-w-5xl mx-4 max-h-[90vh] overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-secondary-200 dark:border-secondary-700",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-secondary-900 dark:text-white",children:"Asistente de Importación"}),o.jsxs("p",{className:"text-sm text-secondary-600 dark:text-secondary-400 mt-1",children:["Paso ",s," de ",jl.length,": ",jl[s-1].title]})]}),o.jsx("button",{onClick:N,className:"text-secondary-400 hover:text-secondary-600 dark:hover:text-secondary-300",children:o.jsx(Wt,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"px-6 py-4 border-b border-secondary-200 dark:border-secondary-700",children:o.jsx("div",{className:"flex items-center justify-between",children:jl.map((K,Z)=>{const M=K.icon,X=s===K.id,V=s>K.id;return o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:`
                    flex items-center justify-center w-10 h-10 rounded-full border-2 transition-colors
                    ${X?"border-primary-600 bg-primary-600 text-white":V?"border-success-600 bg-success-600 text-white":"border-secondary-300 text-secondary-400"}
                  `,children:V?o.jsx(Ir,{className:"w-5 h-5"}):o.jsx(M,{className:"w-5 h-5"})}),o.jsx("div",{className:"ml-3 hidden sm:block",children:o.jsx("p",{className:`text-sm font-medium ${X?"text-primary-600":V?"text-success-600":"text-secondary-500"}`,children:K.title})}),Z<jl.length-1&&o.jsx("div",{className:`
                      w-12 h-0.5 mx-4 transition-colors
                      ${V?"bg-success-600":"bg-secondary-300"}
                    `})]},K.id)})})}),o.jsxs("div",{className:"p-6 overflow-y-auto max-h-96",children:[s===1&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx(Zl,{className:"w-12 h-12 text-primary-600 mx-auto mb-2"}),o.jsx("h3",{className:"text-lg font-medium text-secondary-900 dark:text-white",children:"Subir Archivo"}),o.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Selecciona un archivo Excel o CSV con los datos de leads"})]}),o.jsx("div",{className:"border-2 border-dashed border-secondary-300 dark:border-secondary-600 rounded-lg p-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Zl,{className:"w-16 h-16 text-secondary-400 mx-auto mb-4"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-lg font-medium text-secondary-900 dark:text-white",children:"Arrastra tu archivo aquí"}),o.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"o haz clic para seleccionar"})]}),o.jsx("input",{ref:v,type:"file",accept:".csv,.xlsx,.xls",onChange:E,className:"hidden"}),o.jsx("button",{onClick:()=>{var K;return(K=v.current)==null?void 0:K.click()},className:"btn-primary mt-4",children:"Seleccionar Archivo"})]})}),i&&o.jsx("div",{className:"bg-success-50 dark:bg-success-900/20 border border-success-200 dark:border-success-800 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Ir,{className:"w-5 h-5 text-success-600 mr-2"}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-medium text-success-800 dark:text-success-200",children:["Archivo cargado: ",i.name]}),o.jsxs("p",{className:"text-sm text-success-600 dark:text-success-300",children:[l.length," filas detectadas"]})]})]})}),o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[o.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"Formato requerido:"}),o.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[o.jsxs("li",{children:["• ",o.jsx("strong",{children:"Campos obligatorios:"})," Nombre, Apellido, Email, Teléfono"]}),o.jsxs("li",{children:["• ",o.jsx("strong",{children:"Campos opcionales:"})," Empresa, Posición, País, Ciudad, Presupuesto, Notas"]}),o.jsxs("li",{children:["• ",o.jsx("strong",{children:"Formatos soportados:"})," Excel (.xlsx, .xls), CSV"]}),o.jsxs("li",{children:["• ",o.jsx("strong",{children:"Excel:"})," Se lee la primera hoja automáticamente"]}),o.jsxs("li",{children:["• ",o.jsx("strong",{children:"CSV:"})," Separadores detectados automáticamente (,;|\\t)"]}),o.jsxs("li",{children:["• ",o.jsx("strong",{children:"Codificación:"})," UTF-8 recomendado"]})]})]})]}),s===2&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx(rS,{className:"w-12 h-12 text-primary-600 mx-auto mb-2"}),o.jsx("h3",{className:"text-lg font-medium text-secondary-900 dark:text-white",children:"Mapear Columnas"}),o.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Relaciona las columnas de tu archivo con los campos del sistema"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-secondary-900 dark:text-white mb-4",children:"Campos Requeridos"}),o.jsx("div",{className:"space-y-3",children:z0.map(K=>o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:[K.label," *"]}),o.jsxs("select",{value:h[K.key]||"",onChange:Z=>f({...h,[K.key]:Z.target.value}),className:"input",children:[o.jsx("option",{value:"",children:"Seleccionar columna..."}),d.map(Z=>o.jsx("option",{value:Z,children:Z},Z))]})]},K.key))})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-secondary-900 dark:text-white mb-4",children:"Campos Opcionales"}),o.jsx("div",{className:"space-y-3",children:Wp.map(K=>o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-1",children:K.label}),o.jsxs("select",{value:h[K.key]||"",onChange:Z=>f({...h,[K.key]:Z.target.value}),className:"input",children:[o.jsx("option",{value:"",children:"No mapear"}),d.map(Z=>o.jsx("option",{value:Z,children:Z},Z))]})]},K.key))})]})]}),p.length>0&&o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-secondary-900 dark:text-white mb-4",children:"Vista Previa (primeras 5 filas)"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-secondary-200 dark:divide-secondary-700",children:[o.jsx("thead",{className:"bg-secondary-50 dark:bg-secondary-800",children:o.jsx("tr",{children:d.map(K=>o.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:K},K))})}),o.jsx("tbody",{className:"bg-white dark:bg-secondary-900 divide-y divide-secondary-200 dark:divide-secondary-700",children:p.map((K,Z)=>o.jsx("tr",{children:d.map(M=>o.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-secondary-900 dark:text-white",children:K[M]},M))},Z))})]})})]})]}),s===3&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx(qs,{className:"w-12 h-12 text-primary-600 mx-auto mb-2"}),o.jsx("h3",{className:"text-lg font-medium text-secondary-900 dark:text-white",children:"Configuración de Importación"}),o.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Configura las opciones de importación"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Mesa por Defecto"}),o.jsxs("select",{value:m.desk_id||"",onChange:K=>x({...m,desk_id:K.target.value?parseInt(K.target.value):void 0}),className:"input",children:[o.jsx("option",{value:"",children:"Sin mesa asignada"}),(Q=b==null?void 0:b.data)==null?void 0:Q.map(K=>o.jsx("option",{value:K.id,children:K.name},K.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Usuario por Defecto"}),o.jsxs("select",{value:m.assigned_to||"",onChange:K=>x({...m,assigned_to:K.target.value?parseInt(K.target.value):void 0}),className:"input",children:[o.jsx("option",{value:"",children:"Sin asignar"}),(D=y==null?void 0:y.data)==null?void 0:D.map(K=>o.jsxs("option",{value:K.id,children:[K.first_name," ",K.last_name]},K.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Fuente"}),o.jsx("input",{type:"text",value:m.source,onChange:K=>x({...m,source:K.target.value}),className:"input",placeholder:"ej: Import, CSV, Excel"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Estado por Defecto"}),o.jsxs("select",{value:m.status,onChange:K=>x({...m,status:K.target.value}),className:"input",children:[o.jsx("option",{value:"new",children:"Nuevo"}),o.jsx("option",{value:"contacted",children:"Contactado"}),o.jsx("option",{value:"qualified",children:"Calificado"})]})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"skipDuplicates",checked:m.skipDuplicates,onChange:K=>x({...m,skipDuplicates:K.target.checked}),className:"rounded border-secondary-300 text-primary-600 focus:ring-primary-500"}),o.jsx("label",{htmlFor:"skipDuplicates",className:"ml-2 text-sm text-secondary-700 dark:text-secondary-300",children:"Omitir leads duplicados (basado en email)"})]})]}),s===4&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx(Ir,{className:"w-12 h-12 text-success-600 mx-auto mb-2"}),o.jsx("h3",{className:"text-lg font-medium text-secondary-900 dark:text-white",children:"Listo para Importar"}),o.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Revisa el resumen antes de proceder con la importación"})]}),o.jsxs("div",{className:"bg-secondary-50 dark:bg-secondary-900 rounded-lg p-6 space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Archivo:"}),o.jsx("span",{className:"ml-2 font-medium",children:i==null?void 0:i.name})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Total de leads:"}),o.jsx("span",{className:"ml-2 font-medium",children:l.length})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Mesa por defecto:"}),o.jsx("span",{className:"ml-2 font-medium",children:((te=(I=b==null?void 0:b.data)==null?void 0:I.find(K=>K.id===m.desk_id))==null?void 0:te.name)||"No asignada"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Usuario por defecto:"}),o.jsx("span",{className:"ml-2 font-medium",children:((W=(re=y==null?void 0:y.data)==null?void 0:re.find(K=>K.id===m.assigned_to))==null?void 0:W.first_name)||"No asignado"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Fuente:"}),o.jsx("span",{className:"ml-2 font-medium",children:m.source})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Estado:"}),o.jsx("span",{className:"ml-2 font-medium capitalize",children:m.status})]})]}),o.jsxs("div",{className:"border-t border-secondary-200 dark:border-secondary-700 pt-4",children:[o.jsx("h4",{className:"font-medium text-secondary-900 dark:text-white mb-2",children:"Campos Mapeados:"}),o.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:Object.entries(h).map(([K,Z])=>{var M;return o.jsxs("div",{children:[o.jsxs("span",{className:"text-secondary-600 dark:text-secondary-400",children:[(M=z0.concat(Wp).find(X=>X.key===K))==null?void 0:M.label,":"]}),o.jsx("span",{className:"ml-2 font-medium",children:Z})]},K)})})]})]}),m.skipDuplicates&&o.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Qs,{className:"w-5 h-5 text-yellow-600 mr-2"}),o.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"Los leads con emails duplicados serán omitidos automáticamente"})]})})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-secondary-200 dark:border-secondary-700",children:[o.jsxs("button",{onClick:F,disabled:s===1,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(La,{className:"w-4 h-4 mr-2"}),"Anterior"]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:N,className:"btn-secondary",children:"Cancelar"}),s<jl.length?o.jsxs("button",{onClick:C,className:"btn-primary",children:["Siguiente",o.jsx(ji,{className:"w-4 h-4 ml-2"})]}):o.jsx("button",{onClick:B,disabled:k.isPending,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:k.isPending?"Importando...":`Importar ${l.length} Leads`})]})]})]})}):null}const KX=({selectedLeads:t,users:e,onClose:r,onAssign:s})=>{const[n,i]=w.useState([]),[a,l]=w.useState(""),c=()=>{if(n.length===0)return;const h=Math.floor(t.length/n.length),f=t.length%n.length,m=[];let x=0;n.forEach((p,g)=>{const v=h+(g<f?1:0),b=t.slice(x,x+v);m.push({userId:p,leadIds:b,status:a||"contacted"}),x+=v}),s(m)},d=h=>{i(f=>f.includes(h)?f.filter(m=>m!==h):[...f,h])},u=()=>{if(n.length===0)return[];const h=Math.floor(t.length/n.length),f=t.length%n.length;return n.map((m,x)=>({userId:m,user:e.find(p=>p.id===m),leadsCount:h+(x<f?1:0)}))};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-lg p-6 w-full max-w-2xl mx-4",children:[o.jsxs("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white mb-4",children:["Asignar ",t.length," Leads Masivamente"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Seleccionar Empleados"}),o.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-y-auto",children:e.map(h=>o.jsxs("label",{className:"flex items-center space-x-2 p-2 rounded hover:bg-secondary-50 dark:hover:bg-secondary-700",children:[o.jsx("input",{type:"checkbox",checked:n.includes(h.id),onChange:()=>d(h.id),className:"rounded border-secondary-300 text-primary-600 focus:ring-primary-500"}),o.jsxs("span",{className:"text-sm text-secondary-900 dark:text-white",children:[h.first_name," ",h.last_name]})]},h.id))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Nuevo Estado (Opcional)"}),o.jsxs("select",{value:a,onChange:h=>l(h.target.value),className:"input",children:[o.jsx("option",{value:"",children:"Mantener estado actual"}),o.jsx("option",{value:"contacted",children:"Contactado"}),o.jsx("option",{value:"qualified",children:"Calificado"}),o.jsx("option",{value:"converted",children:"Convertido"})]})]}),n.length>0&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Distribución Automática:"}),o.jsx("div",{className:"bg-secondary-50 dark:bg-secondary-700 rounded p-3 space-y-2",children:u().map(({user:h,leadsCount:f})=>o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsxs("span",{className:"text-secondary-900 dark:text-white",children:[h==null?void 0:h.first_name," ",h==null?void 0:h.last_name]}),o.jsxs("span",{className:"text-primary-600 dark:text-primary-400 font-medium",children:[f," leads"]})]},h==null?void 0:h.id))})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[o.jsx("button",{onClick:r,className:"btn-secondary",children:"Cancelar"}),o.jsx("button",{onClick:c,disabled:n.length===0,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:"Asignar Leads"})]})]})})};function wd(t,e){const[r,s]=w.useState(t);return w.useEffect(()=>{const n=setTimeout(()=>{s(t)},e);return()=>{clearTimeout(n)}},[t,e]),r}function XX(){var Y,H,ie,de,xe,le;const[t,e]=w.useState({status:"",desk:"",assigned_to:"",source:"",country:"",date_from:"",date_to:""}),[r,s]=w.useState({general:"",email:"",id:"",name:"",phone:""}),[n,i]=w.useState({}),[a,l]=w.useState(1),[c,d]=w.useState(20),[u,h]=w.useState([]),[f,m]=w.useState(!1),[x,p]=w.useState(!1),[g,v]=w.useState(!1),b=wd(r.general,300),y=wd(r.email,300),k=wd(r.id,300),N=wd(r.name,300),E=wd(r.phone,300),j=os(),{hasPermission:_,loading:S}=h3();w.useEffect(()=>{S||(async()=>{try{const A=await Ot.getLeadsFilters();i(A.filters||{})}catch(A){console.error("Error cargando filtros de usuario:",A)}})()},[S]);const C=()=>{const he={...t};return b&&(he.search=b),y&&(he.email=y),k&&(he.id=k),N&&(he.name=N),E&&(he.phone=E),he},{data:F,isLoading:P}=Ke({queryKey:["leads",C(),a,c,n],queryFn:()=>qn.getLeads({...C(),...n,page:a,limit:c}),placeholderData:he=>he,staleTime:3e4,enabled:!S}),B=(he,A)=>{e(Ce=>({...Ce,[he]:A})),l(1)},Q=(he,A)=>{s(Ce=>({...Ce,[he]:A})),l(1)},D=()=>{s({general:"",email:"",id:"",name:"",phone:""}),l(1)},I=()=>{const he=Object.values(t).filter(Ce=>Ce!==""&&Ce!==null&&Ce!==void 0).length,A=Object.values(r).filter(Ce=>Ce!==""&&Ce!==null&&Ce!==void 0).length;return he+A},te=he=>{e(A=>({...A,...he})),l(1)},{data:re}=Ke({queryKey:["users-for-assignment"],queryFn:()=>Zn.getUsers({status:"active",role:"Sales Agent"}),staleTime:5*60*1e3}),{data:W}=Ke({queryKey:["desks-for-filters"],queryFn:()=>Kn.getDesks({status:"active"}),staleTime:5*60*1e3}),K=he=>{const A=Ce=>{const be=Ce.toLowerCase();return be.includes("nuevo")||be.includes("new")?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":be.includes("contactado")||be.includes("contacted")?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":be.includes("calificado")||be.includes("qualified")?"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200":be.includes("convertido")||be.includes("converted")?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":be.includes("perdido")||be.includes("lost")?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"};return o.jsx("span",{className:je("badge",A(he)),children:he})},Z=he=>new Date(he).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),M=he=>{he!==null&&h(A=>A.includes(he)?A.filter(Ce=>Ce!==he):[...A,he])},X=()=>{var he,A;u.length===(((he=F==null?void 0:F.data)==null?void 0:he.length)||0)?h([]):h(((A=F==null?void 0:F.data)==null?void 0:A.map(Ce=>Ce.id).filter(Ce=>Ce!==null))||[])},V=()=>{u.length!==0&&m(!0)};return S?o.jsxs("div",{className:"flex items-center justify-center h-64",children:[o.jsx(St,{size:"lg"}),o.jsx("p",{className:"ml-3 text-secondary-600 dark:text-secondary-400",children:"Verificando permisos..."})]}):_("leads.view")?P&&!F?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx(St,{size:"lg"})}):o.jsx(Oz,{permission:"leads.view",children:o.jsxs("div",{className:"space-y-6 animate-fade-in",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:"Gestión de Leads"}),o.jsx("p",{className:"text-secondary-600 dark:text-secondary-400 mt-1",children:"Administra y da seguimiento a todos tus leads"})]}),o.jsxs("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:[o.jsxs(Mp,{permission:"leads.create",onClick:()=>v(!0),className:"btn-secondary",children:[o.jsx(Q8,{className:"w-4 h-4 mr-2"}),"Importar"]}),u.length>0&&_("leads.assign")&&o.jsxs(Mp,{permission:"leads.assign",onClick:V,className:"btn-primary",children:[o.jsx(Cy,{className:"w-4 h-4 mr-2"}),"Asignar ",u.length," Leads"]}),o.jsxs(Mp,{permission:"leads.create",onClick:()=>p(!0),className:"btn-primary",children:[o.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Nuevo Lead"]})]})]}),o.jsx(Lz,{searchValues:r,onSearchChange:Q,onClearSearch:D}),o.jsx(Wz,{currentFilters:t,onFilterChange:B,onLoadFilter:te,desksData:W,activeFiltersCount:I()}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:((Y=F==null?void 0:F.pagination)==null?void 0:Y.total)||0}),o.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Total Leads"})]})}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-success-600 dark:text-success-400",children:((H=F==null?void 0:F.stats)==null?void 0:H.converted_leads)||0}),o.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Convertidos"})]})}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-warning-600 dark:text-warning-400",children:((ie=F==null?void 0:F.stats)==null?void 0:ie.qualified_leads)||0}),o.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Calificados"})]})}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-secondary-600 dark:text-secondary-400",children:((de=F==null?void 0:F.stats)==null?void 0:de.new_leads)||0}),o.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Nuevos"})]})})]}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body p-0",children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-secondary-50 dark:bg-secondary-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left",children:o.jsx("input",{type:"checkbox",checked:u.length===(((xe=F==null?void 0:F.data)==null?void 0:xe.length)||0)&&(((le=F==null?void 0:F.data)==null?void 0:le.length)||0)>0,onChange:X,className:"rounded border-secondary-300 text-primary-600 focus:ring-primary-500"})}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Lead"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Contacto"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Estado"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Mesa"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Asignado a"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Fecha"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-secondary-200 dark:divide-secondary-700",children:Array.isArray(F==null?void 0:F.data)?F.data.map(he=>{var A,Ce;return o.jsxs("tr",{className:"hover:bg-secondary-50 dark:hover:bg-secondary-800 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("input",{type:"checkbox",checked:he.id!==null&&u.includes(he.id),onChange:()=>M(he.id),className:"rounded border-secondary-300 text-primary-600 focus:ring-primary-500"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center",children:o.jsxs("span",{className:"text-sm font-medium text-primary-600 dark:text-primary-400",children:[(A=he.first_name)==null?void 0:A.charAt(0),(Ce=he.last_name)==null?void 0:Ce.charAt(0)]})}),o.jsxs("div",{className:"ml-4",children:[o.jsxs(ma,{to:`/leads/${he.id}`,className:"text-sm font-medium text-secondary-900 dark:text-white hover:text-primary-600 dark:hover:text-primary-400 transition-colors cursor-pointer",children:[he.first_name," ",he.last_name]}),o.jsxs(ma,{to:`/leads/${he.id}`,className:"block text-sm text-secondary-500 dark:text-secondary-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors cursor-pointer",children:["ID: ",he.id]})]})]})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsx("div",{className:"text-sm text-secondary-900 dark:text-white",children:he.email}),o.jsx("div",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:he.phone||"Sin teléfono"})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:K(he.status)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-secondary-900 dark:text-white",children:he.desk_name||"Sin mesa"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-secondary-900 dark:text-white",children:he.assigned_to_name||"Sin asignar"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-secondary-500 dark:text-secondary-400",children:Z(he.created_at)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[_("leads.assign")&&o.jsx("button",{onClick:()=>m(!0),className:"text-warning-600 hover:text-warning-900 dark:text-warning-400 dark:hover:text-warning-300",title:"Asignar lead",children:o.jsx(ji,{className:"w-4 h-4"})}),o.jsx(ma,{to:`/leads/${he.id}`,className:"text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300",title:"Ver detalles",children:o.jsx(qa,{className:"w-4 h-4"})}),_("leads.edit")&&o.jsx("button",{className:"text-secondary-600 hover:text-secondary-900 dark:text-secondary-400 dark:hover:text-secondary-300",title:"Editar lead",children:o.jsx(qo,{className:"w-4 h-4"})}),_("leads.delete")&&o.jsx("button",{className:"text-danger-600 hover:text-danger-900 dark:text-danger-400 dark:hover:text-danger-300",title:"Eliminar lead",children:o.jsx(Go,{className:"w-4 h-4"})})]})})]},he.id)}):o.jsx("tr",{children:o.jsx("td",{colSpan:8,className:"px-6 py-4 text-center text-secondary-500 dark:text-secondary-400",children:"No hay datos disponibles"})})})]})}),F&&F.pagination&&F.pagination.total_pages>1&&o.jsx("div",{className:"px-6 py-4 border-t border-secondary-200 dark:border-secondary-700",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"text-sm text-secondary-700 dark:text-secondary-300",children:["Mostrando ",(a-1)*c+1," a ",Math.min(a*c,F.pagination.total)," de ",F.pagination.total," resultados"]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("label",{className:"text-sm text-secondary-700 dark:text-secondary-300",children:"Mostrar:"}),o.jsxs("select",{value:c,onChange:he=>{d(Number(he.target.value)),l(1)},className:"px-2 py-1 text-sm border border-secondary-300 dark:border-secondary-600 rounded bg-white dark:bg-secondary-800 text-secondary-900 dark:text-white",children:[o.jsx("option",{value:20,children:"20"}),o.jsx("option",{value:50,children:"50"}),o.jsx("option",{value:100,children:"100"})]}),o.jsx("span",{className:"text-sm text-secondary-700 dark:text-secondary-300",children:"por página"})]})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>l(a-1),disabled:a===1,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),o.jsxs("span",{className:"px-3 py-2 text-sm text-secondary-700 dark:text-secondary-300",children:["Página ",a," de ",F.pagination.total_pages]}),o.jsx("button",{onClick:()=>l(a+1),disabled:a>=F.pagination.total_pages,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]})]})})]})}),(F==null?void 0:F.data)&&F.data.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-secondary-400 mb-4",children:o.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),o.jsx("h3",{className:"text-lg font-medium text-secondary-900 dark:text-white mb-2",children:"No se encontraron leads"}),o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400 mb-6",children:"Comienza agregando tu primer lead o ajusta los filtros de búsqueda."}),o.jsxs("button",{className:"btn-primary",children:[o.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Crear Primer Lead"]})]}),f&&o.jsx(KX,{selectedLeads:u,users:(re==null?void 0:re.data)||[],onClose:()=>m(!1),onAssign:async he=>{var A,Ce,be;console.log("Asignaciones masivas:",he);try{console.log("Formato de datos para API:",{leadIds:u,assignments:he});const ze=await qn.bulkAssign(u,he);j.invalidateQueries({queryKey:["leads"]}),h([]),m(!1),alert(`¡Asignación completada! ${((A=ze.data)==null?void 0:A.assigned_count)||0} leads asignados exitosamente.`),console.log("Asignación masiva completada exitosamente:",ze)}catch(ze){console.error("Error en asignación masiva:",ze),alert("Error al asignar leads: "+(((be=(Ce=ze.response)==null?void 0:Ce.data)==null?void 0:be.message)||ze.message||"Error desconocido"))}m(!1),h([])}}),o.jsx(Yz,{isOpen:x,onClose:()=>p(!1),onSuccess:()=>{j.invalidateQueries({queryKey:["leads"]})}}),o.jsx(GX,{isOpen:g,onClose:()=>v(!1),onSuccess:()=>{j.invalidateQueries({queryKey:["leads"]})}})]})}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx("h2",{className:"text-2xl font-bold text-secondary-900 dark:text-white mb-4",children:"Acceso Denegado"}),o.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"No tienes permisos para ver los leads."})]})}function Hp({currentPage:t,totalItems:e,itemsPerPage:r,onPageChange:s,className:n}){const i=Math.ceil(e/r);if(i<=1)return null;const a=(t-1)*r+1,l=Math.min(t*r,e),d=(()=>{const h=[],f=[];for(let m=Math.max(2,t-2);m<=Math.min(i-1,t+2);m++)h.push(m);return t-2>2?f.push(1,"..."):f.push(1),f.push(...h),t+2<i-1?f.push("...",i):f.push(i),f})();return o.jsxs("div",{className:je("flex items-center justify-between border-t border-secondary-200 dark:border-secondary-700 bg-white dark:bg-secondary-900 px-4 py-3 sm:px-6",n),children:[o.jsxs("div",{className:"flex flex-1 justify-between sm:hidden",children:[o.jsx("button",{onClick:()=>s(t-1),disabled:t===1,className:"relative inline-flex items-center rounded-md border border-secondary-300 dark:border-secondary-600 bg-white dark:bg-secondary-800 px-4 py-2 text-sm font-medium text-secondary-700 dark:text-secondary-300 hover:bg-secondary-50 dark:hover:bg-secondary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),o.jsx("button",{onClick:()=>s(t+1),disabled:t===i,className:"relative ml-3 inline-flex items-center rounded-md border border-secondary-300 dark:border-secondary-600 bg-white dark:bg-secondary-800 px-4 py-2 text-sm font-medium text-secondary-700 dark:text-secondary-300 hover:bg-secondary-50 dark:hover:bg-secondary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]}),o.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[o.jsx("div",{children:o.jsxs("p",{className:"text-sm text-secondary-700 dark:text-secondary-300",children:["Mostrando ",o.jsx("span",{className:"font-medium",children:a})," a"," ",o.jsx("span",{className:"font-medium",children:l})," de"," ",o.jsx("span",{className:"font-medium",children:e})," resultados"]})}),o.jsx("div",{children:o.jsxs("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:[o.jsxs("button",{onClick:()=>s(t-1),disabled:t===1,className:"relative inline-flex items-center rounded-l-md px-2 py-2 text-secondary-400 ring-1 ring-inset ring-secondary-300 dark:ring-secondary-600 hover:bg-secondary-50 dark:hover:bg-secondary-700 focus:z-20 focus:outline-offset-0 disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx("span",{className:"sr-only",children:"Anterior"}),o.jsx(dx,{className:"h-5 w-5","aria-hidden":"true"})]}),d.map((u,h)=>o.jsx("button",{onClick:()=>typeof u=="number"?s(u):void 0,disabled:typeof u!="number",className:je("relative inline-flex items-center px-4 py-2 text-sm font-semibold ring-1 ring-inset ring-secondary-300 dark:ring-secondary-600 focus:z-20 focus:outline-offset-0",typeof u=="number"&&u===t?"z-10 bg-primary-600 text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-600":typeof u=="number"?"text-secondary-900 dark:text-secondary-100 hover:bg-secondary-50 dark:hover:bg-secondary-700":"text-secondary-700 dark:text-secondary-300 cursor-default"),children:u},h)),o.jsxs("button",{onClick:()=>s(t+1),disabled:t===i,className:"relative inline-flex items-center rounded-r-md px-2 py-2 text-secondary-400 ring-1 ring-inset ring-secondary-300 dark:ring-secondary-600 hover:bg-secondary-50 dark:hover:bg-secondary-700 focus:z-20 focus:outline-offset-0 disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx("span",{className:"sr-only",children:"Siguiente"}),o.jsx(ux,{className:"h-5 w-5","aria-hidden":"true"})]})]})})]})]})}const GC={call:{icon:Ah,label:"Llamada",color:"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-400"},email:{icon:Ia,label:"Email",color:"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400"},meeting:{icon:qs,label:"Reunión",color:"bg-purple-100 text-purple-600 dark:bg-purple-900 dark:text-purple-400"},note:{icon:qs,label:"Nota",color:"bg-gray-100 text-gray-600 dark:bg-gray-900 dark:text-gray-400"},task:{icon:qs,label:"Tarea",color:"bg-orange-100 text-orange-600 dark:bg-orange-900 dark:text-orange-400"},follow_up:{icon:jn,label:"Seguimiento",color:"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400"}};function QX({leadId:t,onLeadStatusChange:e}){const[r,s]=w.useState(!1),[n,i]=w.useState(1),[a,l]=w.useState(""),[c,d]=w.useState(!1),u=os(),{data:h,isLoading:f}=Ke({queryKey:["lead-activities",t,n,a],queryFn:async()=>{const g=localStorage.getItem("auth_token"),v=new URLSearchParams({lead_id:t.toString(),page:n.toString(),limit:"3"});a&&v.append("date",a);const b=await fetch(`/api/lead-activities.php?${v}`,{headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"}});if(!b.ok)throw new Error("Error al cargar actividades");return b.json()}}),m=(h==null?void 0:h.activities)||[],x=(h==null?void 0:h.pagination)||{},p=ot({mutationFn:async g=>{const v=localStorage.getItem("auth_token"),b=await fetch("/api/lead-activities.php",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({...g,lead_id:t})});if(!b.ok)throw new Error("Error al crear actividad");return b.json()},onSuccess:(g,v)=>{u.invalidateQueries({queryKey:["lead-activities",t]}),v.leadStatus&&e&&e(v.leadStatus),s(!1),i(1),me.success("Actividad creada exitosamente")},onError:()=>{me.error("Error al crear la actividad")}});return f?o.jsx("div",{className:"card",children:o.jsx("div",{className:"card-body",children:o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})})})}):o.jsxs("div",{className:"card",children:[o.jsx("div",{className:"card-header",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-indigo-100 dark:bg-indigo-900 rounded-lg flex items-center justify-center",children:o.jsx(M2,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"})}),o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Actividades y Comunicaciones"})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("button",{onClick:()=>d(!0),className:`p-2 rounded-lg transition-colors ${a?"bg-primary-100 text-primary-600 dark:bg-primary-900 dark:text-primary-400":"text-secondary-500 hover:bg-secondary-100 dark:hover:bg-secondary-800 hover:text-secondary-700 dark:hover:text-secondary-300"}`,title:a?`Filtrado por: ${a}`:"Filtrar por fecha",children:o.jsx(Bu,{className:"w-5 h-5"})}),o.jsxs("button",{onClick:()=>s(!0),className:"btn btn-primary text-sm",children:[o.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Nueva Actividad"]})]})]})}),o.jsxs("div",{className:"card-body",children:[o.jsx("div",{className:"space-y-4",children:m.length>0?m.map(g=>{const v=GC[g.type]||{icon:qs,label:"Actividad",color:"bg-gray-100 text-gray-600 dark:bg-gray-900 dark:text-gray-400"},b=v.icon;return o.jsx("div",{className:"border border-secondary-200 dark:border-secondary-700 rounded-lg p-4 hover:bg-secondary-50 dark:hover:bg-secondary-800 transition-colors",children:o.jsxs("div",{className:"flex items-start space-x-4",children:[o.jsx("div",{className:je("w-10 h-10 rounded-lg flex items-center justify-center",v.color),children:o.jsx(b,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[g.description&&o.jsx("p",{className:"text-sm text-secondary-900 dark:text-white mb-3",children:g.description}),o.jsx("div",{className:"flex items-center justify-between text-xs text-secondary-500 dark:text-secondary-400",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("span",{className:"flex items-center",children:[o.jsx(or,{className:"w-3 h-3 mr-1"}),g.user_name||"Usuario"]}),o.jsxs("span",{className:"flex items-center",children:[o.jsx(jn,{className:"w-3 h-3 mr-1"}),new Date(g.created_at).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})})]})]})},g.id)}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(M2,{className:"w-12 h-12 text-secondary-300 dark:text-secondary-600 mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400",children:"No hay actividades registradas"})]})}),x.total_pages>1&&o.jsxs("div",{className:"mt-6 flex items-center justify-between border-t border-secondary-200 dark:border-secondary-700 pt-4",children:[o.jsxs("div",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:["Página ",x.current_page," de ",x.total_pages,"(",x.total_records," actividades en total)"]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("button",{onClick:()=>i(n-1),disabled:!x.has_prev_page,className:"flex items-center px-3 py-2 text-sm font-medium text-secondary-500 bg-white border border-secondary-300 rounded-md hover:bg-secondary-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-secondary-800 dark:border-secondary-600 dark:text-secondary-400 dark:hover:bg-secondary-700",children:[o.jsx(dx,{className:"w-4 h-4 mr-1"}),"Anterior"]}),o.jsx("span",{className:"px-3 py-2 text-sm font-medium text-secondary-700 dark:text-secondary-300",children:x.current_page}),o.jsxs("button",{onClick:()=>i(n+1),disabled:!x.has_next_page,className:"flex items-center px-3 py-2 text-sm font-medium text-secondary-500 bg-white border border-secondary-300 rounded-md hover:bg-secondary-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-secondary-800 dark:border-secondary-600 dark:text-secondary-400 dark:hover:bg-secondary-700",children:["Siguiente",o.jsx(ux,{className:"w-4 h-4 ml-1"})]})]})]})]}),r&&o.jsx(JX,{onClose:()=>s(!1),onSubmit:g=>p.mutate(g),isLoading:p.isPending}),c&&o.jsx(ZX,{currentFilter:a,onApply:g=>{l(g),i(1),d(!1)},onClear:()=>{l(""),i(1),d(!1)},onClose:()=>d(!1)})]})}function ZX({currentFilter:t,onApply:e,onClear:r,onClose:s}){const[n,i]=w.useState(t),a=l=>{l.preventDefault(),e(n)};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsx("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow-xl w-full max-w-md mx-4",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Filtrar por fecha"}),o.jsx("button",{onClick:s,className:"text-secondary-400 hover:text-secondary-600 dark:hover:text-secondary-300",children:o.jsx(Wt,{className:"w-5 h-5"})})]}),o.jsxs("form",{onSubmit:a,children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Seleccionar fecha"}),o.jsx("input",{type:"date",value:n,onChange:l=>i(l.target.value),className:"w-full px-3 py-2 border border-secondary-300 dark:border-secondary-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-secondary-800 dark:text-white"})]}),o.jsxs("div",{className:"flex justify-between space-x-3",children:[o.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-secondary-700 dark:text-secondary-300 hover:text-secondary-900 dark:hover:text-white border border-secondary-300 dark:border-secondary-600 rounded-lg hover:bg-secondary-50 dark:hover:bg-secondary-700",children:"Limpiar filtro"}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-secondary-700 dark:text-secondary-300 hover:text-secondary-900 dark:hover:text-white",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn btn-primary text-sm",children:"Aplicar filtro"})]})]})]})]})})})}function JX({onClose:t,onSubmit:e,isLoading:r}){const[s,n]=w.useState({type:"note",description:"",leadStatus:"",visibility:"team"}),i=[{value:"new",label:"Nuevo"},{value:"contacted",label:"Contactado"},{value:"qualified",label:"Calificado"},{value:"converted",label:"Convertido"},{value:"lost",label:"Perdido"}],a=l=>{if(l.preventDefault(),!s.description.trim()){me.error("El comentario es requerido");return}e(s)};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsx("div",{className:"bg-white dark:bg-secondary-900 rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Nueva Actividad"}),o.jsx("button",{onClick:t,className:"text-secondary-400 hover:text-secondary-600 dark:hover:text-secondary-300",children:o.jsx(Wt,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:a,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Tipo de Actividad"}),o.jsx("select",{value:s.type,onChange:l=>n({...s,type:l.target.value}),className:"w-full px-3 py-2 border border-secondary-300 dark:border-secondary-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-secondary-800 dark:text-white",children:Object.entries(GC).map(([l,c])=>o.jsx("option",{value:l,children:c.label},l))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Comentario *"}),o.jsx("textarea",{value:s.description,onChange:l=>n({...s,description:l.target.value}),rows:3,className:"w-full px-3 py-2 border border-secondary-300 dark:border-secondary-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-secondary-800 dark:text-white",placeholder:"Ingrese su comentario",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Estado del Lead (opcional)"}),o.jsxs("select",{value:s.leadStatus,onChange:l=>n({...s,leadStatus:l.target.value}),className:"w-full px-3 py-2 border border-secondary-300 dark:border-secondary-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-secondary-800 dark:text-white",children:[o.jsx("option",{value:"",children:"Sin cambios"}),i.map(l=>o.jsx("option",{value:l.value,children:l.label},l.value))]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-secondary-700 dark:text-secondary-300 hover:text-secondary-900 dark:hover:text-white",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:r,className:"btn btn-primary text-sm",children:r?"Creando...":"Crear Actividad"})]})]})]})})})}function EN({leadId:t,currentStateName:e,onStateChange:r,showHistory:s=!1,disabled:n=!1}){var j;const[i,a]=w.useState(!1),[l,c]=w.useState(!1),[d,u]=w.useState(null),[h,f]=w.useState(""),m=os(),{data:x,isLoading:p}=Ke({queryKey:["lead-available-states",t],queryFn:async()=>{const _=await fetch(`/api/leads.php?action=available-states&lead_id=${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!_.ok)throw new Error("Error al cargar estados disponibles");return _.json()},enabled:!!t}),{data:g,isLoading:v}=Ke({queryKey:["lead-state-history",t],queryFn:async()=>{const _=await fetch(`/api/leads.php?action=state-history&lead_id=${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!_.ok)throw new Error("Error al cargar historial de estados");return _.json()},enabled:!!t&&s}),b=ot({mutationFn:async({toStateId:_,comment:S})=>{const C=await fetch("/api/lead-state-change.php",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({lead_id:t,to_state_id:_,comment:S})});if(!C.ok){const F=await C.json();throw new Error(F.message||"Error al cambiar estado")}return C.json()},onSuccess:_=>{m.invalidateQueries({queryKey:["lead",t]}),m.invalidateQueries({queryKey:["lead-available-states",t]}),m.invalidateQueries({queryKey:["lead-state-history",t]}),m.invalidateQueries({queryKey:["leads"]}),u(null),f(""),a(!1),r&&_.success&&r(_.new_state_id,_.new_state_name),me.success("Estado cambiado correctamente")},onError:_=>{me.error(_.message)}}),y=_=>{_.requires_comment?u(_):b.mutate({toStateId:_.to_state_id})},k=()=>{d&&b.mutate({toStateId:d.to_state_id,comment:h.trim()||void 0})},N=_=>{const S={blue:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",green:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",yellow:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",red:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",purple:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",indigo:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200",pink:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200",gray:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"};return S[_]||S.gray},E=x==null?void 0:x.current_state;return o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>!n&&a(!i),disabled:n||p,className:je("inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200",E?N(E.color):"bg-gray-100 text-gray-800",!n&&"hover:shadow-md cursor-pointer",n&&"opacity-50 cursor-not-allowed"),children:[p?o.jsx(Zd,{className:"w-4 h-4 animate-spin mr-1.5"}):o.jsx(pr,{className:"w-4 h-4 mr-1.5"}),o.jsx("span",{className:"capitalize",children:(E==null?void 0:E.name)||e||"Sin estado"}),!n&&o.jsx(vi,{className:je("w-4 h-4 ml-1.5 transition-transform duration-200",i&&"rotate-180")})]}),i&&(x==null?void 0:x.available_transitions)&&o.jsx("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white dark:bg-secondary-800 rounded-lg shadow-lg border border-secondary-200 dark:border-secondary-700 z-50",children:o.jsxs("div",{className:"p-2",children:[o.jsx("div",{className:"text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wide px-2 py-1 mb-1",children:"Cambiar a:"}),x.available_transitions.map(_=>{var S;return o.jsxs("button",{onClick:()=>y(_),disabled:b.isPending,className:"w-full text-left px-3 py-2 rounded-md hover:bg-secondary-50 dark:hover:bg-secondary-700 transition-colors disabled:opacity-50",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:je("w-3 h-3 rounded-full",`bg-${((S=x.states.find(C=>C.id===_.to_state_id))==null?void 0:S.color)||"gray"}-500`)}),o.jsx("span",{className:"text-sm font-medium text-secondary-900 dark:text-white",children:_.name})]}),_.requires_comment&&o.jsx(Qs,{className:"w-4 h-4 text-amber-500"})]}),_.description&&o.jsx("p",{className:"text-xs text-secondary-500 dark:text-secondary-400 mt-1 ml-5",children:_.description})]},_.id)})]})})]}),s&&o.jsx("button",{onClick:()=>c(!0),className:"p-1.5 text-secondary-400 hover:text-secondary-600 dark:hover:text-secondary-300 transition-colors rounded-lg hover:bg-secondary-100 dark:hover:bg-secondary-800",title:"Ver historial de estados",children:o.jsx(jn,{className:"w-4 h-4"})})]}),d&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsx("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow-xl max-w-md w-full mx-4",children:o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white mb-4",children:"Cambiar Estado"}),o.jsxs("p",{className:"text-secondary-600 dark:text-secondary-400 mb-4",children:["¿Estás seguro de cambiar el estado a ",o.jsx("strong",{children:d.name}),"?"]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:["Comentario ",d.requires_comment&&o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("textarea",{value:h,onChange:_=>f(_.target.value),placeholder:"Describe la razón del cambio de estado...",className:"w-full px-3 py-2 border border-secondary-300 dark:border-secondary-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-secondary-700 dark:text-white",rows:3,required:d.requires_comment})]}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{onClick:()=>{u(null),f("")},className:"px-4 py-2 text-secondary-600 dark:text-secondary-400 hover:text-secondary-800 dark:hover:text-secondary-200 transition-colors",children:"Cancelar"}),o.jsx("button",{onClick:k,disabled:b.isPending||d.requires_comment&&!h.trim(),className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:b.isPending?"Cambiando...":"Confirmar"})]})]})})}),l&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-hidden",children:[o.jsx("div",{className:"p-6 border-b border-secondary-200 dark:border-secondary-700",children:o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Historial de Estados"})}),o.jsx("div",{className:"p-6 overflow-y-auto max-h-96",children:v?o.jsx("div",{className:"flex justify-center py-8",children:o.jsx(Zd,{className:"w-6 h-6 animate-spin text-secondary-400"})}):((j=g==null?void 0:g.data)==null?void 0:j.length)>0?o.jsx("div",{className:"space-y-4",children:g.data.map(_=>o.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-secondary-50 dark:bg-secondary-700 rounded-lg",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center",children:o.jsx(pr,{className:"w-4 h-4 text-primary-600 dark:text-primary-400"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-sm font-medium text-secondary-900 dark:text-white",children:_.from_state_name?`${_.from_state_name} → ${_.to_state_name}`:`Estado inicial: ${_.to_state_name}`}),o.jsx("p",{className:"text-xs text-secondary-500 dark:text-secondary-400",children:new Date(_.created_at).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),o.jsxs("p",{className:"text-xs text-secondary-600 dark:text-secondary-400 mt-1",children:["Por: ",_.changed_by_name]}),_.comment&&o.jsxs("p",{className:"text-sm text-secondary-700 dark:text-secondary-300 mt-2 italic",children:['"',_.comment,'"']})]})]},_.id))}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(jn,{className:"w-12 h-12 text-secondary-300 dark:text-secondary-600 mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400",children:"No hay historial de cambios de estado"})]})}),o.jsx("div",{className:"p-6 border-t border-secondary-200 dark:border-secondary-700",children:o.jsx("button",{onClick:()=>c(!1),className:"w-full px-4 py-2 bg-secondary-100 dark:bg-secondary-700 text-secondary-700 dark:text-secondary-300 rounded-md hover:bg-secondary-200 dark:hover:bg-secondary-600 transition-colors",children:"Cerrar"})})]})}),i&&o.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)})]})}function eQ(){var A,Ce,be,ze,Be,Ee,gt,ur,q,J,ue,Ne,ge,pe,Pe,Qe,Ue,ft;const{id:t}=sP(),e=ol(),r=os(),{hasPermission:s}=ll(),[n,i]=w.useState(!1),[a,l]=w.useState(!1),[c,d]=w.useState(!1),[u,h]=w.useState(!1),[f,m]=w.useState(!1),[x,p]=w.useState(!1),[g,v]=w.useState("open"),[b,y]=w.useState(1),[k,N]=w.useState(1),[E,j]=w.useState(1),_=5,{data:S,isLoading:C}=Ke({queryKey:["lead",t],queryFn:()=>qn.getLead(Number(t)),enabled:!!t}),{data:F,isLoading:P}=Ke({queryKey:["lead-finances",t],queryFn:async()=>{const ee=await Ot.getApiUrl();return fetch(`${ee}/lead-finances.php?lead_id=${t}`).then(Le=>Le.json())},enabled:!!t,refetchOnWindowFocus:!1}),{data:B}=Ke({queryKey:["users"],queryFn:()=>Zn.getUsers(),refetchOnWindowFocus:!1}),{data:Q,isLoading:D}=Ke({queryKey:["trading-accounts",t],queryFn:()=>F1.getLeadAccounts(Number(t)),enabled:!!t,refetchOnWindowFocus:!1}),{data:I,isLoading:te}=Ke({queryKey:["positions",t],queryFn:()=>Promise.resolve({success:!0,data:{open_positions:[{id:1,symbol:"EURUSD",type:"buy",volume:.1,open_price:1.085,current_price:1.0875,profit_loss:25,swap:-.5,commission:-2,open_time:"2024-01-15T10:30:00Z",status:"open",account_number:"12345678",platform:"MetaTrader 5"},{id:2,symbol:"GBPUSD",type:"sell",volume:.2,open_price:1.265,current_price:1.263,profit_loss:40,swap:-1.2,commission:-4,open_time:"2024-01-15T14:15:00Z",status:"open",account_number:"12345678",platform:"MetaTrader 5"},{id:5,symbol:"USDCAD",type:"buy",volume:.15,open_price:1.345,current_price:1.3465,profit_loss:15.75,swap:-.8,commission:-3,open_time:"2024-01-15T16:45:00Z",status:"open",account_number:"12345678",platform:"MetaTrader 5"},{id:6,symbol:"GOLD",type:"sell",volume:.05,open_price:2025.5,current_price:2020.3,profit_loss:26,swap:-1.5,commission:-2.5,open_time:"2024-01-15T18:20:00Z",status:"open",account_number:"12345678",platform:"MetaTrader 5"},{id:7,symbol:"NZDUSD",type:"buy",volume:.12,open_price:.618,current_price:.6195,profit_loss:18,swap:-.6,commission:-2.4,open_time:"2024-01-15T20:10:00Z",status:"open",account_number:"12345678",platform:"MetaTrader 5"},{id:8,symbol:"EURGBP",type:"sell",volume:.08,open_price:.858,current_price:.857,profit_loss:8,swap:-.4,commission:-1.6,open_time:"2024-01-15T21:30:00Z",status:"open",account_number:"12345678",platform:"MetaTrader 5"}],closed_positions:[{id:3,symbol:"USDJPY",type:"buy",volume:.15,open_price:148.5,current_price:149.2,profit_loss:70.5,swap:-2.3,commission:-3,open_time:"2024-01-14T09:00:00Z",close_time:"2024-01-14T16:30:00Z",status:"closed",account_number:"12345678",platform:"MetaTrader 5"},{id:9,symbol:"EURJPY",type:"sell",volume:.1,open_price:161.2,current_price:160.85,profit_loss:35,swap:-1.8,commission:-2,open_time:"2024-01-13T11:15:00Z",close_time:"2024-01-13T17:45:00Z",status:"closed",account_number:"12345678",platform:"MetaTrader 5"},{id:10,symbol:"GBPJPY",type:"buy",volume:.08,open_price:187.9,current_price:188.45,profit_loss:44,swap:-2.1,commission:-1.6,open_time:"2024-01-12T14:20:00Z",close_time:"2024-01-12T19:30:00Z",status:"closed",account_number:"12345678",platform:"MetaTrader 5"},{id:11,symbol:"AUDJPY",type:"sell",volume:.12,open_price:97.8,current_price:97.45,profit_loss:42,swap:-1.4,commission:-2.4,open_time:"2024-01-11T08:30:00Z",close_time:"2024-01-11T15:15:00Z",status:"closed",account_number:"12345678",platform:"MetaTrader 5"},{id:12,symbol:"USDCHF",type:"buy",volume:.18,open_price:.872,current_price:.8745,profit_loss:45,swap:-.9,commission:-3.6,open_time:"2024-01-10T13:45:00Z",close_time:"2024-01-10T18:20:00Z",status:"closed",account_number:"12345678",platform:"MetaTrader 5"},{id:13,symbol:"CADCHF",type:"sell",volume:.06,open_price:.649,current_price:.6475,profit_loss:9,swap:-.3,commission:-1.2,open_time:"2024-01-09T10:10:00Z",close_time:"2024-01-09T16:40:00Z",status:"closed",account_number:"12345678",platform:"MetaTrader 5"}],pending_positions:[{id:4,symbol:"AUDUSD",type:"buy",volume:.1,open_price:.675,profit_loss:0,swap:0,commission:0,open_time:"2024-01-15T18:00:00Z",status:"pending",account_number:"12345678",platform:"MetaTrader 5"},{id:14,symbol:"CHFJPY",type:"sell",volume:.07,open_price:170.25,profit_loss:0,swap:0,commission:0,open_time:"2024-01-15T19:30:00Z",status:"pending",account_number:"12345678",platform:"MetaTrader 5"},{id:15,symbol:"SILVER",type:"buy",volume:.2,open_price:23.45,profit_loss:0,swap:0,commission:0,open_time:"2024-01-15T20:45:00Z",status:"pending",account_number:"12345678",platform:"MetaTrader 5"}]}}),enabled:!!t,refetchOnWindowFocus:!1,refetchInterval:5e3}),re=(ee,Le)=>{r.invalidateQueries({queryKey:["lead",t]}),r.invalidateQueries({queryKey:["leads"]}),me.success(`Estado cambiado a: ${Le}`)},W=ot({mutationFn:ee=>qn.updateLead(Number(t),ee),onSuccess:()=>{r.invalidateQueries({queryKey:["lead",t]}),i(!1),me.success("Lead actualizado correctamente")},onError:()=>{me.error("Error al actualizar el lead")}}),K=ot({mutationFn:ee=>qn.updateLead(Number(t),{assigned_to:ee}),onSuccess:()=>{r.invalidateQueries({queryKey:["lead",t]}),r.invalidateQueries({queryKey:["leads"]}),l(!1),me.success("Lead asignado correctamente")},onError:ee=>{var vt,ut;console.error("Error al asignar lead:",ee);const Le=((ut=(vt=ee.response)==null?void 0:vt.data)==null?void 0:ut.message)||ee.message||"Error desconocido";me.error(`Error al asignar el lead: ${Le}`)}}),Z=ot({mutationFn:ee=>F1.unlinkAccount(ee),onSuccess:()=>{r.invalidateQueries({queryKey:["trading-accounts",t]}),me.success("Cuenta desvinculada correctamente")},onError:()=>{me.error("Error al desvincular la cuenta")}}),M=ee=>{ee.preventDefault();const Le=new FormData(ee.target),vt={name:Le.get("name"),email:Le.get("email"),phone:Le.get("phone"),country:Le.get("country"),status:Le.get("status"),source:Le.get("source"),campaign:Le.get("campaign"),assigned_to:Le.get("assigned_to")?Number(Le.get("assigned_to")):null};W.mutate(vt)},X=ee=>{K.mutate(ee)},V=(ee,Le)=>{const vt=(Le-1)*_,ut=vt+_;return ee.slice(vt,ut)},Y=ee=>Math.ceil(ee.length/_),H=(A=I==null?void 0:I.data)!=null&&A.open_positions?V(I.data.open_positions,b):[],ie=(Ce=I==null?void 0:I.data)!=null&&Ce.closed_positions?V(I.data.closed_positions,k):[],de=(be=I==null?void 0:I.data)!=null&&be.pending_positions?V(I.data.pending_positions,E):[],xe=(ze=I==null?void 0:I.data)!=null&&ze.open_positions?Y(I.data.open_positions):0,le=(Be=I==null?void 0:I.data)!=null&&Be.closed_positions?Y(I.data.closed_positions):0,he=(Ee=I==null?void 0:I.data)!=null&&Ee.pending_positions?Y(I.data.pending_positions):0;return C?o.jsx("div",{className:"flex justify-center items-center min-h-screen",children:o.jsxs("div",{className:"text-center",children:[o.jsx(St,{}),o.jsx("p",{className:"mt-4 text-secondary-600 dark:text-secondary-400",children:"Cargando información del lead..."})]})}):S?o.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto",children:[o.jsx("div",{className:"bg-white dark:bg-secondary-900 rounded-xl shadow-sm border border-secondary-200 dark:border-secondary-700 p-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{onClick:()=>e("/leads"),className:"p-2 text-secondary-400 hover:text-secondary-600 dark:hover:text-secondary-300 transition-colors rounded-lg hover:bg-secondary-100 dark:hover:bg-secondary-800",children:o.jsx(La,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary-500 to-primary-600 rounded-xl flex items-center justify-center text-white font-bold text-lg",children:((ur=(gt=S.name)==null?void 0:gt.charAt(0))==null?void 0:ur.toUpperCase())||"L"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:S.name}),o.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[o.jsxs("p",{className:"text-secondary-500 dark:text-secondary-400",children:["Lead #",S.id]}),o.jsx("span",{className:"text-secondary-300 dark:text-secondary-600",children:"•"}),o.jsxs("p",{className:"text-secondary-500 dark:text-secondary-400 flex items-center",children:[o.jsx(Bu,{className:"w-4 h-4 mr-1"}),new Date(S.created_at).toLocaleDateString("es-ES")]})]})]})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(EN,{leadId:Number(t),currentStateName:S.status,onStateChange:re,showHistory:!0,disabled:n}),o.jsxs("button",{onClick:()=>i(!n),className:je("btn transition-all duration-200",n?"btn-secondary":"btn-primary hover:shadow-lg"),children:[o.jsx(qo,{className:"w-4 h-4 mr-2"}),n?"Cancelar":"Editar"]})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o.jsxs("div",{className:"card",children:[o.jsx("div",{className:"card-header cursor-pointer hover:bg-secondary-50 dark:hover:bg-secondary-800 transition-colors",onClick:()=>m(!f),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:o.jsx(or,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Información del Lead"})]}),f?o.jsx(vi,{className:"w-5 h-5 text-secondary-400"}):o.jsx(zl,{className:"w-5 h-5 text-secondary-400"})]})}),!f&&o.jsx("div",{className:"card-body",children:n?o.jsxs("form",{onSubmit:M,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Nombre Completo"}),o.jsx("input",{type:"text",name:"name",defaultValue:S.name,className:"input",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Email"}),o.jsx("input",{type:"email",name:"email",defaultValue:S.email,className:"input",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Teléfono"}),o.jsx("input",{type:"tel",name:"phone",defaultValue:S.phone,className:"input"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"País"}),o.jsx("input",{type:"text",name:"country",defaultValue:S.country,className:"input"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Estado"}),o.jsxs("select",{name:"status",defaultValue:S.status,className:"input",children:[o.jsx("option",{value:"new",children:"Nuevo"}),o.jsx("option",{value:"contacted",children:"Contactado"}),o.jsx("option",{value:"qualified",children:"Calificado"}),o.jsx("option",{value:"converted",children:"Convertido"}),o.jsx("option",{value:"lost",children:"Perdido"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Fuente"}),o.jsx("input",{type:"text",name:"source",defaultValue:S.source,className:"input"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Campaña"}),o.jsx("input",{type:"text",name:"campaign",defaultValue:S.campaign,className:"input"})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-secondary-200 dark:border-secondary-700",children:[o.jsx("button",{type:"button",onClick:()=>i(!1),className:"btn btn-secondary",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:W.isPending,className:"btn btn-primary",children:W.isPending?o.jsxs(o.Fragment,{children:[o.jsx(St,{}),o.jsx("span",{className:"ml-2",children:"Guardando..."})]}):"Guardar Cambios"})]})]}):o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-secondary-50 dark:bg-secondary-800 rounded-lg",children:[o.jsx(Ia,{className:"w-5 h-5 text-secondary-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:"Email"}),o.jsx("p",{className:"font-medium text-secondary-900 dark:text-white",children:S.email})]})]}),o.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-secondary-50 dark:bg-secondary-800 rounded-lg",children:[o.jsx(Ah,{className:"w-5 h-5 text-secondary-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:"Teléfono"}),o.jsx("p",{className:"font-medium text-secondary-900 dark:text-white",children:S.phone||"No especificado"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-secondary-50 dark:bg-secondary-800 rounded-lg",children:[o.jsx(FO,{className:"w-5 h-5 text-secondary-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:"País"}),o.jsx("p",{className:"font-medium text-secondary-900 dark:text-white",children:S.country||"No especificado"})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-secondary-50 dark:bg-secondary-800 rounded-lg",children:[o.jsx(Sy,{className:"w-5 h-5 text-secondary-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:"Fuente"}),o.jsx("p",{className:"font-medium text-secondary-900 dark:text-white",children:S.source||"No especificado"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-secondary-50 dark:bg-secondary-800 rounded-lg",children:[o.jsx(RO,{className:"w-5 h-5 text-secondary-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:"Campaña"}),o.jsx("p",{className:"font-medium text-secondary-900 dark:text-white",children:S.campaign||"No especificado"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-secondary-50 dark:bg-secondary-800 rounded-lg",children:[o.jsx(or,{className:"w-5 h-5 text-secondary-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:"Asignado a"}),o.jsx("p",{className:"font-medium text-secondary-900 dark:text-white",children:S.assigned_to_name||"Sin asignar"})]})]})]})]})})]}),o.jsx(QX,{leadId:S.id,onLeadStatusChange:ee=>re(0,ee)}),o.jsxs("div",{className:"card",children:[o.jsx("div",{className:"card-header cursor-pointer hover:bg-secondary-50 dark:hover:bg-secondary-800 transition-colors",onClick:()=>h(!u),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center",children:o.jsx(xp,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Depósitos y Retiros"}),((q=F==null?void 0:F.data)==null?void 0:q.summary)&&o.jsxs("span",{className:"bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-200 px-2 py-1 rounded-full text-xs font-medium",children:[F.data.summary.transaction_count," transacciones"]})]}),u?o.jsx(vi,{className:"w-5 h-5 text-secondary-400"}):o.jsx(zl,{className:"w-5 h-5 text-secondary-400"})]})}),!u&&o.jsx("div",{className:"card-body",children:P?o.jsx("div",{className:"flex justify-center py-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx(St,{}),o.jsx("p",{className:"mt-2 text-sm text-secondary-500 dark:text-secondary-400",children:"Cargando información financiera..."})]})}):F!=null&&F.success&&(F!=null&&F.data)?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[o.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl p-4 border border-green-200 dark:border-green-800",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"Total Depósitos"}),o.jsxs("p",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:["$",(F.data.summary.total_deposits||0).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),o.jsx(Fd,{className:"w-8 h-8 text-green-500"})]})}),o.jsx("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 rounded-xl p-4 border border-red-200 dark:border-red-800",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:"Total Retiros"}),o.jsxs("p",{className:"text-2xl font-bold text-red-700 dark:text-red-300",children:["$",(F.data.summary.total_withdrawals||0).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),o.jsx(Fd,{className:"w-8 h-8 text-red-500 rotate-180"})]})}),o.jsx("div",{className:`bg-gradient-to-br rounded-xl p-4 border ${F.data.summary.net_amount>=0?"from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 border-blue-200 dark:border-blue-800":"from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 border-orange-200 dark:border-orange-800"}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:`text-sm font-medium ${F.data.summary.net_amount>=0?"text-blue-600 dark:text-blue-400":"text-orange-600 dark:text-orange-400"}`,children:"Balance Neto"}),o.jsxs("p",{className:`text-2xl font-bold ${F.data.summary.net_amount>=0?"text-blue-700 dark:text-blue-300":"text-orange-700 dark:text-orange-300"}`,children:["$",(F.data.summary.net_amount||0).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),o.jsx(Fs,{className:`w-8 h-8 ${F.data.summary.net_amount>=0?"text-blue-500":"text-orange-500"}`})]})})]}),F.data.transactions&&F.data.transactions.length>0?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h4",{className:"text-md font-semibold text-secondary-900 dark:text-white flex items-center",children:[o.jsx(qs,{className:"w-5 h-5 mr-2 text-secondary-500"}),"Historial de Transacciones"]}),o.jsx("div",{className:"overflow-hidden rounded-lg border border-secondary-200 dark:border-secondary-700",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-secondary-200 dark:divide-secondary-700",children:[o.jsx("thead",{className:"bg-secondary-50 dark:bg-secondary-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Tipo"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Monto"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Agente"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Fecha"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Estado"})]})}),o.jsx("tbody",{className:"bg-white dark:bg-secondary-900 divide-y divide-secondary-200 dark:divide-secondary-700",children:F.data.transactions.map(ee=>o.jsxs("tr",{className:"hover:bg-secondary-50 dark:hover:bg-secondary-800 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${ee.type==="deposit"?"bg-green-100 dark:bg-green-900":"bg-red-100 dark:bg-red-900"}`,children:o.jsx(Fd,{className:`w-4 h-4 ${ee.type==="deposit"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400 rotate-180"}`})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("div",{className:"text-sm font-medium text-secondary-900 dark:text-white capitalize",children:ee.type==="deposit"?"Depósito":"Retiro"}),ee.payment_method&&o.jsx("div",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:ee.payment_method})]})]})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsxs("div",{className:`text-sm font-semibold ${ee.type==="deposit"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[ee.type==="deposit"?"+":"-","$",(ee.amount||0).toLocaleString("en-US",{minimumFractionDigits:2})]}),o.jsx("div",{className:"text-xs text-secondary-500 dark:text-secondary-400",children:ee.currency||"USD"})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-secondary-900 dark:text-white",children:ee.agent_name||ee.processed_by_name||"No especificado"})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsx("div",{className:"text-sm text-secondary-900 dark:text-white",children:new Date(ee.created_at).toLocaleDateString("es-ES")}),o.jsx("div",{className:"text-xs text-secondary-500 dark:text-secondary-400",children:new Date(ee.created_at).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${ee.status==="completed"||ee.status==="approved"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":ee.status==="pending"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:ee.status==="completed"?"Completado":ee.status==="approved"?"Aprobado":ee.status==="pending"?"Pendiente":ee.status})})]},ee.id))})]})})})]}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(xp,{className:"w-12 h-12 text-secondary-300 dark:text-secondary-600 mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400",children:"No hay transacciones registradas"})]})]}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Qs,{className:"w-12 h-12 text-secondary-300 dark:text-secondary-600 mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400",children:"No se pudo cargar la información financiera"})]})})]}),o.jsxs("div",{className:"card",children:[o.jsx("div",{className:"card-header cursor-pointer hover:bg-secondary-50 dark:hover:bg-secondary-800 transition-colors",onClick:()=>d(!c),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-purple-100 dark:bg-purple-900 rounded-lg flex items-center justify-center",children:o.jsx(D2,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})}),o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Cuentas de Trading"}),(Q==null?void 0:Q.success)&&((J=Q==null?void 0:Q.data)==null?void 0:J.length)>0&&o.jsxs("span",{className:"bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-200 px-2 py-1 rounded-full text-xs font-medium",children:[Q.data.length," cuentas"]})]}),c?o.jsx(vi,{className:"w-5 h-5 text-secondary-400"}):o.jsx(zl,{className:"w-5 h-5 text-secondary-400"})]})}),!c&&o.jsx("div",{className:"card-body",children:D?o.jsx("div",{className:"flex justify-center py-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx(St,{}),o.jsx("p",{className:"mt-2 text-sm text-secondary-500 dark:text-secondary-400",children:"Cargando cuentas de trading..."})]})}):Q!=null&&Q.success&&((ue=Q==null?void 0:Q.data)==null?void 0:ue.length)>0?o.jsx("div",{className:"space-y-6",children:Q.data.map(ee=>o.jsxs("div",{className:"bg-secondary-50 dark:bg-secondary-800 rounded-xl p-6 border border-secondary-200 dark:border-secondary-700",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg",children:ee.platform.substring(0,2).toUpperCase()}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-bold text-secondary-900 dark:text-white",children:ee.account_number}),o.jsxs("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:[ee.platform," • ",ee.account_type," • ",ee.leverage]}),o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium mt-1 ${ee.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:ee.status==="active"?"Activa":"Inactiva"})]})]}),o.jsx("button",{onClick:()=>Z.mutate(ee.id),disabled:Z.isPending,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 text-sm font-medium transition-colors hover:bg-red-50 dark:hover:bg-red-900/20 px-3 py-1 rounded-lg",children:"Desvincular"})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[o.jsx("div",{className:"bg-white dark:bg-secondary-900 rounded-lg p-4 border border-secondary-200 dark:border-secondary-700",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wide",children:"Balance"}),o.jsxs("p",{className:"text-xl font-bold text-secondary-900 dark:text-white",children:["$",(ee.balance||0).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),o.jsx(Fs,{className:"w-8 h-8 text-blue-500"})]})}),o.jsx("div",{className:"bg-white dark:bg-secondary-900 rounded-lg p-4 border border-secondary-200 dark:border-secondary-700",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wide",children:"Equity"}),o.jsxs("p",{className:"text-xl font-bold text-secondary-900 dark:text-white",children:["$",(ee.equity||0).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),o.jsx(Lr,{className:"w-8 h-8 text-purple-500"})]})}),o.jsx("div",{className:"bg-white dark:bg-secondary-900 rounded-lg p-4 border border-secondary-200 dark:border-secondary-700",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wide",children:"Margen"}),o.jsxs("p",{className:"text-xl font-bold text-secondary-900 dark:text-white",children:["$",(ee.margin||0).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),o.jsx(xp,{className:"w-8 h-8 text-orange-500"})]})}),o.jsx("div",{className:"bg-white dark:bg-secondary-900 rounded-lg p-4 border border-secondary-200 dark:border-secondary-700",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wide",children:"P&L"}),o.jsxs("p",{className:`text-xl font-bold ${(ee.profit_loss||0)>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["$",(ee.profit_loss||0).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),o.jsx(Fd,{className:`w-8 h-8 ${(ee.profit_loss||0)>=0?"text-green-500":"text-red-500 rotate-180"}`})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx("div",{className:"bg-gradient-to-r from-cyan-50 to-blue-50 dark:from-cyan-900/20 dark:to-blue-900/20 rounded-lg p-4 border border-cyan-200 dark:border-cyan-800",children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-cyan-600 dark:text-cyan-400",children:"Margen Libre"}),o.jsxs("p",{className:"text-lg font-bold text-cyan-700 dark:text-cyan-300",children:["$",((ee.equity||0)-(ee.margin||0)).toLocaleString("en-US",{minimumFractionDigits:2})]})]})})}),o.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-lg p-4 border border-indigo-200 dark:border-indigo-800",children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-400",children:"Nivel de Margen"}),o.jsxs("p",{className:"text-lg font-bold text-indigo-700 dark:text-indigo-300",children:[ee.margin>0?(ee.equity/ee.margin*100).toFixed(2):"0.00","%"]})]})})}),o.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-green-50 dark:from-emerald-900/20 dark:to-green-900/20 rounded-lg p-4 border border-emerald-200 dark:border-emerald-800",children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-emerald-600 dark:text-emerald-400",children:"ROI"}),o.jsxs("p",{className:`text-lg font-bold ${(ee.profit_loss||0)>=0?"text-emerald-700 dark:text-emerald-300":"text-red-600 dark:text-red-400"}`,children:[ee.balance>0?((ee.profit_loss||0)/ee.balance*100).toFixed(2):"0.00","%"]})]})})})]})]},ee.id))}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(D2,{className:"w-12 h-12 text-secondary-300 dark:text-secondary-600 mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400 mb-2",children:"No hay cuentas de trading vinculadas"}),o.jsx("p",{className:"text-sm text-secondary-400 dark:text-secondary-500",children:"Las cuentas se vincularán automáticamente cuando coincida el email"})]})})]}),o.jsxs("div",{className:"card",children:[o.jsx("div",{className:"card-header cursor-pointer hover:bg-secondary-50 dark:hover:bg-secondary-800 transition-colors",onClick:()=>p(!x),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-indigo-100 dark:bg-indigo-900 rounded-lg flex items-center justify-center",children:o.jsx(Lr,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"})}),o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Posiciones de Trading"})]}),x?o.jsx(vi,{className:"w-5 h-5 text-secondary-400"}):o.jsx(zl,{className:"w-5 h-5 text-secondary-400"})]})}),!x&&o.jsx("div",{className:"card-body",children:te?o.jsx("div",{className:"flex justify-center py-8",children:o.jsx(St,{})}):I!=null&&I.success&&(I!=null&&I.data)?o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"border-b border-secondary-200 dark:border-secondary-700",children:o.jsxs("nav",{className:"-mb-px flex space-x-8",children:[o.jsxs("button",{onClick:()=>v("open"),className:je("py-2 px-1 border-b-2 font-medium text-sm transition-colors",g==="open"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-secondary-500 hover:text-secondary-700 hover:border-secondary-300 dark:text-secondary-400 dark:hover:text-secondary-300"),children:["Posiciones Abiertas (",I.data.open_positions.length,")"]}),o.jsxs("button",{onClick:()=>v("closed"),className:je("py-2 px-1 border-b-2 font-medium text-sm transition-colors",g==="closed"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-secondary-500 hover:text-secondary-700 hover:border-secondary-300 dark:text-secondary-400 dark:hover:text-secondary-300"),children:["Posiciones Cerradas (",I.data.closed_positions.length,")"]}),o.jsxs("button",{onClick:()=>v("pending"),className:je("py-2 px-1 border-b-2 font-medium text-sm transition-colors",g==="pending"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-secondary-500 hover:text-secondary-700 hover:border-secondary-300 dark:text-secondary-400 dark:hover:text-secondary-300"),children:["Posiciones Pendientes (",I.data.pending_positions.length,")"]})]})}),o.jsxs("div",{className:"space-y-4",children:[g==="open"&&o.jsx(o.Fragment,{children:H.length>0?o.jsxs(o.Fragment,{children:[H.map(ee=>{var Le;return o.jsxs("div",{className:"bg-secondary-50 dark:bg-secondary-800 rounded-lg p-4 border border-secondary-200 dark:border-secondary-700",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:je("w-10 h-10 rounded-lg flex items-center justify-center text-white font-bold text-sm",ee.type==="buy"?"bg-green-500":"bg-red-500"),children:ee.type==="buy"?"BUY":"SELL"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-secondary-900 dark:text-white",children:ee.symbol}),o.jsxs("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:["Volumen: ",ee.volume," • ",ee.platform]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:je("font-bold text-lg",ee.profit_loss>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:["$",ee.profit_loss.toFixed(2)]}),o.jsx("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:"P&L"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400",children:"Precio Apertura"}),o.jsx("p",{className:"font-medium text-secondary-900 dark:text-white",children:ee.open_price.toFixed(5)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400",children:"Precio Actual"}),o.jsx("p",{className:"font-medium text-secondary-900 dark:text-white",children:((Le=ee.current_price)==null?void 0:Le.toFixed(5))||"N/A"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400",children:"Swap"}),o.jsxs("p",{className:je("font-medium",ee.swap>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:["$",ee.swap.toFixed(2)]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400",children:"Comisión"}),o.jsxs("p",{className:"font-medium text-red-600 dark:text-red-400",children:["$",ee.commission.toFixed(2)]})]})]}),o.jsx("div",{className:"mt-3 pt-3 border-t border-secondary-200 dark:border-secondary-700",children:o.jsxs("p",{className:"text-xs text-secondary-500 dark:text-secondary-400",children:["Abierta: ",new Date(ee.open_time).toLocaleString("es-ES")]})})]},ee.id)}),xe>1&&o.jsx("div",{className:"flex justify-center mt-6",children:o.jsx(Hp,{currentPage:b,totalItems:((ge=(Ne=I==null?void 0:I.data)==null?void 0:Ne.open_positions)==null?void 0:ge.length)||0,itemsPerPage:10,onPageChange:y})})]}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Lr,{className:"w-12 h-12 text-secondary-300 dark:text-secondary-600 mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400",children:"No hay posiciones abiertas"})]})}),g==="closed"&&o.jsx(o.Fragment,{children:ie.length>0?o.jsxs(o.Fragment,{children:[ie.map(ee=>{var Le;return o.jsxs("div",{className:"bg-secondary-50 dark:bg-secondary-800 rounded-lg p-4 border border-secondary-200 dark:border-secondary-700",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:je("w-10 h-10 rounded-lg flex items-center justify-center text-white font-bold text-sm",ee.type==="buy"?"bg-green-500":"bg-red-500"),children:ee.type==="buy"?"BUY":"SELL"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-secondary-900 dark:text-white",children:ee.symbol}),o.jsxs("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:["Volumen: ",ee.volume," • ",ee.platform]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:je("font-bold text-lg",ee.profit_loss>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:["$",ee.profit_loss.toFixed(2)]}),o.jsx("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:"P&L Final"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400",children:"Precio Apertura"}),o.jsx("p",{className:"font-medium text-secondary-900 dark:text-white",children:ee.open_price.toFixed(5)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400",children:"Precio Cierre"}),o.jsx("p",{className:"font-medium text-secondary-900 dark:text-white",children:((Le=ee.current_price)==null?void 0:Le.toFixed(5))||"N/A"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400",children:"Swap"}),o.jsxs("p",{className:je("font-medium",ee.swap>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:["$",ee.swap.toFixed(2)]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400",children:"Comisión"}),o.jsxs("p",{className:"font-medium text-red-600 dark:text-red-400",children:["$",ee.commission.toFixed(2)]})]})]}),o.jsxs("div",{className:"mt-3 pt-3 border-t border-secondary-200 dark:border-secondary-700 grid grid-cols-2 gap-4",children:[o.jsx("div",{children:o.jsxs("p",{className:"text-xs text-secondary-500 dark:text-secondary-400",children:["Abierta: ",new Date(ee.open_time).toLocaleString("es-ES")]})}),o.jsx("div",{children:o.jsxs("p",{className:"text-xs text-secondary-500 dark:text-secondary-400",children:["Cerrada: ",ee.close_time?new Date(ee.close_time).toLocaleString("es-ES"):"N/A"]})})]})]},ee.id)}),le>1&&o.jsx("div",{className:"flex justify-center mt-6",children:o.jsx(Hp,{currentPage:k,totalItems:((Pe=(pe=I==null?void 0:I.data)==null?void 0:pe.closed_positions)==null?void 0:Pe.length)||0,itemsPerPage:10,onPageChange:N})})]}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(pr,{className:"w-12 h-12 text-secondary-300 dark:text-secondary-600 mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400",children:"No hay posiciones cerradas"})]})}),g==="pending"&&o.jsx(o.Fragment,{children:de.length>0?o.jsxs(o.Fragment,{children:[de.map(ee=>o.jsxs("div",{className:"bg-secondary-50 dark:bg-secondary-800 rounded-lg p-4 border border-secondary-200 dark:border-secondary-700",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-yellow-500 rounded-lg flex items-center justify-center text-white font-bold text-sm",children:"PEND"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-secondary-900 dark:text-white",children:ee.symbol}),o.jsxs("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:["Volumen: ",ee.volume," • ",ee.platform]})]})]}),o.jsx("div",{className:"text-right",children:o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",children:"Pendiente"})})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400",children:"Tipo"}),o.jsx("p",{className:"font-medium text-secondary-900 dark:text-white uppercase",children:ee.type})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400",children:"Precio Objetivo"}),o.jsx("p",{className:"font-medium text-secondary-900 dark:text-white",children:ee.open_price.toFixed(5)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400",children:"Estado"}),o.jsx("p",{className:"font-medium text-yellow-600 dark:text-yellow-400",children:"Esperando ejecución"})]})]}),o.jsx("div",{className:"mt-3 pt-3 border-t border-secondary-200 dark:border-secondary-700",children:o.jsxs("p",{className:"text-xs text-secondary-500 dark:text-secondary-400",children:["Creada: ",new Date(ee.open_time).toLocaleString("es-ES")]})})]},ee.id)),he>1&&o.jsx("div",{className:"flex justify-center mt-6",children:o.jsx(Hp,{currentPage:E,totalItems:((Ue=(Qe=I==null?void 0:I.data)==null?void 0:Qe.pending_positions)==null?void 0:Ue.length)||0,itemsPerPage:10,onPageChange:j})})]}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(jn,{className:"w-12 h-12 text-secondary-300 dark:text-secondary-600 mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400",children:"No hay posiciones pendientes"})]})})]})]}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Lr,{className:"w-12 h-12 text-secondary-300 dark:text-secondary-600 mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400 mb-2",children:"No hay datos de posiciones disponibles"}),o.jsx("p",{className:"text-sm text-secondary-400 dark:text-secondary-500",children:"Las posiciones aparecerán cuando haya actividad de trading"})]})})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"card",children:[o.jsx("div",{className:"card-header",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-orange-100 dark:bg-orange-900 rounded-lg flex items-center justify-center",children:o.jsx(sm,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"})}),o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Estado del Lead"})]})}),o.jsx("div",{className:"card-body",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 bg-secondary-50 dark:bg-secondary-800 rounded-lg",children:[o.jsx("span",{className:"text-sm font-medium text-secondary-700 dark:text-secondary-300",children:"Estado Actual"}),o.jsx(EN,{leadId:Number(t),currentStateName:S.status,onStateChange:re,showHistory:!1,disabled:!1})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 bg-secondary-50 dark:bg-secondary-800 rounded-lg",children:[o.jsx("span",{className:"text-sm font-medium text-secondary-700 dark:text-secondary-300",children:"Creado"}),o.jsx("span",{className:"text-sm text-secondary-900 dark:text-white",children:new Date(S.created_at).toLocaleDateString("es-ES")})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 bg-secondary-50 dark:bg-secondary-800 rounded-lg",children:[o.jsx("span",{className:"text-sm font-medium text-secondary-700 dark:text-secondary-300",children:"Última Actualización"}),o.jsx("span",{className:"text-sm text-secondary-900 dark:text-white",children:S.updated_at?new Date(S.updated_at).toLocaleDateString("es-ES"):"N/A"})]})]})})]}),o.jsxs("div",{className:"card",children:[o.jsx("div",{className:"card-header",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-indigo-100 dark:bg-indigo-900 rounded-lg flex items-center justify-center",children:o.jsx(or,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"})}),o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Asignación"})]})}),o.jsx("div",{className:"card-body",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-secondary-700 dark:text-secondary-300",children:"Asignado a:"}),o.jsx("span",{className:"text-sm text-secondary-900 dark:text-white",children:S.assigned_to_name||"Sin asignar"})]}),s("leads.assign")&&o.jsxs("button",{onClick:()=>l(!0),className:"w-full btn btn-secondary text-sm",children:[o.jsx(or,{className:"w-4 h-4 mr-2"}),S.assigned_to?"Reasignar":"Asignar"," Lead"]})]})})]}),o.jsxs("div",{className:"card",children:[o.jsx("div",{className:"card-header",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-cyan-100 dark:bg-cyan-900 rounded-lg flex items-center justify-center",children:o.jsx(EO,{className:"w-4 h-4 text-cyan-600 dark:text-cyan-400"})}),o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Información Adicional"})]})}),o.jsx("div",{className:"card-body",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"ID del Lead:"}),o.jsxs("span",{className:"font-mono text-secondary-900 dark:text-white",children:["#",S.id]})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Fuente:"}),o.jsx("span",{className:"text-secondary-900 dark:text-white",children:S.source||"N/A"})]}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Campaña:"}),o.jsx("span",{className:"text-secondary-900 dark:text-white",children:S.campaign||"N/A"})]})]})})]})]})]}),a&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsx("div",{className:"bg-white dark:bg-secondary-900 rounded-xl shadow-xl max-w-md w-full",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Asignar Lead"}),o.jsx("button",{onClick:()=>l(!1),className:"text-secondary-400 hover:text-secondary-600 dark:hover:text-secondary-300",children:o.jsx(Uu,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"space-y-3",children:(ft=B==null?void 0:B.data)==null?void 0:ft.map(ee=>{var Le,vt;return o.jsx("button",{onClick:()=>X(ee.id),disabled:K.isPending,className:"w-full text-left p-3 rounded-lg border border-secondary-200 dark:border-secondary-700 hover:bg-secondary-50 dark:hover:bg-secondary-800 transition-colors",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-sm font-medium text-primary-600 dark:text-primary-400",children:(vt=(Le=ee.name)==null?void 0:Le.charAt(0))==null?void 0:vt.toUpperCase()})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-secondary-900 dark:text-white",children:ee.name}),o.jsx("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:ee.email})]})]})},ee.id)})})]})})})]}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Qs,{className:"w-16 h-16 text-secondary-400 mx-auto mb-4"}),o.jsx("h2",{className:"text-2xl font-bold text-secondary-900 dark:text-white mb-4",children:"Lead no encontrado"}),o.jsx("p",{className:"text-secondary-600 dark:text-secondary-400 mb-6",children:"El lead que buscas no existe o ha sido eliminado."}),o.jsxs("button",{onClick:()=>e("/leads"),className:"btn btn-primary",children:[o.jsx(La,{className:"w-4 h-4 mr-2"}),"Volver a Leads"]})]})}function tQ(){const[t,e]=w.useState("upload"),[r,s]=w.useState(null),[n,i]=w.useState(null),[a,l]=w.useState({}),[c,d]=w.useState({skip_first_row:!0,duplicate_action:"skip"}),[u,h]=w.useState(null),[f,m]=w.useState(!1),x=w.useRef(null),p=os(),{data:g}=Ke({queryKey:["system-fields"],queryFn:()=>p0.getSystemFields(),staleTime:10*60*1e3}),{data:v}=Ke({queryKey:["import-history"],queryFn:()=>p0.getImportHistory(),refetchInterval:5e3}),b=ot({mutationFn:B=>p0.analyzeFile(B),onSuccess:B=>{i(B.data);const Q={};Object.entries(B.data.detected_columns).forEach(([D,I])=>{I.suggested_field&&(Q[D]=I.suggested_field)}),l(Q),e("mapping"),me.success("Archivo analizado correctamente")},onError:B=>{var Q,D;me.error(((D=(Q=B.response)==null?void 0:Q.data)==null?void 0:D.message)||"Error al analizar el archivo")}}),y=ot({mutationFn:B=>p0.importLeads(B),onSuccess:B=>{h(B.data),e("results"),p.invalidateQueries({queryKey:["import-history"]}),me.success("Importación completada")},onError:B=>{var Q,D;me.error(((D=(Q=B.response)==null?void 0:Q.data)==null?void 0:D.message)||"Error en la importación")}}),k=B=>{var D;const Q=(D=B.target.files)==null?void 0:D[0];if(Q){if(!["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(Q.type)){me.error("Tipo de archivo no soportado. Use CSV, XLS o XLSX");return}if(Q.size>10*1024*1024){me.error("El archivo es demasiado grande. Máximo 10MB");return}s(Q),e("analyze")}},N=()=>{r&&b.mutate(r)},E=(B,Q)=>{l(D=>({...D,[B]:Q}))},j=B=>{l(Q=>{const D={...Q};return delete D[B],D})},_=()=>{if(!(g!=null&&g.data))return!1;const B=Object.entries(g.data).filter(([D,I])=>I.required).map(([D,I])=>D),Q=Object.values(a);return B.every(D=>Q.includes(D))},S=()=>{if(!n||!_()){me.error("Complete el mapeo de campos requeridos");return}const B={filename:n.filename,mapping:a,skip_first_row:c.skip_first_row,duplicate_action:c.duplicate_action};y.mutate(B)},C=()=>{e("upload"),s(null),i(null),l({}),h(null),x.current&&(x.current.value="")},F=B=>{const Q=["upload","analyze","mapping","preview","import","results"],D=Q.indexOf(t),I=Q.indexOf(B);return I<D?"completed":I===D?"current":"pending"},P=B=>{if(B===0)return"0 Bytes";const Q=1024,D=["Bytes","KB","MB","GB"],I=Math.floor(Math.log(B)/Math.log(Q));return parseFloat((B/Math.pow(Q,I)).toFixed(2))+" "+D[I]};return o.jsxs("div",{className:"space-y-6 animate-fade-in",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:"Importar Leads"}),o.jsx("p",{className:"text-secondary-600 dark:text-secondary-400 mt-1",children:"Importa leads desde archivos CSV o Excel con mapeo dinámico de columnas"})]}),o.jsxs("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:[o.jsxs("button",{onClick:()=>m(!0),className:"btn-secondary",children:[o.jsx(jn,{className:"w-4 h-4 mr-2"}),"Historial"]}),t!=="upload"&&o.jsx("button",{onClick:C,className:"btn-ghost",children:"Nueva Importación"})]})]}),o.jsx("div",{className:"card",children:o.jsx("div",{className:"card-body",children:o.jsx("div",{className:"flex items-center justify-between",children:[{key:"upload",label:"Subir Archivo",icon:R2},{key:"analyze",label:"Analizar",icon:gn},{key:"mapping",label:"Mapear Campos",icon:qs},{key:"import",label:"Importar",icon:Zl},{key:"results",label:"Resultados",icon:pr}].map((B,Q)=>{const D=F(B.key),I=B.icon;return o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:je("flex items-center justify-center w-10 h-10 rounded-full border-2 transition-colors",D==="completed"?"bg-success-100 border-success-500 text-success-700 dark:bg-success-900 dark:text-success-300":D==="current"?"bg-primary-100 border-primary-500 text-primary-700 dark:bg-primary-900 dark:text-primary-300":"bg-secondary-100 border-secondary-300 text-secondary-500 dark:bg-secondary-800 dark:border-secondary-600"),children:o.jsx(I,{className:"w-5 h-5"})}),o.jsx("div",{className:"ml-3",children:o.jsx("div",{className:je("text-sm font-medium",D==="completed"?"text-success-700 dark:text-success-300":D==="current"?"text-primary-700 dark:text-primary-300":"text-secondary-500 dark:text-secondary-400"),children:B.label})}),Q<4&&o.jsx(ji,{className:"w-5 h-5 text-secondary-400 mx-4"})]},B.key)})})})}),t==="upload"&&o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body text-center py-12",children:[o.jsx("div",{className:"mx-auto w-24 h-24 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center mb-6",children:o.jsx(R2,{className:"w-12 h-12 text-primary-600 dark:text-primary-400"})}),o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white mb-2",children:"Selecciona un archivo para importar"}),o.jsx("p",{className:"text-secondary-600 dark:text-secondary-400 mb-8",children:"Soportamos archivos CSV, XLS y XLSX hasta 10MB"}),o.jsx("input",{ref:x,type:"file",accept:".csv,.xls,.xlsx",onChange:k,className:"hidden"}),o.jsxs("button",{onClick:()=>{var B;return(B=x.current)==null?void 0:B.click()},className:"btn-primary",children:[o.jsx(Zl,{className:"w-5 h-5 mr-2"}),"Seleccionar Archivo"]}),o.jsxs("div",{className:"mt-8 text-sm text-secondary-500 dark:text-secondary-400",children:[o.jsx("p",{children:"Formatos soportados: CSV, XLS, XLSX"}),o.jsx("p",{children:"Tamaño máximo: 10MB"})]})]})}),t==="analyze"&&o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body text-center py-12",children:[o.jsx("div",{className:"mx-auto w-24 h-24 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mb-6",children:o.jsx(gn,{className:"w-12 h-12 text-blue-600 dark:text-blue-400"})}),o.jsxs("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white mb-2",children:["Archivo seleccionado: ",r==null?void 0:r.name]}),o.jsxs("p",{className:"text-secondary-600 dark:text-secondary-400 mb-2",children:["Tamaño: ",r?P(r.size):""]}),o.jsx("p",{className:"text-secondary-600 dark:text-secondary-400 mb-8",children:'Haz clic en "Analizar" para detectar las columnas automáticamente'}),o.jsx("button",{onClick:N,disabled:b.isPending,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:b.isPending?o.jsxs(o.Fragment,{children:[o.jsx(St,{size:"sm",className:"mr-2"}),"Analizando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(gn,{className:"w-5 h-5 mr-2"}),"Analizar Archivo"]})})]})}),t==="mapping"&&n&&(g==null?void 0:g.data)&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body",children:[o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white mb-4",children:"Información del Archivo"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:n.total_rows}),o.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Filas totales"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:Object.keys(n.detected_columns).length}),o.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Columnas detectadas"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:P(n.file_size)}),o.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Tamaño del archivo"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:["~",n.estimated_import_time,"s"]}),o.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Tiempo estimado"})]})]})]})}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body",children:[o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white mb-4",children:"Mapear Columnas del Archivo"}),o.jsx("p",{className:"text-secondary-600 dark:text-secondary-400 mb-6",children:"Asocia cada columna de tu archivo con los campos del sistema. Los campos marcados con * son obligatorios."}),o.jsx("div",{className:"space-y-4",children:Object.entries(n.detected_columns).map(([B,Q])=>{var D;return o.jsxs("div",{className:"border border-secondary-200 dark:border-secondary-700 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center text-sm font-medium text-primary-600 dark:text-primary-400",children:B}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-secondary-900 dark:text-white",children:Q.header}),o.jsxs("div",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:['Ejemplo: "',Q.sample,'"']})]})]}),a[B]&&o.jsx("button",{onClick:()=>j(B),className:"text-danger-600 hover:text-danger-900 dark:text-danger-400",title:"Quitar mapeo",children:o.jsx(Uu,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Mapear a campo del sistema"}),o.jsxs("select",{value:a[B]||"",onChange:I=>E(B,I.target.value),className:"input",children:[o.jsx("option",{value:"",children:"-- No mapear --"}),Object.entries(g.data).map(([I,te])=>o.jsxs("option",{value:I,children:[te.label," ",te.required?"*":""]},I))]})]}),a[B]&&g.data[a[B]]&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Información del campo"}),o.jsxs("div",{className:"p-3 bg-secondary-50 dark:bg-secondary-700 rounded-lg text-sm",children:[o.jsxs("div",{className:"font-medium text-secondary-900 dark:text-white mb-1",children:[g.data[a[B]].label,g.data[a[B]].required&&o.jsx("span",{className:"text-danger-600 dark:text-danger-400 ml-1",children:"*"})]}),o.jsx("div",{className:"text-secondary-600 dark:text-secondary-400",children:g.data[a[B]].description}),g.data[a[B]].options&&o.jsxs("div",{className:"mt-2",children:[o.jsx("div",{className:"text-xs font-medium text-secondary-700 dark:text-secondary-300",children:"Valores válidos:"}),o.jsx("div",{className:"text-xs text-secondary-600 dark:text-secondary-400",children:(D=g.data[a[B]].options)==null?void 0:D.join(", ")})]})]})]})]})]},B)})}),o.jsxs("div",{className:"mt-8 p-4 bg-secondary-50 dark:bg-secondary-800 rounded-lg",children:[o.jsx("h4",{className:"font-medium text-secondary-900 dark:text-white mb-4",children:"Configuraciones de Importación"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"skip_first_row",checked:c.skip_first_row,onChange:B=>d(Q=>({...Q,skip_first_row:B.target.checked})),className:"rounded border-secondary-300 text-primary-600 focus:ring-primary-500"}),o.jsx("label",{htmlFor:"skip_first_row",className:"ml-2 text-sm text-secondary-700 dark:text-secondary-300",children:"Omitir primera fila (encabezados)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Acción para duplicados (mismo email)"}),o.jsxs("select",{value:c.duplicate_action,onChange:B=>d(Q=>({...Q,duplicate_action:B.target.value})),className:"input max-w-xs",children:[o.jsx("option",{value:"skip",children:"Omitir duplicados"}),o.jsx("option",{value:"update",children:"Actualizar existentes"}),o.jsx("option",{value:"create",children:"Crear como nuevos"})]})]})]})]}),o.jsx("div",{className:"mt-6",children:!_()&&o.jsx("div",{className:"p-4 bg-warning-50 dark:bg-warning-900 border border-warning-200 dark:border-warning-700 rounded-lg",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(Qs,{className:"w-5 h-5 text-warning-600 dark:text-warning-400 mt-0.5 mr-3"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-warning-800 dark:text-warning-200",children:"Campos requeridos sin mapear"}),o.jsx("div",{className:"text-sm text-warning-700 dark:text-warning-300 mt-1",children:"Debes mapear todos los campos marcados con * antes de continuar."})]})]})})}),o.jsxs("div",{className:"flex justify-between mt-8",children:[o.jsxs("button",{onClick:()=>e("analyze"),className:"btn-secondary",children:[o.jsx(La,{className:"w-4 h-4 mr-2"}),"Volver"]}),o.jsxs("button",{onClick:()=>e("preview"),disabled:!_(),className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:["Vista Previa",o.jsx(ji,{className:"w-4 h-4 ml-2"})]})]})]})})]}),t==="preview"&&n&&o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body",children:[o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white mb-4",children:"Vista Previa de la Importación"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[o.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900 rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:n.total_rows-(c.skip_first_row?1:0)}),o.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Filas a importar"})]}),o.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900 rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:Object.keys(a).length}),o.jsx("div",{className:"text-sm text-green-700 dark:text-green-300",children:"Campos mapeados"})]}),o.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900 rounded-lg",children:[o.jsxs("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:["~",n.estimated_import_time,"s"]}),o.jsx("div",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Tiempo estimado"})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h4",{className:"font-medium text-secondary-900 dark:text-white mb-3",children:"Mapeo de Campos"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(a).map(([B,Q])=>{var D,I,te;return o.jsxs("div",{className:"flex items-center justify-between p-3 bg-secondary-50 dark:bg-secondary-700 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-6 h-6 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center text-xs font-medium text-primary-600 dark:text-primary-400",children:B}),o.jsx("span",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:(D=n.detected_columns[B])==null?void 0:D.header})]}),o.jsx(ji,{className:"w-4 h-4 text-secondary-400"}),o.jsx("span",{className:"text-sm font-medium text-secondary-900 dark:text-white",children:(te=(I=g==null?void 0:g.data)==null?void 0:I[Q])==null?void 0:te.label})]},B)})})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h4",{className:"font-medium text-secondary-900 dark:text-white mb-3",children:"Muestra de Datos (primeras 3 filas)"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{className:"bg-secondary-50 dark:bg-secondary-800",children:o.jsx("tr",{children:Object.entries(a).map(([B,Q])=>{var D,I;return o.jsxs("th",{className:"px-4 py-2 text-left font-medium text-secondary-900 dark:text-white",children:[(I=(D=g==null?void 0:g.data)==null?void 0:D[Q])==null?void 0:I.label,o.jsxs("div",{className:"text-xs text-secondary-500 dark:text-secondary-400 font-normal",children:["Columna ",B]})]},B)})})}),o.jsx("tbody",{className:"divide-y divide-secondary-200 dark:divide-secondary-700",children:n.sample_data.slice(0,3).map((B,Q)=>o.jsx("tr",{children:Object.keys(a).map(D=>{const I=D.charCodeAt(0)-65;return o.jsx("td",{className:"px-4 py-2 text-secondary-900 dark:text-white",children:B[I]||"-"},D)})},Q))})]})})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("button",{onClick:()=>e("mapping"),className:"btn-secondary",children:[o.jsx(La,{className:"w-4 h-4 mr-2"}),"Volver al Mapeo"]}),o.jsx("button",{onClick:S,disabled:y.isPending,className:"btn-success disabled:opacity-50 disabled:cursor-not-allowed",children:y.isPending?o.jsxs(o.Fragment,{children:[o.jsx(St,{size:"sm",className:"mr-2"}),"Importando..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Zl,{className:"w-5 h-5 mr-2"}),"Iniciar Importación"]})})]})]})}),t==="results"&&u&&o.jsx("div",{className:"space-y-6",children:o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Resultados de la Importación"}),o.jsx("div",{className:je("badge text-lg px-4 py-2",u.status==="completed"?"bg-success-100 text-success-800 dark:bg-success-900 dark:text-success-200":u.status==="failed"?"bg-danger-100 text-danger-800 dark:bg-danger-900 dark:text-danger-200":"bg-warning-100 text-warning-800 dark:bg-warning-900 dark:text-warning-200"),children:u.status==="completed"?"Completada":u.status==="failed"?"Fallida":"Procesando"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[o.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900 rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:u.total_rows}),o.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Total procesadas"})]}),o.jsxs("div",{className:"text-center p-4 bg-success-50 dark:bg-success-900 rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-success-600 dark:text-success-400",children:u.imported_rows}),o.jsx("div",{className:"text-sm text-success-700 dark:text-success-300",children:"Importadas"})]}),o.jsxs("div",{className:"text-center p-4 bg-danger-50 dark:bg-danger-900 rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-danger-600 dark:text-danger-400",children:u.failed_rows}),o.jsx("div",{className:"text-sm text-danger-700 dark:text-danger-300",children:"Fallidas"})]}),o.jsxs("div",{className:"text-center p-4 bg-warning-50 dark:bg-warning-900 rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-warning-600 dark:text-warning-400",children:u.duplicate_rows||0}),o.jsx("div",{className:"text-sm text-warning-700 dark:text-warning-300",children:"Duplicadas"})]}),o.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900 rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:u.processing_time||"00:00:00"}),o.jsx("div",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Tiempo total"})]})]}),u.errors&&u.errors.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h4",{className:"font-medium text-danger-900 dark:text-danger-100 mb-3 flex items-center",children:[o.jsx(Uu,{className:"w-5 h-5 mr-2"}),"Errores Encontrados (",u.errors.length,")"]}),o.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:u.errors.map((B,Q)=>o.jsxs("div",{className:"p-3 bg-danger-50 dark:bg-danger-900 border border-danger-200 dark:border-danger-700 rounded-lg text-sm",children:[o.jsxs("div",{className:"font-medium text-danger-800 dark:text-danger-200",children:["Fila ",B.row,", Columna ",B.column," (",B.field,")"]}),o.jsxs("div",{className:"text-danger-700 dark:text-danger-300",children:['Valor: "',B.value,'" - ',B.error]})]},Q))})]}),u.warnings&&u.warnings.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h4",{className:"font-medium text-warning-900 dark:text-warning-100 mb-3 flex items-center",children:[o.jsx(Qs,{className:"w-5 h-5 mr-2"}),"Advertencias (",u.warnings.length,")"]}),o.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:u.warnings.map((B,Q)=>o.jsxs("div",{className:"p-3 bg-warning-50 dark:bg-warning-900 border border-warning-200 dark:border-warning-700 rounded-lg text-sm",children:[o.jsxs("div",{className:"font-medium text-warning-800 dark:text-warning-200",children:["Fila ",B.row,", Columna ",B.column," (",B.field,")"]}),o.jsxs("div",{className:"text-warning-700 dark:text-warning-300",children:['Valor: "',B.value,'" - ',B.warning]})]},Q))})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("button",{onClick:C,className:"btn-primary",children:"Nueva Importación"}),o.jsx("button",{onClick:()=>window.location.href="/leads",className:"btn-secondary",children:"Ver Leads Importados"})]})]})})}),f&&o.jsx(rQ,{isOpen:f,onClose:()=>m(!1),importHistory:(v==null?void 0:v.data)||[],onViewDetails:()=>{m(!1)}})]})}function rQ({isOpen:t,onClose:e,importHistory:r,onViewDetails:s}){if(!t)return null;const n=a=>new Date(a).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),i=a=>{const l=c=>{const d=c.toLowerCase();return d.includes("completada")||d.includes("completed")?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":d.includes("procesando")||d.includes("processing")?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":d.includes("fallida")||d.includes("failed")?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"};return o.jsx("span",{className:je("badge",l(a)),children:a})};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[80vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h3",{className:"text-xl font-semibold text-secondary-900 dark:text-white",children:"Historial de Importaciones"}),o.jsx("button",{onClick:e,className:"text-secondary-400 hover:text-secondary-600",children:o.jsx(Uu,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"space-y-4",children:r.map(a=>o.jsxs("div",{className:"border border-secondary-200 dark:border-secondary-700 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(qs,{className:"w-5 h-5 text-secondary-400"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-secondary-900 dark:text-white",children:a.filename}),o.jsxs("div",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:[n(a.created_at)," por ",a.created_by]})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[i(a.status),o.jsx("button",{onClick:()=>s(a),className:"text-primary-600 hover:text-primary-900 dark:text-primary-400",title:"Ver detalles",children:o.jsx(qa,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-medium text-secondary-900 dark:text-white",children:a.total_rows}),o.jsx("div",{className:"text-secondary-500 dark:text-secondary-400",children:"Total"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-medium text-success-600 dark:text-success-400",children:a.imported_rows}),o.jsx("div",{className:"text-secondary-500 dark:text-secondary-400",children:"Importadas"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-medium text-danger-600 dark:text-danger-400",children:a.failed_rows}),o.jsx("div",{className:"text-secondary-500 dark:text-secondary-400",children:"Fallidas"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"font-medium text-secondary-900 dark:text-white",children:[(a.imported_rows/a.total_rows*100).toFixed(1),"%"]}),o.jsx("div",{className:"text-secondary-500 dark:text-secondary-400",children:"Éxito"})]})]})]},a.id))}),r.length===0&&o.jsxs("div",{className:"text-center py-8",children:[o.jsx(qs,{className:"w-12 h-12 text-secondary-400 mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400",children:"No hay importaciones previas"})]})]})})}const sQ=["España","México","Argentina","Colombia","Chile","Perú","Venezuela","Ecuador","Estados Unidos","Reino Unido","Francia","Alemania","Italia","Brasil","Canadá"],nQ=["Website","Facebook","Google Ads","LinkedIn","Instagram","Email Campaign","Cold Call","Referral","Trade Show","Webinar"],KC=[{value:"low",label:"Bajo"},{value:"medium",label:"Medio"},{value:"high",label:"Alto"},{value:"very_high",label:"Muy Alto"}],Ui=[{key:"personal",title:"Información Personal",icon:or},{key:"professional",title:"Información Profesional",icon:Xs},{key:"commercial",title:"Información Comercial",icon:Fs},{key:"assignment",title:"Asignación",icon:or},{key:"notes",title:"Notas",icon:qs},{key:"review",title:"Revisión",icon:pr}];function iQ(){const[t,e]=w.useState("personal"),[r,s]=w.useState({first_name:"",last_name:"",email:"",phone:"",country:"",city:"",company:"",position:"",website:"",source:"",budget:void 0,interest_level:"",assigned_user_id:void 0,desk_id:void 0,notes:""}),[n,i]=w.useState({}),a=ol(),l=os(),{data:c}=Ke({queryKey:["users-for-assignment"],queryFn:()=>Zn.getUsers({limit:100}),staleTime:5*60*1e3}),{data:d}=Ke({queryKey:["desks-for-assignment"],queryFn:()=>Kn.getDesks({limit:100}),staleTime:5*60*1e3}),u=(c==null?void 0:c.data)||[],h=(d==null?void 0:d.data)||[],f=ot({mutationFn:y=>qn.createLead(y),onSuccess:y=>{l.invalidateQueries({queryKey:["leads"]}),me.success("Lead creado exitosamente"),a(`/leads/${y.data.id}`)},onError:y=>{var k,N;me.error(((N=(k=y.response)==null?void 0:k.data)==null?void 0:N.message)||"Error al crear el lead")}}),m=(y,k)=>{s(N=>({...N,[y]:k})),n[y]&&i(N=>({...N,[y]:""}))},x=y=>{const k={};return y==="personal"&&(r.first_name.trim()||(k.first_name="Nombre es requerido"),r.last_name.trim()||(k.last_name="Apellido es requerido"),r.email.trim()?/\S+@\S+\.\S+/.test(r.email)||(k.email="Email inválido"):k.email="Email es requerido"),i(k),Object.keys(k).length===0},p=()=>{if(!x(t))return;const y=Ui.findIndex(k=>k.key===t);y<Ui.length-1&&e(Ui[y+1].key)},g=()=>{const y=Ui.findIndex(k=>k.key===t);y>0&&e(Ui[y-1].key)},v=()=>{x("personal")&&f.mutate(r)},b=Ui.findIndex(y=>y.key===t);return o.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:o.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Crear Nuevo Lead"}),o.jsx("p",{className:"mt-2 text-gray-600",children:"Complete la información paso a paso"})]}),o.jsx("div",{className:"mb-8",children:o.jsx("div",{className:"flex items-center justify-between",children:Ui.map((y,k)=>{const N=y.icon,E=y.key===t,j=k<b;return o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:je("flex items-center justify-center w-10 h-10 rounded-full border-2",E?"border-primary-500 bg-primary-500 text-white":j?"border-green-500 bg-green-500 text-white":"border-gray-300 bg-white text-gray-400"),children:o.jsx(N,{className:"w-5 h-5"})}),o.jsx("div",{className:"ml-3 hidden sm:block",children:o.jsx("p",{className:je("text-sm font-medium",E?"text-primary-600":"text-gray-500"),children:y.title})}),k<Ui.length-1&&o.jsx("div",{className:je("flex-1 h-0.5 mx-4",j?"bg-green-500":"bg-gray-300")})]},y.key)})})}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[t==="personal"&&o.jsx(aQ,{formData:r,updateFormData:m,errors:n}),t==="professional"&&o.jsx(oQ,{formData:r,updateFormData:m,errors:n}),t==="commercial"&&o.jsx(lQ,{formData:r,updateFormData:m,errors:n}),t==="assignment"&&o.jsx(cQ,{formData:r,updateFormData:m,errors:n,users:u,desks:h}),t==="notes"&&o.jsx(dQ,{formData:r,updateFormData:m,errors:n}),t==="review"&&o.jsx(uQ,{formData:r,users:u,desks:h}),o.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-200",children:[o.jsxs("button",{type:"button",onClick:g,disabled:b===0,className:je("flex items-center px-4 py-2 text-sm font-medium rounded-md",b===0?"text-gray-400 cursor-not-allowed":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"),children:[o.jsx(La,{className:"w-4 h-4 mr-2"}),"Anterior"]}),t==="review"?o.jsxs("button",{type:"button",onClick:v,disabled:f.isPending,className:"flex items-center px-6 py-2 bg-primary-600 text-white text-sm font-medium rounded-md hover:bg-primary-700 disabled:opacity-50",children:[f.isPending?o.jsx(St,{size:"sm",className:"mr-2"}):o.jsx(pr,{className:"w-4 h-4 mr-2"}),"Crear Lead"]}):o.jsxs("button",{type:"button",onClick:p,className:"flex items-center px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-md hover:bg-primary-700",children:["Siguiente",o.jsx(ji,{className:"w-4 h-4 ml-2"})]})]})]})]})})}function aQ({formData:t,updateFormData:e,errors:r}){return o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Información Personal"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre *"}),o.jsxs("div",{className:"relative",children:[o.jsx(or,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",value:t.first_name,onChange:s=>e("first_name",s.target.value),className:je("pl-10 w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",r.first_name?"border-red-300":"border-gray-300"),placeholder:"Ingrese el nombre"})]}),r.first_name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.first_name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Apellido *"}),o.jsx("input",{type:"text",value:t.last_name,onChange:s=>e("last_name",s.target.value),className:je("w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",r.last_name?"border-red-300":"border-gray-300"),placeholder:"Ingrese el apellido"}),r.last_name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.last_name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ia,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"email",value:t.email,onChange:s=>e("email",s.target.value),className:je("pl-10 w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",r.email?"border-red-300":"border-gray-300"),placeholder:"ejemplo@email.com"})]}),r.email&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.email})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teléfono"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ah,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"tel",value:t.phone||"",onChange:s=>e("phone",s.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"+34 123 456 789"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"País"}),o.jsxs("select",{value:t.country||"",onChange:s=>e("country",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[o.jsx("option",{value:"",children:"Seleccionar país"}),sQ.map(s=>o.jsx("option",{value:s,children:s},s))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ciudad"}),o.jsx("input",{type:"text",value:t.city||"",onChange:s=>e("city",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Ingrese la ciudad"})]})]})]})}function oQ({formData:t,updateFormData:e}){return o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Información Profesional"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Empresa"}),o.jsxs("div",{className:"relative",children:[o.jsx(Xs,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",value:t.company||"",onChange:r=>e("company",r.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Nombre de la empresa"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cargo"}),o.jsx("input",{type:"text",value:t.position||"",onChange:r=>e("position",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Cargo o posición"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sitio Web"}),o.jsx("input",{type:"url",value:t.website||"",onChange:r=>e("website",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"https://ejemplo.com"})]})]})]})}function lQ({formData:t,updateFormData:e}){return o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Información Comercial"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fuente"}),o.jsxs("select",{value:t.source||"",onChange:r=>e("source",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[o.jsx("option",{value:"",children:"Seleccionar fuente"}),nQ.map(r=>o.jsx("option",{value:r,children:r},r))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nivel de Interés"}),o.jsxs("select",{value:t.interest_level||"",onChange:r=>e("interest_level",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[o.jsx("option",{value:"",children:"Seleccionar nivel"}),KC.map(r=>o.jsx("option",{value:r.value,children:r.label},r.value))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Presupuesto"}),o.jsxs("div",{className:"relative",children:[o.jsx(Fs,{className:"absolute left-3 top-3 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"number",value:t.budget||"",onChange:r=>e("budget",r.target.value?Number(r.target.value):void 0),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"0",min:"0"})]})]})]})]})}function cQ({formData:t,updateFormData:e,users:r,desks:s}){return o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Asignación"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Usuario Asignado"}),o.jsxs("select",{value:t.assigned_user_id||"",onChange:n=>e("assigned_user_id",n.target.value?Number(n.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[o.jsx("option",{value:"",children:"Sin asignar"}),r.map(n=>o.jsxs("option",{value:n.id,children:[n.first_name," ",n.last_name]},n.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mesa"}),o.jsxs("select",{value:t.desk_id||"",onChange:n=>e("desk_id",n.target.value?Number(n.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[o.jsx("option",{value:"",children:"Sin asignar"}),s.map(n=>o.jsx("option",{value:n.id,children:n.name},n.id))]})]})]})]})}function dQ({formData:t,updateFormData:e}){return o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Notas Adicionales"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas"}),o.jsx("textarea",{value:t.notes||"",onChange:r=>e("notes",r.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Información adicional sobre el lead..."})]})]})}function uQ({formData:t,users:e,desks:r}){const s=e.find(a=>a.id===t.assigned_user_id),n=r.find(a=>a.id===t.desk_id),i=KC.find(a=>a.value===t.interest_level);return o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Revisión Final"}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-900",children:"Información Personal"}),o.jsxs("p",{className:"text-sm text-gray-600",children:[t.first_name," ",t.last_name]}),o.jsx("p",{className:"text-sm text-gray-600",children:t.email}),t.phone&&o.jsx("p",{className:"text-sm text-gray-600",children:t.phone}),t.country&&o.jsx("p",{className:"text-sm text-gray-600",children:t.country})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-900",children:"Información Profesional"}),t.company&&o.jsx("p",{className:"text-sm text-gray-600",children:t.company}),t.position&&o.jsx("p",{className:"text-sm text-gray-600",children:t.position}),t.website&&o.jsx("p",{className:"text-sm text-gray-600",children:t.website})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-900",children:"Información Comercial"}),t.source&&o.jsxs("p",{className:"text-sm text-gray-600",children:["Fuente: ",t.source]}),i&&o.jsxs("p",{className:"text-sm text-gray-600",children:["Interés: ",i.label]}),t.budget&&o.jsxs("p",{className:"text-sm text-gray-600",children:["Presupuesto: $",t.budget]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-900",children:"Asignación"}),s&&o.jsxs("p",{className:"text-sm text-gray-600",children:["Usuario: ",s.first_name," ",s.last_name]}),n&&o.jsxs("p",{className:"text-sm text-gray-600",children:["Mesa: ",n.name]})]})]}),t.notes&&o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-900",children:"Notas"}),o.jsx("p",{className:"text-sm text-gray-600",children:t.notes})]})]})]})}const hQ=()=>{var h;const{user:t}=ll(),[e,r]=w.useState("month"),{data:s,isLoading:n}=Ke({queryKey:["employee-stats",t==null?void 0:t.id,e],queryFn:async()=>(await P2.getStats(e)).data,enabled:!!(t!=null&&t.id)}),{data:i,isLoading:a}=Ke({queryKey:["employee-activities",t==null?void 0:t.id],queryFn:async()=>(await P2.getActivities(10)).data,enabled:!!(t!=null&&t.id)}),{data:l,isLoading:c}=Ke({queryKey:["my-leads",t==null?void 0:t.id],queryFn:()=>qn.getLeads({assigned_to:t==null?void 0:t.id,limit:10,status:"active"}),enabled:!!(t!=null&&t.id)});if(n||a||c)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx(St,{size:"lg"})});const d=f=>{switch(f){case"call":return o.jsx(Ah,{className:"w-4 h-4"});case"email":return o.jsx(Ia,{className:"w-4 h-4"});case"meeting":return o.jsx(vD,{className:"w-4 h-4"});default:return o.jsx(jn,{className:"w-4 h-4"})}},u=f=>{switch(f){case"call":return"text-blue-600 bg-blue-100";case"email":return"text-green-600 bg-green-100";case"meeting":return"text-purple-600 bg-purple-100";default:return"text-gray-600 bg-gray-100"}};return o.jsxs("div",{className:"space-y-6 animate-fade-in",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:"Mi Resumen"}),o.jsxs("p",{className:"text-secondary-600 dark:text-secondary-400 mt-1",children:["Bienvenido, ",t==null?void 0:t.first_name," ",t==null?void 0:t.last_name]})]}),o.jsx("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:o.jsxs("select",{value:e,onChange:f=>r(f.target.value),className:"input",children:[o.jsx("option",{value:"today",children:"Hoy"}),o.jsx("option",{value:"week",children:"Esta Semana"}),o.jsx("option",{value:"month",children:"Este Mes"}),o.jsx("option",{value:"quarter",children:"Este Trimestre"})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx("div",{className:"card",children:o.jsx("div",{className:"card-body",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(or,{className:"w-8 h-8 text-blue-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-secondary-600 dark:text-secondary-400",children:"Total Leads"}),o.jsx("p",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:(s==null?void 0:s.totalLeads)||0})]})]})})}),o.jsx("div",{className:"card",children:o.jsx("div",{className:"card-body",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(Lr,{className:"w-8 h-8 text-green-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-secondary-600 dark:text-secondary-400",children:"Leads Activos"}),o.jsx("p",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:(s==null?void 0:s.activeLeads)||0})]})]})})}),o.jsx("div",{className:"card",children:o.jsx("div",{className:"card-body",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(uL,{className:"w-8 h-8 text-yellow-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-secondary-600 dark:text-secondary-400",children:"Conversiones"}),o.jsx("p",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:(s==null?void 0:s.convertedLeads)||0})]})]})})}),o.jsx("div",{className:"card",children:o.jsx("div",{className:"card-body",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(Fs,{className:"w-8 h-8 text-purple-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-secondary-600 dark:text-secondary-400",children:"Tasa Conversión"}),o.jsxs("p",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:[(s==null?void 0:s.conversionRate)||0,"%"]})]})]})})})]}),o.jsxs("div",{className:"card",children:[o.jsx("div",{className:"card-header",children:o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Progreso del Mes"})}),o.jsxs("div",{className:"card-body",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("span",{className:"text-sm font-medium text-secondary-600 dark:text-secondary-400",children:["Objetivo: ",(s==null?void 0:s.monthlyTarget)||0," leads"]}),o.jsxs("span",{className:"text-sm font-medium text-secondary-900 dark:text-white",children:[(s==null?void 0:s.monthlyProgress)||0," / ",(s==null?void 0:s.monthlyTarget)||0]})]}),o.jsx("div",{className:"w-full bg-secondary-200 rounded-full h-2.5 dark:bg-secondary-700",children:o.jsx("div",{className:"bg-primary-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${Math.min(((s==null?void 0:s.monthlyProgress)||0)/((s==null?void 0:s.monthlyTarget)||1)*100,100)}%`}})}),o.jsxs("div",{className:"flex items-center mt-2",children:[((s==null?void 0:s.monthlyProgress)||0)/((s==null?void 0:s.monthlyTarget)||1)>=.8?o.jsx(Fd,{className:"w-4 h-4 text-green-600 mr-1"}):o.jsx(Y8,{className:"w-4 h-4 text-yellow-600 mr-1"}),o.jsxs("span",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:[Math.round(((s==null?void 0:s.monthlyProgress)||0)/((s==null?void 0:s.monthlyTarget)||1)*100),"% completado"]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"card",children:[o.jsx("div",{className:"card-header",children:o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Actividades Recientes"})}),o.jsx("div",{className:"card-body",children:o.jsx("div",{className:"space-y-3",children:i==null?void 0:i.map(f=>o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${u(f.type)}`,children:d(f.type)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-secondary-900 dark:text-white",children:f.description}),o.jsxs("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:[f.leadName," • ",new Date(f.timestamp).toLocaleString()]})]})]},f.id))})})]}),o.jsxs("div",{className:"card",children:[o.jsx("div",{className:"card-header",children:o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Mis Leads Activos"})}),o.jsx("div",{className:"card-body",children:o.jsxs("div",{className:"space-y-3",children:[(h=l==null?void 0:l.data)==null?void 0:h.slice(0,5).map(f=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm font-medium text-secondary-900 dark:text-white",children:[f.first_name," ",f.last_name]}),o.jsxs("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:[f.email," • ",f.phone]})]}),o.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${f.status==="new"?"bg-blue-100 text-blue-800":f.status==="contacted"?"bg-yellow-100 text-yellow-800":f.status==="qualified"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:f.status})]},f.id)),(!(l!=null&&l.data)||l.data.length===0)&&o.jsx("p",{className:"text-sm text-secondary-500 dark:text-secondary-400 text-center py-4",children:"No tienes leads asignados actualmente"})]})})]})]})]})},El=[{id:1,title:"Información Personal",icon:or},{id:2,title:"Asignación de Rol",icon:$u},{id:3,title:"Mesa de Trabajo",icon:Xs},{id:4,title:"Confirmación",icon:Ir}];function fQ({isOpen:t,onClose:e,onSuccess:r}){var k,N,E,j;const[s,n]=w.useState(1),[i,a]=w.useState({username:"",email:"",first_name:"",last_name:"",password:"",confirm_password:"",phone:"",role_id:void 0,desk_id:void 0,status:"active"}),{data:l,isLoading:c,error:d}=Ke({queryKey:["roles-for-user"],queryFn:()=>Fo.getRoles(),enabled:t,staleTime:5*60*1e3}),{data:u,isLoading:h}=Ke({queryKey:["desks-for-user"],queryFn:()=>Kn.getDesks(),enabled:t,staleTime:5*60*1e3}),f=ot({mutationFn:_=>Zn.createUser(_),onSuccess:()=>{me.success("Usuario creado exitosamente"),r(),m()},onError:_=>{var S,C;me.error(((C=(S=_.response)==null?void 0:S.data)==null?void 0:C.message)||"Error al crear el usuario")}}),m=()=>{n(1),a({username:"",email:"",first_name:"",last_name:"",password:"",confirm_password:"",phone:"",role_id:void 0,desk_id:void 0,status:"active"}),e()},x=()=>{g()&&n(_=>Math.min(_+1,El.length))},p=()=>{n(_=>Math.max(_-1,1))},g=()=>{switch(s){case 1:return i.username.trim()?i.email.trim()?i.first_name.trim()?i.last_name.trim()?i.password.trim()?i.password!==i.confirm_password?(me.error("Las contraseñas no coinciden"),!1):i.password.length<6?(me.error("La contraseña debe tener al menos 6 caracteres"),!1):!0:(me.error("La contraseña es requerida"),!1):(me.error("El apellido es requerido"),!1):(me.error("El nombre es requerido"),!1):(me.error("El email es requerido"),!1):(me.error("El nombre de usuario es requerido"),!1);case 2:return i.role_id?!0:(me.error("Debe seleccionar un rol"),!1);case 3:return!0;default:return!0}},v=()=>{if(g()){const _={username:i.username,email:i.email,first_name:i.first_name,last_name:i.last_name,password:i.password,phone:i.phone||null,role_id:i.role_id,desk_id:i.desk_id||null,status:i.status};f.mutate(_)}},b=()=>{var _;return(_=l==null?void 0:l.data)==null?void 0:_.find(S=>S.id===i.role_id)},y=()=>{var _;return(_=u==null?void 0:u.data)==null?void 0:_.find(S=>S.id===i.desk_id)};return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-lg w-full max-w-4xl mx-4 max-h-[90vh] overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-secondary-200 dark:border-secondary-700",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-secondary-900 dark:text-white",children:"Asistente para Crear Usuario"}),o.jsxs("p",{className:"text-sm text-secondary-600 dark:text-secondary-400 mt-1",children:["Paso ",s," de ",El.length,": ",El[s-1].title]})]}),o.jsx("button",{onClick:m,className:"text-secondary-400 hover:text-secondary-600 dark:hover:text-secondary-300",children:o.jsx(Wt,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"px-6 py-4 border-b border-secondary-200 dark:border-secondary-700",children:o.jsx("div",{className:"flex items-center justify-between",children:El.map((_,S)=>{const C=_.icon,F=s===_.id,P=s>_.id;return o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:`
                    flex items-center justify-center w-10 h-10 rounded-full border-2 transition-colors
                    ${F?"border-primary-600 bg-primary-600 text-white":P?"border-success-600 bg-success-600 text-white":"border-secondary-300 text-secondary-400"}
                  `,children:P?o.jsx(Ir,{className:"w-5 h-5"}):o.jsx(C,{className:"w-5 h-5"})}),o.jsx("div",{className:"ml-3 hidden sm:block",children:o.jsx("p",{className:`text-sm font-medium ${F?"text-primary-600":P?"text-success-600":"text-secondary-500"}`,children:_.title})}),S<El.length-1&&o.jsx("div",{className:`
                      w-12 h-0.5 mx-4 transition-colors
                      ${P?"bg-success-600":"bg-secondary-300"}
                    `})]},_.id)})})}),o.jsxs("div",{className:"p-6 overflow-y-auto max-h-96",children:[s===1&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx(or,{className:"w-12 h-12 text-primary-600 mx-auto mb-2"}),o.jsx("h3",{className:"text-lg font-medium text-secondary-900 dark:text-white",children:"Información Personal"}),o.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Ingresa los datos básicos del nuevo usuario"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Nombre de Usuario *"}),o.jsx("input",{type:"text",value:i.username,onChange:_=>a({...i,username:_.target.value}),className:"input",placeholder:"ej: jperez"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Email *"}),o.jsx("input",{type:"email",value:i.email,onChange:_=>a({...i,email:_.target.value}),className:"input",placeholder:"ej: juan.perez@empresa.com"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Nombre *"}),o.jsx("input",{type:"text",value:i.first_name,onChange:_=>a({...i,first_name:_.target.value}),className:"input",placeholder:"ej: Juan"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Apellido *"}),o.jsx("input",{type:"text",value:i.last_name,onChange:_=>a({...i,last_name:_.target.value}),className:"input",placeholder:"ej: Pérez"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Teléfono"}),o.jsx("input",{type:"tel",value:i.phone,onChange:_=>a({...i,phone:_.target.value}),className:"input",placeholder:"ej: +1234567890"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Estado"}),o.jsxs("select",{value:i.status,onChange:_=>a({...i,status:_.target.value}),className:"input",children:[o.jsx("option",{value:"active",children:"Activo"}),o.jsx("option",{value:"inactive",children:"Inactivo"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Contraseña *"}),o.jsx("input",{type:"password",value:i.password,onChange:_=>a({...i,password:_.target.value}),className:"input",placeholder:"Mínimo 6 caracteres"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Confirmar Contraseña *"}),o.jsx("input",{type:"password",value:i.confirm_password,onChange:_=>a({...i,confirm_password:_.target.value}),className:"input",placeholder:"Repite la contraseña"})]})]})]}),s===2&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx($u,{className:"w-12 h-12 text-primary-600 mx-auto mb-2"}),o.jsx("h3",{className:"text-lg font-medium text-secondary-900 dark:text-white",children:"Asignación de Rol"}),o.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Selecciona el rol que tendrá el usuario en el sistema"})]}),c?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),o.jsx("p",{className:"text-sm text-secondary-500 mt-2",children:"Cargando roles..."})]}):d?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"text-red-500 mb-4",children:o.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z"})})}),o.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mb-4",children:"Error al cargar los roles. Verifica tu conexión e inténtalo de nuevo."}),o.jsx("button",{onClick:()=>window.location.reload(),className:"btn-secondary text-sm",children:"Recargar página"})]}):!(l!=null&&l.data)||l.data.length===0?o.jsx("div",{className:"text-center py-8",children:o.jsx("p",{className:"text-sm text-secondary-500",children:"No hay roles disponibles"})}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(k=l==null?void 0:l.data)==null?void 0:k.map(_=>{var S;return o.jsx("div",{onClick:()=>a({...i,role_id:_.id}),className:`
                        p-4 border-2 rounded-lg cursor-pointer transition-all hover:shadow-md
                        ${i.role_id===_.id?"border-primary-600 bg-primary-50 dark:bg-primary-900/20":"border-secondary-200 dark:border-secondary-700 hover:border-primary-300"}
                      `,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-secondary-900 dark:text-white",children:_.display_name}),o.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400 mt-1",children:_.description||"Sin descripción"}),o.jsxs("p",{className:"text-xs text-secondary-500 mt-2",children:[((S=_.permissions)==null?void 0:S.length)||0," permisos asignados"]})]}),i.role_id===_.id&&o.jsx(Ir,{className:"w-6 h-6 text-primary-600"})]})},_.id)})})]}),s===3&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx(Xs,{className:"w-12 h-12 text-primary-600 mx-auto mb-2"}),o.jsx("h3",{className:"text-lg font-medium text-secondary-900 dark:text-white",children:"Mesa de Trabajo"}),o.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Asigna el usuario a una mesa de trabajo (opcional)"})]}),o.jsx("div",{className:"mb-4",children:o.jsxs("label",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",checked:!i.desk_id,onChange:_=>{_.target.checked&&a({...i,desk_id:void 0})},className:"rounded border-secondary-300 text-primary-600 focus:ring-primary-500"}),o.jsx("span",{className:"text-sm text-secondary-700 dark:text-secondary-300",children:"No asignar a ninguna mesa por ahora"})]})}),h?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),o.jsx("p",{className:"text-sm text-secondary-500 mt-2",children:"Cargando mesas..."})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(N=u==null?void 0:u.data)==null?void 0:N.map(_=>o.jsx("div",{onClick:()=>a({...i,desk_id:_.id}),className:`
                        p-4 border-2 rounded-lg cursor-pointer transition-all hover:shadow-md
                        ${i.desk_id===_.id?"border-primary-600 bg-primary-50 dark:bg-primary-900/20":"border-secondary-200 dark:border-secondary-700 hover:border-primary-300"}
                      `,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-secondary-900 dark:text-white",children:_.name}),o.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400 mt-1",children:_.description||"Sin descripción"}),o.jsxs("p",{className:"text-xs text-secondary-500 mt-2",children:[_.users_count||0," usuarios asignados"]})]}),i.desk_id===_.id&&o.jsx(Ir,{className:"w-6 h-6 text-primary-600"})]})},_.id))})]}),s===4&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx(Ir,{className:"w-12 h-12 text-success-600 mx-auto mb-2"}),o.jsx("h3",{className:"text-lg font-medium text-secondary-900 dark:text-white",children:"Confirmación"}),o.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Revisa la información antes de crear el usuario"})]}),o.jsxs("div",{className:"bg-secondary-50 dark:bg-secondary-900 rounded-lg p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-secondary-900 dark:text-white mb-3",children:"Información Personal"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Usuario:"}),o.jsx("span",{className:"ml-2 font-medium",children:i.username})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Email:"}),o.jsx("span",{className:"ml-2 font-medium",children:i.email})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Nombre:"}),o.jsxs("span",{className:"ml-2 font-medium",children:[i.first_name," ",i.last_name]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Estado:"}),o.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs ${i.status==="active"?"bg-success-100 text-success-800":"bg-danger-100 text-danger-800"}`,children:i.status==="active"?"Activo":"Inactivo"})]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-secondary-900 dark:text-white mb-3",children:"Asignaciones"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Rol:"}),o.jsx("span",{className:"ml-2 font-medium",children:((E=b())==null?void 0:E.display_name)||"No asignado"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-secondary-600 dark:text-secondary-400",children:"Mesa:"}),o.jsx("span",{className:"ml-2 font-medium",children:((j=y())==null?void 0:j.name)||"No asignado"})]})]})]})]})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-secondary-200 dark:border-secondary-700",children:[o.jsxs("button",{onClick:p,disabled:s===1,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(La,{className:"w-4 h-4 mr-2"}),"Anterior"]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:m,className:"btn-secondary",children:"Cancelar"}),s<El.length?o.jsxs("button",{onClick:x,className:"btn-primary",children:["Siguiente",o.jsx(ji,{className:"w-4 h-4 ml-2"})]}):o.jsx("button",{onClick:v,disabled:f.isPending,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:f.isPending?"Creando...":"Crear Usuario"})]})]})]})}):null}function mQ({isOpen:t,onClose:e,user:r,desks:s,onSuccess:n}){const[i,a]=w.useState(""),[l,c]=w.useState(!0),d=ot({mutationFn:async h=>await Zn.assignDesk(h.user_id,h.desk_id,h.is_primary),onSuccess:()=>{me.success("Mesa asignada correctamente"),n()},onError:h=>{var f,m;me.error(((m=(f=h.response)==null?void 0:f.data)==null?void 0:m.message)||"Error al asignar mesa")}}),u=h=>{if(h.preventDefault(),!i){me.error("Por favor selecciona una mesa");return}d.mutate({user_id:r.id,desk_id:parseInt(i),is_primary:l})};return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-lg p-6 w-full max-w-md mx-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Asignar Mesa"}),o.jsx("button",{onClick:e,className:"text-secondary-400 hover:text-secondary-600 dark:hover:text-secondary-300",children:o.jsx(Wt,{className:"w-6 h-6"})})]}),o.jsx("div",{className:"mb-4",children:o.jsxs("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:["Asignar mesa a: ",o.jsxs("span",{className:"font-medium text-secondary-900 dark:text-white",children:[r.first_name," ",r.last_name]})]})}),o.jsxs("form",{onSubmit:u,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Mesa"}),o.jsxs("select",{value:i,onChange:h=>a(h.target.value),className:"input",required:!0,children:[o.jsx("option",{value:"",children:"Seleccionar mesa..."}),s.map(h=>o.jsx("option",{value:h.id,children:h.name},h.id))]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",checked:l,onChange:h=>c(h.target.checked),className:"form-checkbox h-4 w-4 text-primary-600"}),o.jsx("span",{className:"ml-2 text-sm text-secondary-700 dark:text-secondary-300",children:"Mesa principal"})]}),o.jsx("p",{className:"text-xs text-secondary-500 dark:text-secondary-400 mt-1",children:"La mesa principal será la asignación por defecto para este usuario"})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:e,className:"btn-ghost",disabled:d.isPending,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn-primary",disabled:d.isPending,children:d.isPending?"Asignando...":"Asignar Mesa"})]})]})]})}):null}function xQ({isOpen:t,onClose:e,user:r,roles:s,onSuccess:n}){const[i,a]=w.useState(""),l=ot({mutationFn:async d=>await Zn.assignRole(d.user_id,d.role_id),onSuccess:()=>{me.success("Rol asignado correctamente"),n()},onError:d=>{var u,h;me.error(((h=(u=d.response)==null?void 0:u.data)==null?void 0:h.message)||"Error al asignar rol")}}),c=d=>{if(d.preventDefault(),!i){me.error("Por favor selecciona un rol");return}l.mutate({user_id:r.id,role_id:parseInt(i)})};return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-lg p-6 w-full max-w-md mx-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Asignar Rol"}),o.jsx("button",{onClick:e,className:"text-secondary-400 hover:text-secondary-600 dark:hover:text-secondary-300",children:o.jsx(Wt,{className:"w-6 h-6"})})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("p",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:["Asignar rol a: ",o.jsxs("span",{className:"font-medium text-secondary-900 dark:text-white",children:[r.first_name," ",r.last_name]})]}),r.role&&o.jsxs("p",{className:"text-xs text-secondary-500 dark:text-secondary-400 mt-1",children:["Rol actual: ",o.jsx("span",{className:"font-medium",children:r.role})]})]}),o.jsxs("form",{onSubmit:c,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Nuevo Rol"}),o.jsxs("select",{value:i,onChange:d=>a(d.target.value),className:"input",required:!0,children:[o.jsx("option",{value:"",children:"Seleccionar rol..."}),s.map(d=>o.jsx("option",{value:d.id,children:d.display_name},d.id))]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:e,className:"btn-ghost",disabled:l.isPending,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"btn-primary",disabled:l.isPending,children:l.isPending?"Asignando...":"Asignar Rol"})]})]})]})}):null}function pQ(){const{hasPermission:t}=ll(),[e,r]=w.useState(!1),[s,n]=w.useState(!1),[i,a]=w.useState(!1),[l,c]=w.useState(null),d=os(),{data:u,isLoading:h}=Ke({queryKey:["users"],queryFn:()=>Zn.getUsers({})}),{data:f}=Ke({queryKey:["roles-for-assignment"],queryFn:()=>Fo.getRoles({status:"active"}),staleTime:5*60*1e3}),{data:m}=Ke({queryKey:["desks-for-assignment"],queryFn:()=>Kn.getDesks({status:"active"}),staleTime:5*60*1e3});return h&&!u?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx(St,{size:"lg"})}):o.jsxs("div",{className:"space-y-6 animate-fade-in",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:"Gestión de Usuarios"}),o.jsx("p",{className:"text-secondary-600 dark:text-secondary-400 mt-1",children:"Administra usuarios, roles y permisos del sistema"})]}),o.jsxs("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:[t("users.create")&&o.jsxs("button",{className:"btn-secondary",children:[o.jsx(sS,{className:"w-4 h-4 mr-2"}),"Importar Usuarios"]}),t("users.create")&&o.jsxs("button",{onClick:()=>r(!0),className:"btn-primary",children:[o.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Nuevo Usuario"]})]})]}),o.jsx(fQ,{isOpen:e,onClose:()=>r(!1),onSuccess:()=>{d.invalidateQueries({queryKey:["users"]})}}),s&&l&&o.jsx(mQ,{isOpen:s,onClose:()=>{n(!1),c(null)},user:l,desks:(m==null?void 0:m.data)||[],onSuccess:()=>{d.invalidateQueries({queryKey:["users"]}),n(!1),c(null)}}),i&&l&&o.jsx(xQ,{isOpen:i,onClose:()=>{a(!1),c(null)},user:l,roles:(f==null?void 0:f.data)||[],onSuccess:()=>{d.invalidateQueries({queryKey:["users"]}),a(!1),c(null)}})]})}function gQ(){var E,j,_,S;const[t,e]=w.useState({search:"",status:""}),[r,s]=w.useState(1),[n,i]=w.useState(!1),[a,l]=w.useState(!1),[c,d]=w.useState(null),u=20,h=os(),{data:f,isLoading:m}=Ke({queryKey:["roles",t,r],queryFn:()=>Fo.getRoles({...t,page:r,limit:u}),placeholderData:C=>C}),{data:x,isLoading:p,error:g}=Ke({queryKey:["permissions"],queryFn:Fo.getPermissions,staleTime:10*60*1e3});console.log("=== DEBUG PERMISOS ==="),console.log("permissionsData:",x),console.log("permissionsData length:",x==null?void 0:x.length),console.log("permissionsLoading:",p),console.log("permissionsError:",g),console.log("permissionsData type:",typeof x),console.log("permissionsData is array:",Array.isArray(x)),console.log("Token en localStorage:",localStorage.getItem("auth_token")),console.log("User en localStorage:",localStorage.getItem("user"));const v=ot({mutationFn:C=>Fo.deleteRole(C),onSuccess:()=>{h.invalidateQueries({queryKey:["roles"]}),me.success("Rol eliminado exitosamente")},onError:C=>{var F,P;me.error(((P=(F=C.response)==null?void 0:F.data)==null?void 0:P.message)||"Error al eliminar el rol")}}),b=C=>{const F={active:{label:"Activo",color:"bg-success-100 text-success-800 dark:bg-success-900 dark:text-success-200"},inactive:{label:"Inactivo",color:"bg-danger-100 text-danger-800 dark:bg-danger-900 dark:text-danger-200"}},P=F[C]||F.active;return o.jsx("span",{className:je("badge",P.color),children:P.label})},y=C=>new Date(C).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),k=C=>{if(C.users_count>0){me.error("No se puede eliminar un rol que tiene usuarios asignados");return}window.confirm(`¿Estás seguro de que quieres eliminar el rol "${C.display_name}"?`)&&v.mutate(C.id)},N=C=>{d(C),l(!0)};return m&&!f?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx(St,{size:"lg"})}):o.jsxs("div",{className:"space-y-6 animate-fade-in",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:"Gestión de Roles"}),o.jsx("p",{className:"text-secondary-600 dark:text-secondary-400 mt-1",children:"Administra roles y permisos del sistema"})]}),o.jsx("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:o.jsxs("button",{onClick:()=>i(!0),className:"btn-primary",children:[o.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Nuevo Rol"]})})]}),o.jsx("div",{className:"card",children:o.jsx("div",{className:"card-body",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(gn,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-secondary-400"}),o.jsx("input",{type:"text",placeholder:"Buscar roles...",className:"input pl-10",value:t.search,onChange:C=>e({...t,search:C.target.value})})]}),o.jsxs("select",{className:"input",value:t.status,onChange:C=>e({...t,status:C.target.value}),children:[o.jsx("option",{value:"",children:"Todos los estados"}),o.jsx("option",{value:"active",children:"Activo"}),o.jsx("option",{value:"inactive",children:"Inactivo"})]}),o.jsxs("button",{onClick:()=>e({search:"",status:""}),className:"btn-ghost",children:[o.jsx(Tc,{className:"w-4 h-4 mr-2"}),"Limpiar"]})]})})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:((E=f==null?void 0:f.pagination)==null?void 0:E.total)||0}),o.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Total Roles"})]})}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-success-600 dark:text-success-400",children:((j=f==null?void 0:f.data)==null?void 0:j.filter(C=>C.status==="active").length)||0}),o.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Activos"})]})}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:((_=f==null?void 0:f.data)==null?void 0:_.reduce((C,F)=>C+(F.users_count||0),0))||0}),o.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Usuarios Asignados"})]})}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:(x==null?void 0:x.length)||0}),o.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Permisos Disponibles"})]})})]}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body p-0",children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-secondary-50 dark:bg-secondary-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Rol"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Descripción"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Permisos"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Usuarios"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Estado"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Fecha"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-secondary-200 dark:divide-secondary-700",children:((S=f==null?void 0:f.data)==null?void 0:S.map(C=>o.jsxs("tr",{className:"hover:bg-secondary-50 dark:hover:bg-secondary-800 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center",children:o.jsx($u,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-sm font-medium text-secondary-900 dark:text-white",children:C.display_name}),o.jsx("div",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:C.name})]})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-secondary-900 dark:text-white max-w-xs truncate",children:C.description})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsxs("div",{className:"text-sm text-secondary-900 dark:text-white",children:[C.permissions.length," permisos"]}),o.jsxs("div",{className:"text-xs text-secondary-500 dark:text-secondary-400",children:[C.permissions.slice(0,2).join(", "),C.permissions.length>2&&"..."]})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Ac,{className:"w-4 h-4 text-secondary-400 mr-1"}),o.jsx("span",{className:"text-sm text-secondary-900 dark:text-white",children:C.users_count})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b(C.status)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-secondary-500 dark:text-secondary-400",children:y(C.created_at)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx("button",{onClick:()=>N(C),className:"text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300",children:o.jsx(qa,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>N(C),className:"text-secondary-600 hover:text-secondary-900 dark:text-secondary-400 dark:hover:text-secondary-300",children:o.jsx(qo,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>k(C),disabled:C.users_count>0,className:"text-danger-600 hover:text-danger-900 dark:text-danger-400 dark:hover:text-danger-300 disabled:opacity-50 disabled:cursor-not-allowed",children:o.jsx(Go,{className:"w-4 h-4"})})]})})]},C.id)))||[]})]})}),f&&f.pagination&&f.pagination.pages>1&&o.jsx("div",{className:"px-6 py-4 border-t border-secondary-200 dark:border-secondary-700",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-secondary-700 dark:text-secondary-300",children:["Mostrando ",(r-1)*u+1," a ",Math.min(r*u,f.pagination.total)," de ",f.pagination.total," resultados"]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>s(r-1),disabled:r===1,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),o.jsx("button",{onClick:()=>s(r+1),disabled:r===f.pagination.pages,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]})]})})]})}),(f==null?void 0:f.data)&&f.data.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-secondary-400 mb-4",children:o.jsx($u,{className:"w-12 h-12 mx-auto"})}),o.jsx("h3",{className:"text-lg font-medium text-secondary-900 dark:text-white mb-2",children:"No se encontraron roles"}),o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400 mb-6",children:"Comienza creando tu primer rol o ajusta los filtros de búsqueda."}),o.jsxs("button",{onClick:()=>i(!0),className:"btn-primary",children:[o.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Crear Primer Rol"]})]}),n&&o.jsx(SN,{isOpen:n,onClose:()=>i(!1),role:null,permissions:x||[],permissionsLoading:p,permissionsError:g,onSuccess:()=>{i(!1),h.invalidateQueries({queryKey:["roles"]})}}),a&&c&&o.jsx(SN,{isOpen:a,onClose:()=>{l(!1),d(null)},role:c,permissions:x||[],permissionsLoading:p,permissionsError:g,onSuccess:()=>{l(!1),d(null),h.invalidateQueries({queryKey:["roles"]})}})]})}function SN({isOpen:t,onClose:e,role:r,permissions:s,permissionsLoading:n=!1,permissionsError:i=null,onSuccess:a}){const[l,c]=w.useState({name:(r==null?void 0:r.name)||"",display_name:(r==null?void 0:r.display_name)||"",description:(r==null?void 0:r.description)||"",permissions:(r==null?void 0:r.permissions)||[],status:(r==null?void 0:r.status)||"active"});console.log("RoleModal - Props recibidas:",{permissions:s,permissionsLength:s==null?void 0:s.length,permissionsLoading:n,permissionsError:i,isArray:Array.isArray(s)});const d=ot({mutationFn:m=>Fo.createRole(m),onSuccess:()=>{me.success("Rol creado exitosamente"),a()},onError:m=>{var x,p;me.error(((p=(x=m.response)==null?void 0:x.data)==null?void 0:p.message)||"Error al crear el rol")}}),u=ot({mutationFn:m=>{if(!(r!=null&&r.id))throw new Error("Role ID is required for update");return Fo.updateRole(r.id,m)},onSuccess:()=>{me.success("Rol actualizado exitosamente"),a()},onError:m=>{var x,p;me.error(((p=(x=m.response)==null?void 0:x.data)==null?void 0:p.message)||"Error al actualizar el rol")}}),h=m=>{m.preventDefault(),r?u.mutate(l):d.mutate(l)},f=m=>{c(x=>({...x,permissions:x.permissions.includes(m)?x.permissions.filter(p=>p!==m):[...x.permissions,m]}))};return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white mb-6",children:r?"Editar Rol":"Crear Nuevo Rol"}),o.jsxs("form",{onSubmit:h,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Nombre del Rol"}),o.jsx("input",{type:"text",value:l.name,onChange:m=>c({...l,name:m.target.value}),className:"input",placeholder:"ej: sales_agent",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Nombre para Mostrar"}),o.jsx("input",{type:"text",value:l.display_name,onChange:m=>c({...l,display_name:m.target.value}),className:"input",placeholder:"ej: Agente de Ventas",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Descripción"}),o.jsx("textarea",{value:l.description,onChange:m=>c({...l,description:m.target.value}),className:"input min-h-[80px]",placeholder:"Describe las responsabilidades de este rol...",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Estado"}),o.jsxs("select",{value:l.status,onChange:m=>c({...l,status:m.target.value}),className:"input",children:[o.jsx("option",{value:"active",children:"Activo"}),o.jsx("option",{value:"inactive",children:"Inactivo"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-4",children:"Permisos"}),n?o.jsxs("div",{className:"text-center py-4",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),o.jsx("p",{className:"text-sm text-secondary-500 mt-2",children:"Cargando permisos..."})]}):i?o.jsxs("div",{className:"text-center py-4",children:[o.jsx("p",{className:"text-sm text-red-500",children:"Error al cargar permisos"}),o.jsx("p",{className:"text-xs text-secondary-500 mt-1",children:i instanceof Error?i.message:"Error desconocido"})]}):o.jsx("div",{className:"space-y-4",children:s&&Array.isArray(s)&&s.length>0?Object.entries(s.reduce((m,x)=>(m[x.module]||(m[x.module]=[]),m[x.module].push(x),m),{})).map(([m,x])=>o.jsxs("div",{className:"border border-secondary-200 dark:border-secondary-700 rounded-lg p-4",children:[o.jsx("h4",{className:"font-medium text-secondary-900 dark:text-white mb-3 capitalize",children:m}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:x.map(p=>o.jsxs("label",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",checked:l.permissions.includes(p.name),onChange:()=>f(p.name),className:"rounded border-secondary-300 text-primary-600 focus:ring-primary-500"}),o.jsx("span",{className:"text-sm text-secondary-700 dark:text-secondary-300",children:p.display_name})]},p.name))})]},m)):o.jsxs("div",{className:"text-center py-8 border border-secondary-200 dark:border-secondary-700 rounded-lg",children:[o.jsx("p",{className:"text-secondary-500",children:"No hay permisos disponibles"}),o.jsxs("p",{className:"text-xs text-secondary-400 mt-1",children:["Permisos recibidos: ",s?s.length:0]})]})})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-secondary-200 dark:border-secondary-700",children:[o.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancelar"}),o.jsxs("button",{type:"submit",disabled:d.isPending||u.isPending,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:[r?"Actualizar":"Crear"," Rol"]})]})]})]})}):null}function vQ(){var N,E,j,_,S;const[t,e]=w.useState({search:"",status:"",manager_id:""}),[r,s]=w.useState(!1),[n,i]=w.useState(!1),[a,l]=w.useState(!1),[c,d]=w.useState(null),u=20,h=1,f=os(),{data:m,isLoading:x}=Ke({queryKey:["desks",t,h],queryFn:()=>Kn.getDesks({...t,page:h,limit:u}),placeholderData:C=>C}),p=ot({mutationFn:C=>Kn.deleteDesk(C),onSuccess:()=>{f.invalidateQueries({queryKey:["desks"]}),me.success("Mesa eliminada exitosamente")},onError:C=>{var F,P;me.error(((P=(F=C.response)==null?void 0:F.data)==null?void 0:P.message)||"Error al eliminar la mesa")}}),g=C=>{const F={active:{label:"Activa",color:"bg-success-100 text-success-800 dark:bg-success-900 dark:text-success-200"},inactive:{label:"Inactiva",color:"bg-danger-100 text-danger-800 dark:bg-danger-900 dark:text-danger-200"}},P=F[C]||F.active;return o.jsx("span",{className:je("badge",P.color),children:P.label})},v=C=>C==null?"$0.00":new Intl.NumberFormat("es-ES",{style:"currency",currency:"USD"}).format(C),b=C=>{if(C.users_count>0){me.error("No se puede eliminar una mesa que tiene usuarios asignados");return}window.confirm(`¿Estás seguro de que quieres eliminar la mesa "${C.name}"?`)&&p.mutate(C.id)},y=C=>{d(C),i(!0)},k=C=>{d(C),l(!0)};return x&&!m?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx(St,{size:"lg"})}):o.jsxs("div",{className:"space-y-6 animate-fade-in",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:"Gestión de Mesas"}),o.jsx("p",{className:"text-secondary-600 dark:text-secondary-400 mt-1",children:"Administra mesas de trabajo y equipos de ventas"})]}),o.jsx("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:o.jsxs("button",{onClick:()=>s(!0),className:"btn-primary",children:[o.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Nueva Mesa"]})})]}),o.jsx("div",{className:"card",children:o.jsx("div",{className:"card-body",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(gn,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-secondary-400"}),o.jsx("input",{type:"text",placeholder:"Buscar mesas...",className:"input pl-10",value:t.search,onChange:C=>e({...t,search:C.target.value})})]}),o.jsxs("select",{className:"input",value:t.status,onChange:C=>e({...t,status:C.target.value}),children:[o.jsx("option",{value:"",children:"Todos los estados"}),o.jsx("option",{value:"active",children:"Activa"}),o.jsx("option",{value:"inactive",children:"Inactiva"})]}),o.jsxs("select",{className:"input",value:t.manager_id,onChange:C=>e({...t,manager_id:C.target.value}),children:[o.jsx("option",{value:"",children:"Todos los managers"}),o.jsx("option",{value:"2",children:"Carlos Rodríguez"}),o.jsx("option",{value:"7",children:"Laura Sánchez"}),o.jsx("option",{value:"12",children:"Fernando Castro"})]}),o.jsxs("button",{onClick:()=>e({search:"",status:"",manager_id:""}),className:"btn-ghost",children:[o.jsx(Tc,{className:"w-4 h-4 mr-2"}),"Limpiar"]})]})})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:((N=m==null?void 0:m.pagination)==null?void 0:N.total)||0}),o.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Total Mesas"})]})}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-success-600 dark:text-success-400",children:((E=m==null?void 0:m.data)==null?void 0:E.filter(C=>C.status==="active").length)||0}),o.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Activas"})]})}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:((j=m==null?void 0:m.data)==null?void 0:j.reduce((C,F)=>C+(F.user_count||F.users_count||0),0))||0}),o.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Total Usuarios"})]})}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:v(((_=m==null?void 0:m.data)==null?void 0:_.reduce((C,F)=>C+(F.total_revenue||0),0))||0)}),o.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Revenue Total"})]})})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:((S=m==null?void 0:m.data)==null?void 0:S.map(C=>o.jsx("div",{className:"card hover:shadow-lg transition-shadow",children:o.jsxs("div",{className:"card-body",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-12 h-12 bg-primary-100 dark:bg-primary-900 rounded-lg flex items-center justify-center",children:o.jsx(Xs,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:C.name}),o.jsx("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:C.manager_name||"Sin manager"})]})]}),g(C.status)]}),o.jsx("p",{className:"text-sm text-secondary-600 dark:text-secondary-300 mb-4 line-clamp-2",children:C.description}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center mb-1",children:[o.jsx(Ac,{className:"w-4 h-4 text-secondary-400 mr-1"}),o.jsx("span",{className:"text-lg font-bold text-secondary-900 dark:text-white",children:C.users_count})]}),o.jsx("p",{className:"text-xs text-secondary-500 dark:text-secondary-400",children:"Usuarios"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center mb-1",children:[o.jsx(Lr,{className:"w-4 h-4 text-secondary-400 mr-1"}),o.jsx("span",{className:"text-lg font-bold text-secondary-900 dark:text-white",children:C.leads_count})]}),o.jsx("p",{className:"text-xs text-secondary-500 dark:text-secondary-400",children:"Leads"})]})]}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Conversiones:"}),o.jsxs("span",{className:"text-sm font-medium text-secondary-900 dark:text-white",children:[C.conversions_count," (",(C.conversion_rate||0).toFixed(1),"%)"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Revenue:"}),o.jsx("span",{className:"text-sm font-medium text-success-600 dark:text-success-400",children:v(C.total_revenue)})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Target:"}),o.jsx("span",{className:"text-sm font-medium text-secondary-900 dark:text-white",children:v(C.target_monthly)})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex justify-between text-xs text-secondary-600 dark:text-secondary-400 mb-1",children:[o.jsx("span",{children:"Progreso del mes"}),o.jsxs("span",{children:[((C.total_revenue||0)/(C.target_monthly||1)*100).toFixed(0),"%"]})]}),o.jsx("div",{className:"w-full bg-secondary-200 dark:bg-secondary-700 rounded-full h-2",children:o.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min((C.total_revenue||0)/(C.target_monthly||1)*100,100)}%`}})})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx("button",{onClick:()=>k(C),className:"text-primary-600 hover:text-primary-900 dark:text-primary-400 dark:hover:text-primary-300",title:"Ver detalles",children:o.jsx(qa,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>y(C),className:"text-secondary-600 hover:text-secondary-900 dark:text-secondary-400 dark:hover:text-secondary-300",title:"Editar mesa",children:o.jsx(qo,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>b(C),disabled:C.users_count>0,className:"text-danger-600 hover:text-danger-900 dark:text-danger-400 dark:hover:text-danger-300 disabled:opacity-50 disabled:cursor-not-allowed",title:"Eliminar mesa",children:o.jsx(Go,{className:"w-4 h-4"})})]})]})},C.id)))||[]}),(m==null?void 0:m.data)&&m.data.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-secondary-400 mb-4",children:o.jsx(Xs,{className:"w-12 h-12 mx-auto"})}),o.jsx("h3",{className:"text-lg font-medium text-secondary-900 dark:text-white mb-2",children:"No se encontraron mesas"}),o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400 mb-6",children:"Comienza creando tu primera mesa o ajusta los filtros de búsqueda."}),o.jsxs("button",{onClick:()=>s(!0),className:"btn-primary",children:[o.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Crear Primera Mesa"]})]}),r&&o.jsx(CN,{isOpen:r,onClose:()=>s(!1),desk:null,onSuccess:()=>{s(!1),f.invalidateQueries({queryKey:["desks"]})}}),n&&c&&o.jsx(CN,{isOpen:n,onClose:()=>{i(!1),d(null)},desk:c,onSuccess:()=>{i(!1),d(null),f.invalidateQueries({queryKey:["desks"]})}}),a&&c&&o.jsx(yQ,{isOpen:a,desk:c,onClose:()=>{l(!1),d(null)}})]})}function CN({isOpen:t,onClose:e,desk:r,onSuccess:s}){var f;const[n,i]=w.useState({name:(r==null?void 0:r.name)||"",description:(r==null?void 0:r.description)||"",manager_id:(r==null?void 0:r.manager_id)||"",manager_name:(r==null?void 0:r.manager_name)||"",status:(r==null?void 0:r.status)||"active",target_monthly:(r==null?void 0:r.target_monthly)||0}),{data:a,isLoading:l}=Ke({queryKey:["users-for-desk"],queryFn:()=>Zn.getUsers({status:"active"}),enabled:t,staleTime:5*60*1e3}),c=ot({mutationFn:m=>Kn.createDesk(m),onSuccess:()=>{me.success("Mesa creada exitosamente"),s()},onError:m=>{var x,p;me.error(((p=(x=m.response)==null?void 0:x.data)==null?void 0:p.message)||"Error al crear la mesa")}}),d=ot({mutationFn:m=>Kn.updateDesk(r.id,m),onSuccess:()=>{me.success("Mesa actualizada exitosamente"),s()},onError:m=>{var x,p;me.error(((p=(x=m.response)==null?void 0:x.data)==null?void 0:p.message)||"Error al actualizar la mesa")}}),u=m=>{m.preventDefault(),r?d.mutate(n):c.mutate(n)},h=m=>{var g;const x=m.target.value,p=(g=a==null?void 0:a.data)==null?void 0:g.find(v=>v.id.toString()===x);i({...n,manager_id:x,manager_name:p?`${p.first_name} ${p.last_name}`:""})};return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-lg p-6 w-full max-w-2xl mx-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white mb-6",children:r?"Editar Mesa":"Crear Nueva Mesa"}),o.jsxs("form",{onSubmit:u,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Nombre de la Mesa"}),o.jsx("input",{type:"text",value:n.name,onChange:m=>i({...n,name:m.target.value}),className:"input",placeholder:"ej: Mesa Principal",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Estado"}),o.jsxs("select",{value:n.status,onChange:m=>i({...n,status:m.target.value}),className:"input",children:[o.jsx("option",{value:"active",children:"Activa"}),o.jsx("option",{value:"inactive",children:"Inactiva"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Descripción"}),o.jsx("textarea",{value:n.description,onChange:m=>i({...n,description:m.target.value}),className:"input min-h-[80px]",placeholder:"Describe el propósito y características de esta mesa...",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Manager"}),l?o.jsxs("div",{className:"input flex items-center justify-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"}),o.jsx("span",{className:"ml-2 text-sm text-secondary-500",children:"Cargando usuarios..."})]}):o.jsxs("select",{value:n.manager_id,onChange:h,className:"input",children:[o.jsx("option",{value:"",children:"Sin manager asignado"}),(f=a==null?void 0:a.data)==null?void 0:f.map(m=>o.jsxs("option",{value:m.id,children:[m.first_name," ",m.last_name," (",m.username,")"]},m.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Target Mensual ($)"}),o.jsx("input",{type:"number",value:n.target_monthly,onChange:m=>i({...n,target_monthly:parseFloat(m.target.value)||0}),className:"input",placeholder:"50000",min:"0",step:"100"})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-secondary-200 dark:border-secondary-700",children:[o.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancelar"}),o.jsxs("button",{type:"submit",disabled:c.isPending||d.isPending,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:[r?"Actualizar":"Crear"," Mesa"]})]})]})]})}):null}function yQ({isOpen:t,desk:e,onClose:r}){var n;if(!t||!e)return null;const s={2:"Carlos Rodríguez",7:"Laura Sánchez",12:"Fernando Castro",16:"Patricia Mendoza"};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-lg p-6 w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-start mb-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-semibold text-secondary-900 dark:text-white",children:e.name}),o.jsxs("p",{className:"text-secondary-600 dark:text-secondary-400",children:["Manager: ",e.manager_name||(e.manager_id?s[e.manager_id.toString()]:null)||"Sin asignar"]})]}),o.jsx("button",{onClick:r,className:"text-secondary-400 hover:text-secondary-600",children:"✕"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body text-center",children:[o.jsx(Ac,{className:"w-8 h-8 text-primary-600 mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:e.users_count}),o.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Usuarios Asignados"})]})}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body text-center",children:[o.jsx(Lr,{className:"w-8 h-8 text-warning-600 mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:e.conversions_count}),o.jsxs("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:["Conversiones (",(e.conversion_rate||0).toFixed(1),"%)"]})]})}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body text-center",children:[o.jsx(Fs,{className:"w-8 h-8 text-success-600 mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:e.total_revenue?new Intl.NumberFormat("es-ES",{style:"currency",currency:"USD"}).format(e.total_revenue):"$0.00"}),o.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Revenue Total"})]})})]}),o.jsxs("div",{className:"card",children:[o.jsx("div",{className:"card-header",children:o.jsx("h4",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Usuarios de la Mesa"})}),o.jsx("div",{className:"card-body p-0",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-secondary-50 dark:bg-secondary-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase",children:"Usuario"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase",children:"Rol"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase",children:"Leads"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase",children:"Conversiones"})]})}),o.jsx("tbody",{className:"divide-y divide-secondary-200 dark:divide-secondary-700",children:((n=e.users)==null?void 0:n.map(i=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"text-sm font-medium text-secondary-900 dark:text-white",children:[i.first_name," ",i.last_name]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:i.username})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-secondary-900 dark:text-white",children:"-"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-success-600 dark:text-success-400",children:"-"})})]},i.id)))||[]})]})})})]})]})})}var bQ=Object.defineProperty,wQ=(t,e,r)=>e in t?bQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Yp=(t,e,r)=>(wQ(t,typeof e!="symbol"?e+"":e,r),r);let kQ=class{constructor(){Yp(this,"current",this.detect()),Yp(this,"handoffState","pending"),Yp(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Ci=new kQ,en=(t,e)=>{Ci.isServer?w.useEffect(t,e):w.useLayoutEffect(t,e)};function Ti(t){let e=w.useRef(t);return en(()=>{e.current=t},[t]),e}let Ct=function(t){let e=Ti(t);return Ie.useCallback((...r)=>e.current(...r),[e])};function jx(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function pl(){let t=[],e={addEventListener(r,s,n,i){return r.addEventListener(s,n,i),e.add(()=>r.removeEventListener(s,n,i))},requestAnimationFrame(...r){let s=requestAnimationFrame(...r);return e.add(()=>cancelAnimationFrame(s))},nextFrame(...r){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...r))},setTimeout(...r){let s=setTimeout(...r);return e.add(()=>clearTimeout(s))},microTask(...r){let s={current:!0};return jx(()=>{s.current&&r[0]()}),e.add(()=>{s.current=!1})},style(r,s,n){let i=r.style.getPropertyValue(s);return Object.assign(r.style,{[s]:n}),this.add(()=>{Object.assign(r.style,{[s]:i})})},group(r){let s=pl();return r(s),this.add(()=>s.dispose())},add(r){return t.push(r),()=>{let s=t.indexOf(r);if(s>=0)for(let n of t.splice(s,1))n()}},dispose(){for(let r of t.splice(0))r()}};return e}function Nb(){let[t]=w.useState(pl);return w.useEffect(()=>()=>t.dispose(),[t]),t}function _Q(){let t=typeof document>"u";return"useSyncExternalStore"in bc?(e=>e.useSyncExternalStore)(bc)(()=>()=>{},()=>!1,()=>!t):!1}function Xc(){let t=_Q(),[e,r]=w.useState(Ci.isHandoffComplete);return e&&Ci.isHandoffComplete===!1&&r(!1),w.useEffect(()=>{e!==!0&&r(!0)},[e]),w.useEffect(()=>Ci.handoff(),[]),t?!1:e}var TN;let Qc=(TN=Ie.useId)!=null?TN:function(){let t=Xc(),[e,r]=Ie.useState(t?()=>Ci.nextId():null);return en(()=>{e===null&&r(Ci.nextId())},[e]),e!=null?""+e:void 0};function zr(t,e,...r){if(t in e){let n=e[t];return typeof n=="function"?n(...r):n}let s=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(n=>`"${n}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,zr),s}function XC(t){return Ci.isServer?null:t instanceof Node?t.ownerDocument:t!=null&&t.hasOwnProperty("current")&&t.current instanceof Node?t.current.ownerDocument:document}let sv=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var lo=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(lo||{}),QC=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(QC||{}),NQ=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(NQ||{});function jQ(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(sv)).sort((e,r)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}var ZC=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(ZC||{});function EQ(t,e=0){var r;return t===((r=XC(t))==null?void 0:r.body)?!1:zr(e,{0(){return t.matches(sv)},1(){let s=t;for(;s!==null;){if(s.matches(sv))return!0;s=s.parentElement}return!1}})}var SQ=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(SQ||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Lo(t){t==null||t.focus({preventScroll:!0})}let CQ=["textarea","input"].join(",");function TQ(t){var e,r;return(r=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,CQ))!=null?r:!1}function AQ(t,e=r=>r){return t.slice().sort((r,s)=>{let n=e(r),i=e(s);if(n===null||i===null)return 0;let a=n.compareDocumentPosition(i);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function _f(t,e,{sorted:r=!0,relativeTo:s=null,skipElements:n=[]}={}){let i=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,a=Array.isArray(t)?r?AQ(t):t:jQ(t);n.length>0&&a.length>1&&(a=a.filter(m=>!n.includes(m))),s=s??i.activeElement;let l=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,a.indexOf(s))-1;if(e&4)return Math.max(0,a.indexOf(s))+1;if(e&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=e&32?{preventScroll:!0}:{},u=0,h=a.length,f;do{if(u>=h||u+h<=0)return 0;let m=c+u;if(e&16)m=(m+h)%h;else{if(m<0)return 3;if(m>=h)return 1}f=a[m],f==null||f.focus(d),u+=l}while(f!==i.activeElement);return e&6&&TQ(f)&&f.select(),2}function JC(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function FQ(){return/Android/gi.test(window.navigator.userAgent)}function PQ(){return JC()||FQ()}function U0(t,e,r){let s=Ti(e);w.useEffect(()=>{function n(i){s.current(i)}return document.addEventListener(t,n,r),()=>document.removeEventListener(t,n,r)},[t,r])}function eT(t,e,r){let s=Ti(e);w.useEffect(()=>{function n(i){s.current(i)}return window.addEventListener(t,n,r),()=>window.removeEventListener(t,n,r)},[t,r])}function MQ(t,e,r=!0){let s=w.useRef(!1);w.useEffect(()=>{requestAnimationFrame(()=>{s.current=r})},[r]);function n(a,l){if(!s.current||a.defaultPrevented)return;let c=l(a);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let d=function u(h){return typeof h=="function"?u(h()):Array.isArray(h)||h instanceof Set?h:[h]}(t);for(let u of d){if(u===null)continue;let h=u instanceof HTMLElement?u:u.current;if(h!=null&&h.contains(c)||a.composed&&a.composedPath().includes(h))return}return!EQ(c,ZC.Loose)&&c.tabIndex!==-1&&a.preventDefault(),e(a,c)}let i=w.useRef(null);U0("pointerdown",a=>{var l,c;s.current&&(i.current=((c=(l=a.composedPath)==null?void 0:l.call(a))==null?void 0:c[0])||a.target)},!0),U0("mousedown",a=>{var l,c;s.current&&(i.current=((c=(l=a.composedPath)==null?void 0:l.call(a))==null?void 0:c[0])||a.target)},!0),U0("click",a=>{PQ()||i.current&&(n(a,()=>i.current),i.current=null)},!0),U0("touchend",a=>n(a,()=>a.target instanceof HTMLElement?a.target:null),!0),eT("blur",a=>n(a,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function $h(...t){return w.useMemo(()=>XC(...t),[...t])}let tT=Symbol();function RQ(t,e=!0){return Object.assign(t,{[tT]:e})}function Cn(...t){let e=w.useRef(t);w.useEffect(()=>{e.current=t},[t]);let r=Ct(s=>{for(let n of e.current)n!=null&&(typeof n=="function"?n(s):n.current=s)});return t.every(s=>s==null||(s==null?void 0:s[tT]))?void 0:r}function jb(t,e){let r=w.useRef([]),s=Ct(t);w.useEffect(()=>{let n=[...r.current];for(let[i,a]of e.entries())if(r.current[i]!==a){let l=s(e,n);return r.current=e,l}},[s,...e])}function Cm(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}var Tm=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Tm||{}),wa=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(wa||{});function rn({ourProps:t,theirProps:e,slot:r,defaultTag:s,features:n,visible:i=!0,name:a,mergeRefs:l}){l=l??DQ;let c=rT(e,t);if(i)return V0(c,r,s,a,l);let d=n??0;if(d&2){let{static:u=!1,...h}=c;if(u)return V0(h,r,s,a,l)}if(d&1){let{unmount:u=!0,...h}=c;return zr(u?0:1,{0(){return null},1(){return V0({...h,hidden:!0,style:{display:"none"}},r,s,a,l)}})}return V0(c,r,s,a,l)}function V0(t,e={},r,s,n){let{as:i=r,children:a,refName:l="ref",...c}=qp(t,["unmount","static"]),d=t.ref!==void 0?{[l]:t.ref}:{},u=typeof a=="function"?a(e):a;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(e));let h={};if(e){let f=!1,m=[];for(let[x,p]of Object.entries(e))typeof p=="boolean"&&(f=!0),p===!0&&m.push(x);f&&(h["data-headlessui-state"]=m.join(" "))}if(i===w.Fragment&&Object.keys(AN(c)).length>0){if(!w.isValidElement(u)||Array.isArray(u)&&u.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(c).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`));let f=u.props,m=typeof(f==null?void 0:f.className)=="function"?(...p)=>Cm(f==null?void 0:f.className(...p),c.className):Cm(f==null?void 0:f.className,c.className),x=m?{className:m}:{};return w.cloneElement(u,Object.assign({},rT(u.props,AN(qp(c,["ref"]))),h,d,{ref:n(u.ref,d.ref)},x))}return w.createElement(i,Object.assign({},qp(c,["ref"]),i!==w.Fragment&&d,i!==w.Fragment&&h),u)}function DQ(...t){return t.every(e=>e==null)?void 0:e=>{for(let r of t)r!=null&&(typeof r=="function"?r(e):r.current=e)}}function rT(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},r={};for(let s of t)for(let n in s)n.startsWith("on")&&typeof s[n]=="function"?(r[n]!=null||(r[n]=[]),r[n].push(s[n])):e[n]=s[n];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(r).map(s=>[s,void 0])));for(let s in r)Object.assign(e,{[s](n,...i){let a=r[s];for(let l of a){if((n instanceof Event||(n==null?void 0:n.nativeEvent)instanceof Event)&&n.defaultPrevented)return;l(n,...i)}}});return e}function Ds(t){var e;return Object.assign(w.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function AN(t){let e=Object.assign({},t);for(let r in e)e[r]===void 0&&delete e[r];return e}function qp(t,e=[]){let r=Object.assign({},t);for(let s of e)s in r&&delete r[s];return r}let OQ="div";var Am=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(Am||{});function LQ(t,e){var r;let{features:s=1,...n}=t,i={ref:e,"aria-hidden":(s&2)===2?!0:(r=n["aria-hidden"])!=null?r:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return rn({ourProps:i,theirProps:n,slot:{},defaultTag:OQ,name:"Hidden"})}let nv=Ds(LQ),Eb=w.createContext(null);Eb.displayName="OpenClosedContext";var js=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(js||{});function Sb(){return w.useContext(Eb)}function IQ({value:t,children:e}){return Ie.createElement(Eb.Provider,{value:t},e)}function BQ(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let ta=[];BQ(()=>{function t(e){e.target instanceof HTMLElement&&e.target!==document.body&&ta[0]!==e.target&&(ta.unshift(e.target),ta=ta.filter(r=>r!=null&&r.isConnected),ta.splice(10))}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function $Q(t){let e=t.parentElement,r=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(r=e),e=e.parentElement;let s=(e==null?void 0:e.getAttribute("disabled"))==="";return s&&zQ(r)?!1:s}function zQ(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}var sT=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(sT||{});function nT(t,e,r,s){let n=Ti(r);w.useEffect(()=>{t=t??window;function i(a){n.current(a)}return t.addEventListener(e,i,s),()=>t.removeEventListener(e,i,s)},[t,e,s])}function zh(){let t=w.useRef(!1);return en(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function iT(t){let e=Ct(t),r=w.useRef(!1);w.useEffect(()=>(r.current=!1,()=>{r.current=!0,jx(()=>{r.current&&e()})}),[e])}var zd=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(zd||{});function UQ(){let t=w.useRef(0);return eT("keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function aT(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let r of t.current)r.current instanceof HTMLElement&&e.add(r.current);return e}let VQ="div";var oT=(t=>(t[t.None=1]="None",t[t.InitialFocus=2]="InitialFocus",t[t.TabLock=4]="TabLock",t[t.FocusLock=8]="FocusLock",t[t.RestoreFocus=16]="RestoreFocus",t[t.All=30]="All",t))(oT||{});function WQ(t,e){let r=w.useRef(null),s=Cn(r,e),{initialFocus:n,containers:i,features:a=30,...l}=t;Xc()||(a=1);let c=$h(r);qQ({ownerDocument:c},!!(a&16));let d=GQ({ownerDocument:c,container:r,initialFocus:n},!!(a&2));KQ({ownerDocument:c,container:r,containers:i,previousActiveElement:d},!!(a&8));let u=UQ(),h=Ct(p=>{let g=r.current;g&&(v=>v())(()=>{zr(u.current,{[zd.Forwards]:()=>{_f(g,lo.First,{skipElements:[p.relatedTarget]})},[zd.Backwards]:()=>{_f(g,lo.Last,{skipElements:[p.relatedTarget]})}})})}),f=Nb(),m=w.useRef(!1),x={ref:s,onKeyDown(p){p.key=="Tab"&&(m.current=!0,f.requestAnimationFrame(()=>{m.current=!1}))},onBlur(p){let g=aT(i);r.current instanceof HTMLElement&&g.add(r.current);let v=p.relatedTarget;v instanceof HTMLElement&&v.dataset.headlessuiFocusGuard!=="true"&&(lT(g,v)||(m.current?_f(r.current,zr(u.current,{[zd.Forwards]:()=>lo.Next,[zd.Backwards]:()=>lo.Previous})|lo.WrapAround,{relativeTo:p.target}):p.target instanceof HTMLElement&&Lo(p.target)))}};return Ie.createElement(Ie.Fragment,null,!!(a&4)&&Ie.createElement(nv,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:Am.Focusable}),rn({ourProps:x,theirProps:l,defaultTag:VQ,name:"FocusTrap"}),!!(a&4)&&Ie.createElement(nv,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:Am.Focusable}))}let HQ=Ds(WQ),kd=Object.assign(HQ,{features:oT});function YQ(t=!0){let e=w.useRef(ta.slice());return jb(([r],[s])=>{s===!0&&r===!1&&jx(()=>{e.current.splice(0)}),s===!1&&r===!0&&(e.current=ta.slice())},[t,ta,e]),Ct(()=>{var r;return(r=e.current.find(s=>s!=null&&s.isConnected))!=null?r:null})}function qQ({ownerDocument:t},e){let r=YQ(e);jb(()=>{e||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&Lo(r())},[e]),iT(()=>{e&&Lo(r())})}function GQ({ownerDocument:t,container:e,initialFocus:r},s){let n=w.useRef(null),i=zh();return jb(()=>{if(!s)return;let a=e.current;a&&jx(()=>{if(!i.current)return;let l=t==null?void 0:t.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===l){n.current=l;return}}else if(a.contains(l)){n.current=l;return}r!=null&&r.current?Lo(r.current):_f(a,lo.First)===QC.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),n.current=t==null?void 0:t.activeElement})},[s]),n}function KQ({ownerDocument:t,container:e,containers:r,previousActiveElement:s},n){let i=zh();nT(t==null?void 0:t.defaultView,"focus",a=>{if(!n||!i.current)return;let l=aT(r);e.current instanceof HTMLElement&&l.add(e.current);let c=s.current;if(!c)return;let d=a.target;d&&d instanceof HTMLElement?lT(l,d)?(s.current=d,Lo(d)):(a.preventDefault(),a.stopPropagation(),Lo(c)):Lo(s.current)},!0)}function lT(t,e){for(let r of t)if(r.contains(e))return!0;return!1}let cT=w.createContext(!1);function XQ(){return w.useContext(cT)}function iv(t){return Ie.createElement(cT.Provider,{value:t.force},t.children)}function QQ(t){let e=XQ(),r=w.useContext(dT),s=$h(t),[n,i]=w.useState(()=>{if(!e&&r!==null||Ci.isServer)return null;let a=s==null?void 0:s.getElementById("headlessui-portal-root");if(a)return a;if(s===null)return null;let l=s.createElement("div");return l.setAttribute("id","headlessui-portal-root"),s.body.appendChild(l)});return w.useEffect(()=>{n!==null&&(s!=null&&s.body.contains(n)||s==null||s.body.appendChild(n))},[n,s]),w.useEffect(()=>{e||r!==null&&i(r.current)},[r,i,e]),n}let ZQ=w.Fragment;function JQ(t,e){let r=t,s=w.useRef(null),n=Cn(RQ(u=>{s.current=u}),e),i=$h(s),a=QQ(s),[l]=w.useState(()=>{var u;return Ci.isServer?null:(u=i==null?void 0:i.createElement("div"))!=null?u:null}),c=w.useContext(av),d=Xc();return en(()=>{!a||!l||a.contains(l)||(l.setAttribute("data-headlessui-portal",""),a.appendChild(l))},[a,l]),en(()=>{if(l&&c)return c.register(l)},[c,l]),iT(()=>{var u;!a||!l||(l instanceof Node&&a.contains(l)&&a.removeChild(l),a.childNodes.length<=0&&((u=a.parentElement)==null||u.removeChild(a)))}),d?!a||!l?null:Q5.createPortal(rn({ourProps:{ref:n},theirProps:r,defaultTag:ZQ,name:"Portal"}),l):null}let eZ=w.Fragment,dT=w.createContext(null);function tZ(t,e){let{target:r,...s}=t,n={ref:Cn(e)};return Ie.createElement(dT.Provider,{value:r},rn({ourProps:n,theirProps:s,defaultTag:eZ,name:"Popover.Group"}))}let av=w.createContext(null);function rZ(){let t=w.useContext(av),e=w.useRef([]),r=Ct(i=>(e.current.push(i),t&&t.register(i),()=>s(i))),s=Ct(i=>{let a=e.current.indexOf(i);a!==-1&&e.current.splice(a,1),t&&t.unregister(i)}),n=w.useMemo(()=>({register:r,unregister:s,portals:e}),[r,s,e]);return[e,w.useMemo(()=>function({children:i}){return Ie.createElement(av.Provider,{value:n},i)},[n])]}let sZ=Ds(JQ),nZ=Ds(tZ),ov=Object.assign(sZ,{Group:nZ});function iZ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const aZ=typeof Object.is=="function"?Object.is:iZ,{useState:oZ,useEffect:lZ,useLayoutEffect:cZ,useDebugValue:dZ}=bc;function uZ(t,e,r){const s=e(),[{inst:n},i]=oZ({inst:{value:s,getSnapshot:e}});return cZ(()=>{n.value=s,n.getSnapshot=e,Gp(n)&&i({inst:n})},[t,s,e]),lZ(()=>(Gp(n)&&i({inst:n}),t(()=>{Gp(n)&&i({inst:n})})),[t]),dZ(s),s}function Gp(t){const e=t.getSnapshot,r=t.value;try{const s=e();return!aZ(r,s)}catch{return!0}}function hZ(t,e,r){return e()}const fZ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mZ=!fZ,xZ=mZ?hZ:uZ,pZ="useSyncExternalStore"in bc?(t=>t.useSyncExternalStore)(bc):xZ;function gZ(t){return pZ(t.subscribe,t.getSnapshot,t.getSnapshot)}function vZ(t,e){let r=t(),s=new Set;return{getSnapshot(){return r},subscribe(n){return s.add(n),()=>s.delete(n)},dispatch(n,...i){let a=e[n].call(r,...i);a&&(r=a,s.forEach(l=>l()))}}}function yZ(){let t;return{before({doc:e}){var r;let s=e.documentElement;t=((r=e.defaultView)!=null?r:window).innerWidth-s.clientWidth},after({doc:e,d:r}){let s=e.documentElement,n=s.clientWidth-s.offsetWidth,i=t-n;r.style(s,"paddingRight",`${i}px`)}}}function bZ(){return JC()?{before({doc:t,d:e,meta:r}){function s(n){return r.containers.flatMap(i=>i()).some(i=>i.contains(n))}e.microTask(()=>{var n;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let l=pl();l.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>l.dispose()))}let i=(n=window.scrollY)!=null?n:window.pageYOffset,a=null;e.addEventListener(t,"click",l=>{if(l.target instanceof HTMLElement)try{let c=l.target.closest("a");if(!c)return;let{hash:d}=new URL(c.href),u=t.querySelector(d);u&&!s(u)&&(a=u)}catch{}},!0),e.addEventListener(t,"touchstart",l=>{if(l.target instanceof HTMLElement)if(s(l.target)){let c=l.target;for(;c.parentElement&&s(c.parentElement);)c=c.parentElement;e.style(c,"overscrollBehavior","contain")}else e.style(l.target,"touchAction","none")}),e.addEventListener(t,"touchmove",l=>{if(l.target instanceof HTMLElement)if(s(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()},{passive:!1}),e.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;i!==c&&window.scrollTo(0,i),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function wZ(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function kZ(t){let e={};for(let r of t)Object.assign(e,r(e));return e}let vo=vZ(()=>new Map,{PUSH(t,e){var r;let s=(r=this.get(t))!=null?r:{doc:t,count:0,d:pl(),meta:new Set};return s.count++,s.meta.add(e),this.set(t,s),this},POP(t,e){let r=this.get(t);return r&&(r.count--,r.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:r}){let s={doc:t,d:e,meta:kZ(r)},n=[bZ(),yZ(),wZ()];n.forEach(({before:i})=>i==null?void 0:i(s)),n.forEach(({after:i})=>i==null?void 0:i(s))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});vo.subscribe(()=>{let t=vo.getSnapshot(),e=new Map;for(let[r]of t)e.set(r,r.documentElement.style.overflow);for(let r of t.values()){let s=e.get(r.doc)==="hidden",n=r.count!==0;(n&&!s||!n&&s)&&vo.dispatch(r.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",r),r.count===0&&vo.dispatch("TEARDOWN",r)}});function _Z(t,e,r){let s=gZ(vo),n=t?s.get(t):void 0,i=n?n.count>0:!1;return en(()=>{if(!(!t||!e))return vo.dispatch("PUSH",t,r),()=>vo.dispatch("POP",t,r)},[e,t]),i}let Kp=new Map,_d=new Map;function FN(t,e=!0){en(()=>{var r;if(!e)return;let s=typeof t=="function"?t():t.current;if(!s)return;function n(){var a;if(!s)return;let l=(a=_d.get(s))!=null?a:1;if(l===1?_d.delete(s):_d.set(s,l-1),l!==1)return;let c=Kp.get(s);c&&(c["aria-hidden"]===null?s.removeAttribute("aria-hidden"):s.setAttribute("aria-hidden",c["aria-hidden"]),s.inert=c.inert,Kp.delete(s))}let i=(r=_d.get(s))!=null?r:0;return _d.set(s,i+1),i!==0||(Kp.set(s,{"aria-hidden":s.getAttribute("aria-hidden"),inert:s.inert}),s.setAttribute("aria-hidden","true"),s.inert=!0),n},[t,e])}function NZ({defaultContainers:t=[],portals:e,mainTreeNodeRef:r}={}){var s;let n=w.useRef((s=r==null?void 0:r.current)!=null?s:null),i=$h(n),a=Ct(()=>{var l,c,d;let u=[];for(let h of t)h!==null&&(h instanceof HTMLElement?u.push(h):"current"in h&&h.current instanceof HTMLElement&&u.push(h.current));if(e!=null&&e.current)for(let h of e.current)u.push(h);for(let h of(l=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?l:[])h!==document.body&&h!==document.head&&h instanceof HTMLElement&&h.id!=="headlessui-portal-root"&&(h.contains(n.current)||h.contains((d=(c=n.current)==null?void 0:c.getRootNode())==null?void 0:d.host)||u.some(f=>h.contains(f))||u.push(h));return u});return{resolveContainers:a,contains:Ct(l=>a().some(c=>c.contains(l))),mainTreeNodeRef:n,MainTreeNode:w.useMemo(()=>function(){return r!=null?null:Ie.createElement(nv,{features:Am.Hidden,ref:n})},[n,r])}}let Cb=w.createContext(()=>{});Cb.displayName="StackContext";var lv=(t=>(t[t.Add=0]="Add",t[t.Remove=1]="Remove",t))(lv||{});function jZ(){return w.useContext(Cb)}function EZ({children:t,onUpdate:e,type:r,element:s,enabled:n}){let i=jZ(),a=Ct((...l)=>{e==null||e(...l),i(...l)});return en(()=>{let l=n===void 0||n===!0;return l&&a(0,r,s),()=>{l&&a(1,r,s)}},[a,r,s,n]),Ie.createElement(Cb.Provider,{value:a},t)}let uT=w.createContext(null);function hT(){let t=w.useContext(uT);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,hT),e}return t}function SZ(){let[t,e]=w.useState([]);return[t.length>0?t.join(" "):void 0,w.useMemo(()=>function(r){let s=Ct(i=>(e(a=>[...a,i]),()=>e(a=>{let l=a.slice(),c=l.indexOf(i);return c!==-1&&l.splice(c,1),l}))),n=w.useMemo(()=>({register:s,slot:r.slot,name:r.name,props:r.props}),[s,r.slot,r.name,r.props]);return Ie.createElement(uT.Provider,{value:n},r.children)},[e])]}let CZ="p";function TZ(t,e){let r=Qc(),{id:s=`headlessui-description-${r}`,...n}=t,i=hT(),a=Cn(e);en(()=>i.register(s),[s,i.register]);let l={ref:a,...i.props,id:s};return rn({ourProps:l,theirProps:n,slot:i.slot||{},defaultTag:CZ,name:i.name||"Description"})}let AZ=Ds(TZ),FZ=Object.assign(AZ,{});var PZ=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(PZ||{}),MZ=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(MZ||{});let RZ={0(t,e){return t.titleId===e.id?t:{...t,titleId:e.id}}},Fm=w.createContext(null);Fm.displayName="DialogContext";function Uh(t){let e=w.useContext(Fm);if(e===null){let r=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Uh),r}return e}function DZ(t,e,r=()=>[document.body]){_Z(t,e,s=>{var n;return{containers:[...(n=s.containers)!=null?n:[],r]}})}function OZ(t,e){return zr(e.type,RZ,t,e)}let LZ="div",IZ=Tm.RenderStrategy|Tm.Static;function BZ(t,e){let r=Qc(),{id:s=`headlessui-dialog-${r}`,open:n,onClose:i,initialFocus:a,role:l="dialog",__demoMode:c=!1,...d}=t,[u,h]=w.useState(0),f=w.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(f.current||(f.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let m=Sb();n===void 0&&m!==null&&(n=(m&js.Open)===js.Open);let x=w.useRef(null),p=Cn(x,e),g=$h(x),v=t.hasOwnProperty("open")||m!==null,b=t.hasOwnProperty("onClose");if(!v&&!b)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!v)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!b)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof n!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${n}`);if(typeof i!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${i}`);let y=n?0:1,[k,N]=w.useReducer(OZ,{titleId:null,descriptionId:null,panelRef:w.createRef()}),E=Ct(()=>i(!1)),j=Ct(he=>N({type:0,id:he})),_=Xc()?c?!1:y===0:!1,S=u>1,C=w.useContext(Fm)!==null,[F,P]=rZ(),B={get current(){var he;return(he=k.panelRef.current)!=null?he:x.current}},{resolveContainers:Q,mainTreeNodeRef:D,MainTreeNode:I}=NZ({portals:F,defaultContainers:[B]}),te=S?"parent":"leaf",re=m!==null?(m&js.Closing)===js.Closing:!1,W=(()=>C||re?!1:_)(),K=w.useCallback(()=>{var he,A;return(A=Array.from((he=g==null?void 0:g.querySelectorAll("body > *"))!=null?he:[]).find(Ce=>Ce.id==="headlessui-portal-root"?!1:Ce.contains(D.current)&&Ce instanceof HTMLElement))!=null?A:null},[D]);FN(K,W);let Z=(()=>S?!0:_)(),M=w.useCallback(()=>{var he,A;return(A=Array.from((he=g==null?void 0:g.querySelectorAll("[data-headlessui-portal]"))!=null?he:[]).find(Ce=>Ce.contains(D.current)&&Ce instanceof HTMLElement))!=null?A:null},[D]);FN(M,Z);let X=(()=>!(!_||S))();MQ(Q,he=>{he.preventDefault(),E()},X);let V=(()=>!(S||y!==0))();nT(g==null?void 0:g.defaultView,"keydown",he=>{V&&(he.defaultPrevented||he.key===sT.Escape&&(he.preventDefault(),he.stopPropagation(),E()))});let Y=(()=>!(re||y!==0||C))();DZ(g,Y,Q),w.useEffect(()=>{if(y!==0||!x.current)return;let he=new ResizeObserver(A=>{for(let Ce of A){let be=Ce.target.getBoundingClientRect();be.x===0&&be.y===0&&be.width===0&&be.height===0&&E()}});return he.observe(x.current),()=>he.disconnect()},[y,x,E]);let[H,ie]=SZ(),de=w.useMemo(()=>[{dialogState:y,close:E,setTitleId:j},k],[y,k,E,j]),xe=w.useMemo(()=>({open:y===0}),[y]),le={ref:p,id:s,role:l,"aria-modal":y===0?!0:void 0,"aria-labelledby":k.titleId,"aria-describedby":H};return Ie.createElement(EZ,{type:"Dialog",enabled:y===0,element:x,onUpdate:Ct((he,A)=>{A==="Dialog"&&zr(he,{[lv.Add]:()=>h(Ce=>Ce+1),[lv.Remove]:()=>h(Ce=>Ce-1)})})},Ie.createElement(iv,{force:!0},Ie.createElement(ov,null,Ie.createElement(Fm.Provider,{value:de},Ie.createElement(ov.Group,{target:x},Ie.createElement(iv,{force:!1},Ie.createElement(ie,{slot:xe,name:"Dialog.Description"},Ie.createElement(kd,{initialFocus:a,containers:Q,features:_?zr(te,{parent:kd.features.RestoreFocus,leaf:kd.features.All&~kd.features.FocusLock}):kd.features.None},Ie.createElement(P,null,rn({ourProps:le,theirProps:d,slot:xe,defaultTag:LZ,features:IZ,visible:y===0,name:"Dialog"}))))))))),Ie.createElement(I,null))}let $Z="div";function zZ(t,e){let r=Qc(),{id:s=`headlessui-dialog-overlay-${r}`,...n}=t,[{dialogState:i,close:a}]=Uh("Dialog.Overlay"),l=Cn(e),c=Ct(u=>{if(u.target===u.currentTarget){if($Q(u.currentTarget))return u.preventDefault();u.preventDefault(),u.stopPropagation(),a()}}),d=w.useMemo(()=>({open:i===0}),[i]);return rn({ourProps:{ref:l,id:s,"aria-hidden":!0,onClick:c},theirProps:n,slot:d,defaultTag:$Z,name:"Dialog.Overlay"})}let UZ="div";function VZ(t,e){let r=Qc(),{id:s=`headlessui-dialog-backdrop-${r}`,...n}=t,[{dialogState:i},a]=Uh("Dialog.Backdrop"),l=Cn(e);w.useEffect(()=>{if(a.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[a.panelRef]);let c=w.useMemo(()=>({open:i===0}),[i]);return Ie.createElement(iv,{force:!0},Ie.createElement(ov,null,rn({ourProps:{ref:l,id:s,"aria-hidden":!0},theirProps:n,slot:c,defaultTag:UZ,name:"Dialog.Backdrop"})))}let WZ="div";function HZ(t,e){let r=Qc(),{id:s=`headlessui-dialog-panel-${r}`,...n}=t,[{dialogState:i},a]=Uh("Dialog.Panel"),l=Cn(e,a.panelRef),c=w.useMemo(()=>({open:i===0}),[i]),d=Ct(u=>{u.stopPropagation()});return rn({ourProps:{ref:l,id:s,onClick:d},theirProps:n,slot:c,defaultTag:WZ,name:"Dialog.Panel"})}let YZ="h2";function qZ(t,e){let r=Qc(),{id:s=`headlessui-dialog-title-${r}`,...n}=t,[{dialogState:i,setTitleId:a}]=Uh("Dialog.Title"),l=Cn(e);w.useEffect(()=>(a(s),()=>a(null)),[s,a]);let c=w.useMemo(()=>({open:i===0}),[i]);return rn({ourProps:{ref:l,id:s},theirProps:n,slot:c,defaultTag:YZ,name:"Dialog.Title"})}let GZ=Ds(BZ),KZ=Ds(VZ),XZ=Ds(HZ),QZ=Ds(zZ),ZZ=Ds(qZ),nc=Object.assign(GZ,{Backdrop:KZ,Panel:XZ,Overlay:QZ,Title:ZZ,Description:FZ});function JZ(t=0){let[e,r]=w.useState(t),s=zh(),n=w.useCallback(c=>{s.current&&r(d=>d|c)},[e,s]),i=w.useCallback(c=>!!(e&c),[e]),a=w.useCallback(c=>{s.current&&r(d=>d&~c)},[r,s]),l=w.useCallback(c=>{s.current&&r(d=>d^c)},[r]);return{flags:e,addFlag:n,hasFlag:i,removeFlag:a,toggleFlag:l}}function eJ(t){let e={called:!1};return(...r)=>{if(!e.called)return e.called=!0,t(...r)}}function Xp(t,...e){t&&e.length>0&&t.classList.add(...e)}function Qp(t,...e){t&&e.length>0&&t.classList.remove(...e)}function tJ(t,e){let r=pl();if(!t)return r.dispose;let{transitionDuration:s,transitionDelay:n}=getComputedStyle(t),[i,a]=[s,n].map(c=>{let[d=0]=c.split(",").filter(Boolean).map(u=>u.includes("ms")?parseFloat(u):parseFloat(u)*1e3).sort((u,h)=>h-u);return d}),l=i+a;if(l!==0){r.group(d=>{d.setTimeout(()=>{e(),d.dispose()},l),d.addEventListener(t,"transitionrun",u=>{u.target===u.currentTarget&&d.dispose()})});let c=r.addEventListener(t,"transitionend",d=>{d.target===d.currentTarget&&(e(),c())})}else e();return r.add(()=>e()),r.dispose}function rJ(t,e,r,s){let n=r?"enter":"leave",i=pl(),a=s!==void 0?eJ(s):()=>{};n==="enter"&&(t.removeAttribute("hidden"),t.style.display="");let l=zr(n,{enter:()=>e.enter,leave:()=>e.leave}),c=zr(n,{enter:()=>e.enterTo,leave:()=>e.leaveTo}),d=zr(n,{enter:()=>e.enterFrom,leave:()=>e.leaveFrom});return Qp(t,...e.base,...e.enter,...e.enterTo,...e.enterFrom,...e.leave,...e.leaveFrom,...e.leaveTo,...e.entered),Xp(t,...e.base,...l,...d),i.nextFrame(()=>{Qp(t,...e.base,...l,...d),Xp(t,...e.base,...l,...c),tJ(t,()=>(Qp(t,...e.base,...l),Xp(t,...e.base,...e.entered),a()))}),i.dispose}function sJ({immediate:t,container:e,direction:r,classes:s,onStart:n,onStop:i}){let a=zh(),l=Nb(),c=Ti(r);en(()=>{t&&(c.current="enter")},[t]),en(()=>{let d=pl();l.add(d.dispose);let u=e.current;if(u&&c.current!=="idle"&&a.current)return d.dispose(),n.current(c.current),d.add(rJ(u,s.current,c.current==="enter",()=>{d.dispose(),i.current(c.current)})),d.dispose},[r])}function Vi(t=""){return t.split(/\s+/).filter(e=>e.length>1)}let Ex=w.createContext(null);Ex.displayName="TransitionContext";var nJ=(t=>(t.Visible="visible",t.Hidden="hidden",t))(nJ||{});function iJ(){let t=w.useContext(Ex);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function aJ(){let t=w.useContext(Sx);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let Sx=w.createContext(null);Sx.displayName="NestingContext";function Cx(t){return"children"in t?Cx(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function fT(t,e){let r=Ti(t),s=w.useRef([]),n=zh(),i=Nb(),a=Ct((m,x=wa.Hidden)=>{let p=s.current.findIndex(({el:g})=>g===m);p!==-1&&(zr(x,{[wa.Unmount](){s.current.splice(p,1)},[wa.Hidden](){s.current[p].state="hidden"}}),i.microTask(()=>{var g;!Cx(s)&&n.current&&((g=r.current)==null||g.call(r))}))}),l=Ct(m=>{let x=s.current.find(({el:p})=>p===m);return x?x.state!=="visible"&&(x.state="visible"):s.current.push({el:m,state:"visible"}),()=>a(m,wa.Unmount)}),c=w.useRef([]),d=w.useRef(Promise.resolve()),u=w.useRef({enter:[],leave:[],idle:[]}),h=Ct((m,x,p)=>{c.current.splice(0),e&&(e.chains.current[x]=e.chains.current[x].filter(([g])=>g!==m)),e==null||e.chains.current[x].push([m,new Promise(g=>{c.current.push(g)})]),e==null||e.chains.current[x].push([m,new Promise(g=>{Promise.all(u.current[x].map(([v,b])=>b)).then(()=>g())})]),x==="enter"?d.current=d.current.then(()=>e==null?void 0:e.wait.current).then(()=>p(x)):p(x)}),f=Ct((m,x,p)=>{Promise.all(u.current[x].splice(0).map(([g,v])=>v)).then(()=>{var g;(g=c.current.shift())==null||g()}).then(()=>p(x))});return w.useMemo(()=>({children:s,register:l,unregister:a,onStart:h,onStop:f,wait:d,chains:u}),[l,a,s,h,f,u,d])}function oJ(){}let lJ=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function PN(t){var e;let r={};for(let s of lJ)r[s]=(e=t[s])!=null?e:oJ;return r}function cJ(t){let e=w.useRef(PN(t));return w.useEffect(()=>{e.current=PN(t)},[t]),e}let dJ="div",mT=Tm.RenderStrategy;function uJ(t,e){var r,s;let{beforeEnter:n,afterEnter:i,beforeLeave:a,afterLeave:l,enter:c,enterFrom:d,enterTo:u,entered:h,leave:f,leaveFrom:m,leaveTo:x,...p}=t,g=w.useRef(null),v=Cn(g,e),b=(r=p.unmount)==null||r?wa.Unmount:wa.Hidden,{show:y,appear:k,initial:N}=iJ(),[E,j]=w.useState(y?"visible":"hidden"),_=aJ(),{register:S,unregister:C}=_;w.useEffect(()=>S(g),[S,g]),w.useEffect(()=>{if(b===wa.Hidden&&g.current){if(y&&E!=="visible"){j("visible");return}return zr(E,{hidden:()=>C(g),visible:()=>S(g)})}},[E,g,S,C,y,b]);let F=Ti({base:Vi(p.className),enter:Vi(c),enterFrom:Vi(d),enterTo:Vi(u),entered:Vi(h),leave:Vi(f),leaveFrom:Vi(m),leaveTo:Vi(x)}),P=cJ({beforeEnter:n,afterEnter:i,beforeLeave:a,afterLeave:l}),B=Xc();w.useEffect(()=>{if(B&&E==="visible"&&g.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[g,E,B]);let Q=N&&!k,D=k&&y&&N,I=(()=>!B||Q?"idle":y?"enter":"leave")(),te=JZ(0),re=Ct(V=>zr(V,{enter:()=>{te.addFlag(js.Opening),P.current.beforeEnter()},leave:()=>{te.addFlag(js.Closing),P.current.beforeLeave()},idle:()=>{}})),W=Ct(V=>zr(V,{enter:()=>{te.removeFlag(js.Opening),P.current.afterEnter()},leave:()=>{te.removeFlag(js.Closing),P.current.afterLeave()},idle:()=>{}})),K=fT(()=>{j("hidden"),C(g)},_),Z=w.useRef(!1);sJ({immediate:D,container:g,classes:F,direction:I,onStart:Ti(V=>{Z.current=!0,K.onStart(g,V,re)}),onStop:Ti(V=>{Z.current=!1,K.onStop(g,V,W),V==="leave"&&!Cx(K)&&(j("hidden"),C(g))})});let M=p,X={ref:v};return D?M={...M,className:Cm(p.className,...F.current.enter,...F.current.enterFrom)}:Z.current&&(M.className=Cm(p.className,(s=g.current)==null?void 0:s.className),M.className===""&&delete M.className),Ie.createElement(Sx.Provider,{value:K},Ie.createElement(IQ,{value:zr(E,{visible:js.Open,hidden:js.Closed})|te.flags},rn({ourProps:X,theirProps:M,defaultTag:dJ,features:mT,visible:E==="visible",name:"Transition.Child"})))}function hJ(t,e){let{show:r,appear:s=!1,unmount:n=!0,...i}=t,a=w.useRef(null),l=Cn(a,e);Xc();let c=Sb();if(r===void 0&&c!==null&&(r=(c&js.Open)===js.Open),![!0,!1].includes(r))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[d,u]=w.useState(r?"visible":"hidden"),h=fT(()=>{u("hidden")}),[f,m]=w.useState(!0),x=w.useRef([r]);en(()=>{f!==!1&&x.current[x.current.length-1]!==r&&(x.current.push(r),m(!1))},[x,r]);let p=w.useMemo(()=>({show:r,appear:s,initial:f}),[r,s,f]);w.useEffect(()=>{if(r)u("visible");else if(!Cx(h))u("hidden");else{let y=a.current;if(!y)return;let k=y.getBoundingClientRect();k.x===0&&k.y===0&&k.width===0&&k.height===0&&u("hidden")}},[r,h]);let g={unmount:n},v=Ct(()=>{var y;f&&m(!1),(y=t.beforeEnter)==null||y.call(t)}),b=Ct(()=>{var y;f&&m(!1),(y=t.beforeLeave)==null||y.call(t)});return Ie.createElement(Sx.Provider,{value:h},Ie.createElement(Ex.Provider,{value:p},rn({ourProps:{...g,as:w.Fragment,children:Ie.createElement(xT,{ref:l,...g,...i,beforeEnter:v,beforeLeave:b})},theirProps:{},defaultTag:w.Fragment,features:mT,visible:d==="visible",name:"Transition"})))}function fJ(t,e){let r=w.useContext(Ex)!==null,s=Sb()!==null;return Ie.createElement(Ie.Fragment,null,!r&&s?Ie.createElement(cv,{ref:e,...t}):Ie.createElement(xT,{ref:e,...t}))}let cv=Ds(hJ),xT=Ds(uJ),mJ=Ds(fJ),ic=Object.assign(cv,{Child:mJ,Root:cv});const Tb={demo:{label:"Demo",color:"bg-blue-100 text-blue-800",icon:"🎯"},micro:{label:"Micro",color:"bg-green-100 text-green-800",icon:"💰"},standard:{label:"Standard",color:"bg-purple-100 text-purple-800",icon:"⭐"},real:{label:"Real",color:"bg-orange-100 text-orange-800",icon:"🔥"},vip:{label:"VIP",color:"bg-yellow-100 text-yellow-800",icon:"👑"}},Ab={active:{label:"Activa",color:"bg-green-100 text-green-800",icon:pr},suspended:{label:"Suspendida",color:"bg-yellow-100 text-yellow-800",icon:Qs},closed:{label:"Cerrada",color:"bg-red-100 text-red-800",icon:Uu}},xJ=["1:50","1:100","1:200","1:300","1:400","1:500"],pJ=["USD","EUR","GBP","JPY","AUD","CAD","CHF"],gJ=["MetaTrader 4","MetaTrader 5","cTrader","TradingView"],_s=(t,e="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:e,minimumFractionDigits:2,maximumFractionDigits:2}).format(t),dv=t=>new Intl.DateTimeFormat("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(t)),vJ=t=>t>=200?"text-green-600":t>=100?"text-yellow-600":"text-red-600",pT=({type:t})=>{const e=Tb[t];return o.jsxs("span",{className:je("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",e.color),children:[o.jsx("span",{className:"mr-1",children:e.icon}),e.label]})},gT=({status:t})=>{const e=Ab[t],r=e.icon;return o.jsxs("span",{className:je("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",e.color),children:[o.jsx(r,{className:"w-3 h-3 mr-1"}),e.label]})},yJ=({accounts:t})=>{const e=w.useMemo(()=>{const r=t.length,s=t.filter(l=>l.status==="active").length,n=t.reduce((l,c)=>l+c.balance,0),i=t.reduce((l,c)=>l+c.equity,0),a=t.reduce((l,c)=>l+c.profit_loss,0);return{totalAccounts:r,activeAccounts:s,totalBalance:n,totalEquity:i,totalProfitLoss:a,activePercentage:r>0?s/r*100:0}},[t]);return o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(Lr,{className:"h-8 w-8 text-blue-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Cuentas"}),o.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.totalAccounts})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(pr,{className:"h-8 w-8 text-green-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Activas"}),o.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.activeAccounts}),o.jsxs("p",{className:"text-xs text-gray-500",children:[e.activePercentage.toFixed(1),"%"]})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(Fs,{className:"h-8 w-8 text-purple-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Balance Total"}),o.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:_s(e.totalBalance)})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(Lr,{className:"h-8 w-8 text-indigo-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Equity Total"}),o.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:_s(e.totalEquity)})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:e.totalProfitLoss>=0?o.jsx(Ql,{className:"h-8 w-8 text-green-600"}):o.jsx(Xl,{className:"h-8 w-8 text-red-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500",children:"P&L Total"}),o.jsx("p",{className:je("text-2xl font-semibold",e.totalProfitLoss>=0?"text-green-600":"text-red-600"),children:_s(e.totalProfitLoss)})]})]})})]})},bJ=({filters:t,onFiltersChange:e})=>{const r=w.useCallback((s,n)=>{e({...t,[s]:n})},[t,e]);return o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[o.jsx("div",{className:"flex items-center justify-between mb-4",children:o.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[o.jsx(Tc,{className:"h-5 w-5 mr-2"}),"Filtros"]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buscar"}),o.jsxs("div",{className:"relative",children:[o.jsx(gn,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Número de cuenta, cliente...",value:t.search,onChange:s=>r("search",s.target.value),className:"pl-10 w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Cuenta"}),o.jsxs("select",{value:t.account_type,onChange:s=>r("account_type",s.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[o.jsx("option",{value:"",children:"Todos los tipos"}),Object.entries(Tb).map(([s,n])=>o.jsx("option",{value:s,children:n.label},s))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),o.jsxs("select",{value:t.status,onChange:s=>r("status",s.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[o.jsx("option",{value:"",children:"Todos los estados"}),Object.entries(Ab).map(([s,n])=>o.jsx("option",{value:s,children:n.label},s))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Lead"}),o.jsx("input",{type:"text",placeholder:"ID del lead",value:t.lead_id,onChange:s=>r("lead_id",s.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})]})},wJ=({accounts:t,onView:e,onEdit:r,onDelete:s})=>t.length===0?o.jsx("div",{className:"bg-white rounded-lg shadow",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Lr,{className:"mx-auto h-12 w-12 text-gray-400"}),o.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No hay cuentas"}),o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Comienza creando una nueva cuenta de trading."})]})}):o.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cuenta"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Equity"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"P&L"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Último Login"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(n=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:n.account_number}),o.jsxs("div",{className:"text-sm text-gray-500",children:[n.platform," • ",n.leverage]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:n.client_name}),o.jsx("div",{className:"text-sm text-gray-500",children:n.client_email})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(pT,{type:n.account_type})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:_s(n.balance,n.currency)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:_s(n.equity,n.currency)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:je("text-sm font-medium",n.profit_loss>=0?"text-green-600":"text-red-600"),children:_s(n.profit_loss,n.currency)})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(gT,{status:n.status})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.last_login?o.jsxs("div",{className:"flex items-center",children:[o.jsx(jn,{className:"h-4 w-4 mr-1"}),dv(n.last_login)]}):"Nunca"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx("button",{onClick:()=>e(n),className:"text-blue-600 hover:text-blue-900 p-1 rounded-full hover:bg-blue-100",title:"Ver detalles",children:o.jsx(qa,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>r(n),className:"text-indigo-600 hover:text-indigo-900 p-1 rounded-full hover:bg-indigo-100",title:"Editar",children:o.jsx(qo,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>s(n),className:"text-red-600 hover:text-red-900 p-1 rounded-full hover:bg-red-100",title:"Eliminar",children:o.jsx(Go,{className:"h-4 w-4"})})]})})]},n.id))})]})})}),MN=({isOpen:t,onClose:e,account:r,onSuccess:s})=>{const[n,i]=w.useState({lead_id:"",client_name:"",client_email:"",account_type:"demo",platform:"MetaTrader 4",leverage:"1:100",currency:"USD",status:"active"}),[a,l]=w.useState({}),c=os();Ie.useEffect(()=>{t&&(i(r?{lead_id:r.lead_id,client_name:r.client_name,client_email:r.client_email,account_type:r.account_type,platform:r.platform,leverage:r.leverage,currency:r.currency,status:r.status}:{lead_id:"",client_name:"",client_email:"",account_type:"demo",platform:"MetaTrader 4",leverage:"1:100",currency:"USD",status:"active"}),l({}))},[t,r]);const d=ot({mutationFn:Iu.createTradingAccount,onSuccess:()=>{c.invalidateQueries({queryKey:["trading-accounts"]}),me.success("Cuenta creada exitosamente"),s(),e()},onError:x=>{me.error(x.message||"Error al crear la cuenta"),x.errors&&l(x.errors)}}),u=ot({mutationFn:({id:x,data:p})=>Iu.updateTradingAccount(x,p),onSuccess:()=>{c.invalidateQueries({queryKey:["trading-accounts"]}),me.success("Cuenta actualizada exitosamente"),s(),e()},onError:x=>{me.error(x.message||"Error al actualizar la cuenta"),x.errors&&l(x.errors)}}),h=x=>{x.preventDefault(),l({}),r?u.mutate({id:r.id,data:n}):d.mutate(n)},f=(x,p)=>{i(g=>({...g,[x]:p})),a[x]&&l(g=>({...g,[x]:""}))},m=d.isPending||u.isPending;return o.jsx(ic,{appear:!0,show:t,as:w.Fragment,children:o.jsxs(nc,{as:"div",className:"relative z-50",onClose:e,children:[o.jsx(ic.Child,{as:w.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),o.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:o.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:o.jsx(ic.Child,{as:w.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:o.jsxs(nc.Panel,{className:"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[o.jsx(nc.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:r?"Editar Cuenta de Trading":"Nueva Cuenta de Trading"}),o.jsxs("form",{onSubmit:h,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Lead *"}),o.jsx("input",{type:"number",value:n.lead_id,onChange:x=>f("lead_id",x.target.value),className:je("w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",a.lead_id&&"border-red-300 focus:border-red-500 focus:ring-red-500"),required:!0}),a.lead_id&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.lead_id})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Cuenta *"}),o.jsx("select",{value:n.account_type,onChange:x=>f("account_type",x.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,children:Object.entries(Tb).map(([x,p])=>o.jsx("option",{value:x,children:p.label},x))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Cliente *"}),o.jsx("input",{type:"text",value:n.client_name,onChange:x=>f("client_name",x.target.value),className:je("w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",a.client_name&&"border-red-300 focus:border-red-500 focus:ring-red-500"),required:!0}),a.client_name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.client_name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email del Cliente *"}),o.jsx("input",{type:"email",value:n.client_email,onChange:x=>f("client_email",x.target.value),className:je("w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",a.client_email&&"border-red-300 focus:border-red-500 focus:ring-red-500"),required:!0}),a.client_email&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.client_email})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plataforma *"}),o.jsx("select",{value:n.platform,onChange:x=>f("platform",x.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,children:gJ.map(x=>o.jsx("option",{value:x,children:x},x))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apalancamiento *"}),o.jsx("select",{value:n.leverage,onChange:x=>f("leverage",x.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,children:xJ.map(x=>o.jsx("option",{value:x,children:x},x))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Moneda *"}),o.jsx("select",{value:n.currency,onChange:x=>f("currency",x.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,children:pJ.map(x=>o.jsx("option",{value:x,children:x},x))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado *"}),o.jsx("select",{value:n.status,onChange:x=>f("status",x.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,children:Object.entries(Ab).map(([x,p])=>o.jsx("option",{value:x,children:p.label},x))})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:m,children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",disabled:m,children:m?o.jsxs("div",{className:"flex items-center",children:[o.jsx(St,{size:"sm",className:"mr-2"}),r?"Actualizando...":"Creando..."]}):r?"Actualizar":"Crear"})]})]})]})})})})]})})},kJ=({isOpen:t,account:e,onClose:r})=>e?o.jsx(ic,{appear:!0,show:t,as:w.Fragment,children:o.jsxs(nc,{as:"div",className:"relative z-50",onClose:r,children:[o.jsx(ic.Child,{as:w.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),o.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:o.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:o.jsx(ic.Child,{as:w.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:o.jsxs(nc.Panel,{className:"w-full max-w-4xl transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[o.jsxs(nc.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-6",children:["Detalles de la Cuenta: ",e.account_number]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Información General"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Número de Cuenta:"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.account_number})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Tipo:"}),o.jsx(pT,{type:e.account_type})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Estado:"}),o.jsx(gT,{status:e.status})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Plataforma:"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.platform})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Servidor:"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.server})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Apalancamiento:"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.leverage})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Moneda:"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.currency})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Información del Cliente"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Nombre:"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.client_name})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Email:"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.client_email})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"ID Lead:"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.lead_id})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Fecha de Creación:"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:dv(e.created_at)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Último Login:"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.last_login?dv(e.last_login):"Nunca"})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Información Financiera"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Balance:"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:_s(e.balance,e.currency)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Equity:"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:_s(e.equity,e.currency)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Margen:"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:_s(e.margin,e.currency)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Margen Libre:"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:_s(e.free_margin,e.currency)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Nivel de Margen:"}),o.jsxs("span",{className:je("text-sm font-medium",vJ(e.margin_level)),children:[e.margin_level.toFixed(2),"%"]})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Estadísticas de Trading"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Número de Trades:"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.trades_count})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"P&L Total:"}),o.jsx("span",{className:je("text-sm font-medium",e.profit_loss>=0?"text-green-600":"text-red-600"),children:_s(e.profit_loss,e.currency)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Comisiones:"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:_s(e.commission,e.currency)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Swap:"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:_s(e.swap,e.currency)})]})]})]})]}),o.jsx("div",{className:"flex justify-end pt-6",children:o.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cerrar"})})]})})})})]})}):null;function _J(){const[t,e]=w.useState({search:"",account_type:"",status:"",lead_id:""}),[r,s]=w.useState(1),[n,i]=w.useState(!1),[a,l]=w.useState(!1),[c,d]=w.useState(!1),[u,h]=w.useState(null),f=20,m=os(),{data:x,isLoading:p,error:g}=Ke({queryKey:["trading-accounts",t,r],queryFn:()=>Iu.getTradingAccounts({...t,page:r,limit:f}),placeholderData:S=>S}),v=ot({mutationFn:Iu.deleteTradingAccount,onSuccess:()=>{m.invalidateQueries({queryKey:["trading-accounts"]}),me.success("Cuenta eliminada exitosamente")},onError:S=>{me.error(S.message||"Error al eliminar la cuenta")}}),b=w.useCallback(S=>{h(S),d(!0)},[]),y=w.useCallback(S=>{h(S),l(!0)},[]),k=w.useCallback(S=>{window.confirm(`¿Estás seguro de que quieres eliminar la cuenta ${S.account_number}?`)&&v.mutate(S.id)},[v]),N=w.useCallback(S=>{e(S),s(1)},[]),E=w.useCallback(()=>{h(null)},[]),j=w.useMemo(()=>(x==null?void 0:x.data)||[],[x]),_=w.useMemo(()=>Math.ceil(((x==null?void 0:x.total)||0)/f),[x==null?void 0:x.total,f]);return g?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Qs,{className:"mx-auto h-12 w-12 text-red-500"}),o.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Error al cargar las cuentas"}),o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:g instanceof Error?g.message:"Ha ocurrido un error inesperado"})]})}):o.jsx("div",{className:"min-h-screen bg-gray-50",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Cuentas de Trading"}),o.jsx("p",{className:"mt-2 text-gray-600",children:"Gestiona las cuentas de trading de tus clientes"})]}),o.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(Zs,{className:"h-5 w-5 mr-2"}),"Nueva Cuenta"]})]})}),!p&&o.jsx(yJ,{accounts:j}),o.jsx(bJ,{filters:t,onFiltersChange:N}),p?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx(St,{size:"lg"})}):o.jsxs(o.Fragment,{children:[o.jsx(wJ,{accounts:j,onView:b,onEdit:y,onDelete:k}),_>1&&o.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-gray-700",children:["Mostrando ",(r-1)*f+1," a ",Math.min(r*f,(x==null?void 0:x.total)||0)," de ",(x==null?void 0:x.total)||0," resultados"]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>s(r-1),disabled:r<=1,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),o.jsxs("span",{className:"px-3 py-2 text-sm font-medium text-gray-700",children:["Página ",r," de ",_]}),o.jsx("button",{onClick:()=>s(r+1),disabled:r>=_,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]})]})]}),o.jsx(MN,{isOpen:n,onClose:()=>i(!1),onSuccess:E}),o.jsx(MN,{isOpen:a,onClose:()=>l(!1),account:u,onSuccess:E}),o.jsx(kJ,{isOpen:c,account:u,onClose:()=>d(!1)})]})})}const RN={pending:{label:"Pendiente",color:"bg-warning-100 text-warning-800 dark:bg-warning-900 dark:text-warning-200",icon:jn},approved:{label:"Aprobada",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",icon:Ir},rejected:{label:"Rechazada",color:"bg-danger-100 text-danger-800 dark:bg-danger-900 dark:text-danger-200",icon:Wt},processing:{label:"Procesando",color:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",icon:jn},completed:{label:"Completada",color:"bg-success-100 text-success-800 dark:bg-success-900 dark:text-success-200",icon:Ir}},NJ={deposit:{label:"Depósito",color:"bg-success-100 text-success-800 dark:bg-success-900 dark:text-success-200",icon:Xl},withdrawal:{label:"Retiro",color:"bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-200",icon:Ql}},Fb={bank_transfer:"Transferencia Bancaria",credit_card:"Tarjeta de Crédito",debit_card:"Tarjeta de Débito",crypto:"Criptomoneda",paypal:"PayPal",skrill:"Skrill",neteller:"Neteller"},Pb=t=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"USD"}).format(t),Pm=t=>new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),vT=({status:t})=>{const e=RN[t]||RN.pending,r=e.icon;return o.jsxs("span",{className:je("badge flex items-center",e.color),children:[o.jsx(r,{className:"w-3 h-3 mr-1"}),e.label]})},yT=({type:t})=>{const e=NJ[t],r=e.icon;return o.jsxs("span",{className:je("badge flex items-center",e.color),children:[o.jsx(r,{className:"w-3 h-3 mr-1"}),e.label]})},jJ=({transactions:t})=>{const e=w.useMemo(()=>{const r=t.length,s=t.filter(a=>a.type==="deposit").length,n=t.filter(a=>a.type==="withdrawal").length,i=t.filter(a=>a.type==="deposit"&&a.status==="completed").reduce((a,l)=>a+l.amount,0);return{totalTransactions:r,deposits:s,withdrawals:n,completedDeposits:i}},[t]);return o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:e.totalTransactions}),o.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Total Transacciones"})]})}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-success-600 dark:text-success-400",children:e.deposits}),o.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Depósitos"})]})}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.withdrawals}),o.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Retiros"})]})}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:Pb(e.completedDeposits)}),o.jsx("div",{className:"text-sm text-secondary-600 dark:text-secondary-400",children:"Depósitos Completados"})]})})]})},EJ=({filters:t,onFiltersChange:e})=>{const r=(s,n)=>{e({...t,[s]:n})};return o.jsx("div",{className:"card mb-6",children:o.jsx("div",{className:"card-body",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(gn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-secondary-400"}),o.jsx("input",{type:"text",placeholder:"Buscar por referencia, cliente...",value:t.search,onChange:s=>r("search",s.target.value),className:"input pl-10"})]}),o.jsxs("select",{value:t.type,onChange:s=>r("type",s.target.value),className:"input",children:[o.jsx("option",{value:"",children:"Todos los tipos"}),o.jsx("option",{value:"deposit",children:"Depósitos"}),o.jsx("option",{value:"withdrawal",children:"Retiros"})]}),o.jsxs("select",{value:t.status,onChange:s=>r("status",s.target.value),className:"input",children:[o.jsx("option",{value:"",children:"Todos los estados"}),o.jsx("option",{value:"pending",children:"Pendiente"}),o.jsx("option",{value:"approved",children:"Aprobada"}),o.jsx("option",{value:"rejected",children:"Rechazada"}),o.jsx("option",{value:"processing",children:"Procesando"}),o.jsx("option",{value:"completed",children:"Completada"})]}),o.jsxs("select",{value:t.method,onChange:s=>r("method",s.target.value),className:"input",children:[o.jsx("option",{value:"",children:"Todos los métodos"}),Object.entries(Fb).map(([s,n])=>o.jsx("option",{value:s,children:n},s))]}),o.jsx("input",{type:"text",placeholder:"ID de cuenta",value:t.account_id,onChange:s=>r("account_id",s.target.value),className:"input"})]})})})},SJ=({transaction:t,onApprove:e,onReject:r,onProcess:s,onComplete:n,onViewDetails:i})=>o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx("button",{onClick:()=>i(t),className:"text-secondary-600 hover:text-secondary-900 dark:text-secondary-400 dark:hover:text-secondary-300",title:"Ver detalles",children:o.jsx(qa,{className:"w-4 h-4"})}),t.status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>e(t.id),className:"text-success-600 hover:text-success-900 dark:text-success-400 dark:hover:text-success-300",title:"Aprobar",children:o.jsx(Ir,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>r(t.id),className:"text-danger-600 hover:text-danger-900 dark:text-danger-400 dark:hover:text-danger-300",title:"Rechazar",children:o.jsx(Wt,{className:"w-4 h-4"})})]}),t.status==="approved"&&o.jsx("button",{onClick:()=>s(t.id),className:"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300",title:"Procesar",children:o.jsx(jn,{className:"w-4 h-4"})}),t.status==="processing"&&o.jsx("button",{onClick:()=>n(t.id),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Completar",children:o.jsx(Ir,{className:"w-4 h-4"})})]}),CJ=({transactions:t,onApprove:e,onReject:r,onProcess:s,onComplete:n,onViewDetails:i})=>o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-secondary-200 dark:divide-secondary-700",children:[o.jsx("thead",{className:"bg-secondary-50 dark:bg-secondary-800",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Transacción"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Cliente"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Tipo"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Método"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Monto"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Estado"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Fecha"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-secondary-500 dark:text-secondary-400 uppercase tracking-wider",children:"Acciones"})]})}),o.jsx("tbody",{className:"divide-y divide-secondary-200 dark:divide-secondary-700",children:t.map(a=>o.jsxs("tr",{className:"hover:bg-secondary-50 dark:hover:bg-secondary-800 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center",children:o.jsx(Fs,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-sm font-medium text-secondary-900 dark:text-white",children:a.reference}),o.jsxs("div",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:["ID: ",a.id]})]})]})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsx("div",{className:"text-sm text-secondary-900 dark:text-white",children:a.client_name}),o.jsx("div",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:a.account_number})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(yT,{type:a.type})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-secondary-900 dark:text-white",children:Fb[a.method]||a.method})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsx("div",{className:"text-sm font-medium text-secondary-900 dark:text-white",children:Pb(a.amount)}),o.jsx("div",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:a.currency})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(vT,{status:a.status})}),o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsx("div",{className:"text-sm text-secondary-900 dark:text-white",children:Pm(a.created_at)}),a.approved_at&&o.jsxs("div",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:["Aprobada: ",Pm(a.approved_at)]})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsx(SJ,{transaction:a,onApprove:e,onReject:r,onProcess:s,onComplete:n,onViewDetails:i})})]},a.id))})]})}),TJ=({currentPage:t,totalPages:e,onPageChange:r})=>e<=1?null:o.jsx("div",{className:"px-6 py-4 border-t border-secondary-200 dark:border-secondary-700",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-secondary-700 dark:text-secondary-300",children:["Página ",t," de ",e]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>r(t-1),disabled:t===1,className:"btn-secondary btn-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),o.jsx("button",{onClick:()=>r(t+1),disabled:t===e,className:"btn-secondary btn-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]})]})});function AJ(){const[t,e]=w.useState({search:"",type:"",status:"",method:"",account_id:""}),[r,s]=w.useState(1),[n,i]=w.useState(null),a=20,l=os(),{data:c,isLoading:d}=Ke({queryKey:["deposits-withdrawals",t,r],queryFn:()=>ud.getTransactions({...t,page:r,limit:a}),placeholderData:N=>N}),u=ot({mutationFn:N=>ud.updateTransaction(N,{action:"approve",approved_by:"Admin User"}),onSuccess:()=>{l.invalidateQueries({queryKey:["deposits-withdrawals"]}),me.success("Transacción aprobada exitosamente")},onError:N=>{var E,j;me.error(((j=(E=N.response)==null?void 0:E.data)==null?void 0:j.message)||"Error al aprobar la transacción")}}),h=ot({mutationFn:N=>ud.updateTransaction(N,{action:"reject",reason:"Rechazada por el administrador"}),onSuccess:()=>{l.invalidateQueries({queryKey:["deposits-withdrawals"]}),me.success("Transacción rechazada exitosamente")},onError:N=>{var E,j;me.error(((j=(E=N.response)==null?void 0:E.data)==null?void 0:j.message)||"Error al rechazar la transacción")}}),f=ot({mutationFn:N=>ud.updateTransaction(N,{action:"process"}),onSuccess:()=>{l.invalidateQueries({queryKey:["deposits-withdrawals"]}),me.success("Transacción en procesamiento")},onError:N=>{var E,j;me.error(((j=(E=N.response)==null?void 0:E.data)==null?void 0:j.message)||"Error al procesar la transacción")}}),m=ot({mutationFn:N=>ud.updateTransaction(N,{action:"complete"}),onSuccess:()=>{l.invalidateQueries({queryKey:["deposits-withdrawals"]}),me.success("Transacción completada exitosamente")},onError:N=>{var E,j;me.error(((j=(E=N.response)==null?void 0:E.data)==null?void 0:j.message)||"Error al completar la transacción")}}),x=N=>{window.confirm("¿Está seguro de que desea aprobar esta transacción?")&&u.mutate(N)},p=N=>{window.confirm("¿Está seguro de que desea rechazar esta transacción?")&&h.mutate(N)},g=N=>{window.confirm("¿Está seguro de que desea procesar esta transacción?")&&f.mutate(N)},v=N=>{window.confirm("¿Está seguro de que desea completar esta transacción?")&&m.mutate(N)},b=N=>{i(N)},y=N=>{s(N)};if(d)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx(St,{})});const k=(c==null?void 0:c.data)||[];return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex justify-between items-center",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-secondary-900 dark:text-white",children:"Depósitos y Retiros"}),o.jsx("p",{className:"text-secondary-600 dark:text-secondary-400",children:"Gestiona las transacciones de depósitos y retiros de los clientes"})]})}),o.jsx(jJ,{transactions:k}),o.jsx(EJ,{filters:t,onFiltersChange:e}),o.jsxs("div",{className:"card",children:[o.jsx(CJ,{transactions:k,onApprove:x,onReject:p,onProcess:g,onComplete:v,onViewDetails:b}),(c==null?void 0:c.pagination)&&o.jsx(TJ,{currentPage:r,totalPages:c.pagination.pages,onPageChange:y})]}),n&&o.jsx(FJ,{transaction:n,onClose:()=>i(null)})]})}const FJ=({transaction:t,onClose:e})=>o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Detalles de la Transacción"}),o.jsx("button",{onClick:e,className:"text-secondary-400 hover:text-secondary-600 dark:hover:text-secondary-300",children:o.jsx(Wt,{className:"w-6 h-6"})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-secondary-500 dark:text-secondary-400",children:"ID"}),o.jsx("div",{className:"text-sm text-secondary-900 dark:text-white",children:t.id})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-secondary-500 dark:text-secondary-400",children:"Referencia"}),o.jsx("div",{className:"text-sm text-secondary-900 dark:text-white",children:t.reference})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-secondary-500 dark:text-secondary-400",children:"Cliente"}),o.jsx("div",{className:"text-sm text-secondary-900 dark:text-white",children:t.client_name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-secondary-500 dark:text-secondary-400",children:"Cuenta"}),o.jsx("div",{className:"text-sm text-secondary-900 dark:text-white",children:t.account_number})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-secondary-500 dark:text-secondary-400",children:"Tipo"}),o.jsx("div",{className:"mt-1",children:o.jsx(yT,{type:t.type})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-secondary-500 dark:text-secondary-400",children:"Estado"}),o.jsx("div",{className:"mt-1",children:o.jsx(vT,{status:t.status})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-secondary-500 dark:text-secondary-400",children:"Monto"}),o.jsxs("div",{className:"text-sm font-medium text-secondary-900 dark:text-white",children:[Pb(t.amount)," ",t.currency]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-secondary-500 dark:text-secondary-400",children:"Método"}),o.jsx("div",{className:"text-sm text-secondary-900 dark:text-white",children:Fb[t.method]||t.method})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-secondary-500 dark:text-secondary-400",children:"Fecha de Creación"}),o.jsx("div",{className:"text-sm text-secondary-900 dark:text-white",children:Pm(t.created_at)})]}),t.approved_at&&o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-secondary-500 dark:text-secondary-400",children:"Fecha de Aprobación"}),o.jsx("div",{className:"text-sm text-secondary-900 dark:text-white",children:Pm(t.approved_at)})]})]}),t.notes&&o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-secondary-500 dark:text-secondary-400",children:"Notas"}),o.jsx("div",{className:"mt-1 p-3 bg-secondary-50 dark:bg-secondary-700 rounded-lg text-sm text-secondary-900 dark:text-white",children:t.notes})]}),t.rejection_reason&&o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-danger-600 dark:text-danger-400",children:"Motivo de Rechazo"}),o.jsxs("div",{className:"mt-1 p-3 bg-danger-50 dark:bg-danger-900 rounded-lg text-sm text-danger-900 dark:text-danger-200 flex items-start",children:[o.jsx(Qs,{className:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0"}),t.rejection_reason]})]}),t.bank_details&&o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-secondary-500 dark:text-secondary-400",children:"Detalles Bancarios"}),o.jsx("div",{className:"mt-1 p-3 bg-secondary-50 dark:bg-secondary-700 rounded-lg text-sm",children:o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:["Banco: ",t.bank_details.bank_name]}),o.jsxs("div",{children:["Titular: ",t.bank_details.account_holder]}),o.jsxs("div",{children:["Cuenta: ",t.bank_details.account_number]}),o.jsxs("div",{children:["SWIFT: ",t.bank_details.swift_code]})]})})]}),t.receipt_url&&o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-secondary-500 dark:text-secondary-400",children:"Comprobante"}),o.jsx("div",{className:"mt-1",children:o.jsxs("a",{href:t.receipt_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-primary-600 hover:text-primary-900 dark:text-primary-400",children:[o.jsx(qs,{className:"w-4 h-4 mr-1"}),"Ver comprobante"]})})]})]})]})});function ht(t){var e=t.width,r=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(r<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:r}}function Io(t,e){return t.width===e.width&&t.height===e.height}var PJ=function(){function t(e){var r=this;this._resolutionListener=function(){return r._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var r=this,s={next:e};return this._observers.push(s),{unsubscribe:function(){r._observers=r._observers.filter(function(n){return n!==s})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(r){return r.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function MJ(t){return new PJ(t)}var RJ=function(){function t(e,r,s){var n;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=ht({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=r??function(i){return i},this._allowResizeObserver=(n=s==null?void 0:s.allowResizeObserver)!==null&&n!==void 0?n:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,r;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(r=this._devicePixelRatioObservable)===null||r===void 0||r.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return ht({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=ht(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(r){return r!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(r){return r!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var r=this.bitmapSize;Io(r,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(r,e))},t.prototype._emitBitmapSizeChanged=function(e,r){var s=this;this._bitmapSizeChangedListeners.forEach(function(n){return n.call(s,e,r)})},t.prototype._suggestNewBitmapSize=function(e){var r=this._suggestedBitmapSize,s=ht(this._transformBitmapSize(e,this._canvasElementClientSize)),n=Io(this.bitmapSize,s)?null:s;r===null&&n===null||r!==null&&n!==null&&Io(r,n)||(this._suggestedBitmapSize=n,this._emitSuggestedBitmapSizeChanged(r,n))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,r){var s=this;this._suggestedBitmapSizeChangedListeners.forEach(function(n){return n.call(s,e,r)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}OJ().then(function(r){return r?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var r=DN(this._canvasElement);if(r===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=MJ(r),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,r;if(this._canvasElement!==null){var s=DN(this._canvasElement);if(s!==null){var n=(r=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&r!==void 0?r:s.devicePixelRatio,i=this._canvasElement.getClientRects(),a=i[0]!==void 0?LJ(i[0],n):ht({width:this._canvasElementClientSize.width*n,height:this._canvasElementClientSize.height*n});this._suggestNewBitmapSize(a)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(r){var s=r.find(function(a){return a.target===e._canvasElement});if(!(!s||!s.devicePixelContentBoxSize||!s.devicePixelContentBoxSize[0])){var n=s.devicePixelContentBoxSize[0],i=ht({width:n.inlineSize,height:n.blockSize});e._suggestNewBitmapSize(i)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function DJ(t,e){if(e.type==="device-pixel-content-box")return new RJ(t,e.transform,e.options);throw new Error("Unsupported binding target")}function DN(t){return t.ownerDocument.defaultView}function OJ(){return new Promise(function(t){var e=new ResizeObserver(function(r){t(r.every(function(s){return"devicePixelContentBoxSize"in s})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function LJ(t,e){return ht({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var IJ=function(){function t(e,r,s){if(r.width===0||r.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=r,s.width===0||s.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=s,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function tl(t,e){var r=t.canvasElementClientSize;if(r.width===0||r.height===0)return null;var s=t.bitmapSize;if(s.width===0||s.height===0)return null;var n=t.canvasElement.getContext("2d",e);return n===null?null:new IJ(n,r,s)}/*!
 * @license
 * TradingView Lightweight Charts™ v5.0.8
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const bT={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var ON,LN;function ih(t,e){const r={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(r)}function wT(t,e,r,s){t.beginPath();const n=t.lineWidth%2?.5:0;t.moveTo(r,e+n),t.lineTo(s,e+n),t.stroke()}function kr(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function bs(t){if(t===void 0)throw new Error("Value is undefined");return t}function we(t){if(t===null)throw new Error("Value is null");return t}function ka(t){return we(bs(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(ON||(ON={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(LN||(LN={}));class Gt{constructor(){this.t=[]}i(e,r,s){const n={h:e,l:r,o:s===!0};this.t.push(n)}_(e){const r=this.t.findIndex(s=>e===s.h);r>-1&&this.t.splice(r,1)}u(e){this.t=this.t.filter(r=>r.l!==e)}p(e,r,s){const n=[...this.t];this.t=this.t.filter(i=>!i.o),n.forEach(i=>i.h(e,r,s))}v(){return this.t.length>0}m(){this.t=[]}}function Ts(t,...e){for(const r of e)for(const s in r)r[s]!==void 0&&Object.prototype.hasOwnProperty.call(r,s)&&!["__proto__","constructor","prototype"].includes(s)&&(typeof r[s]!="object"||t[s]===void 0||Array.isArray(r[s])?t[s]=r[s]:Ts(t[s],r[s]));return t}function Dc(t){return typeof t=="number"&&isFinite(t)}function ah(t){return typeof t=="number"&&t%1==0}function Vh(t){return typeof t=="string"}function W0(t){return typeof t=="boolean"}function ki(t){const e=t;if(!e||typeof e!="object")return e;let r,s,n;for(s in r=Array.isArray(e)?[]:{},e)e.hasOwnProperty(s)&&(n=e[s],r[s]=n&&typeof n=="object"?ki(n):n);return r}function BJ(t){return t!==null}function oh(t){return t===null?void 0:t}const kT="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Mm(t,e,r){return e===void 0&&(e=kT),`${r=r!==void 0?`${r} `:""}${t}px ${e}`}class $J{constructor(e){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,I:0,B:0,A:0,L:0},this.O=e}N(){const e=this.M,r=this.F(),s=this.W();return e.P===r&&e.T===s||(e.P=r,e.T=s,e.k=Mm(r,s),e.A=2.5/12*r,e.V=e.A,e.I=r/12*e.C,e.B=r/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function Zp(t){return t<0?0:t>255?255:Math.round(t)||0}function IN(t){return .199*t[0]+.687*t[1]+.114*t[2]}class zJ{constructor(e,r){this.q=new Map,this.Y=e,r&&(this.q=r)}j(e,r){if(e==="transparent")return e;const s=this.K(e),n=s[3];return`rgba(${s[0]}, ${s[1]}, ${s[2]}, ${r*n})`}X(e){const r=this.K(e);return{Z:`rgb(${r[0]}, ${r[1]}, ${r[2]})`,G:IN(r)>160?"black":"white"}}J(e){return IN(this.K(e))}tt(e,r,s){const[n,i,a,l]=this.K(e),[c,d,u,h]=this.K(r),f=[Zp(n+s*(c-n)),Zp(i+s*(d-i)),Zp(a+s*(u-a)),(m=l+s*(h-l),m<=0||m>1?Math.min(Math.max(m,0),1):Math.round(1e4*m)/1e4)];var m;return`rgba(${f[0]}, ${f[1]}, ${f[2]}, ${f[3]})`}K(e){const r=this.q.get(e);if(r)return r;const s=function(a){const l=document.createElement("div");l.style.display="none",document.body.appendChild(l),l.style.color=a;const c=window.getComputedStyle(l).color;return document.body.removeChild(l),c}(e),n=s.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!n){if(this.Y.length)for(const a of this.Y){const l=a(e);if(l)return this.q.set(e,l),l}throw new Error(`Failed to parse color: ${e}`)}const i=[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),n[4]?parseFloat(n[4]):1];return this.q.set(e,i),i}}class UJ{constructor(){this.it=[]}st(e){this.it=e}nt(e,r,s){this.it.forEach(n=>{n.nt(e,r,s)})}}class gl{nt(e,r,s){e.useBitmapCoordinateSpace(n=>this.et(n,r,s))}}class VJ extends gl{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:r,verticalPixelRatio:s}){if(this.rt===null||this.rt.lt===null)return;const n=this.rt.lt,i=this.rt,a=Math.max(1,Math.floor(r))%2/2,l=c=>{e.beginPath();for(let d=n.to-1;d>=n.from;--d){const u=i.ot[d],h=Math.round(u._t*r)+a,f=u.ut*s,m=c*s+a;e.moveTo(h,f),e.arc(h,f,m,0,2*Math.PI)}e.fill()};i.ct>0&&(e.fillStyle=i.dt,l(i.ft+i.ct)),e.fillStyle=i.vt,l(i.ft)}}function WJ(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const HJ={from:0,to:1};class YJ{constructor(e,r,s){this.Mt=new UJ,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=r,this.Pt=s,this.Mt.st(this.bt)}kt(e){this.yt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}yt(){const e=this.Pt.Dt();e.length!==this.bt.length&&(this.St=e.map(WJ),this.bt=this.St.map(r=>{const s=new VJ;return s.ht(r),s}),this.Mt.st(this.bt))}Rt(){const e=this.Ct.N().mode===2||!this.Ct.Vt(),r=this.Pt.It(),s=this.Ct.Bt(),n=this.O.Et();this.yt(),r.forEach((i,a)=>{const l=this.St[a],c=i.At(s),d=i.zt();!e&&c!==null&&i.Vt()&&d!==null?(l.vt=c.Lt,l.ft=c.ft,l.ct=c.Ot,l.ot[0].gt=c.gt,l.ot[0].ut=i.Ft().Nt(c.gt,d.Wt),l.dt=c.Ht??this.O.Ut(l.ot[0].ut/i.Ft().$t()),l.ot[0].wt=s,l.ot[0]._t=n.qt(s),l.lt=HJ):l.lt=null})}}class qJ extends gl{constructor(e){super(),this.Yt=e}et({context:e,bitmapSize:r,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.Yt===null)return;const i=this.Yt.jt.Vt,a=this.Yt.Kt.Vt;if(!i&&!a)return;const l=Math.round(this.Yt._t*s),c=Math.round(this.Yt.ut*n);e.lineCap="butt",i&&l>=0&&(e.lineWidth=Math.floor(this.Yt.jt.ct*s),e.strokeStyle=this.Yt.jt.R,e.fillStyle=this.Yt.jt.R,ih(e,this.Yt.jt.Xt),function(d,u,h,f){d.beginPath();const m=d.lineWidth%2?.5:0;d.moveTo(u+m,h),d.lineTo(u+m,f),d.stroke()}(e,l,0,r.height)),a&&c>=0&&(e.lineWidth=Math.floor(this.Yt.Kt.ct*n),e.strokeStyle=this.Yt.Kt.R,e.fillStyle=this.Yt.Kt.R,ih(e,this.Yt.Kt.Xt),wT(e,c,0,r.width))}}class GJ{constructor(e,r){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new qJ(this.Zt),this.Jt=e,this.Pt=r}kt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){const e=this.Jt.Vt(),r=this.Pt.Qt().N().crosshair,s=this.Zt;if(r.mode===2)return s.Kt.Vt=!1,void(s.jt.Vt=!1);s.Kt.Vt=e&&this.Jt.ti(this.Pt),s.jt.Vt=e&&this.Jt.ii(),s.Kt.ct=r.horzLine.width,s.Kt.Xt=r.horzLine.style,s.Kt.R=r.horzLine.color,s.jt.ct=r.vertLine.width,s.jt.Xt=r.vertLine.style,s.jt.R=r.vertLine.color,s._t=this.Jt.si(),s.ut=this.Jt.ni()}}function KJ(t,e,r,s,n,i){t.fillRect(e+i,r,s-2*i,i),t.fillRect(e+i,r+n-i,s-2*i,i),t.fillRect(e,r,i,n),t.fillRect(e+s-i,r,i,n)}function Tx(t,e,r,s,n,i){t.save(),t.globalCompositeOperation="copy",t.fillStyle=i,t.fillRect(e,r,s,n),t.restore()}function BN(t,e,r,s,n,i){t.beginPath(),t.roundRect?t.roundRect(e,r,s,n,i):(t.lineTo(e+s-i[1],r),i[1]!==0&&t.arcTo(e+s,r,e+s,r+i[1],i[1]),t.lineTo(e+s,r+n-i[2]),i[2]!==0&&t.arcTo(e+s,r+n,e+s-i[2],r+n,i[2]),t.lineTo(e+i[3],r+n),i[3]!==0&&t.arcTo(e,r+n,e,r+n-i[3],i[3]),t.lineTo(e,r+i[0]),i[0]!==0&&t.arcTo(e,r,e+i[0],r,i[0]))}function $N(t,e,r,s,n,i,a=0,l=[0,0,0,0],c=""){if(t.save(),!a||!c||c===i)return BN(t,e,r,s,n,l),t.fillStyle=i,t.fill(),void t.restore();const d=a/2;var u;BN(t,e+d,r+d,s-a,n-a,(u=-d,l.map(h=>h===0?h:h+u))),i!=="transparent"&&(t.fillStyle=i,t.fill()),c!=="transparent"&&(t.lineWidth=a,t.strokeStyle=c,t.closePath(),t.stroke()),t.restore()}function _T(t,e,r,s,n,i,a){t.save(),t.globalCompositeOperation="copy";const l=t.createLinearGradient(0,0,0,n);l.addColorStop(0,i),l.addColorStop(1,a),t.fillStyle=l,t.fillRect(e,r,s,n),t.restore()}class zN{constructor(e,r){this.ht(e,r)}ht(e,r){this.Yt=e,this.ei=r}$t(e,r){return this.Yt.Vt?e.P+e.A+e.V:0}nt(e,r,s,n){if(!this.Yt.Vt||this.Yt.ri.length===0)return;const i=this.Yt.R,a=this.ei.Z,l=e.useBitmapCoordinateSpace(c=>{const d=c.context;d.font=r.k;const u=this.hi(c,r,s,n),h=u.ai;return u.li?$N(d,h.oi,h._i,h.ui,h.ci,a,h.di,[h.ft,0,0,h.ft],a):$N(d,h.fi,h._i,h.ui,h.ci,a,h.di,[0,h.ft,h.ft,0],a),this.Yt.pi&&(d.fillStyle=i,d.fillRect(h.fi,h.mi,h.wi-h.fi,h.gi)),this.Yt.Mi&&(d.fillStyle=r.D,d.fillRect(u.li?h.bi-h.di:0,h._i,h.di,h.Si-h._i)),u});e.useMediaCoordinateSpace(({context:c})=>{const d=l.xi;c.font=r.k,c.textAlign=l.li?"right":"left",c.textBaseline="middle",c.fillStyle=i,c.fillText(this.Yt.ri,d.Ci,(d._i+d.Si)/2+d.Pi)})}hi(e,r,s,n){const{context:i,bitmapSize:a,mediaSize:l,horizontalPixelRatio:c,verticalPixelRatio:d}=e,u=this.Yt.pi||!this.Yt.ki?r.C:0,h=this.Yt.yi?r.S:0,f=r.A+this.ei.Ti,m=r.V+this.ei.Ri,x=r.I,p=r.B,g=this.Yt.ri,v=r.P,b=s.Di(i,g),y=Math.ceil(s.Vi(i,g)),k=v+f+m,N=r.S+x+p+y+u,E=Math.max(1,Math.floor(d));let j=Math.round(k*d);j%2!=E%2&&(j+=1);const _=h>0?Math.max(1,Math.floor(h*c)):0,S=Math.round(N*c),C=Math.round(u*c),F=this.ei.Ii??this.ei.Bi,P=Math.round(F*d)-Math.floor(.5*d),B=Math.floor(P+E/2-j/2),Q=B+j,D=n==="right",I=D?l.width-h:h,te=D?a.width-_:_;let re,W,K;return D?(re=te-S,W=te-C,K=I-u-x-h):(re=te+S,W=te+C,K=I+u+x),{li:D,ai:{_i:B,mi:P,Si:Q,ui:S,ci:j,ft:2*c,di:_,oi:re,fi:te,wi:W,gi:E,bi:a.width},xi:{_i:B/d,Si:Q/d,Ci:K,Pi:b}}}}class Ax{constructor(e){this.Ei={Bi:0,Z:"#000",Ri:0,Ti:0},this.Ai={ri:"",Vt:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,yi:!1},this.zi={ri:"",Vt:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,yi:!0},this.xt=!0,this.Li=new(e||zN)(this.Ai,this.Ei),this.Oi=new(e||zN)(this.zi,this.Ei)}ri(){return this.Ni(),this.Ai.ri}Bi(){return this.Ni(),this.Ei.Bi}kt(){this.xt=!0}$t(e,r=!1){return Math.max(this.Li.$t(e,r),this.Oi.$t(e,r))}Fi(){return this.Ei.Ii||0}Wi(e){this.Ei.Ii=e}Hi(){return this.Ni(),this.Ai.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ai.Vt}Tt(e){return this.Ni(),this.Ai.pi=this.Ai.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Oi}Ni(){this.xt&&(this.Ai.pi=!0,this.zi.pi=!1,this.qi(this.Ai,this.zi,this.Ei))}}class XJ extends Ax{constructor(e,r,s){super(),this.Jt=e,this.Yi=r,this.ji=s}qi(e,r,s){if(e.Vt=!1,this.Jt.N().mode===2)return;const n=this.Jt.N().horzLine;if(!n.labelVisible)return;const i=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||i===null)return;const a=this.Yi.Xi().X(n.labelBackgroundColor);s.Z=a.Z,e.R=a.G;const l=2/12*this.Yi.P();s.Ti=l,s.Ri=l;const c=this.ji(this.Yi);s.Bi=c.Bi,e.ri=this.Yi.Zi(c.gt,i),e.Vt=!0}}const QJ=/[1-9]/g;class NT{constructor(){this.Yt=null}ht(e){this.Yt=e}nt(e,r){if(this.Yt===null||this.Yt.Vt===!1||this.Yt.ri.length===0)return;const s=e.useMediaCoordinateSpace(({context:f})=>(f.font=r.k,Math.round(r.Gi.Vi(f,we(this.Yt).ri,QJ))));if(s<=0)return;const n=r.Ji,i=s+2*n,a=i/2,l=this.Yt.Qi;let c=this.Yt.Bi,d=Math.floor(c-a)+.5;d<0?(c+=Math.abs(0-d),d=Math.floor(c-a)+.5):d+i>l&&(c-=Math.abs(l-(d+i)),d=Math.floor(c-a)+.5);const u=d+i,h=Math.ceil(0+r.S+r.C+r.A+r.P+r.V);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:m,verticalPixelRatio:x})=>{const p=we(this.Yt);f.fillStyle=p.Z;const g=Math.round(d*m),v=Math.round(0*x),b=Math.round(u*m),y=Math.round(h*x),k=Math.round(2*m);if(f.beginPath(),f.moveTo(g,v),f.lineTo(g,y-k),f.arcTo(g,y,g+k,y,k),f.lineTo(b-k,y),f.arcTo(b,y,b,y-k,k),f.lineTo(b,v),f.fill(),p.pi){const N=Math.round(p.Bi*m),E=v,j=Math.round((E+r.C)*x);f.fillStyle=p.R;const _=Math.max(1,Math.floor(m)),S=Math.floor(.5*m);f.fillRect(N-S,E,_,j-E)}}),e.useMediaCoordinateSpace(({context:f})=>{const m=we(this.Yt),x=0+r.S+r.C+r.A+r.P/2;f.font=r.k,f.textAlign="left",f.textBaseline="middle",f.fillStyle=m.R;const p=r.Gi.Di(f,"Apr0");f.translate(d+n,x+p),f.fillText(m.ri,0,0)})}}class ZJ{constructor(e,r,s){this.xt=!0,this.Gt=new NT,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Bi:NaN,pi:!0},this.Ct=e,this.ts=r,this.ji=s}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){const e=this.Zt;if(e.Vt=!1,this.Ct.N().mode===2)return;const r=this.Ct.N().vertLine;if(!r.labelVisible)return;const s=this.ts.Et();if(s.Ki())return;e.Qi=s.Qi();const n=this.ji();if(n===null)return;e.Bi=n.Bi;const i=s.ss(this.Ct.Bt());e.ri=s.ns(we(i)),e.Vt=!0;const a=this.ts.Xi().X(r.labelBackgroundColor);e.Z=a.Z,e.R=a.G,e.pi=s.N().ticksVisible}}class jT{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(e){this.rs=e}Ft(){return this.es}_s(e){this.es=e}us(e){return[]}cs(){return[]}Vt(){return!0}}var UN;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden",t[t.MagnetOHLC=3]="MagnetOHLC"})(UN||(UN={}));class JJ extends jT{constructor(e,r){super(),this.Pt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=e,this.Ps=r,this.ks=((n,i)=>a=>{const l=i(),c=n();if(a===we(this.Pt).ys())return{gt:c,Bi:l};{const d=we(a.zt());return{gt:a.Ts(l,d),Bi:l}}})(()=>this.ds,()=>this.Ss);const s=((n,i)=>()=>{const a=this.ts.Et().Rs(n()),l=i();return a&&Number.isFinite(l)?{wt:a,Bi:l}:null})(()=>this.fs,()=>this.si());this.Ds=new ZJ(this,e,s)}N(){return this.Ps}Vs(e,r){this.xs=e,this.Cs=r}Is(){this.xs=NaN,this.Cs=NaN}Bs(){return this.xs}Es(){return this.Cs}As(e,r,s){this.ws||(this.ws=!0),this.ps=!0,this.zs(e,r,s)}Bt(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.Pt=null,this.Is(),this.Ns()}Fs(e){let r=this.gs.get(e);r||(r=new GJ(this,e),this.gs.set(e,r));let s=this.Ms.get(e);return s||(s=new YJ(this.ts,this,e),this.Ms.set(e,s)),[r,s]}ti(e){return e===this.Pt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ws(e,r){this.ps&&this.Pt===e||this.vs.clear();const s=[];return this.Pt===e&&s.push(this.Hs(this.vs,r,this.ks)),s}cs(){return this.ps?[this.Ds]:[]}Us(){return this.Pt}Ns(){this.ts.$s().forEach(e=>{var r,s;(r=this.gs.get(e))==null||r.kt(),(s=this.Ms.get(e))==null||s.kt()}),this.vs.forEach(e=>e.kt()),this.Ds.kt()}qs(e){return e&&!e.ys().Ki()?e.ys():null}zs(e,r,s){this.Ys(e,r,s)&&this.Ns()}Ys(e,r,s){const n=this.bs,i=this.Ss,a=this.ds,l=this.fs,c=this.Pt,d=this.qs(s);this.fs=e,this.bs=isNaN(e)?NaN:this.ts.Et().qt(e),this.Pt=s;const u=d!==null?d.zt():null;return d!==null&&u!==null?(this.ds=r,this.Ss=d.Nt(r,u)):(this.ds=NaN,this.Ss=NaN),n!==this.bs||i!==this.Ss||l!==this.fs||a!==this.ds||c!==this.Pt}Os(){const e=this.ts.js().map(s=>s.Xs().Ks()).filter(BJ),r=e.length===0?null:Math.max(...e);this.fs=r!==null?r:NaN}Hs(e,r,s){let n=e.get(r);return n===void 0&&(n=new XJ(this,r,s),e.set(r,n)),n}}function Fx(t){return t==="left"||t==="right"}class br{constructor(e){this.Zs=new Map,this.Gs=[],this.Js=e}Qs(e,r){const s=function(n,i){return n===void 0?i:{tn:Math.max(n.tn,i.tn),sn:n.sn||i.sn}}(this.Zs.get(e),r);this.Zs.set(e,s)}nn(){return this.Js}en(e){const r=this.Zs.get(e);return r===void 0?{tn:this.Js}:{tn:Math.max(this.Js,r.tn),sn:r.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(e){this.hn(),this.Gs=[{an:1,Wt:e}]}_n(e){this.un(),this.Gs.push({an:5,Wt:e})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(e){this.hn(),this.Gs.push({an:2,Wt:e})}fn(e){this.hn(),this.Gs.push({an:3,Wt:e})}pn(){return this.Gs}vn(e){for(const r of e.Gs)this.mn(r);this.Js=Math.max(this.Js,e.Js),e.Zs.forEach((r,s)=>{this.Qs(s,r)})}static wn(){return new br(2)}static gn(){return new br(3)}mn(e){switch(e.an){case 0:this.rn();break;case 1:this.ln(e.Wt);break;case 2:this.dn(e.Wt);break;case 3:this.fn(e.Wt);break;case 4:this.cn();break;case 5:this._n(e.Wt);break;case 6:this.un()}}un(){const e=this.Gs.findIndex(r=>r.an===5);e!==-1&&this.Gs.splice(e,1)}}class ET{formatTickmarks(e){return e.map(r=>this.format(r))}}const VN=".";function _i(t,e){if(!Dc(t))return"n/a";if(!ah(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class Px extends ET{constructor(e,r){if(super(),r||(r=1),Dc(e)&&ah(e)||(e=100),e<0)throw new TypeError("invalid base");this.Yi=e,this.Mn=r,this.bn()}format(e){const r=e<0?"−":"";return e=Math.abs(e),r+this.Sn(e)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let e=this.Yi;for(;e>1;)e/=10,this.xn++}}Sn(e){const r=this.Yi/this.Mn;let s=Math.floor(e),n="";const i=this.xn!==void 0?this.xn:NaN;if(r>1){let a=+(Math.round(e*r)-s*r).toFixed(this.xn);a>=r&&(a-=r,s+=1),n=VN+_i(+a.toFixed(this.xn)*this.Mn,i)}else s=Math.round(s*r)/r,i>0&&(n=VN+_i(0,i));return s.toFixed(0)+n}}class ST extends Px{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class eee extends ET{constructor(e){super(),this.Cn=e}format(e){let r="";return e<0&&(r="-",e=-e),e<995?r+this.Pn(e):e<999995?r+this.Pn(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),r+this.Pn(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),r+this.Pn(e/1e9)+"B")}Pn(e){let r;const s=Math.pow(10,this.Cn);return r=(e=Math.round(e*s)/s)>=1e-15&&e<1?e.toFixed(this.Cn).replace(/\.?0+$/,""):String(e),r.replace(/(\.[1-9]*)0+$/,(n,i)=>i)}}const tee=/[2-9]/g;class Rm{constructor(e=50){this.kn=0,this.yn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=e}In(){this.kn=0,this.Dn.clear(),this.yn=1,this.Tn=1,this.Rn={}}Vi(e,r,s){return this.Bn(e,r,s).width}Di(e,r,s){const n=this.Bn(e,r,s);return((n.actualBoundingBoxAscent||0)-(n.actualBoundingBoxDescent||0))/2}Bn(e,r,s){const n=s||tee,i=String(r).replace(n,"0");if(this.Dn.has(i))return bs(this.Dn.get(i)).En;if(this.kn===this.Vn){const l=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(l),this.Tn++,this.kn--}e.save(),e.textBaseline="middle";const a=e.measureText(i);return e.restore(),a.width===0&&r.length||(this.Dn.set(i,{En:a,An:this.yn}),this.Rn[this.yn]=i,this.kn++,this.yn++),a}}class ree{constructor(e){this.zn=null,this.M=null,this.Ln="right",this.On=e}Nn(e,r,s){this.zn=e,this.M=r,this.Ln=s}nt(e){this.M!==null&&this.zn!==null&&this.zn.nt(e,this.M,this.On,this.Ln)}}class CT{constructor(e,r,s){this.Fn=e,this.On=new Rm(50),this.Wn=r,this.O=s,this.F=-1,this.Gt=new ree(this.On)}Tt(){const e=this.O.Hn(this.Wn);if(e===null)return null;const r=e.Un(this.Wn)?e.$n():this.Wn.Ft();if(r===null)return null;const s=e.qn(r);if(s==="overlay")return null;const n=this.O.Yn();return n.P!==this.F&&(this.F=n.P,this.On.In()),this.Gt.Nn(this.Fn.$i(),n,s),this.Gt}}class see extends gl{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}jn(e,r){var a;if(!((a=this.Yt)!=null&&a.Vt))return null;const{ut:s,ct:n,Kn:i}=this.Yt;return r>=s-n-7&&r<=s+n+7?{Xn:this.Yt,Kn:i}:null}et({context:e,bitmapSize:r,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.Yt===null||this.Yt.Vt===!1)return;const i=Math.round(this.Yt.ut*n);i<0||i>r.height||(e.lineCap="butt",e.strokeStyle=this.Yt.R,e.lineWidth=Math.floor(this.Yt.ct*s),ih(e,this.Yt.Xt),wT(e,i,0,r.width))}}class Mb{constructor(e){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new see,this.xt=!0,this.Jn=e,this.Qn=e.Qt(),this.Gn.ht(this.Zn)}kt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}}class nee extends Mb{constructor(e){super(e)}te(){this.Zn.Vt=!1;const e=this.Jn.Ft(),r=e.ie().ie;if(r!==2&&r!==3)return;const s=this.Jn.N();if(!s.baseLineVisible||!this.Jn.Vt())return;const n=this.Jn.zt();n!==null&&(this.Zn.Vt=!0,this.Zn.ut=e.Nt(n.Wt,n.Wt),this.Zn.R=s.baseLineColor,this.Zn.ct=s.baseLineWidth,this.Zn.Xt=s.baseLineStyle)}}class iee extends gl{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}se(){return this.Yt}et({context:e,horizontalPixelRatio:r,verticalPixelRatio:s}){const n=this.Yt;if(n===null)return;const i=Math.max(1,Math.floor(r)),a=i%2/2,l=Math.round(n.ne.x*r)+a,c=n.ne.y*s;e.fillStyle=n.ee,e.beginPath();const d=Math.max(2,1.5*n.re)*r;e.arc(l,c,d,0,2*Math.PI,!1),e.fill(),e.fillStyle=n.he,e.beginPath(),e.arc(l,c,n.ft*r,0,2*Math.PI,!1),e.fill(),e.lineWidth=i,e.strokeStyle=n.ae,e.beginPath(),e.arc(l,c,n.ft*r+i/2,0,2*Math.PI,!1),e.stroke()}}const aee=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}];class oee{constructor(e){this.Gt=new iee,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=e}Me(){this.we=this.me-1,this.kt()}be(){if(this.kt(),this.ge.N().lastPriceAnimation===2){const e=performance.now(),r=this.we-e;if(r>0)return void(r<650&&(this.we+=2600));this.me=e,this.we=e+2600}}kt(){this.xt=!0}Se(){this.ve=!0}Vt(){return this.ge.N().lastPriceAnimation!==0}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);const e=this.ge.Qt().Et(),r=e.Pe(),s=this.ge.zt();if(r===null||s===null)return;const n=this.ge.ke(!0);if(n.ye||!r.Te(n.Re))return;const i={x:e.qt(n.Re),y:this.ge.Ft().Nt(n.gt,s.Wt)},a=n.R,l=this.ge.N().lineWidth,c=this.De(this.Ve(),a);this.Gt.ht({ee:a,re:l,he:c.he,ae:c.ae,ft:c.ft,ne:i})}Ce(){const e=this.Gt.se();if(e!==null){const r=this.De(this.Ve(),e.ee);e.he=r.he,e.ae=r.ae,e.ft=r.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Ie(e,r,s,n){const i=s+(n-s)*r;return this.ge.Qt().Xi().j(e,i)}De(e,r){const s=e%2600/2600;let n;for(const d of aee)if(s>=d.le&&s<=d.oe){n=d;break}kr(n!==void 0,"Last price animation internal logic error");const i=(s-n.le)/(n.oe-n.le);return{he:this.Ie(r,i,n.ce,n.de),ae:this.Ie(r,i,n.fe,n.pe),ft:(a=i,l=n._e,c=n.ue,l+(c-l)*a)};var a,l,c}}class lee extends Mb{constructor(e){super(e)}te(){const e=this.Zn;e.Vt=!1;const r=this.Jn.N();if(!r.priceLineVisible||!this.Jn.Vt())return;const s=this.Jn.ke(r.priceLineSource===0);s.ye||(e.Vt=!0,e.ut=s.Bi,e.R=this.Jn.Be(s.R),e.ct=r.priceLineWidth,e.Xt=r.priceLineStyle)}}class cee extends Ax{constructor(e){super(),this.Jt=e}qi(e,r,s){e.Vt=!1,r.Vt=!1;const n=this.Jt;if(!n.Vt())return;const i=n.N(),a=i.lastValueVisible,l=n.Ee()!=="",c=i.seriesLastValueMode===0,d=n.ke(!1);if(d.ye)return;a&&(e.ri=this.Ae(d,a,c),e.Vt=e.ri.length!==0),(l||c)&&(r.ri=this.ze(d,a,l,c),r.Vt=r.ri.length>0);const u=n.Be(d.R),h=this.Jt.Qt().Xi().X(u);s.Z=h.Z,s.Bi=d.Bi,r.Ht=n.Qt().Ut(d.Bi/n.Ft().$t()),e.Ht=u,e.R=h.G,r.R=h.G}ze(e,r,s,n){let i="";const a=this.Jt.Ee();return s&&a.length!==0&&(i+=`${a} `),r&&n&&(i+=this.Jt.Ft().Le()?e.Oe:e.Ne),i.trim()}Ae(e,r,s){return r?s?this.Jt.Ft().Le()?e.Ne:e.Oe:e.ri:""}}function WN(t,e,r,s){const n=Number.isFinite(e),i=Number.isFinite(r);return n&&i?t(e,r):n||i?n?e:r:s}class ss{constructor(e,r){this.Fe=e,this.We=r}He(e){return e!==null&&this.Fe===e.Fe&&this.We===e.We}Ue(){return new ss(this.Fe,this.We)}$e(){return this.Fe}qe(){return this.We}Ye(){return this.We-this.Fe}Ki(){return this.We===this.Fe||Number.isNaN(this.We)||Number.isNaN(this.Fe)}vn(e){return e===null?this:new ss(WN(Math.min,this.$e(),e.$e(),-1/0),WN(Math.max,this.qe(),e.qe(),1/0))}je(e){if(!Dc(e)||this.We-this.Fe===0)return;const r=.5*(this.We+this.Fe);let s=this.We-r,n=this.Fe-r;s*=e,n*=e,this.We=r+s,this.Fe=r+n}Ke(e){Dc(e)&&(this.We+=e,this.Fe+=e)}Xe(){return{minValue:this.Fe,maxValue:this.We}}static Ze(e){return e===null?null:new ss(e.minValue,e.maxValue)}}class Dm{constructor(e,r){this.Ge=e,this.Je=r||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:this.Ge===null?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(e){return e===null?null:new Dm(ss.Ze(e.priceRange),e.margins)}}class dee extends Mb{constructor(e,r){super(e),this.ir=r}te(){const e=this.Zn;e.Vt=!1;const r=this.ir.N();if(!this.Jn.Vt()||!r.lineVisible)return;const s=this.ir.sr();s!==null&&(e.Vt=!0,e.ut=s,e.R=r.color,e.ct=r.lineWidth,e.Xt=r.lineStyle,e.Kn=this.ir.N().id)}}class uee extends Ax{constructor(e,r){super(),this.ge=e,this.ir=r}qi(e,r,s){e.Vt=!1,r.Vt=!1;const n=this.ir.N(),i=n.axisLabelVisible,a=n.title!=="",l=this.ge;if(!i||!l.Vt())return;const c=this.ir.sr();if(c===null)return;a&&(r.ri=n.title,r.Vt=!0),r.Ht=l.Qt().Ut(c/l.Ft().$t()),e.ri=this.nr(n.price),e.Vt=!0;const d=this.ge.Qt().Xi().X(n.axisLabelColor||n.color);s.Z=d.Z;const u=n.axisLabelTextColor||d.G;e.R=u,r.R=u,s.Bi=c}nr(e){const r=this.ge.zt();return r===null?"":this.ge.Ft().Zi(e,r.Wt)}}class hee{constructor(e,r){this.ge=e,this.Ps=r,this.er=new dee(e,this),this.Fn=new uee(e,this),this.rr=new CT(this.Fn,e,e.Qt())}hr(e){Ts(this.Ps,e),this.kt(),this.ge.Qt().ar()}N(){return this.Ps}lr(){return this.er}_r(){return this.rr}ur(){return this.Fn}kt(){this.er.kt(),this.Fn.kt()}sr(){const e=this.ge,r=e.Ft();if(e.Qt().Et().Ki()||r.Ki())return null;const s=e.zt();return s===null?null:r.Nt(this.Ps.price,s.Wt)}}class fee extends jT{constructor(e){super(),this.ts=e}Qt(){return this.ts}}const mee={Bar:(t,e,r,s)=>{const n=e.upColor,i=e.downColor,a=we(t(r,s)),l=ka(a.Wt[0])<=ka(a.Wt[3]);return{cr:a.R??(l?n:i)}},Candlestick:(t,e,r,s)=>{const n=e.upColor,i=e.downColor,a=e.borderUpColor,l=e.borderDownColor,c=e.wickUpColor,d=e.wickDownColor,u=we(t(r,s)),h=ka(u.Wt[0])<=ka(u.Wt[3]);return{cr:u.R??(h?n:i),dr:u.Ht??(h?a:l),pr:u.vr??(h?c:d)}},Custom:(t,e,r,s)=>({cr:we(t(r,s)).R??e.color}),Area:(t,e,r,s)=>{const n=we(t(r,s));return{cr:n.vt??e.lineColor,vt:n.vt??e.lineColor,mr:n.mr??e.topColor,wr:n.wr??e.bottomColor}},Baseline:(t,e,r,s)=>{const n=we(t(r,s));return{cr:n.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,gr:n.gr??e.topLineColor,Mr:n.Mr??e.bottomLineColor,br:n.br??e.topFillColor1,Sr:n.Sr??e.topFillColor2,Cr:n.Cr??e.bottomFillColor1,Pr:n.Pr??e.bottomFillColor2}},Line:(t,e,r,s)=>{const n=we(t(r,s));return{cr:n.R??e.color,vt:n.R??e.color}},Histogram:(t,e,r,s)=>({cr:we(t(r,s)).R??e.color})};class xee{constructor(e){this.kr=(r,s)=>s!==void 0?s.Wt:this.ge.Xs().yr(r),this.ge=e,this.Tr=mee[e.Rr()]}Dr(e,r){return this.Tr(this.kr,this.ge.N(),e,r)}}function TT(t,e,r,s,n=0,i=e.length){let a=i-n;for(;0<a;){const l=a>>1,c=n+l;s(e[c],r)===t?(n=c+1,a-=l+1):a=l}return n}const Oc=TT.bind(null,!0),AT=TT.bind(null,!1);var HN;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(HN||(HN={}));const Wi=30;class pee{constructor(){this.Vr=[],this.Ir=new Map,this.Br=new Map,this.Er=[]}Ar(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return this.zr()===0}Te(e){return this.Nr(e,0)!==null}yr(e){return this.Fr(e)}Fr(e,r=0){const s=this.Nr(e,r);return s===null?null:{...this.Wr(s),Re:this.Or(s)}}Hr(){return this.Vr}Ur(e,r,s){if(this.Ki())return null;let n=null;for(const i of s)n=H0(n,this.$r(e,r,i));return n}ht(e){this.Br.clear(),this.Ir.clear(),this.Vr=e,this.Er=e.map(r=>r.Re)}qr(){return this.Er}Or(e){return this.Vr[e].Re}Wr(e){return this.Vr[e]}Nr(e,r){const s=this.Yr(e);if(s===null&&r!==0)switch(r){case-1:return this.jr(e);case 1:return this.Kr(e);default:throw new TypeError("Unknown search mode")}return s}jr(e){let r=this.Xr(e);return r>0&&(r-=1),r!==this.Vr.length&&this.Or(r)<e?r:null}Kr(e){const r=this.Zr(e);return r!==this.Vr.length&&e<this.Or(r)?r:null}Yr(e){const r=this.Xr(e);return r===this.Vr.length||e<this.Vr[r].Re?null:r}Xr(e){return Oc(this.Vr,e,(r,s)=>r.Re<s)}Zr(e){return AT(this.Vr,e,(r,s)=>r.Re>s)}Gr(e,r,s){let n=null;for(let i=e;i<r;i++){const a=this.Vr[i].Wt[s];Number.isNaN(a)||(n===null?n={Jr:a,Qr:a}:(a<n.Jr&&(n.Jr=a),a>n.Qr&&(n.Qr=a)))}return n}$r(e,r,s){if(this.Ki())return null;let n=null;const i=we(this.Lr()),a=we(this.Ks()),l=Math.max(e,i),c=Math.min(r,a),d=Math.ceil(l/Wi)*Wi,u=Math.max(d,Math.floor(c/Wi)*Wi);{const f=this.Xr(l),m=this.Zr(Math.min(c,d,r));n=H0(n,this.Gr(f,m,s))}let h=this.Ir.get(s);h===void 0&&(h=new Map,this.Ir.set(s,h));for(let f=Math.max(d+1,l);f<u;f+=Wi){const m=Math.floor(f/Wi);let x=h.get(m);if(x===void 0){const p=this.Xr(m*Wi),g=this.Zr((m+1)*Wi-1);x=this.Gr(p,g,s),h.set(m,x)}n=H0(n,x)}{const f=this.Xr(u),m=this.Zr(c);n=H0(n,this.Gr(f,m,s))}return n}}function H0(t,e){return t===null?e:e===null?t:{Jr:Math.min(t.Jr,e.Jr),Qr:Math.max(t.Qr,e.Qr)}}class gee{constructor(e){this.th=e}nt(e,r,s){this.th.draw(e)}ih(e,r,s){var n,i;(i=(n=this.th).drawBackground)==null||i.call(n,e)}}class vee{constructor(e){this.Dn=null,this.sh=e}Tt(){var s;const e=this.sh.renderer();if(e===null)return null;if(((s=this.Dn)==null?void 0:s.nh)===e)return this.Dn.eh;const r=new gee(e);return this.Dn={nh:e,eh:r},r}rh(){var e,r;return((r=(e=this.sh).zOrder)==null?void 0:r.call(e))??"normal"}}class FT{constructor(e){this.hh=null,this.ah=e}oh(){return this.ah}Ns(){var e,r;(r=(e=this.ah).updateAllViews)==null||r.call(e)}Fs(){var s,n,i;const e=((n=(s=this.ah).paneViews)==null?void 0:n.call(s))??[];if(((i=this.hh)==null?void 0:i.nh)===e)return this.hh.eh;const r=e.map(a=>new vee(a));return this.hh={nh:e,eh:r},r}jn(e,r){var s,n;return((n=(s=this.ah).hitTest)==null?void 0:n.call(s,e,r))??null}}let yee=class extends FT{us(){return[]}};class bee{constructor(e){this.th=e}nt(e,r,s){this.th.draw(e)}ih(e,r,s){var n,i;(i=(n=this.th).drawBackground)==null||i.call(n,e)}}class YN{constructor(e){this.Dn=null,this.sh=e}Tt(){var s;const e=this.sh.renderer();if(e===null)return null;if(((s=this.Dn)==null?void 0:s.nh)===e)return this.Dn.eh;const r=new bee(e);return this.Dn={nh:e,eh:r},r}rh(){var e,r;return((r=(e=this.sh).zOrder)==null?void 0:r.call(e))??"normal"}}function PT(t){var e,r,s;return{ri:t.text(),Bi:t.coordinate(),Ii:(e=t.fixedCoordinate)==null?void 0:e.call(t),R:t.textColor(),Z:t.backColor(),Vt:((r=t.visible)==null?void 0:r.call(t))??!0,pi:((s=t.tickVisible)==null?void 0:s.call(t))??!0}}class wee{constructor(e,r){this.Gt=new NT,this._h=e,this.uh=r}Tt(){return this.Gt.ht({Qi:this.uh.Qi(),...PT(this._h)}),this.Gt}}class kee extends Ax{constructor(e,r){super(),this._h=e,this.Yi=r}qi(e,r,s){const n=PT(this._h);s.Z=n.Z,e.R=n.R;const i=2/12*this.Yi.P();s.Ti=i,s.Ri=i,s.Bi=n.Bi,s.Ii=n.Ii,e.ri=n.ri,e.Vt=n.Vt,e.pi=n.pi}}class _ee extends FT{constructor(e,r){super(e),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=r}cs(){var n,i,a;const e=((i=(n=this.ah).timeAxisViews)==null?void 0:i.call(n))??[];if(((a=this.dh)==null?void 0:a.nh)===e)return this.dh.eh;const r=this.ge.Qt().Et(),s=e.map(l=>new wee(l,r));return this.dh={nh:e,eh:s},s}Ws(){var n,i,a;const e=((i=(n=this.ah).priceAxisViews)==null?void 0:i.call(n))??[];if(((a=this.fh)==null?void 0:a.nh)===e)return this.fh.eh;const r=this.ge.Ft(),s=e.map(l=>new kee(l,r));return this.fh={nh:e,eh:s},s}wh(){var s,n,i;const e=((n=(s=this.ah).priceAxisPaneViews)==null?void 0:n.call(s))??[];if(((i=this.ph)==null?void 0:i.nh)===e)return this.ph.eh;const r=e.map(a=>new YN(a));return this.ph={nh:e,eh:r},r}gh(){var s,n,i;const e=((n=(s=this.ah).timeAxisPaneViews)==null?void 0:n.call(s))??[];if(((i=this.mh)==null?void 0:i.nh)===e)return this.mh.eh;const r=e.map(a=>new YN(a));return this.mh={nh:e,eh:r},r}Mh(e,r){var s,n;return((n=(s=this.ah).autoscaleInfo)==null?void 0:n.call(s,e,r))??null}}function Jp(t,e,r,s){t.forEach(n=>{e(n).forEach(i=>{i.rh()===r&&s.push(i)})})}function eg(t){return t.Fs()}function Nee(t){return t.wh()}function jee(t){return t.gh()}const Eee=["Area","Line","Baseline"];class Mx extends fee{constructor(e,r,s,n,i){super(e),this.Yt=new pee,this.er=new lee(this),this.bh=[],this.Sh=new nee(this),this.xh=null,this.Ch=null,this.Ph=null,this.kh=[],this.Ps=s,this.yh=r;const a=new cee(this);this.vs=[a],this.rr=new CT(a,this,e),Eee.includes(this.yh)&&(this.xh=new oee(this)),this.Th(),this.sh=n(this,this.Qt(),i)}m(){this.Ph!==null&&clearTimeout(this.Ph)}Be(e){return this.Ps.priceLineColor||e}ke(e){const r={ye:!0},s=this.Ft();if(this.Qt().Et().Ki()||s.Ki()||this.Yt.Ki())return r;const n=this.Qt().Et().Pe(),i=this.zt();if(n===null||i===null)return r;let a,l;if(e){const h=this.Yt.Ar();if(h===null)return r;a=h,l=h.Re}else{const h=this.Yt.Fr(n.bi(),-1);if(h===null||(a=this.Yt.yr(h.Re),a===null))return r;l=h.Re}const c=a.Wt[3],d=this.Rh().Dr(l,{Wt:a}),u=s.Nt(c,i.Wt);return{ye:!1,gt:c,ri:s.Zi(c,i.Wt),Oe:s.Dh(c),Ne:s.Vh(c,i.Wt),R:d.cr,Bi:u,Re:l}}Rh(){return this.Ch!==null||(this.Ch=new xee(this)),this.Ch}N(){return this.Ps}hr(e){const r=e.priceScaleId;r!==void 0&&r!==this.Ps.priceScaleId&&this.Qt().Ih(this,r),Ts(this.Ps,e),e.priceFormat!==void 0&&(this.Th(),this.Qt().Bh()),this.Qt().Eh(this),this.Qt().Ah(),this.sh.kt("options")}ht(e,r){this.Yt.ht(e),this.sh.kt("data"),this.xh!==null&&(r&&r.zh?this.xh.be():e.length===0&&this.xh.Me());const s=this.Qt().Hn(this);this.Qt().Lh(s),this.Qt().Eh(this),this.Qt().Ah(),this.Qt().ar()}Oh(e){const r=new hee(this,e);return this.bh.push(r),this.Qt().Eh(this),r}Nh(e){const r=this.bh.indexOf(e);r!==-1&&this.bh.splice(r,1),this.Qt().Eh(this)}Fh(){return this.bh}Rr(){return this.yh}zt(){const e=this.Wh();return e===null?null:{Wt:e.Wt[3],Hh:e.wt}}Wh(){const e=this.Qt().Et().Pe();if(e===null)return null;const r=e.Uh();return this.Yt.Fr(r,1)}Xs(){return this.Yt}$h(e){const r=this.Yt.yr(e);return r===null?null:this.yh==="Bar"||this.yh==="Candlestick"||this.yh==="Custom"?{qh:r.Wt[0],Yh:r.Wt[1],jh:r.Wt[2],Kh:r.Wt[3]}:r.Wt[3]}Xh(e){const r=[];Jp(this.kh,eg,"top",r);const s=this.xh;return s!==null&&s.Vt()&&(this.Ph===null&&s.xe()&&(this.Ph=setTimeout(()=>{this.Ph=null,this.Qt().Zh()},0)),s.Se(),r.unshift(s)),r}Fs(){const e=[];this.Gh()||e.push(this.Sh),e.push(this.sh,this.er);const r=this.bh.map(s=>s.lr());return e.push(...r),Jp(this.kh,eg,"normal",e),e}Jh(){return this.Qh(eg,"bottom")}ta(e){return this.Qh(Nee,e)}ia(e){return this.Qh(jee,e)}sa(e,r){return this.kh.map(s=>s.jn(e,r)).filter(s=>s!==null)}us(){return[this.rr,...this.bh.map(e=>e._r())]}Ws(e,r){if(r!==this.es&&!this.Gh())return[];const s=[...this.vs];for(const n of this.bh)s.push(n.ur());return this.kh.forEach(n=>{s.push(...n.Ws())}),s}cs(){const e=[];return this.kh.forEach(r=>{e.push(...r.cs())}),e}Mh(e,r){if(this.Ps.autoscaleInfoProvider!==void 0){const s=this.Ps.autoscaleInfoProvider(()=>{const n=this.na(e,r);return n===null?null:n.Xe()});return Dm.Ze(s)}return this.na(e,r)}ea(){return this.Ps.priceFormat.minMove}ra(){return this.ha}Ns(){var e;this.sh.kt();for(const r of this.vs)r.kt();for(const r of this.bh)r.kt();this.er.kt(),this.Sh.kt(),(e=this.xh)==null||e.kt(),this.kh.forEach(r=>r.Ns())}Ft(){return we(super.Ft())}At(e){if(!((this.yh==="Line"||this.yh==="Area"||this.yh==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const r=this.Yt.yr(e);return r===null?null:{gt:r.Wt[3],ft:this.aa(),Ht:this.la(),Ot:this.oa(),Lt:this._a(e)}}Ee(){return this.Ps.title}Vt(){return this.Ps.visible}ua(e){this.kh.push(new _ee(e,this))}ca(e){this.kh=this.kh.filter(r=>r.oh()!==e)}da(){if(this.yh==="Custom")return e=>this.sh.fa(e)}pa(){if(this.yh==="Custom")return e=>this.sh.va(e)}ma(){return this.Yt.qr()}Gh(){return!Fx(this.Ft().wa())}na(e,r){if(!ah(e)||!ah(r)||this.Yt.Ki())return null;const s=this.yh==="Line"||this.yh==="Area"||this.yh==="Baseline"||this.yh==="Histogram"?[3]:[2,1],n=this.Yt.Ur(e,r,s);let i=n!==null?new ss(n.Jr,n.Qr):null,a=null;if(this.Rr()==="Histogram"){const l=this.Ps.base,c=new ss(l,l);i=i!==null?i.vn(c):c}return this.kh.forEach(l=>{const c=l.Mh(e,r);if(c!=null&&c.priceRange){const d=new ss(c.priceRange.minValue,c.priceRange.maxValue);i=i!==null?i.vn(d):d}c!=null&&c.margins&&(a=c.margins)}),new Dm(i,a)}aa(){switch(this.yh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}la(){switch(this.yh){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}oa(){switch(this.yh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}_a(e){switch(this.yh){case"Line":case"Area":case"Baseline":{const r=this.Ps.crosshairMarkerBackgroundColor;if(r.length!==0)return r}}return this.Rh().Dr(e).cr}Th(){switch(this.Ps.priceFormat.type){case"custom":{const e=this.Ps.priceFormat.formatter;this.ha={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(r=>r.map(e))};break}case"volume":this.ha=new eee(this.Ps.priceFormat.precision);break;case"percent":this.ha=new ST(this.Ps.priceFormat.precision);break;default:{const e=Math.pow(10,this.Ps.priceFormat.precision);this.ha=new Px(e,this.Ps.priceFormat.minMove*e)}}this.es!==null&&this.es.ga()}Qh(e,r){const s=[];return Jp(this.kh,e,r,s),s}}const See=[3],Cee=[0,1,2,3];class Tee{constructor(e){this.Ps=e}Ma(e,r,s){let n=e;if(this.Ps.mode===0)return n;const i=s.ys(),a=i.zt();if(a===null)return n;const l=i.Nt(e,a),c=s.ba().filter(u=>u instanceof Mx).reduce((u,h)=>{if(s.Un(h)||!h.Vt())return u;const f=h.Ft(),m=h.Xs();if(f.Ki()||!m.Te(r))return u;const x=m.yr(r);if(x===null)return u;const p=ka(h.zt()),g=this.Ps.mode===3?Cee:See;return u.concat(g.map(v=>f.Nt(x.Wt[v],p.Wt)))},[]);if(c.length===0)return n;c.sort((u,h)=>Math.abs(u-l)-Math.abs(h-l));const d=c[0];return n=i.Ts(d,a),n}}function mu(t,e,r){return Math.min(Math.max(t,e),r)}function Y0(t,e,r){return e-t<=r}class Aee extends gl{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}et({context:e,bitmapSize:r,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.Yt===null)return;const i=Math.max(1,Math.floor(s));e.lineWidth=i,function(a,l){a.save(),a.lineWidth%2&&a.translate(.5,.5),l(),a.restore()}(e,()=>{const a=we(this.Yt);if(a.Sa){e.strokeStyle=a.xa,ih(e,a.Ca),e.beginPath();for(const l of a.Pa){const c=Math.round(l.ka*s);e.moveTo(c,-i),e.lineTo(c,r.height+i)}e.stroke()}if(a.ya){e.strokeStyle=a.Ta,ih(e,a.Ra),e.beginPath();for(const l of a.Da){const c=Math.round(l.ka*n);e.moveTo(-i,c),e.lineTo(r.width+i,c)}e.stroke()}})}}class Fee{constructor(e){this.Gt=new Aee,this.xt=!0,this.Pt=e}kt(){this.xt=!0}Tt(){if(this.xt){const e=this.Pt.Qt().N().grid,r={ya:e.horzLines.visible,Sa:e.vertLines.visible,Ta:e.horzLines.color,xa:e.vertLines.color,Ra:e.horzLines.style,Ca:e.vertLines.style,Da:this.Pt.ys().Va(),Pa:(this.Pt.Qt().Et().Va()||[]).map(s=>({ka:s.coord}))};this.Gt.ht(r),this.xt=!1}return this.Gt}}class Pee{constructor(e){this.sh=new Fee(e)}lr(){return this.sh}}const tg={Ia:4,Ba:1e-4};function Vl(t,e){const r=100*(t-e)/e;return e<0?-r:r}function Mee(t,e){const r=Vl(t.$e(),e),s=Vl(t.qe(),e);return new ss(r,s)}function xu(t,e){const r=100*(t-e)/e+100;return e<0?-r:r}function Ree(t,e){const r=xu(t.$e(),e),s=xu(t.qe(),e);return new ss(r,s)}function Om(t,e){const r=Math.abs(t);if(r<1e-15)return 0;const s=Math.log10(r+e.Ba)+e.Ia;return t<0?-s:s}function pu(t,e){const r=Math.abs(t);if(r<1e-15)return 0;const s=Math.pow(10,r-e.Ia)-e.Ba;return t<0?-s:s}function Nd(t,e){if(t===null)return null;const r=Om(t.$e(),e),s=Om(t.qe(),e);return new ss(r,s)}function Ud(t,e){if(t===null)return null;const r=pu(t.$e(),e),s=pu(t.qe(),e);return new ss(r,s)}function rg(t){if(t===null)return tg;const e=Math.abs(t.qe()-t.$e());if(e>=1||e<1e-15)return tg;const r=Math.ceil(Math.abs(Math.log10(e))),s=tg.Ia+r;return{Ia:s,Ba:1/Math.pow(10,s)}}class sg{constructor(e,r){if(this.Ea=e,this.Aa=r,function(s){if(s<0)return!1;for(let n=s;n>1;n/=10)if(n%10!=0)return!1;return!0}(this.Ea))this.za=[2,2.5,2];else{this.za=[];for(let s=this.Ea;s!==1;){if(s%2==0)this.za.push(2),s/=2;else{if(s%5!=0)throw new Error("unexpected base");this.za.push(2,2.5),s/=5}if(this.za.length>100)throw new Error("something wrong with base")}}}La(e,r,s){const n=this.Ea===0?0:1/this.Ea;let i=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-r)))),a=0,l=this.Aa[0];for(;;){const h=Y0(i,n,1e-14)&&i>n+1e-14,f=Y0(i,s*l,1e-14),m=Y0(i,1,1e-14);if(!(h&&f&&m))break;i/=l,l=this.Aa[++a%this.Aa.length]}if(i<=n+1e-14&&(i=n),i=Math.max(1,i),this.za.length>0&&(c=i,d=1,u=1e-14,Math.abs(c-d)<u))for(a=0,l=this.za[0];Y0(i,s*l,1e-14)&&i>n+1e-14;)i/=l,l=this.za[++a%this.za.length];var c,d,u;return i}}class qN{constructor(e,r,s,n){this.Oa=[],this.Yi=e,this.Ea=r,this.Na=s,this.Fa=n}La(e,r){if(e<r)throw new Error("high < low");const s=this.Yi.$t(),n=(e-r)*this.Wa()/s,i=new sg(this.Ea,[2,2.5,2]),a=new sg(this.Ea,[2,2,2.5]),l=new sg(this.Ea,[2.5,2,2]),c=[];return c.push(i.La(e,r,n),a.La(e,r,n),l.La(e,r,n)),function(d){if(d.length<1)throw Error("array is empty");let u=d[0];for(let h=1;h<d.length;++h)d[h]<u&&(u=d[h]);return u}(c)}Ha(){const e=this.Yi,r=e.zt();if(r===null)return void(this.Oa=[]);const s=e.$t(),n=this.Na(s-1,r),i=this.Na(0,r),a=this.Yi.N().entireTextOnly?this.Ua()/2:0,l=a,c=s-1-a,d=Math.max(n,i),u=Math.min(n,i);if(d===u)return void(this.Oa=[]);const h=this.La(d,u);if(this.$a(r,h,d,u,l,c),e.qa()&&this.Ya(h,u,d)){const x=this.Yi.ja();this.Ka(r,h,l,c,x,2*x)}const f=this.Oa.map(x=>x.Xa),m=this.Yi.Za(f);for(let x=0;x<this.Oa.length;x++)this.Oa[x].Ga=m[x]}Va(){return this.Oa}Ua(){return this.Yi.P()}Wa(){return Math.ceil(2.5*this.Ua())}$a(e,r,s,n,i,a){const l=this.Oa,c=this.Yi;let d=s%r;d+=d<0?r:0;const u=s>=n?1:-1;let h=null,f=0;for(let m=s-d;m>n;m-=r){const x=this.Fa(m,e,!0);h!==null&&Math.abs(x-h)<this.Wa()||x<i||x>a||(f<l.length?(l[f].ka=x,l[f].Ga=c.Ja(m),l[f].Xa=m):l.push({ka:x,Ga:c.Ja(m),Xa:m}),f++,h=x,c.Qa()&&(r=this.La(m*u,n)))}l.length=f}Ka(e,r,s,n,i,a){const l=this.Oa,c=this.tl(e,s,i,a),d=this.tl(e,n,-a,-i),u=this.Fa(0,e,!0)-this.Fa(r,e,!0);l.length>0&&l[0].ka-c.ka<u/2&&l.shift(),l.length>0&&d.ka-l[l.length-1].ka<u/2&&l.pop(),l.unshift(c),l.push(d)}tl(e,r,s,n){const i=(s+n)/2,a=this.Na(r+s,e),l=this.Na(r+n,e),c=Math.min(a,l),d=Math.max(a,l),u=Math.max(.1,this.La(d,c)),h=this.Na(r+i,e),f=h-h%u,m=this.Fa(f,e,!0);return{Ga:this.Yi.Ja(f),ka:m,Xa:f}}Ya(e,r,s){let n=ka(this.Yi.Qe());return this.Yi.Qa()&&(n=Ud(n,this.Yi.il())),n.$e()-r<e&&s-n.qe()<e}}function MT(t){return t.slice().sort((e,r)=>we(e.hs())-we(r.hs()))}var GN;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(GN||(GN={}));const KN=new ST,XN=new Px(100,1);class Dee{constructor(e,r,s,n,i){this.sl=0,this.nl=null,this.Ge=null,this.el=null,this.rl={hl:!1,al:null},this.ll=!1,this.ol=0,this._l=0,this.ul=new Gt,this.cl=new Gt,this.dl=[],this.fl=null,this.pl=null,this.vl=null,this.ml=null,this.wl=null,this.ha=XN,this.gl=rg(null),this.Ml=e,this.Ps=r,this.bl=s,this.Sl=n,this.xl=i,this.Cl=new qN(this,100,this.Pl.bind(this),this.kl.bind(this))}wa(){return this.Ml}N(){return this.Ps}hr(e){if(Ts(this.Ps,e),this.ga(),e.mode!==void 0&&this.yl({ie:e.mode}),e.scaleMargins!==void 0){const r=bs(e.scaleMargins.top),s=bs(e.scaleMargins.bottom);if(r<0||r>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${r}`);if(s<0||s>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${s}`);if(r+s>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${r+s}`);this.Tl(),this.vl=null}}Rl(){return this.Ps.autoScale}Dl(){return this.ll}Qa(){return this.Ps.mode===1}Le(){return this.Ps.mode===2}Vl(){return this.Ps.mode===3}il(){return this.gl}ie(){return{sn:this.Ps.autoScale,Il:this.Ps.invertScale,ie:this.Ps.mode}}yl(e){const r=this.ie();let s=null;e.sn!==void 0&&(this.Ps.autoScale=e.sn),e.ie!==void 0&&(this.Ps.mode=e.ie,e.ie!==2&&e.ie!==3||(this.Ps.autoScale=!0),this.rl.hl=!1),r.ie===1&&e.ie!==r.ie&&(function(i,a){if(i===null)return!1;const l=pu(i.$e(),a),c=pu(i.qe(),a);return isFinite(l)&&isFinite(c)}(this.Ge,this.gl)?(s=Ud(this.Ge,this.gl),s!==null&&this.Bl(s)):this.Ps.autoScale=!0),e.ie===1&&e.ie!==r.ie&&(s=Nd(this.Ge,this.gl),s!==null&&this.Bl(s));const n=r.ie!==this.Ps.mode;n&&(r.ie===2||this.Le())&&this.ga(),n&&(r.ie===3||this.Vl())&&this.ga(),e.Il!==void 0&&r.Il!==e.Il&&(this.Ps.invertScale=e.Il,this.El()),this.cl.p(r,this.ie())}Al(){return this.cl}P(){return this.bl.fontSize}$t(){return this.sl}zl(e){this.sl!==e&&(this.sl=e,this.Tl(),this.vl=null)}Ll(){if(this.nl)return this.nl;const e=this.$t()-this.Ol()-this.Nl();return this.nl=e,e}Qe(){return this.Fl(),this.Ge}Bl(e,r){const s=this.Ge;(r||s===null&&e!==null||s!==null&&!s.He(e))&&(this.vl=null,this.Ge=e)}Wl(e){this.Bl(e),this.Hl(e!==null)}Ki(){return this.Fl(),this.sl===0||!this.Ge||this.Ge.Ki()}Ul(e){return this.Il()?e:this.$t()-1-e}Nt(e,r){return this.Le()?e=Vl(e,r):this.Vl()&&(e=xu(e,r)),this.kl(e,r)}$l(e,r,s){this.Fl();const n=this.Nl(),i=we(this.Qe()),a=i.$e(),l=i.qe(),c=this.Ll()-1,d=this.Il(),u=c/(l-a),h=s===void 0?0:s.from,f=s===void 0?e.length:s.to,m=this.ql();for(let x=h;x<f;x++){const p=e[x],g=p.gt;if(isNaN(g))continue;let v=g;m!==null&&(v=m(p.gt,r));const b=n+u*(v-a),y=d?b:this.sl-1-b;p.ut=y}}Yl(e,r,s){this.Fl();const n=this.Nl(),i=we(this.Qe()),a=i.$e(),l=i.qe(),c=this.Ll()-1,d=this.Il(),u=c/(l-a),h=s===void 0?0:s.from,f=s===void 0?e.length:s.to,m=this.ql();for(let x=h;x<f;x++){const p=e[x];let g=p.qh,v=p.Yh,b=p.jh,y=p.Kh;m!==null&&(g=m(p.qh,r),v=m(p.Yh,r),b=m(p.jh,r),y=m(p.Kh,r));let k=n+u*(g-a),N=d?k:this.sl-1-k;p.jl=N,k=n+u*(v-a),N=d?k:this.sl-1-k,p.Kl=N,k=n+u*(b-a),N=d?k:this.sl-1-k,p.Xl=N,k=n+u*(y-a),N=d?k:this.sl-1-k,p.Zl=N}}Ts(e,r){const s=this.Pl(e,r);return this.Gl(s,r)}Gl(e,r){let s=e;return this.Le()?s=function(n,i){return i<0&&(n=-n),n/100*i+i}(s,r):this.Vl()&&(s=function(n,i){return n-=100,i<0&&(n=-n),n/100*i+i}(s,r)),s}ba(){return this.dl}Dt(){return this.pl||(this.pl=MT(this.dl)),this.pl}Jl(e){this.dl.indexOf(e)===-1&&(this.dl.push(e),this.ga(),this.Ql())}io(e){const r=this.dl.indexOf(e);if(r===-1)throw new Error("source is not attached to scale");this.dl.splice(r,1),this.dl.length===0&&(this.yl({sn:!0}),this.Bl(null)),this.ga(),this.Ql()}zt(){let e=null;for(const r of this.dl){const s=r.zt();s!==null&&(e===null||s.Hh<e.Hh)&&(e=s)}return e===null?null:e.Wt}Il(){return this.Ps.invertScale}Va(){const e=this.zt()===null;if(this.vl!==null&&(e||this.vl.so===e))return this.vl.Va;this.Cl.Ha();const r=this.Cl.Va();return this.vl={Va:r,so:e},this.ul.p(),r}no(){return this.ul}eo(e){this.Le()||this.Vl()||this.ml===null&&this.el===null&&(this.Ki()||(this.ml=this.sl-e,this.el=we(this.Qe()).Ue()))}ro(e){if(this.Le()||this.Vl()||this.ml===null)return;this.yl({sn:!1}),(e=this.sl-e)<0&&(e=0);let r=(this.ml+.2*(this.sl-1))/(e+.2*(this.sl-1));const s=we(this.el).Ue();r=Math.max(r,.1),s.je(r),this.Bl(s)}ho(){this.Le()||this.Vl()||(this.ml=null,this.el=null)}ao(e){this.Rl()||this.wl===null&&this.el===null&&(this.Ki()||(this.wl=e,this.el=we(this.Qe()).Ue()))}lo(e){if(this.Rl()||this.wl===null)return;const r=we(this.Qe()).Ye()/(this.Ll()-1);let s=e-this.wl;this.Il()&&(s*=-1);const n=s*r,i=we(this.el).Ue();i.Ke(n),this.Bl(i,!0),this.vl=null}oo(){this.Rl()||this.wl!==null&&(this.wl=null,this.el=null)}ra(){return this.ha||this.ga(),this.ha}Zi(e,r){switch(this.Ps.mode){case 2:return this._o(Vl(e,r));case 3:return this.ra().format(xu(e,r));default:return this.nr(e)}}Ja(e){switch(this.Ps.mode){case 2:return this._o(e);case 3:return this.ra().format(e);default:return this.nr(e)}}Za(e){switch(this.Ps.mode){case 2:return this.uo(e);case 3:return this.ra().formatTickmarks(e);default:return this.co(e)}}Dh(e){return this.nr(e,we(this.fl).ra())}Vh(e,r){return e=Vl(e,r),this._o(e,KN)}do(){return this.dl}fo(e){this.rl={al:e,hl:!1}}Ns(){this.dl.forEach(e=>e.Ns())}qa(){return this.Ps.ensureEdgeTickMarksVisible&&this.Rl()}ja(){return this.P()/2}ga(){this.vl=null;let e=1/0;this.fl=null;for(const s of this.dl)s.hs()<e&&(e=s.hs(),this.fl=s);let r=100;this.fl!==null&&(r=Math.round(1/this.fl.ea())),this.ha=XN,this.Le()?(this.ha=KN,r=100):this.Vl()?(this.ha=new Px(100,1),r=100):this.fl!==null&&(this.ha=this.fl.ra()),this.Cl=new qN(this,r,this.Pl.bind(this),this.kl.bind(this)),this.Cl.Ha()}Ql(){this.pl=null}Xi(){return this.xl}Hl(e){this.ll=e}Ol(){return this.Il()?this.Ps.scaleMargins.bottom*this.$t()+this._l:this.Ps.scaleMargins.top*this.$t()+this.ol}Nl(){return this.Il()?this.Ps.scaleMargins.top*this.$t()+this.ol:this.Ps.scaleMargins.bottom*this.$t()+this._l}Fl(){this.rl.hl||(this.rl.hl=!0,this.po())}Tl(){this.nl=null}kl(e,r){if(this.Fl(),this.Ki())return 0;e=this.Qa()&&e?Om(e,this.gl):e;const s=we(this.Qe()),n=this.Nl()+(this.Ll()-1)*(e-s.$e())/s.Ye();return this.Ul(n)}Pl(e,r){if(this.Fl(),this.Ki())return 0;const s=this.Ul(e),n=we(this.Qe()),i=n.$e()+n.Ye()*((s-this.Nl())/(this.Ll()-1));return this.Qa()?pu(i,this.gl):i}El(){this.vl=null,this.Cl.Ha()}po(){if(this.Dl()&&!this.Rl())return;const e=this.rl.al;if(e===null)return;let r=null;const s=this.do();let n=0,i=0;for(const c of s){if(!c.Vt())continue;const d=c.zt();if(d===null)continue;const u=c.Mh(e.Uh(),e.bi());let h=u&&u.Qe();if(h!==null){switch(this.Ps.mode){case 1:h=Nd(h,this.gl);break;case 2:h=Mee(h,d.Wt);break;case 3:h=Ree(h,d.Wt)}if(r=r===null?h:r.vn(we(h)),u!==null){const f=u.tr();f!==null&&(n=Math.max(n,f.above),i=Math.max(i,f.below))}}}if(this.qa()&&(n=Math.max(n,this.ja()),i=Math.max(i,this.ja())),n===this.ol&&i===this._l||(this.ol=n,this._l=i,this.vl=null,this.Tl()),r!==null){if(r.$e()===r.qe()){const c=this.fl,d=5*(c===null||this.Le()||this.Vl()?1:c.ea());this.Qa()&&(r=Ud(r,this.gl)),r=new ss(r.$e()-d,r.qe()+d),this.Qa()&&(r=Nd(r,this.gl))}if(this.Qa()){const c=Ud(r,this.gl),d=rg(c);if(a=d,l=this.gl,a.Ia!==l.Ia||a.Ba!==l.Ba){const u=this.el!==null?Ud(this.el,this.gl):null;this.gl=d,r=Nd(c,d),u!==null&&(this.el=Nd(u,d))}}this.Bl(r)}else this.Ge===null&&(this.Bl(new ss(-.5,.5)),this.gl=rg(null));var a,l}ql(){return this.Le()?Vl:this.Vl()?xu:this.Qa()?e=>Om(e,this.gl):null}vo(e,r,s){return r===void 0?(s===void 0&&(s=this.ra()),s.format(e)):r(e)}mo(e,r,s){return r===void 0?(s===void 0&&(s=this.ra()),s.formatTickmarks(e)):r(e)}nr(e,r){return this.vo(e,this.Sl.priceFormatter,r)}co(e,r){const s=this.Sl.priceFormatter;return this.mo(e,this.Sl.tickmarksPriceFormatter??(s?n=>n.map(s):void 0),r)}_o(e,r){return this.vo(e,this.Sl.percentageFormatter,r)}uo(e,r){const s=this.Sl.percentageFormatter;return this.mo(e,this.Sl.tickmarksPercentageFormatter??(s?n=>n.map(s):void 0),r)}}function QN(t){return t instanceof Mx}class ZN{constructor(e,r){this.dl=[],this.wo=new Map,this.sl=0,this.Mo=0,this.bo=1,this.pl=null,this.So=!1,this.xo=new Gt,this.kh=[],this.uh=e,this.ts=r,this.Co=new Pee(this);const s=r.N();this.Po=this.ko("left",s.leftPriceScale),this.yo=this.ko("right",s.rightPriceScale),this.Po.Al().i(this.To.bind(this,this.Po),this),this.yo.Al().i(this.To.bind(this,this.yo),this),this.Ro(s)}Ro(e){if(e.leftPriceScale&&this.Po.hr(e.leftPriceScale),e.rightPriceScale&&this.yo.hr(e.rightPriceScale),e.localization&&(this.Po.ga(),this.yo.ga()),e.overlayPriceScales){const r=Array.from(this.wo.values());for(const s of r){const n=we(s[0].Ft());n.hr(e.overlayPriceScales),e.localization&&n.ga()}}}Do(e){switch(e){case"left":return this.Po;case"right":return this.yo}return this.wo.has(e)?bs(this.wo.get(e))[0].Ft():null}m(){this.Qt().Vo().u(this),this.Po.Al().u(this),this.yo.Al().u(this),this.dl.forEach(e=>{e.m&&e.m()}),this.kh=this.kh.filter(e=>{const r=e.oh();return r.detached&&r.detached(),!1}),this.xo.p()}Io(){return this.bo}Bo(e){this.bo=e}Qt(){return this.ts}Qi(){return this.Mo}$t(){return this.sl}Eo(e){this.Mo=e,this.Ao()}zl(e){this.sl=e,this.Po.zl(e),this.yo.zl(e),this.dl.forEach(r=>{if(this.Un(r)){const s=r.Ft();s!==null&&s.zl(e)}}),this.Ao()}zo(e){this.So=e}Lo(){return this.So}Oo(){return this.dl.filter(QN)}ba(){return this.dl}Un(e){const r=e.Ft();return r===null||this.Po!==r&&this.yo!==r}Jl(e,r,s){this.No(e,r,s?e.hs():this.dl.length)}io(e,r){const s=this.dl.indexOf(e);kr(s!==-1,"removeDataSource: invalid data source"),this.dl.splice(s,1),r||this.dl.forEach((a,l)=>a.ls(l));const n=we(e.Ft()).wa();if(this.wo.has(n)){const a=bs(this.wo.get(n)),l=a.indexOf(e);l!==-1&&(a.splice(l,1),a.length===0&&this.wo.delete(n))}const i=e.Ft();i&&i.ba().indexOf(e)>=0&&(i.io(e),this.Fo(i)),this.pl=null}qn(e){return e===this.Po?"left":e===this.yo?"right":"overlay"}Wo(){return this.Po}Ho(){return this.yo}Uo(e,r){e.eo(r)}$o(e,r){e.ro(r),this.Ao()}qo(e){e.ho()}Yo(e,r){e.ao(r)}jo(e,r){e.lo(r),this.Ao()}Ko(e){e.oo()}Ao(){this.dl.forEach(e=>{e.Ns()})}ys(){let e=null;return this.ts.N().rightPriceScale.visible&&this.yo.ba().length!==0?e=this.yo:this.ts.N().leftPriceScale.visible&&this.Po.ba().length!==0?e=this.Po:this.dl.length!==0&&(e=this.dl[0].Ft()),e===null&&(e=this.yo),e}$n(){let e=null;return this.ts.N().rightPriceScale.visible?e=this.yo:this.ts.N().leftPriceScale.visible&&(e=this.Po),e}Fo(e){e!==null&&e.Rl()&&this.Xo(e)}Zo(e){const r=this.uh.Pe();e.yl({sn:!0}),r!==null&&e.fo(r),this.Ao()}Go(){this.Xo(this.Po),this.Xo(this.yo)}Jo(){this.Fo(this.Po),this.Fo(this.yo),this.dl.forEach(e=>{this.Un(e)&&this.Fo(e.Ft())}),this.Ao(),this.ts.ar()}Dt(){return this.pl===null&&(this.pl=MT(this.dl)),this.pl}Qo(e,r){r=mu(r,0,this.dl.length-1);const s=this.dl.indexOf(e);kr(s!==-1,"setSeriesOrder: invalid data source"),this.dl.splice(s,1),this.dl.splice(r,0,e),this.dl.forEach((n,i)=>n.ls(i)),this.pl=null;for(const n of[this.Po,this.yo])n.Ql(),n.ga();this.ts.ar()}It(){return this.Dt().filter(QN)}t_(){return this.xo}i_(){return this.Co}ua(e){this.kh.push(new yee(e))}ca(e){this.kh=this.kh.filter(r=>r.oh()!==e),e.detached&&e.detached(),this.ts.ar()}s_(){return this.kh}sa(e,r){return this.kh.map(s=>s.jn(e,r)).filter(s=>s!==null)}Xo(e){const r=e.do();if(r&&r.length>0&&!this.uh.Ki()){const s=this.uh.Pe();s!==null&&e.fo(s)}e.Ns()}No(e,r,s){let n=this.Do(r);if(n===null&&(n=this.ko(r,this.ts.N().overlayPriceScales)),this.dl.splice(s,0,e),!Fx(r)){const i=this.wo.get(r)||[];i.push(e),this.wo.set(r,i)}e.ls(s),n.Jl(e),e._s(n),this.Fo(n),this.pl=null}To(e,r,s){r.ie!==s.ie&&this.Xo(e)}ko(e,r){const s={visible:!0,autoScale:!0,...ki(r)},n=new Dee(e,s,this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return n.zl(this.$t()),n}}function q0(t){return{n_:t.n_,e_:{Kn:t.r_.externalId},h_:t.r_.cursorStyle}}function Oee(t,e,r,s){for(const n of t){const i=n.Tt(s);if(i!==null&&i.jn){const a=i.jn(e,r);if(a!==null)return{a_:n,e_:a}}}return null}function Lee(t){return t.Fs!==void 0}function RT(t,e,r){const s=[t,...t.Dt()],n=function(i,a,l){var f;let c,d;for(const m of i){const x=((f=m.sa)==null?void 0:f.call(m,a,l))??[];for(const p of x)u=p.zOrder,h=c==null?void 0:c.zOrder,(!h||u==="top"&&h!=="top"||u==="normal"&&h==="bottom")&&(c=p,d=m)}var u,h;return c&&d?{r_:c,n_:d}:null}(s,e,r);if((n==null?void 0:n.r_.zOrder)==="top")return q0(n);for(const i of s){if(n&&n.n_===i&&n.r_.zOrder!=="bottom"&&!n.r_.isBackground)return q0(n);if(Lee(i)){const a=Oee(i.Fs(t),e,r,t);if(a!==null)return{n_:i,a_:a.a_,e_:a.e_}}if(n&&n.n_===i&&n.r_.zOrder!=="bottom"&&n.r_.isBackground)return q0(n)}return n!=null&&n.r_?q0(n):null}class Iee{constructor(e,r,s=50){this.kn=0,this.yn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.l_=e,this.o_=r,this.Vn=s}__(e){const r=e.time,s=this.o_.cacheKey(r),n=this.Dn.get(s);if(n!==void 0)return n.u_;if(this.kn===this.Vn){const a=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(bs(a)),this.Tn++,this.kn--}const i=this.l_(e);return this.Dn.set(s,{u_:i,An:this.yn}),this.Rn.set(this.yn,s),this.kn++,this.yn++,i}}class gu{constructor(e,r){kr(e<=r,"right should be >= left"),this.c_=e,this.d_=r}Uh(){return this.c_}bi(){return this.d_}f_(){return this.d_-this.c_+1}Te(e){return this.c_<=e&&e<=this.d_}He(e){return this.c_===e.Uh()&&this.d_===e.bi()}}function JN(t,e){return t===null||e===null?t===e:t.He(e)}class Bee{constructor(){this.p_=new Map,this.Dn=null,this.v_=!1}m_(e){this.v_=e,this.Dn=null}w_(e,r){this.g_(r),this.Dn=null;for(let s=r;s<e.length;++s){const n=e[s];let i=this.p_.get(n.timeWeight);i===void 0&&(i=[],this.p_.set(n.timeWeight,i)),i.push({index:s,time:n.time,weight:n.timeWeight,originalTime:n.originalTime})}}M_(e,r,s,n,i){const a=Math.ceil(r/e);return this.Dn!==null&&this.Dn.b_===a&&i===this.Dn.S_&&s===this.Dn.x_||(this.Dn={S_:i,x_:s,Va:this.C_(a,s,n),b_:a}),this.Dn.Va}g_(e){if(e===0)return void this.p_.clear();const r=[];this.p_.forEach((s,n)=>{e<=s[0].index?r.push(n):s.splice(Oc(s,e,i=>i.index<e),1/0)});for(const s of r)this.p_.delete(s)}C_(e,r,s){let n=[];const i=a=>!r||s.has(a.index);for(const a of Array.from(this.p_.keys()).sort((l,c)=>c-l)){if(!this.p_.get(a))continue;const l=n;n=[];const c=l.length;let d=0;const u=bs(this.p_.get(a)),h=u.length;let f=1/0,m=-1/0;for(let x=0;x<h;x++){const p=u[x],g=p.index;for(;d<c;){const v=l[d],b=v.index;if(!(b<g&&i(v))){f=b;break}d++,n.push(v),m=b,f=1/0}if(f-g>=e&&g-m>=e&&i(p))n.push(p),m=g;else if(this.v_)return l}for(;d<c;d++)i(l[d])&&n.push(l[d])}return n}}class ac{constructor(e){this.P_=e}k_(){return this.P_===null?null:new gu(Math.floor(this.P_.Uh()),Math.ceil(this.P_.bi()))}y_(){return this.P_}static T_(){return new ac(null)}}function $ee(t,e){return t.weight>e.weight?t:e}class zee{constructor(e,r,s,n){this.Mo=0,this.R_=null,this.D_=[],this.wl=null,this.ml=null,this.V_=new Bee,this.I_=new Map,this.B_=ac.T_(),this.E_=!0,this.A_=new Gt,this.z_=new Gt,this.L_=new Gt,this.O_=null,this.N_=null,this.F_=new Map,this.W_=-1,this.H_=[],this.Ps=r,this.Sl=s,this.U_=r.rightOffset,this.q_=r.barSpacing,this.ts=e,this.o_=n,this.Y_(),this.V_.m_(r.uniformDistribution),this.j_()}N(){return this.Ps}K_(e){Ts(this.Sl,e),this.X_(),this.Y_()}hr(e,r){Ts(this.Ps,e),this.Ps.fixLeftEdge&&this.Z_(),this.Ps.fixRightEdge&&this.G_(),e.barSpacing!==void 0&&this.ts.dn(e.barSpacing),e.rightOffset!==void 0&&this.ts.fn(e.rightOffset),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ts.dn(e.barSpacing??this.q_),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.j_(),this.X_(),this.Y_(),this.L_.p()}Rs(e){var r;return((r=this.D_[e])==null?void 0:r.time)??null}ss(e){return this.D_[e]??null}J_(e,r){if(this.D_.length<1)return null;if(this.o_.key(e)>this.o_.key(this.D_[this.D_.length-1].time))return r?this.D_.length-1:null;const s=Oc(this.D_,this.o_.key(e),(n,i)=>this.o_.key(n.time)<i);return this.o_.key(e)<this.o_.key(this.D_[s].time)?r?s:null:s}Ki(){return this.Mo===0||this.D_.length===0||this.R_===null}Q_(){return this.D_.length>0}Pe(){return this.tu(),this.B_.k_()}iu(){return this.tu(),this.B_.y_()}su(){const e=this.Pe();if(e===null)return null;const r={from:e.Uh(),to:e.bi()};return this.nu(r)}nu(e){const r=Math.round(e.from),s=Math.round(e.to),n=we(this.eu()),i=we(this.ru());return{from:we(this.ss(Math.max(n,r))),to:we(this.ss(Math.min(i,s)))}}hu(e){return{from:we(this.J_(e.from,!0)),to:we(this.J_(e.to,!0))}}Qi(){return this.Mo}Eo(e){if(!isFinite(e)||e<=0||this.Mo===e)return;const r=this.iu(),s=this.Mo;if(this.Mo=e,this.E_=!0,this.Ps.lockVisibleTimeRangeOnResize&&s!==0){const n=this.q_*e/s;this.q_=n}if(this.Ps.fixLeftEdge&&r!==null&&r.Uh()<=0){const n=s-e;this.U_-=Math.round(n/this.q_)+1,this.E_=!0}this.au(),this.lu()}qt(e){if(this.Ki()||!ah(e))return 0;const r=this.ou()+this.U_-e;return this.Mo-(r+.5)*this.q_-1}_u(e,r){const s=this.ou(),n=r===void 0?0:r.from,i=r===void 0?e.length:r.to;for(let a=n;a<i;a++){const l=e[a].wt,c=s+this.U_-l,d=this.Mo-(c+.5)*this.q_-1;e[a]._t=d}}uu(e,r){const s=Math.ceil(this.cu(e));return r&&this.Ps.ignoreWhitespaceIndices&&!this.du(s)?this.fu(s):s}fn(e){this.E_=!0,this.U_=e,this.lu(),this.ts.pu(),this.ts.ar()}vu(){return this.q_}dn(e){this.mu(e),this.lu(),this.ts.pu(),this.ts.ar()}wu(){return this.U_}Va(){if(this.Ki())return null;if(this.N_!==null)return this.N_;const e=this.q_,r=5*(this.ts.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),s=Math.round(r/e),n=we(this.Pe()),i=Math.max(n.Uh(),n.Uh()-s),a=Math.max(n.bi(),n.bi()-s),l=this.V_.M_(e,r,this.Ps.ignoreWhitespaceIndices,this.F_,this.W_),c=this.eu()+s,d=this.ru()-s,u=this.gu(),h=this.Ps.fixLeftEdge||u,f=this.Ps.fixRightEdge||u;let m=0;for(const x of l){if(!(i<=x.index&&x.index<=a))continue;let p;m<this.H_.length?(p=this.H_[m],p.coord=this.qt(x.index),p.label=this.Mu(x),p.weight=x.weight):(p={needAlignCoordinate:!1,coord:this.qt(x.index),label:this.Mu(x),weight:x.weight},this.H_.push(p)),this.q_>r/2&&!u?p.needAlignCoordinate=!1:p.needAlignCoordinate=h&&x.index<=c||f&&x.index>=d,m++}return this.H_.length=m,this.N_=this.H_,this.H_}bu(){this.E_=!0,this.dn(this.Ps.barSpacing),this.fn(this.Ps.rightOffset)}Su(e){this.E_=!0,this.R_=e,this.lu(),this.Z_()}xu(e,r){const s=this.cu(e),n=this.vu(),i=n+r*(n/10);this.dn(i),this.Ps.rightBarStaysOnScroll||this.fn(this.wu()+(s-this.cu(e)))}eo(e){this.wl&&this.oo(),this.ml===null&&this.O_===null&&(this.Ki()||(this.ml=e,this.Cu()))}ro(e){if(this.O_===null)return;const r=mu(this.Mo-e,0,this.Mo),s=mu(this.Mo-we(this.ml),0,this.Mo);r!==0&&s!==0&&this.dn(this.O_.vu*r/s)}ho(){this.ml!==null&&(this.ml=null,this.Pu())}ao(e){this.wl===null&&this.O_===null&&(this.Ki()||(this.wl=e,this.Cu()))}lo(e){if(this.wl===null)return;const r=(this.wl-e)/this.vu();this.U_=we(this.O_).wu+r,this.E_=!0,this.lu()}oo(){this.wl!==null&&(this.wl=null,this.Pu())}ku(){this.yu(this.Ps.rightOffset)}yu(e,r=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(r)||r<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const s=this.U_,n=performance.now();this.ts._n({Tu:i=>(i-n)/r>=1,Ru:i=>{const a=(i-n)/r;return a>=1?e:s+(e-s)*a}})}kt(e,r){this.E_=!0,this.D_=e,this.V_.w_(e,r),this.lu()}Du(){return this.A_}Vu(){return this.z_}Iu(){return this.L_}ou(){return this.R_||0}Bu(e){const r=e.f_();this.mu(this.Mo/r),this.U_=e.bi()-this.ou(),this.lu(),this.E_=!0,this.ts.pu(),this.ts.ar()}Eu(){const e=this.eu(),r=this.ru();e!==null&&r!==null&&this.Bu(new gu(e,r+this.Ps.rightOffset))}Au(e){const r=new gu(e.from,e.to);this.Bu(r)}ns(e){return this.Sl.timeFormatter!==void 0?this.Sl.timeFormatter(e.originalTime):this.o_.formatHorzItem(e.time)}j_(){if(!this.Ps.ignoreWhitespaceIndices)return;this.F_.clear();const e=this.ts.js();for(const r of e)for(const s of r.ma())this.F_.set(s,!0);this.W_++}gu(){const e=this.ts.N().handleScroll,r=this.ts.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||r.axisDoubleClickReset.time||r.axisPressedMouseMove.time||r.mouseWheel||r.pinch)}eu(){return this.D_.length===0?null:0}ru(){return this.D_.length===0?null:this.D_.length-1}zu(e){return(this.Mo-1-e)/this.q_}cu(e){const r=this.zu(e),s=this.ou()+this.U_-r;return Math.round(1e6*s)/1e6}mu(e){const r=this.q_;this.q_=e,this.au(),r!==this.q_&&(this.E_=!0,this.Lu())}tu(){if(!this.E_)return;if(this.E_=!1,this.Ki())return void this.Ou(ac.T_());const e=this.ou(),r=this.Mo/this.q_,s=this.U_+e,n=new gu(s-r+1,s);this.Ou(new ac(n))}au(){const e=mu(this.q_,this.Nu(),this.Fu());this.q_!==e&&(this.q_=e,this.E_=!0)}Fu(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.Mo}Nu(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.D_.length!==0?this.Mo/this.D_.length:this.Ps.minBarSpacing}lu(){const e=this.Wu();e!==null&&this.U_<e&&(this.U_=e,this.E_=!0);const r=this.Hu();this.U_>r&&(this.U_=r,this.E_=!0)}Wu(){const e=this.eu(),r=this.R_;return e===null||r===null?null:e-r-1+(this.Ps.fixLeftEdge?this.Mo/this.q_:Math.min(2,this.D_.length))}Hu(){return this.Ps.fixRightEdge?0:this.Mo/this.q_-Math.min(2,this.D_.length)}Cu(){this.O_={vu:this.vu(),wu:this.wu()}}Pu(){this.O_=null}Mu(e){let r=this.I_.get(e.weight);return r===void 0&&(r=new Iee(s=>this.Uu(s),this.o_),this.I_.set(e.weight,r)),r.__(e)}Uu(e){return this.o_.formatTickmark(e,this.Sl)}Ou(e){const r=this.B_;this.B_=e,JN(r.k_(),this.B_.k_())||this.A_.p(),JN(r.y_(),this.B_.y_())||this.z_.p(),this.Lu()}Lu(){this.N_=null}X_(){this.Lu(),this.I_.clear()}Y_(){this.o_.updateFormatter(this.Sl)}Z_(){if(!this.Ps.fixLeftEdge)return;const e=this.eu();if(e===null)return;const r=this.Pe();if(r===null)return;const s=r.Uh()-e;if(s<0){const n=this.U_-s-1;this.fn(n)}this.au()}G_(){this.lu(),this.au()}du(e){return!this.Ps.ignoreWhitespaceIndices||this.F_.get(e)||!1}fu(e){const r=function*(n){const i=Math.round(n),a=i<n;let l=1;for(;;)a?(yield i+l,yield i-l):(yield i-l,yield i+l),l++}(e),s=this.ru();for(;s;){const n=r.next().value;if(this.F_.get(n))return n;if(n<0||n>s)break}return e}}var e4,t4,r4,uv,s4;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(e4||(e4={}));class Uee{constructor(e,r,s){this.$u=[],this.qu=[],this.Mo=0,this.Yu=null,this.ju=new Gt,this.Ku=new Gt,this.Xu=null,this.Zu=e,this.Ps=r,this.o_=s,this.xl=new zJ(this.Ps.layout.colorParsers),this.Gu=new $J(this),this.uh=new zee(this,r.timeScale,this.Ps.localization,s),this.Ct=new JJ(this,r.crosshair),this.Ju=new Tee(r.crosshair),r.addDefaultPane&&(this.Qu(0),this.$u[0].Bo(2)),this.tc=this.sc(0),this.nc=this.sc(1)}Bh(){this.ec(br.gn())}ar(){this.ec(br.wn())}Zh(){this.ec(new br(1))}Eh(e){const r=this.rc(e);this.ec(r)}hc(){return this.Yu}ac(e){var s,n,i,a;if(((s=this.Yu)==null?void 0:s.n_)===(e==null?void 0:e.n_)&&((i=(n=this.Yu)==null?void 0:n.e_)==null?void 0:i.Kn)===((a=e==null?void 0:e.e_)==null?void 0:a.Kn))return;const r=this.Yu;this.Yu=e,r!==null&&this.Eh(r.n_),e!==null&&e.n_!==(r==null?void 0:r.n_)&&this.Eh(e.n_)}N(){return this.Ps}hr(e){Ts(this.Ps,e),this.$u.forEach(r=>r.Ro(e)),e.timeScale!==void 0&&this.uh.hr(e.timeScale),e.localization!==void 0&&this.uh.K_(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.ju.p(),this.tc=this.sc(0),this.nc=this.sc(1),this.Bh()}lc(e,r,s=0){const n=this.$u[s];if(n===void 0)return;if(e==="left")return Ts(this.Ps,{leftPriceScale:r}),n.Ro({leftPriceScale:r}),this.ju.p(),void this.Bh();if(e==="right")return Ts(this.Ps,{rightPriceScale:r}),n.Ro({rightPriceScale:r}),this.ju.p(),void this.Bh();const i=this.oc(e,s);i!==null&&(i.Ft.hr(r),this.ju.p())}oc(e,r){const s=this.$u[r];if(s===void 0)return null;const n=s.Do(e);return n!==null?{Us:s,Ft:n}:null}Et(){return this.uh}$s(){return this.$u}_c(){return this.Ct}uc(){return this.Ku}cc(e,r){e.zl(r),this.pu()}Eo(e){this.Mo=e,this.uh.Eo(this.Mo),this.$u.forEach(r=>r.Eo(e)),this.pu()}dc(e){this.$u.length!==1&&(kr(e>=0&&e<this.$u.length,"Invalid pane index"),this.$u.splice(e,1),this.Bh())}fc(e,r){if(this.$u.length<2)return;kr(e>=0&&e<this.$u.length,"Invalid pane index");const s=this.$u[e],n=this.$u.reduce((h,f)=>h+f.Io(),0),i=this.$u.reduce((h,f)=>h+f.$t(),0),a=i-30*(this.$u.length-1);r=Math.min(a,Math.max(30,r));const l=n/i,c=s.$t();s.Bo(r*l);let d=r-c,u=this.$u.length-1;for(const h of this.$u)if(h!==s){const f=Math.min(a,Math.max(30,h.$t()-d/u));d-=h.$t()-f,u-=1;const m=f*l;h.Bo(m)}this.Bh()}vc(e,r){kr(e>=0&&e<this.$u.length&&r>=0&&r<this.$u.length,"Invalid pane index");const s=this.$u[e],n=this.$u[r];this.$u[e]=n,this.$u[r]=s,this.Bh()}mc(e,r){if(kr(e>=0&&e<this.$u.length&&r>=0&&r<this.$u.length,"Invalid pane index"),e===r)return;const[s]=this.$u.splice(e,1);this.$u.splice(r,0,s),this.Bh()}Uo(e,r,s){e.Uo(r,s)}$o(e,r,s){e.$o(r,s),this.Ah(),this.ec(this.wc(e,2))}qo(e,r){e.qo(r),this.ec(this.wc(e,2))}Yo(e,r,s){r.Rl()||e.Yo(r,s)}jo(e,r,s){r.Rl()||(e.jo(r,s),this.Ah(),this.ec(this.wc(e,2)))}Ko(e,r){r.Rl()||(e.Ko(r),this.ec(this.wc(e,2)))}Zo(e,r){e.Zo(r),this.ec(this.wc(e,2))}gc(e){this.uh.eo(e)}Mc(e,r){const s=this.Et();if(s.Ki()||r===0)return;const n=s.Qi();e=Math.max(1,Math.min(e,n)),s.xu(e,r),this.pu()}bc(e){this.Sc(0),this.xc(e),this.Cc()}Pc(e){this.uh.ro(e),this.pu()}kc(){this.uh.ho(),this.ar()}Sc(e){this.uh.ao(e)}xc(e){this.uh.lo(e),this.pu()}Cc(){this.uh.oo(),this.ar()}js(){return this.qu}yc(e,r,s,n,i){this.Ct.Vs(e,r);let a=NaN,l=this.uh.uu(e,!0);const c=this.uh.Pe();c!==null&&(l=Math.min(Math.max(c.Uh(),l),c.bi()));const d=n.ys(),u=d.zt();if(u!==null&&(a=d.Ts(r,u)),a=this.Ju.Ma(a,l,n),this.Ct.As(l,a,n),this.Zh(),!i){const h=RT(n,e,r);this.ac(h&&{n_:h.n_,e_:h.e_,h_:h.h_||null}),this.Ku.p(this.Ct.Bt(),{x:e,y:r},s)}}Tc(e,r,s){const n=s.ys(),i=n.zt(),a=n.Nt(e,we(i)),l=this.uh.J_(r,!0),c=this.uh.qt(we(l));this.yc(c,a,null,s,!0)}Rc(e){this._c().Ls(),this.Zh(),e||this.Ku.p(null,null,null)}Ah(){const e=this.Ct.Us();if(e!==null){const r=this.Ct.Bs(),s=this.Ct.Es();this.yc(r,s,null,e)}this.Ct.Ns()}Dc(e,r,s){const n=this.uh.Rs(0);r!==void 0&&s!==void 0&&this.uh.kt(r,s);const i=this.uh.Rs(0),a=this.uh.ou(),l=this.uh.Pe();if(l!==null&&n!==null&&i!==null){const c=l.Te(a),d=this.o_.key(n)>this.o_.key(i),u=e!==null&&e>a&&!d,h=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,f=c&&(s!==void 0||h)&&this.uh.N().shiftVisibleRangeOnNewBar;if(u&&!f){const m=e-a;this.uh.fn(this.uh.wu()-m)}}this.uh.Su(e)}Lh(e){e!==null&&e.Jo()}Hn(e){if(function(s){return s instanceof ZN}(e))return e;const r=this.$u.find(s=>s.Dt().includes(e));return r===void 0?null:r}pu(){this.$u.forEach(e=>e.Jo()),this.Ah()}m(){this.$u.forEach(e=>e.m()),this.$u.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Vc(){return this.Gu}Yn(){return this.Gu.N()}Vo(){return this.ju}Ic(e,r){const s=this.Qu(r);this.Bc(e,s),this.qu.push(e),this.qu.length===1?this.Bh():this.ar()}Ec(e){const r=this.Hn(e),s=this.qu.indexOf(e);kr(s!==-1,"Series not found");const n=we(r);this.qu.splice(s,1),n.io(e),e.m&&e.m(),this.uh.j_(),this.Ac(n)}Ih(e,r){const s=we(this.Hn(e));s.io(e,!0),s.Jl(e,r,!0)}Eu(){const e=br.wn();e.rn(),this.ec(e)}zc(e){const r=br.wn();r.ln(e),this.ec(r)}cn(){const e=br.wn();e.cn(),this.ec(e)}dn(e){const r=br.wn();r.dn(e),this.ec(r)}fn(e){const r=br.wn();r.fn(e),this.ec(r)}_n(e){const r=br.wn();r._n(e),this.ec(r)}hn(){const e=br.wn();e.hn(),this.ec(e)}Lc(){return this.Ps.rightPriceScale.visible?"right":"left"}Oc(e,r){if(kr(r>=0,"Index should be greater or equal to 0"),r===this.Nc(e))return;const s=we(this.Hn(e));s.io(e);const n=this.Qu(r);this.Bc(e,n),s.ba().length===0&&this.Ac(s),this.Bh()}Fc(){return this.nc}$(){return this.tc}Ut(e){const r=this.nc,s=this.tc;if(r===s)return r;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Xu===null||this.Xu.mr!==s||this.Xu.wr!==r)this.Xu={mr:s,wr:r,Wc:new Map};else{const i=this.Xu.Wc.get(e);if(i!==void 0)return i}const n=this.xl.tt(s,r,e/100);return this.Xu.Wc.set(e,n),n}Hc(e){return this.$u.indexOf(e)}Xi(){return this.xl}Uc(){return this.$c()}$c(e){const r=new ZN(this.uh,this);this.$u.push(r);const s=e??this.$u.length-1,n=br.gn();return n.Qs(s,{tn:0,sn:!0}),this.ec(n),r}Qu(e){return kr(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.$u.length,e))<this.$u.length?this.$u[e]:this.$c(e)}Nc(e){return this.$u.findIndex(r=>r.Oo().includes(e))}wc(e,r){const s=new br(r);if(e!==null){const n=this.$u.indexOf(e);s.Qs(n,{tn:r})}return s}rc(e,r){return r===void 0&&(r=2),this.wc(this.Hn(e),r)}ec(e){this.Zu&&this.Zu(e),this.$u.forEach(r=>r.i_().lr().kt())}Bc(e,r){const s=e.N().priceScaleId,n=s!==void 0?s:this.Lc();r.Jl(e,n),Fx(n)||e.hr(e.N())}sc(e){const r=this.Ps.layout;return r.background.type==="gradient"?e===0?r.background.topColor:r.background.bottomColor:r.background.color}Ac(e){!e.Lo()&&e.ba().length===0&&this.$u.length>1&&this.$u.splice(this.Hc(e),1)}}function hv(t){return!Dc(t)&&!Vh(t)}function DT(t){return Dc(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(t4||(t4={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(r4||(r4={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(uv||(uv={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(s4||(s4={}));const n4=t=>t.getUTCFullYear();function Vee(t,e,r){return e.replace(/yyyy/g,(s=>_i(n4(s),4))(t)).replace(/yy/g,(s=>_i(n4(s)%100,2))(t)).replace(/MMMM/g,((s,n)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(n,{month:"long"}))(t,r)).replace(/MMM/g,((s,n)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(n,{month:"short"}))(t,r)).replace(/MM/g,(s=>_i((n=>n.getUTCMonth()+1)(s),2))(t)).replace(/dd/g,(s=>_i((n=>n.getUTCDate())(s),2))(t))}class OT{constructor(e="yyyy-MM-dd",r="default"){this.qc=e,this.Yc=r}__(e){return Vee(e,this.qc,this.Yc)}}class Wee{constructor(e){this.jc=e||"%h:%m:%s"}__(e){return this.jc.replace("%h",_i(e.getUTCHours(),2)).replace("%m",_i(e.getUTCMinutes(),2)).replace("%s",_i(e.getUTCSeconds(),2))}}const Hee={Kc:"yyyy-MM-dd",Xc:"%h:%m:%s",Zc:" ",Gc:"default"};class Yee{constructor(e={}){const r={...Hee,...e};this.Jc=new OT(r.Kc,r.Gc),this.Qc=new Wee(r.Xc),this.td=r.Zc}__(e){return`${this.Jc.__(e)}${this.td}${this.Qc.__(e)}`}}function G0(t){return 60*t*60*1e3}function ng(t){return 60*t*1e3}const K0=[{sd:(i4=1,1e3*i4),nd:10},{sd:ng(1),nd:20},{sd:ng(5),nd:21},{sd:ng(30),nd:22},{sd:G0(1),nd:30},{sd:G0(3),nd:31},{sd:G0(6),nd:32},{sd:G0(12),nd:33}];var i4;function a4(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let r=K0.length-1;r>=0;--r)if(Math.floor(e.getTime()/K0[r].sd)!==Math.floor(t.getTime()/K0[r].sd))return K0[r].nd;return 0}function ig(t){let e=t;if(Vh(t)&&(e=Rb(t)),!hv(e))throw new Error("time must be of type BusinessDay");const r=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{ed:Math.round(r.getTime()/1e3),rd:e}}function o4(t){if(!DT(t))throw new Error("time must be of type isUTCTimestamp");return{ed:t}}function Rb(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function l4(t){Vh(t.time)&&(t.time=Rb(t.time))}class c4{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(r){r.forEach(l4)}(e):l4(e)}createConverterToInternalObj(e){return we(function(r){return r.length===0?null:hv(r[0].time)||Vh(r[0].time)?ig:o4}(e))}key(e){return typeof e=="object"&&"ed"in e?e.ed:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const r=e;return r.rd===void 0?new Date(1e3*r.ed).getTime():new Date(Date.UTC(r.rd.year,r.rd.month-1,r.rd.day)).getTime()}convertHorzItemToInternal(e){return DT(r=e)?o4(r):hv(r)?ig(r):ig(Rb(r));var r}updateFormatter(e){if(!this.Ps)return;const r=e.dateFormat;this.Ps.timeScale.timeVisible?this.hd=new Yee({Kc:r,Xc:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Zc:"   ",Gc:e.locale}):this.hd=new OT(r,e.locale)}formatHorzItem(e){const r=e;return this.hd.__(new Date(1e3*r.ed))}formatTickmark(e,r){const s=function(i,a,l){switch(i){case 0:case 10:return a?l?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return a?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),n=this.Ps.timeScale;if(n.tickMarkFormatter!==void 0){const i=n.tickMarkFormatter(e.originalTime,s,r.locale);if(i!==null)return i}return function(i,a,l){const c={};switch(a){case 0:c.year="numeric";break;case 1:c.month="short";break;case 2:c.day="numeric";break;case 3:c.hour12=!1,c.hour="2-digit",c.minute="2-digit";break;case 4:c.hour12=!1,c.hour="2-digit",c.minute="2-digit",c.second="2-digit"}const d=i.rd===void 0?new Date(1e3*i.ed):new Date(Date.UTC(i.rd.year,i.rd.month-1,i.rd.day));return new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()).toLocaleString(l,c)}(e.time,s,r.locale)}maxTickMarkWeight(e){let r=e.reduce($ee,e[0]).weight;return r>30&&r<50&&(r=30),r}fillWeightsForPoints(e,r){(function(s,n=0){if(s.length===0)return;let i=n===0?null:s[n-1].time.ed,a=i!==null?new Date(1e3*i):null,l=0;for(let c=n;c<s.length;++c){const d=s[c],u=new Date(1e3*d.time.ed);a!==null&&(d.timeWeight=a4(u,a)),l+=d.time.ed-(i||d.time.ed),i=d.time.ed,a=u}if(n===0&&s.length>1){const c=Math.ceil(l/(s.length-1)),d=new Date(1e3*(s[0].time.ed-c));s[0].timeWeight=a4(new Date(1e3*s[0].time.ed),d)}})(e,r)}static ad(e){return Ts({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Lc=typeof window<"u";function d4(){return!!Lc&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function ag(){return!!Lc&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function fv(t){return t+t%2}function qee(t){Lc&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class Rx{constructor(e,r,s){this.ld=0,this.od=null,this._d={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.ud=0,this.dd=null,this.fd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.pd=null,this.vd=!1,this.md=null,this.wd=null,this.gd=!1,this.Md=!1,this.bd=!1,this.Sd=null,this.xd=null,this.Cd=null,this.Pd=null,this.kd=null,this.yd=null,this.Td=null,this.Rd=0,this.Dd=!1,this.Vd=!1,this.Id=!1,this.Bd=0,this.Ed=null,this.Ad=!ag(),this.zd=n=>{this.Ld(n)},this.Od=n=>{if(this.Nd(n)){const i=this.Fd(n);if(++this.ud,this.dd&&this.ud>1){const{Wd:a}=this.Hd(Pn(n),this.fd);a<30&&!this.bd&&this.Ud(i,this.qd.$d),this.Yd()}}else{const i=this.Fd(n);if(++this.ld,this.od&&this.ld>1){const{Wd:a}=this.Hd(Pn(n),this._d);a<5&&!this.Md&&this.jd(i,this.qd.Kd),this.Xd()}}},this.Zd=e,this.qd=r,this.Ps=s,this.Gd()}m(){this.Sd!==null&&(this.Sd(),this.Sd=null),this.xd!==null&&(this.xd(),this.xd=null),this.Pd!==null&&(this.Pd(),this.Pd=null),this.kd!==null&&(this.kd(),this.kd=null),this.yd!==null&&(this.yd(),this.yd=null),this.Cd!==null&&(this.Cd(),this.Cd=null),this.Jd(),this.Xd()}Qd(e){this.Pd&&this.Pd();const r=this.tf.bind(this);if(this.Pd=()=>{this.Zd.removeEventListener("mousemove",r)},this.Zd.addEventListener("mousemove",r),this.Nd(e))return;const s=this.Fd(e);this.jd(s,this.qd.if),this.Ad=!0}Xd(){this.od!==null&&clearTimeout(this.od),this.ld=0,this.od=null,this._d={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Yd(){this.dd!==null&&clearTimeout(this.dd),this.ud=0,this.dd=null,this.fd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}tf(e){if(this.Id||this.wd!==null||this.Nd(e))return;const r=this.Fd(e);this.jd(r,this.qd.sf),this.Ad=!0}nf(e){const r=og(e.changedTouches,we(this.Ed));if(r===null||(this.Bd=X0(e),this.Td!==null)||this.Vd)return;this.Dd=!0;const s=this.Hd(Pn(r),we(this.wd)),{ef:n,rf:i,Wd:a}=s;if(this.gd||!(a<5)){if(!this.gd){const l=.5*n,c=i>=l&&!this.Ps.hf(),d=l>i&&!this.Ps.af();c||d||(this.Vd=!0),this.gd=!0,this.bd=!0,this.Jd(),this.Yd()}if(!this.Vd){const l=this.Fd(e,r);this.Ud(l,this.qd.lf),Sl(e)}}}_f(e){if(e.button!==0)return;const r=this.Hd(Pn(e),we(this.md)),{Wd:s}=r;if(s>=5&&(this.Md=!0,this.Xd()),this.Md){const n=this.Fd(e);this.jd(n,this.qd.uf)}}Hd(e,r){const s=Math.abs(r._t-e._t),n=Math.abs(r.ut-e.ut);return{ef:s,rf:n,Wd:s+n}}cf(e){let r=og(e.changedTouches,we(this.Ed));if(r===null&&e.touches.length===0&&(r=e.changedTouches[0]),r===null)return;this.Ed=null,this.Bd=X0(e),this.Jd(),this.wd=null,this.yd&&(this.yd(),this.yd=null);const s=this.Fd(e,r);if(this.Ud(s,this.qd.df),++this.ud,this.dd&&this.ud>1){const{Wd:n}=this.Hd(Pn(r),this.fd);n<30&&!this.bd&&this.Ud(s,this.qd.$d),this.Yd()}else this.bd||(this.Ud(s,this.qd.ff),this.qd.ff&&Sl(e));this.ud===0&&Sl(e),e.touches.length===0&&this.vd&&(this.vd=!1,Sl(e))}Ld(e){if(e.button!==0)return;const r=this.Fd(e);if(this.md=null,this.Id=!1,this.kd&&(this.kd(),this.kd=null),d4()&&this.Zd.ownerDocument.documentElement.removeEventListener("mouseleave",this.zd),!this.Nd(e))if(this.jd(r,this.qd.pf),++this.ld,this.od&&this.ld>1){const{Wd:s}=this.Hd(Pn(e),this._d);s<5&&!this.Md&&this.jd(r,this.qd.Kd),this.Xd()}else this.Md||this.jd(r,this.qd.vf)}Jd(){this.pd!==null&&(clearTimeout(this.pd),this.pd=null)}mf(e){if(this.Ed!==null)return;const r=e.changedTouches[0];this.Ed=r.identifier,this.Bd=X0(e);const s=this.Zd.ownerDocument.documentElement;this.bd=!1,this.gd=!1,this.Vd=!1,this.wd=Pn(r),this.yd&&(this.yd(),this.yd=null);{const i=this.nf.bind(this),a=this.cf.bind(this);this.yd=()=>{s.removeEventListener("touchmove",i),s.removeEventListener("touchend",a)},s.addEventListener("touchmove",i,{passive:!1}),s.addEventListener("touchend",a,{passive:!1}),this.Jd(),this.pd=setTimeout(this.wf.bind(this,e),240)}const n=this.Fd(e,r);this.Ud(n,this.qd.gf),this.dd||(this.ud=0,this.dd=setTimeout(this.Yd.bind(this),500),this.fd=Pn(r))}Mf(e){if(e.button!==0)return;const r=this.Zd.ownerDocument.documentElement;d4()&&r.addEventListener("mouseleave",this.zd),this.Md=!1,this.md=Pn(e),this.kd&&(this.kd(),this.kd=null);{const n=this._f.bind(this),i=this.Ld.bind(this);this.kd=()=>{r.removeEventListener("mousemove",n),r.removeEventListener("mouseup",i)},r.addEventListener("mousemove",n),r.addEventListener("mouseup",i)}if(this.Id=!0,this.Nd(e))return;const s=this.Fd(e);this.jd(s,this.qd.bf),this.od||(this.ld=0,this.od=setTimeout(this.Xd.bind(this),500),this._d=Pn(e))}Gd(){this.Zd.addEventListener("mouseenter",this.Qd.bind(this)),this.Zd.addEventListener("touchcancel",this.Jd.bind(this));{const e=this.Zd.ownerDocument,r=s=>{this.qd.Sf&&(s.composed&&this.Zd.contains(s.composedPath()[0])||s.target&&this.Zd.contains(s.target)||this.qd.Sf())};this.xd=()=>{e.removeEventListener("touchstart",r)},this.Sd=()=>{e.removeEventListener("mousedown",r)},e.addEventListener("mousedown",r),e.addEventListener("touchstart",r,{passive:!0})}ag()&&(this.Cd=()=>{this.Zd.removeEventListener("dblclick",this.Od)},this.Zd.addEventListener("dblclick",this.Od)),this.Zd.addEventListener("mouseleave",this.xf.bind(this)),this.Zd.addEventListener("touchstart",this.mf.bind(this),{passive:!0}),qee(this.Zd),this.Zd.addEventListener("mousedown",this.Mf.bind(this)),this.Cf(),this.Zd.addEventListener("touchmove",()=>{},{passive:!1})}Cf(){this.qd.Pf===void 0&&this.qd.kf===void 0&&this.qd.yf===void 0||(this.Zd.addEventListener("touchstart",e=>this.Tf(e.touches),{passive:!0}),this.Zd.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Td!==null&&this.qd.kf!==void 0){const r=u4(e.touches[0],e.touches[1])/this.Rd;this.qd.kf(this.Td,r),Sl(e)}},{passive:!1}),this.Zd.addEventListener("touchend",e=>{this.Tf(e.touches)}))}Tf(e){e.length===1&&(this.Dd=!1),e.length!==2||this.Dd||this.vd?this.Rf():this.Df(e)}Df(e){const r=this.Zd.getBoundingClientRect()||{left:0,top:0};this.Td={_t:(e[0].clientX-r.left+(e[1].clientX-r.left))/2,ut:(e[0].clientY-r.top+(e[1].clientY-r.top))/2},this.Rd=u4(e[0],e[1]),this.qd.Pf!==void 0&&this.qd.Pf(),this.Jd()}Rf(){this.Td!==null&&(this.Td=null,this.qd.yf!==void 0&&this.qd.yf())}xf(e){if(this.Pd&&this.Pd(),this.Nd(e)||!this.Ad)return;const r=this.Fd(e);this.jd(r,this.qd.Vf),this.Ad=!ag()}wf(e){const r=og(e.touches,we(this.Ed));if(r===null)return;const s=this.Fd(e,r);this.Ud(s,this.qd.If),this.bd=!0,this.vd=!0}Nd(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:X0(e)<this.Bd+500}Ud(e,r){r&&r.call(this.qd,e)}jd(e,r){r&&r.call(this.qd,e)}Fd(e,r){const s=r||e,n=this.Zd.getBoundingClientRect()||{left:0,top:0};return{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,localX:s.clientX-n.left,localY:s.clientY-n.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Bf:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Ef:e.type,Af:s.target,a_:e.view,zf:()=>{e.type!=="touchstart"&&Sl(e)}}}}function u4(t,e){const r=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(r*r+s*s)}function Sl(t){t.cancelable&&t.preventDefault()}function Pn(t){return{_t:t.pageX,ut:t.pageY}}function X0(t){return t.timeStamp||performance.now()}function og(t,e){for(let r=0;r<t.length;++r)if(t[r].identifier===e)return t[r];return null}class Gee{constructor(e,r,s){this.Lf=null,this.Of=null,this.Nf=!0,this.Ff=null,this.Wf=e,this.Hf=e.Uf()[r],this.$f=e.Uf()[s],this.qf=document.createElement("tr"),this.qf.style.height="1px",this.Yf=document.createElement("td"),this.Yf.style.position="relative",this.Yf.style.padding="0",this.Yf.style.margin="0",this.Yf.setAttribute("colspan","3"),this.jf(),this.qf.appendChild(this.Yf),this.Nf=this.Wf.N().layout.panes.enableResize,this.Nf?this.Kf():(this.Lf=null,this.Of=null)}m(){this.Of!==null&&this.Of.m()}Xf(){return this.qf}Zf(){return ht({width:this.Hf.Zf().width,height:1})}Gf(){return ht({width:this.Hf.Gf().width,height:1*window.devicePixelRatio})}Jf(e,r,s){const n=this.Gf();e.fillStyle=this.Wf.N().layout.panes.separatorColor,e.fillRect(r,s,n.width,n.height)}kt(){this.jf(),this.Wf.N().layout.panes.enableResize!==this.Nf&&(this.Nf=this.Wf.N().layout.panes.enableResize,this.Nf?this.Kf():(this.Lf!==null&&(this.Yf.removeChild(this.Lf.Qf),this.Yf.removeChild(this.Lf.tp),this.Lf=null),this.Of!==null&&(this.Of.m(),this.Of=null)))}Kf(){const e=document.createElement("div"),r=e.style;r.position="fixed",r.display="none",r.zIndex="49",r.top="0",r.left="0",r.width="100%",r.height="100%",r.cursor="row-resize",this.Yf.appendChild(e);const s=document.createElement("div"),n=s.style;n.position="absolute",n.zIndex="50",n.top="-4px",n.height="9px",n.width="100%",n.backgroundColor="",n.cursor="row-resize",this.Yf.appendChild(s);const i={if:this.ip.bind(this),Vf:this.sp.bind(this),bf:this.np.bind(this),gf:this.np.bind(this),uf:this.ep.bind(this),lf:this.ep.bind(this),pf:this.rp.bind(this),df:this.rp.bind(this)};this.Of=new Rx(s,i,{hf:()=>!1,af:()=>!0}),this.Lf={tp:s,Qf:e}}jf(){this.Yf.style.background=this.Wf.N().layout.panes.separatorColor}ip(e){this.Lf!==null&&(this.Lf.tp.style.backgroundColor=this.Wf.N().layout.panes.separatorHoverColor)}sp(e){this.Lf!==null&&this.Ff===null&&(this.Lf.tp.style.backgroundColor="")}np(e){if(this.Lf===null)return;const r=this.Hf.hp().Io()+this.$f.hp().Io(),s=r/(this.Hf.Zf().height+this.$f.Zf().height),n=30*s;r<=2*n||(this.Ff={ap:e.pageY,lp:this.Hf.hp().Io(),op:r-n,_p:r,up:s,cp:n},this.Lf.Qf.style.display="block")}ep(e){const r=this.Ff;if(r===null)return;const s=(e.pageY-r.ap)*r.up,n=mu(r.lp+s,r.cp,r.op);this.Hf.hp().Bo(n),this.$f.hp().Bo(r._p-n),this.Wf.Qt().Bh()}rp(e){this.Ff!==null&&this.Lf!==null&&(this.Ff=null,this.Lf.Qf.style.display="none")}}function lg(t,e){return t.dp-e.dp}function cg(t,e,r){const s=(t.dp-e.dp)/(t.wt-e.wt);return Math.sign(s)*Math.min(Math.abs(s),r)}class Kee{constructor(e,r,s,n){this.fp=null,this.pp=null,this.vp=null,this.mp=null,this.wp=null,this.gp=0,this.Mp=0,this.bp=e,this.Sp=r,this.xp=s,this.Mn=n}Cp(e,r){if(this.fp!==null){if(this.fp.wt===r)return void(this.fp.dp=e);if(Math.abs(this.fp.dp-e)<this.Mn)return}this.mp=this.vp,this.vp=this.pp,this.pp=this.fp,this.fp={wt:r,dp:e}}le(e,r){if(this.fp===null||this.pp===null||r-this.fp.wt>50)return;let s=0;const n=cg(this.fp,this.pp,this.Sp),i=lg(this.fp,this.pp),a=[n],l=[i];if(s+=i,this.vp!==null){const d=cg(this.pp,this.vp,this.Sp);if(Math.sign(d)===Math.sign(n)){const u=lg(this.pp,this.vp);if(a.push(d),l.push(u),s+=u,this.mp!==null){const h=cg(this.vp,this.mp,this.Sp);if(Math.sign(h)===Math.sign(n)){const f=lg(this.vp,this.mp);a.push(h),l.push(f),s+=f}}}}let c=0;for(let d=0;d<a.length;++d)c+=l[d]/s*a[d];Math.abs(c)<this.bp||(this.wp={dp:e,wt:r},this.Mp=c,this.gp=function(d,u){const h=Math.log(u);return Math.log(1*h/-d)/h}(Math.abs(c),this.xp))}Ru(e){const r=we(this.wp),s=e-r.wt;return r.dp+this.Mp*(Math.pow(this.xp,s)-1)/Math.log(this.xp)}Tu(e){return this.wp===null||this.Pp(e)===this.gp}Pp(e){const r=e-we(this.wp).wt;return Math.min(r,this.gp)}}class Xee{constructor(e,r){this.kp=void 0,this.yp=void 0,this.Tp=void 0,this.ps=!1,this.Rp=e,this.Dp=r,this.Vp()}kt(){this.Vp()}Ip(){this.kp&&this.Rp.removeChild(this.kp),this.yp&&this.Rp.removeChild(this.yp),this.kp=void 0,this.yp=void 0}Bp(){return this.ps!==this.Ep()||this.Tp!==this.Ap()}Ap(){return this.Dp.Qt().Xi().J(this.Dp.N().layout.textColor)>160?"dark":"light"}Ep(){return this.Dp.N().layout.attributionLogo}zp(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}Vp(){this.Bp()&&(this.Ip(),this.ps=this.Ep(),this.ps&&(this.Tp=this.Ap(),this.yp=document.createElement("style"),this.yp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.kp=document.createElement("a"),this.kp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.zp()}`,this.kp.title="Charting by TradingView",this.kp.id="tv-attr-logo",this.kp.target="_blank",this.kp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.kp.toggleAttribute("data-dark",this.Tp==="dark"),this.Rp.appendChild(this.yp),this.Rp.appendChild(this.kp)))}}function rl(t,e){const r=we(t.ownerDocument).createElement("canvas");t.appendChild(r);const s=DJ(r,{type:"device-pixel-content-box",options:{allowResizeObserver:!0},transform:(n,i)=>({width:Math.max(n.width,i.width),height:Math.max(n.height,i.height)})});return s.resizeCanvasElement(e),s}function sl(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))==null||e.clearRect(0,0,1,1)}function mv(t,e,r,s){t.ih&&t.ih(e,r,s)}function Nf(t,e,r,s){t.nt(e,r,s)}function xv(t,e,r,s){const n=t(r,s);for(const i of n){const a=i.Tt(s);a!==null&&e(a)}}function dg(t,e){return r=>{var s,n;return function(i){return i.Ft!==void 0}(r)?(((s=r.Ft())==null?void 0:s.wa())??"")!==e?[]:((n=r.ta)==null?void 0:n.call(r,t))??[]:[]}}function h4(t,e,r,s){if(!t.length)return;let n=0;const i=t[0].$t(s,!0);let a=e===1?r/2-(t[0].Fi()-i/2):t[0].Fi()-i/2-r/2;a=Math.max(0,a);for(let l=1;l<t.length;l++){const c=t[l],d=t[l-1],u=d.$t(s,!1),h=c.Fi(),f=d.Fi();if(e===1?h>f-u:h<f+u){const m=f-u*e;c.Wi(m);const x=m-e*u/2;if((e===1?x<0:x>r)&&a>0){const p=e===1?-1-x:x-r,g=Math.min(p,a);for(let v=n;v<t.length;v++)t[v].Wi(t[v].Fi()+e*g);a-=g}}else n=l,a=e===1?f-u-h:h-(f+u)}}class f4{constructor(e,r,s,n){this.Yi=null,this.Lp=null,this.Op=!1,this.Np=new Rm(200),this.Fp=null,this.Wp=0,this.Hp=!1,this.Up=()=>{this.Hp||this.Pt.$p().Qt().ar()},this.qp=()=>{this.Hp||this.Pt.$p().Qt().ar()},this.Pt=e,this.Ps=r,this.bl=r.layout,this.Gu=s,this.Yp=n==="left",this.jp=dg("normal",n),this.Kp=dg("top",n),this.Xp=dg("bottom",n),this.Yf=document.createElement("div"),this.Yf.style.height="100%",this.Yf.style.overflow="hidden",this.Yf.style.width="25px",this.Yf.style.left="0",this.Yf.style.position="relative",this.Zp=rl(this.Yf,ht({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const i=this.Zp.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Gp=rl(this.Yf,ht({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const a=this.Gp.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0";const l={bf:this.np.bind(this),gf:this.np.bind(this),uf:this.ep.bind(this),lf:this.ep.bind(this),Sf:this.Jp.bind(this),pf:this.rp.bind(this),df:this.rp.bind(this),Kd:this.Qp.bind(this),$d:this.Qp.bind(this),if:this.tv.bind(this),Vf:this.sp.bind(this)};this.Of=new Rx(this.Gp.canvasElement,l,{hf:()=>!this.Ps.handleScroll.vertTouchDrag,af:()=>!0})}m(){this.Of.m(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),sl(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),sl(this.Zp.canvasElement),this.Zp.dispose(),this.Yi!==null&&this.Yi.no().u(this),this.Yi=null}Xf(){return this.Yf}P(){return this.bl.fontSize}iv(){const e=this.Gu.N();return this.Fp!==e.k&&(this.Np.In(),this.Fp=e.k),e}sv(){if(this.Yi===null)return 0;let e=0;const r=this.iv(),s=we(this.Zp.canvasElement.getContext("2d",{colorSpace:this.Pt.$p().N().layout.colorSpace}));s.save();const n=this.Yi.Va();s.font=this.nv(),n.length>0&&(e=Math.max(this.Np.Vi(s,n[0].Ga),this.Np.Vi(s,n[n.length-1].Ga)));const i=this.ev();for(let d=i.length;d--;){const u=this.Np.Vi(s,i[d].ri());u>e&&(e=u)}const a=this.Yi.zt();if(a!==null&&this.Lp!==null&&(l=this.Ps.crosshair).mode!==2&&l.horzLine.visible&&l.horzLine.labelVisible){const d=this.Yi.Ts(1,a),u=this.Yi.Ts(this.Lp.height-2,a);e=Math.max(e,this.Np.Vi(s,this.Yi.Zi(Math.floor(Math.min(d,u))+.11111111111111,a)),this.Np.Vi(s,this.Yi.Zi(Math.ceil(Math.max(d,u))-.11111111111111,a)))}var l;s.restore();const c=e||34;return fv(Math.ceil(r.S+r.C+r.I+r.B+5+c))}rv(e){this.Lp!==null&&Io(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`)}hv(){return we(this.Lp).width}_s(e){this.Yi!==e&&(this.Yi!==null&&this.Yi.no().u(this),this.Yi=e,e.no().i(this.ul.bind(this),this))}Ft(){return this.Yi}In(){const e=this.Pt.hp();this.Pt.$p().Qt().Zo(e,we(this.Ft()))}av(e){if(this.Lp===null)return;const r={colorSpace:this.Pt.$p().N().layout.colorSpace};if(e!==1){this.lv(),this.Zp.applySuggestedBitmapSize();const n=tl(this.Zp,r);n!==null&&(n.useBitmapCoordinateSpace(i=>{this.ov(i),this._v(i)}),this.Pt.uv(n,this.Xp),this.cv(n),this.Pt.uv(n,this.jp),this.dv(n))}this.Gp.applySuggestedBitmapSize();const s=tl(this.Gp,r);s!==null&&(s.useBitmapCoordinateSpace(({context:n,bitmapSize:i})=>{n.clearRect(0,0,i.width,i.height)}),this.fv(s),this.Pt.uv(s,this.Kp))}Gf(){return this.Zp.bitmapSize}Jf(e,r,s){const n=this.Gf();n.width>0&&n.height>0&&e.drawImage(this.Zp.canvasElement,r,s)}kt(){var e;(e=this.Yi)==null||e.Va()}np(e){if(this.Yi===null||this.Yi.Ki()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const r=this.Pt.$p().Qt(),s=this.Pt.hp();this.Op=!0,r.Uo(s,this.Yi,e.localY)}ep(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const r=this.Pt.$p().Qt(),s=this.Pt.hp(),n=this.Yi;r.$o(s,n,e.localY)}Jp(){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.Pt.$p().Qt(),r=this.Pt.hp(),s=this.Yi;this.Op&&(this.Op=!1,e.qo(r,s))}rp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const r=this.Pt.$p().Qt(),s=this.Pt.hp();this.Op=!1,r.qo(s,this.Yi)}Qp(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.In()}tv(e){this.Yi!==null&&(!this.Pt.$p().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Vl()||this.pv(1))}sp(e){this.pv(0)}ev(){const e=[],r=this.Yi===null?void 0:this.Yi;return(s=>{for(let n=0;n<s.length;++n){const i=s[n].Ws(this.Pt.hp(),r);for(let a=0;a<i.length;a++)e.push(i[a])}})(this.Pt.hp().Dt()),e}ov({context:e,bitmapSize:r}){const{width:s,height:n}=r,i=this.Pt.hp().Qt(),a=i.$(),l=i.Fc();a===l?Tx(e,0,0,s,n,a):_T(e,0,0,s,n,a,l)}_v({context:e,bitmapSize:r,horizontalPixelRatio:s}){if(this.Lp===null||this.Yi===null||!this.Yi.N().borderVisible)return;e.fillStyle=this.Yi.N().borderColor;const n=Math.max(1,Math.floor(this.iv().S*s));let i;i=this.Yp?r.width-n:0,e.fillRect(i,0,n,r.height)}cv(e){if(this.Lp===null||this.Yi===null)return;const r=this.Yi.Va(),s=this.Yi.N(),n=this.iv(),i=this.Yp?this.Lp.width-n.C:0;s.borderVisible&&s.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:c})=>{a.fillStyle=s.borderColor;const d=Math.max(1,Math.floor(c)),u=Math.floor(.5*c),h=Math.round(n.C*l);a.beginPath();for(const f of r)a.rect(Math.floor(i*l),Math.round(f.ka*c)-u,h,d);a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{a.font=this.nv(),a.fillStyle=s.textColor??this.bl.textColor,a.textAlign=this.Yp?"right":"left",a.textBaseline="middle";const l=this.Yp?Math.round(i-n.I):Math.round(i+n.C+n.I),c=r.map(d=>this.Np.Di(a,d.Ga));for(let d=r.length;d--;){const u=r[d];a.fillText(u.Ga,l,u.ka+c[d])}})}lv(){if(this.Lp===null||this.Yi===null)return;let e=this.Lp.height/2;const r=[],s=this.Yi.Dt().slice(),n=this.Pt.hp(),i=this.iv();this.Yi===n.$n()&&this.Pt.hp().Dt().forEach(c=>{n.Un(c)&&s.push(c)});const a=this.Yi.ba()[0],l=this.Yi;s.forEach(c=>{const d=c.Ws(n,l);d.forEach(u=>{u.Wi(null),u.Hi()&&r.push(u)}),a===c&&d.length>0&&(e=d[0].Bi())}),r.forEach(c=>c.Wi(c.Bi())),this.Yi.N().alignLabels&&this.vv(r,i,e)}vv(e,r,s){if(this.Lp===null)return;const n=e.filter(a=>a.Bi()<=s),i=e.filter(a=>a.Bi()>s);n.sort((a,l)=>l.Bi()-a.Bi()),n.length&&i.length&&i.push(n[0]),i.sort((a,l)=>a.Bi()-l.Bi());for(const a of e){const l=Math.floor(a.$t(r)/2),c=a.Bi();c>-l&&c<l&&a.Wi(l),c>this.Lp.height-l&&c<this.Lp.height+l&&a.Wi(this.Lp.height-l)}h4(n,1,this.Lp.height,r),h4(i,-1,this.Lp.height,r)}dv(e){if(this.Lp===null)return;const r=this.ev(),s=this.iv(),n=this.Yp?"right":"left";r.forEach(i=>{i.Ui()&&i.Tt(we(this.Yi)).nt(e,s,this.Np,n)})}fv(e){if(this.Lp===null||this.Yi===null)return;const r=this.Pt.$p().Qt(),s=[],n=this.Pt.hp(),i=r._c().Ws(n,this.Yi);i.length&&s.push(i);const a=this.iv(),l=this.Yp?"right":"left";s.forEach(c=>{c.forEach(d=>{d.Tt(we(this.Yi)).nt(e,a,this.Np,l)})})}pv(e){this.Yf.style.cursor=e===1?"ns-resize":"default"}ul(){const e=this.sv();this.Wp<e&&this.Pt.$p().Qt().Bh(),this.Wp=e}nv(){return Mm(this.bl.fontSize,this.bl.fontFamily)}}function Qee(t,e){var r;return((r=t.Jh)==null?void 0:r.call(t,e))??[]}function m4(t,e){var r;return((r=t.Fs)==null?void 0:r.call(t,e))??[]}function x4(t,e){var r;return((r=t.us)==null?void 0:r.call(t,e))??[]}function Zee(t,e){var r;return((r=t.Xh)==null?void 0:r.call(t,e))??[]}class Db{constructor(e,r){this.Lp=ht({width:0,height:0}),this.mv=null,this.wv=null,this.gv=null,this.Mv=null,this.bv=!1,this.Sv=new Gt,this.xv=new Gt,this.Cv=0,this.Pv=!1,this.kv=null,this.yv=!1,this.Tv=null,this.Rv=null,this.Hp=!1,this.Up=()=>{this.Hp||this.Dv===null||this.ts().ar()},this.qp=()=>{this.Hp||this.Dv===null||this.ts().ar()},this.Dp=e,this.Dv=r,this.Dv.t_().i(this.Vv.bind(this),this,!0),this.Iv=document.createElement("td"),this.Iv.style.padding="0",this.Iv.style.position="relative";const s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.Bv=document.createElement("td"),this.Bv.style.padding="0",this.Ev=document.createElement("td"),this.Ev.style.padding="0",this.Iv.appendChild(s),this.Zp=rl(s,ht({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const n=this.Zp.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Gp=rl(s,ht({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const i=this.Gp.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.qf=document.createElement("tr"),this.qf.appendChild(this.Bv),this.qf.appendChild(this.Iv),this.qf.appendChild(this.Ev),this.Av(),this.Of=new Rx(this.Gp.canvasElement,this,{hf:()=>this.kv===null&&!this.Dp.N().handleScroll.vertTouchDrag,af:()=>this.kv===null&&!this.Dp.N().handleScroll.horzTouchDrag})}m(){this.mv!==null&&this.mv.m(),this.wv!==null&&this.wv.m(),this.gv=null,this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),sl(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),sl(this.Zp.canvasElement),this.Zp.dispose(),this.Dv!==null&&(this.Dv.t_().u(this),this.Dv.m()),this.Of.m()}hp(){return we(this.Dv)}zv(e){var r;this.Dv!==null&&this.Dv.t_().u(this),this.Dv=e,this.Dv!==null&&this.Dv.t_().i(Db.prototype.Vv.bind(this),this,!0),this.Av(),this.Dp.Uf().indexOf(this)===this.Dp.Uf().length-1?(this.gv=this.gv??new Xee(this.Iv,this.Dp),this.gv.kt()):((r=this.gv)==null||r.Ip(),this.gv=null)}$p(){return this.Dp}Xf(){return this.qf}Av(){if(this.Dv!==null&&(this.Lv(),this.ts().js().length!==0)){if(this.mv!==null){const e=this.Dv.Wo();this.mv._s(we(e))}if(this.wv!==null){const e=this.Dv.Ho();this.wv._s(we(e))}}}Ov(){this.mv!==null&&this.mv.kt(),this.wv!==null&&this.wv.kt()}Io(){return this.Dv!==null?this.Dv.Io():0}Bo(e){this.Dv&&this.Dv.Bo(e)}if(e){if(!this.Dv)return;this.Nv();const r=e.localX,s=e.localY;this.Fv(r,s,e)}bf(e){this.Nv(),this.Wv(),this.Fv(e.localX,e.localY,e)}sf(e){if(!this.Dv)return;this.Nv();const r=e.localX,s=e.localY;this.Fv(r,s,e)}vf(e){this.Dv!==null&&(this.Nv(),this.Hv(e))}Kd(e){this.Dv!==null&&this.Uv(this.xv,e)}$d(e){this.Kd(e)}uf(e){this.Nv(),this.$v(e),this.Fv(e.localX,e.localY,e)}pf(e){this.Dv!==null&&(this.Nv(),this.Pv=!1,this.qv(e))}ff(e){this.Dv!==null&&this.Hv(e)}If(e){if(this.Pv=!0,this.kv===null){const r={x:e.localX,y:e.localY};this.Yv(r,r,e)}}Vf(e){this.Dv!==null&&(this.Nv(),this.Dv.Qt().ac(null),this.jv())}Kv(){return this.Sv}Xv(){return this.xv}Pf(){this.Cv=1,this.ts().hn()}kf(e,r){if(!this.Dp.N().handleScale.pinch)return;const s=5*(r-this.Cv);this.Cv=r,this.ts().Mc(e._t,s)}gf(e){this.Pv=!1,this.yv=this.kv!==null,this.Wv();const r=this.ts()._c();this.kv!==null&&r.Vt()&&(this.Tv={x:r.si(),y:r.ni()},this.kv={x:e.localX,y:e.localY})}lf(e){if(this.Dv===null)return;const r=e.localX,s=e.localY;if(this.kv===null)this.$v(e);else{this.yv=!1;const n=we(this.Tv),i=n.x+(r-this.kv.x),a=n.y+(s-this.kv.y);this.Fv(i,a,e)}}df(e){this.$p().N().trackingMode.exitMode===0&&(this.yv=!0),this.Zv(),this.qv(e)}jn(e,r){const s=this.Dv;return s===null?null:RT(s,e,r)}Gv(e,r){we(r==="left"?this.mv:this.wv).rv(ht({width:e,height:this.Lp.height}))}Zf(){return this.Lp}rv(e){Io(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Iv.style.width=e.width+"px",this.Iv.style.height=e.height+"px")}Jv(){const e=we(this.Dv);e.Fo(e.Wo()),e.Fo(e.Ho());for(const r of e.ba())if(e.Un(r)){const s=r.Ft();s!==null&&e.Fo(s),r.Ns()}for(const r of e.s_())r.Ns()}Gf(){return this.Zp.bitmapSize}Jf(e,r,s){const n=this.Gf();n.width>0&&n.height>0&&e.drawImage(this.Zp.canvasElement,r,s)}av(e){if(e===0||this.Dv===null)return;e>1&&this.Jv(),this.mv!==null&&this.mv.av(e),this.wv!==null&&this.wv.av(e);const r={colorSpace:this.Dp.N().layout.colorSpace};if(e!==1){this.Zp.applySuggestedBitmapSize();const n=tl(this.Zp,r);n!==null&&(n.useBitmapCoordinateSpace(i=>{this.ov(i)}),this.Dv&&(this.Qv(n,Qee),this.tm(n),this.Qv(n,m4),this.Qv(n,x4)))}this.Gp.applySuggestedBitmapSize();const s=tl(this.Gp,r);s!==null&&(s.useBitmapCoordinateSpace(({context:n,bitmapSize:i})=>{n.clearRect(0,0,i.width,i.height)}),this.im(s),this.Qv(s,Zee),this.Qv(s,x4))}sm(){return this.mv}nm(){return this.wv}uv(e,r){this.Qv(e,r)}Vv(){this.Dv!==null&&this.Dv.t_().u(this),this.Dv=null}Hv(e){this.Uv(this.Sv,e)}Uv(e,r){const s=r.localX,n=r.localY;e.v()&&e.p(this.ts().Et().uu(s),{x:s,y:n},r)}ov({context:e,bitmapSize:r}){const{width:s,height:n}=r,i=this.ts(),a=i.$(),l=i.Fc();a===l?Tx(e,0,0,s,n,l):_T(e,0,0,s,n,a,l)}tm(e){const r=we(this.Dv),s=r.i_().lr().Tt(r);s!==null&&s.nt(e,!1)}im(e){this.rm(e,m4,Nf,this.ts()._c())}Qv(e,r){const s=we(this.Dv),n=s.Dt(),i=s.s_();for(const a of i)this.rm(e,r,mv,a);for(const a of n)this.rm(e,r,mv,a);for(const a of i)this.rm(e,r,Nf,a);for(const a of n)this.rm(e,r,Nf,a)}rm(e,r,s,n){const i=we(this.Dv),a=i.Qt().hc(),l=a!==null&&a.n_===n,c=a!==null&&l&&a.e_!==void 0?a.e_.Xn:void 0;xv(r,d=>s(d,e,l,c),n,i)}Lv(){if(this.Dv===null)return;const e=this.Dp,r=this.Dv.Wo().N().visible,s=this.Dv.Ho().N().visible;r||this.mv===null||(this.Bv.removeChild(this.mv.Xf()),this.mv.m(),this.mv=null),s||this.wv===null||(this.Ev.removeChild(this.wv.Xf()),this.wv.m(),this.wv=null);const n=e.Qt().Vc();r&&this.mv===null&&(this.mv=new f4(this,e.N(),n,"left"),this.Bv.appendChild(this.mv.Xf())),s&&this.wv===null&&(this.wv=new f4(this,e.N(),n,"right"),this.Ev.appendChild(this.wv.Xf()))}hm(e){return e.Bf&&this.Pv||this.kv!==null}am(e){return Math.max(0,Math.min(e,this.Lp.width-1))}lm(e){return Math.max(0,Math.min(e,this.Lp.height-1))}Fv(e,r,s){this.ts().yc(this.am(e),this.lm(r),s,we(this.Dv))}jv(){this.ts().Rc()}Zv(){this.yv&&(this.kv=null,this.jv())}Yv(e,r,s){this.kv=e,this.yv=!1,this.Fv(r.x,r.y,s);const n=this.ts()._c();this.Tv={x:n.si(),y:n.ni()}}ts(){return this.Dp.Qt()}qv(e){if(!this.bv)return;const r=this.ts(),s=this.hp();if(r.Ko(s,s.ys()),this.Mv=null,this.bv=!1,r.Cc(),this.Rv!==null){const n=performance.now(),i=r.Et();this.Rv.le(i.wu(),n),this.Rv.Tu(n)||r._n(this.Rv)}}Nv(){this.kv=null}Wv(){if(this.Dv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)we(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Dv.ys().Ki()&&this.ts().Et().Ki()}}$v(e){if(this.Dv===null)return;const r=this.ts(),s=r.Et();if(s.Ki())return;const n=this.Dp.N(),i=n.handleScroll,a=n.kineticScroll;if((!i.pressedMouseMove||e.Bf)&&(!i.horzTouchDrag&&!i.vertTouchDrag||!e.Bf))return;const l=this.Dv.ys(),c=performance.now();if(this.Mv!==null||this.hm(e)||(this.Mv={x:e.clientX,y:e.clientY,ed:c,om:e.localX,_m:e.localY}),this.Mv!==null&&!this.bv&&(this.Mv.x!==e.clientX||this.Mv.y!==e.clientY)){if(e.Bf&&a.touch||!e.Bf&&a.mouse){const d=s.vu();this.Rv=new Kee(.2/d,7/d,.997,15/d),this.Rv.Cp(s.wu(),this.Mv.ed)}else this.Rv=null;l.Ki()||r.Yo(this.Dv,l,e.localY),r.Sc(e.localX),this.bv=!0}this.bv&&(l.Ki()||r.jo(this.Dv,l,e.localY),r.xc(e.localX),this.Rv!==null&&this.Rv.Cp(s.wu(),c))}}class p4{constructor(e,r,s,n,i){this.xt=!0,this.Lp=ht({width:0,height:0}),this.Up=()=>this.av(3),this.Yp=e==="left",this.Gu=s.Vc,this.Ps=r,this.um=n,this.dm=i,this.Yf=document.createElement("div"),this.Yf.style.width="25px",this.Yf.style.height="100%",this.Yf.style.overflow="hidden",this.Zp=rl(this.Yf,ht({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up)}m(){this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),sl(this.Zp.canvasElement),this.Zp.dispose()}Xf(){return this.Yf}Zf(){return this.Lp}rv(e){Io(this.Lp,e)||(this.Lp=e,this.Zp.resizeCanvasElement(e),this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`,this.xt=!0)}av(e){if(e<3&&!this.xt||this.Lp.width===0||this.Lp.height===0)return;this.xt=!1,this.Zp.applySuggestedBitmapSize();const r=tl(this.Zp,{colorSpace:this.Ps.layout.colorSpace});r!==null&&r.useBitmapCoordinateSpace(s=>{this.ov(s),this._v(s)})}Gf(){return this.Zp.bitmapSize}Jf(e,r,s){const n=this.Gf();n.width>0&&n.height>0&&e.drawImage(this.Zp.canvasElement,r,s)}_v({context:e,bitmapSize:r,horizontalPixelRatio:s,verticalPixelRatio:n}){if(!this.um())return;e.fillStyle=this.Ps.timeScale.borderColor;const i=Math.floor(this.Gu.N().S*s),a=Math.floor(this.Gu.N().S*n),l=this.Yp?r.width-i:0;e.fillRect(l,0,i,a)}ov({context:e,bitmapSize:r}){Tx(e,0,0,r.width,r.height,this.dm())}}function Ob(t){return e=>{var r;return((r=e.ia)==null?void 0:r.call(e,t))??[]}}const Jee=Ob("normal"),ete=Ob("top"),tte=Ob("bottom");class rte{constructor(e,r){this.fm=null,this.pm=null,this.M=null,this.vm=!1,this.Lp=ht({width:0,height:0}),this.wm=new Gt,this.Np=new Rm(5),this.Hp=!1,this.Up=()=>{this.Hp||this.Dp.Qt().ar()},this.qp=()=>{this.Hp||this.Dp.Qt().ar()},this.Dp=e,this.o_=r,this.Ps=e.N().layout,this.kp=document.createElement("tr"),this.gm=document.createElement("td"),this.gm.style.padding="0",this.Mm=document.createElement("td"),this.Mm.style.padding="0",this.Yf=document.createElement("td"),this.Yf.style.height="25px",this.Yf.style.padding="0",this.bm=document.createElement("div"),this.bm.style.width="100%",this.bm.style.height="100%",this.bm.style.position="relative",this.bm.style.overflow="hidden",this.Yf.appendChild(this.bm),this.Zp=rl(this.bm,ht({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const s=this.Zp.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Gp=rl(this.bm,ht({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const n=this.Gp.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this.kp.appendChild(this.gm),this.kp.appendChild(this.Yf),this.kp.appendChild(this.Mm),this.Sm(),this.Dp.Qt().Vo().i(this.Sm.bind(this),this),this.Of=new Rx(this.Gp.canvasElement,this,{hf:()=>!0,af:()=>!this.Dp.N().handleScroll.horzTouchDrag})}m(){this.Of.m(),this.fm!==null&&this.fm.m(),this.pm!==null&&this.pm.m(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),sl(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),sl(this.Zp.canvasElement),this.Zp.dispose()}Xf(){return this.kp}xm(){return this.fm}Cm(){return this.pm}bf(e){if(this.vm)return;this.vm=!0;const r=this.Dp.Qt();!r.Et().Ki()&&this.Dp.N().handleScale.axisPressedMouseMove.time&&r.gc(e.localX)}gf(e){this.bf(e)}Sf(){const e=this.Dp.Qt();!e.Et().Ki()&&this.vm&&(this.vm=!1,this.Dp.N().handleScale.axisPressedMouseMove.time&&e.kc())}uf(e){const r=this.Dp.Qt();!r.Et().Ki()&&this.Dp.N().handleScale.axisPressedMouseMove.time&&r.Pc(e.localX)}lf(e){this.uf(e)}pf(){this.vm=!1;const e=this.Dp.Qt();e.Et().Ki()&&!this.Dp.N().handleScale.axisPressedMouseMove.time||e.kc()}df(){this.pf()}Kd(){this.Dp.N().handleScale.axisDoubleClickReset.time&&this.Dp.Qt().cn()}$d(){this.Kd()}if(){this.Dp.Qt().N().handleScale.axisPressedMouseMove.time&&this.pv(1)}Vf(){this.pv(0)}Zf(){return this.Lp}Pm(){return this.wm}km(e,r,s){Io(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`,this.wm.p(e)),this.fm!==null&&this.fm.rv(ht({width:r,height:e.height})),this.pm!==null&&this.pm.rv(ht({width:s,height:e.height}))}ym(){const e=this.Tm();return Math.ceil(e.S+e.C+e.P+e.A+e.V+e.Rm)}kt(){this.Dp.Qt().Et().Va()}Gf(){return this.Zp.bitmapSize}Jf(e,r,s){const n=this.Gf();n.width>0&&n.height>0&&e.drawImage(this.Zp.canvasElement,r,s)}av(e){if(e===0)return;const r={colorSpace:this.Ps.colorSpace};if(e!==1){this.Zp.applySuggestedBitmapSize();const n=tl(this.Zp,r);n!==null&&(n.useBitmapCoordinateSpace(i=>{this.ov(i),this._v(i),this.Dm(n,tte)}),this.cv(n),this.Dm(n,Jee)),this.fm!==null&&this.fm.av(e),this.pm!==null&&this.pm.av(e)}this.Gp.applySuggestedBitmapSize();const s=tl(this.Gp,r);s!==null&&(s.useBitmapCoordinateSpace(({context:n,bitmapSize:i})=>{n.clearRect(0,0,i.width,i.height)}),this.Vm([...this.Dp.Qt().js(),this.Dp.Qt()._c()],s),this.Dm(s,ete))}Dm(e,r){const s=this.Dp.Qt().js();for(const n of s)xv(r,i=>mv(i,e,!1,void 0),n,void 0);for(const n of s)xv(r,i=>Nf(i,e,!1,void 0),n,void 0)}ov({context:e,bitmapSize:r}){Tx(e,0,0,r.width,r.height,this.Dp.Qt().Fc())}_v({context:e,bitmapSize:r,verticalPixelRatio:s}){if(this.Dp.N().timeScale.borderVisible){e.fillStyle=this.Im();const n=Math.max(1,Math.floor(this.Tm().S*s));e.fillRect(0,0,r.width,n)}}cv(e){const r=this.Dp.Qt().Et(),s=r.Va();if(!s||s.length===0)return;const n=this.o_.maxTickMarkWeight(s),i=this.Tm(),a=r.N();a.borderVisible&&a.ticksVisible&&e.useBitmapCoordinateSpace(({context:l,horizontalPixelRatio:c,verticalPixelRatio:d})=>{l.strokeStyle=this.Im(),l.fillStyle=this.Im();const u=Math.max(1,Math.floor(c)),h=Math.floor(.5*c);l.beginPath();const f=Math.round(i.C*d);for(let m=s.length;m--;){const x=Math.round(s[m].coord*c);l.rect(x-h,0,u,f)}l.fill()}),e.useMediaCoordinateSpace(({context:l})=>{const c=i.S+i.C+i.A+i.P/2;l.textAlign="center",l.textBaseline="middle",l.fillStyle=this.H(),l.font=this.nv();for(const d of s)if(d.weight<n){const u=d.needAlignCoordinate?this.Bm(l,d.coord,d.label):d.coord;l.fillText(d.label,u,c)}this.Dp.N().timeScale.allowBoldLabels&&(l.font=this.Em());for(const d of s)if(d.weight>=n){const u=d.needAlignCoordinate?this.Bm(l,d.coord,d.label):d.coord;l.fillText(d.label,u,c)}})}Bm(e,r,s){const n=this.Np.Vi(e,s),i=n/2,a=Math.floor(r-i)+.5;return a<0?r+=Math.abs(0-a):a+n>this.Lp.width&&(r-=Math.abs(this.Lp.width-(a+n))),r}Vm(e,r){const s=this.Tm();for(const n of e)for(const i of n.cs())i.Tt().nt(r,s)}Im(){return this.Dp.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}nv(){return Mm(this.F(),this.Ps.fontFamily)}Em(){return Mm(this.F(),this.Ps.fontFamily,"bold")}Tm(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new Rm,Rm:0});const e=this.M,r=this.nv();if(e.k!==r){const s=this.F();e.P=s,e.k=r,e.A=3*s/12,e.V=3*s/12,e.Ji=9*s/12,e.L=0,e.Rm=4*s/12,e.Gi.In()}return this.M}pv(e){this.Yf.style.cursor=e===1?"ew-resize":"default"}Sm(){const e=this.Dp.Qt(),r=e.N();r.leftPriceScale.visible||this.fm===null||(this.gm.removeChild(this.fm.Xf()),this.fm.m(),this.fm=null),r.rightPriceScale.visible||this.pm===null||(this.Mm.removeChild(this.pm.Xf()),this.pm.m(),this.pm=null);const s={Vc:this.Dp.Qt().Vc()},n=()=>r.leftPriceScale.borderVisible&&e.Et().N().borderVisible,i=()=>e.Fc();r.leftPriceScale.visible&&this.fm===null&&(this.fm=new p4("left",r,s,n,i),this.gm.appendChild(this.fm.Xf())),r.rightPriceScale.visible&&this.pm===null&&(this.pm=new p4("right",r,s,n,i),this.Mm.appendChild(this.pm.Xf()))}}var I4;const ste=!!Lc&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!Lc&&((I4=navigator==null?void 0:navigator.userAgentData)!=null&&I4.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class nte{constructor(e,r,s){var n;this.Am=[],this.zm=[],this.Lm=0,this.sl=0,this.Mo=0,this.Om=0,this.Nm=0,this.Fm=null,this.Wm=!1,this.Sv=new Gt,this.xv=new Gt,this.Ku=new Gt,this.Hm=null,this.Um=null,this.Rp=e,this.Ps=r,this.o_=s,this.kp=document.createElement("div"),this.kp.classList.add("tv-lightweight-charts"),this.kp.style.overflow="hidden",this.kp.style.direction="ltr",this.kp.style.width="100%",this.kp.style.height="100%",(n=this.kp).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.$m=document.createElement("table"),this.$m.setAttribute("cellspacing","0"),this.kp.appendChild(this.$m),this.qm=this.Ym.bind(this),ug(this.Ps)&&this.jm(!0),this.ts=new Uee(this.Zu.bind(this),this.Ps,s),this.Qt().uc().i(this.Km.bind(this),this),this.Xm=new rte(this,this.o_),this.$m.appendChild(this.Xm.Xf());const i=r.autoSize&&this.Zm();let a=this.Ps.width,l=this.Ps.height;if(i||a===0||l===0){const c=e.getBoundingClientRect();a=a||c.width,l=l||c.height}this.Gm(a,l),this.Jm(),e.appendChild(this.kp),this.Qm(),this.ts.Et().Iu().i(this.ts.Bh.bind(this.ts),this),this.ts.Vo().i(this.ts.Bh.bind(this.ts),this)}Qt(){return this.ts}N(){return this.Ps}Uf(){return this.Am}tw(){return this.Xm}m(){this.jm(!1),this.Lm!==0&&window.cancelAnimationFrame(this.Lm),this.ts.uc().u(this),this.ts.Et().Iu().u(this),this.ts.Vo().u(this),this.ts.m();for(const e of this.Am)this.$m.removeChild(e.Xf()),e.Kv().u(this),e.Xv().u(this),e.m();this.Am=[];for(const e of this.zm)this.iw(e);this.zm=[],we(this.Xm).m(),this.kp.parentElement!==null&&this.kp.parentElement.removeChild(this.kp),this.Ku.m(),this.Sv.m(),this.xv.m(),this.sw()}Gm(e,r,s=!1){if(this.sl===r&&this.Mo===e)return;const n=function(l){const c=Math.floor(l.width),d=Math.floor(l.height);return ht({width:c-c%2,height:d-d%2})}(ht({width:e,height:r}));this.sl=n.height,this.Mo=n.width;const i=this.sl+"px",a=this.Mo+"px";we(this.kp).style.height=i,we(this.kp).style.width=a,this.$m.style.height=i,this.$m.style.width=a,s?this.nw(br.gn(),performance.now()):this.ts.Bh()}av(e){e===void 0&&(e=br.gn());for(let r=0;r<this.Am.length;r++)this.Am[r].av(e.en(r).tn);this.Ps.timeScale.visible&&this.Xm.av(e.nn())}hr(e){var n;const r=ug(this.Ps);this.ts.hr(e);const s=ug(this.Ps);s!==r&&this.jm(s),(n=e.layout)!=null&&n.panes&&this.ew(),this.Qm(),this.rw(e)}Kv(){return this.Sv}Xv(){return this.xv}uc(){return this.Ku}hw(){this.Fm!==null&&(this.nw(this.Fm,performance.now()),this.Fm=null);const e=this.aw(null),r=document.createElement("canvas");r.width=e.width,r.height=e.height;const s=we(r.getContext("2d"));return this.aw(s),r}lw(e){return e==="left"&&!this.ow()||e==="right"&&!this._w()||this.Am.length===0?0:we(e==="left"?this.Am[0].sm():this.Am[0].nm()).hv()}uw(){return this.Ps.autoSize&&this.Hm!==null}tp(){return this.kp}cw(e){this.Um=e,this.Um?this.tp().style.setProperty("cursor",e):this.tp().style.removeProperty("cursor")}dw(){return this.Um}fw(e){return bs(this.Am[e]).Zf()}ew(){this.zm.forEach(e=>{e.kt()})}rw(e){(e.autoSize!==void 0||!this.Hm||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Hm&&this.Zm(),e.autoSize===!1&&this.Hm!==null&&this.sw(),e.autoSize||e.width===void 0&&e.height===void 0||this.Gm(e.width||this.Mo,e.height||this.sl))}aw(e){let r=0,s=0;const n=this.Am[0],i=(l,c)=>{let d=0;for(let u=0;u<this.Am.length;u++){const h=this.Am[u],f=we(l==="left"?h.sm():h.nm()),m=f.Gf();if(e!==null&&f.Jf(e,c,d),d+=m.height,u<this.Am.length-1){const x=this.zm[u],p=x.Gf();e!==null&&x.Jf(e,c,d),d+=p.height}}};this.ow()&&(i("left",0),r+=we(n.sm()).Gf().width);for(let l=0;l<this.Am.length;l++){const c=this.Am[l],d=c.Gf();if(e!==null&&c.Jf(e,r,s),s+=d.height,l<this.Am.length-1){const u=this.zm[l],h=u.Gf();e!==null&&u.Jf(e,r,s),s+=h.height}}r+=n.Gf().width,this._w()&&(i("right",r),r+=we(n.nm()).Gf().width);const a=(l,c,d)=>{we(l==="left"?this.Xm.xm():this.Xm.Cm()).Jf(we(e),c,d)};if(this.Ps.timeScale.visible){const l=this.Xm.Gf();if(e!==null){let c=0;this.ow()&&(a("left",c,s),c=we(n.sm()).Gf().width),this.Xm.Jf(e,c,s),c+=l.width,this._w()&&a("right",c,s)}s+=l.height}return ht({width:r,height:s})}pw(){let e=0,r=0,s=0;for(const g of this.Am)this.ow()&&(r=Math.max(r,we(g.sm()).sv(),this.Ps.leftPriceScale.minimumWidth)),this._w()&&(s=Math.max(s,we(g.nm()).sv(),this.Ps.rightPriceScale.minimumWidth)),e+=g.Io();r=fv(r),s=fv(s);const n=this.Mo,i=this.sl,a=Math.max(n-r-s,0),l=1*this.zm.length,c=this.Ps.timeScale.visible;let d=c?Math.max(this.Xm.ym(),this.Ps.timeScale.minimumHeight):0;var u;d=(u=d)+u%2;const h=l+d,f=i<h?0:i-h,m=f/e;let x=0;const p=window.devicePixelRatio||1;for(let g=0;g<this.Am.length;++g){const v=this.Am[g];v.zv(this.ts.$s()[g]);let b=0,y=0;y=g===this.Am.length-1?Math.ceil((f-x)*p)/p:Math.round(v.Io()*m*p)/p,b=Math.max(y,2),x+=b,v.rv(ht({width:a,height:b})),this.ow()&&v.Gv(r,"left"),this._w()&&v.Gv(s,"right"),v.hp()&&this.ts.cc(v.hp(),b)}this.Xm.km(ht({width:c?a:0,height:d}),c?r:0,c?s:0),this.ts.Eo(a),this.Om!==r&&(this.Om=r),this.Nm!==s&&(this.Nm=s)}jm(e){e?this.kp.addEventListener("wheel",this.qm,{passive:!1}):this.kp.removeEventListener("wheel",this.qm)}mw(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return ste?1/window.devicePixelRatio:1}Ym(e){if(!(e.deltaX!==0&&this.Ps.handleScroll.mouseWheel||e.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const r=this.mw(e),s=r*e.deltaX/100,n=-r*e.deltaY/100;if(e.cancelable&&e.preventDefault(),n!==0&&this.Ps.handleScale.mouseWheel){const i=Math.sign(n)*Math.min(1,Math.abs(n)),a=e.clientX-this.kp.getBoundingClientRect().left;this.Qt().Mc(a,i)}s!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().bc(-80*s)}nw(e,r){var n;const s=e.nn();s===3&&this.ww(),s!==3&&s!==2||(this.gw(e),this.Mw(e,r),this.Xm.kt(),this.Am.forEach(i=>{i.Ov()}),((n=this.Fm)==null?void 0:n.nn())===3&&(this.Fm.vn(e),this.ww(),this.gw(this.Fm),this.Mw(this.Fm,r),e=this.Fm,this.Fm=null)),this.av(e)}Mw(e,r){for(const s of e.pn())this.mn(s,r)}gw(e){const r=this.ts.$s();for(let s=0;s<r.length;s++)e.en(s).sn&&r[s].Go()}mn(e,r){const s=this.ts.Et();switch(e.an){case 0:s.Eu();break;case 1:s.Au(e.Wt);break;case 2:s.dn(e.Wt);break;case 3:s.fn(e.Wt);break;case 4:s.bu();break;case 5:e.Wt.Tu(r)||s.fn(e.Wt.Ru(r))}}Zu(e){this.Fm!==null?this.Fm.vn(e):this.Fm=e,this.Wm||(this.Wm=!0,this.Lm=window.requestAnimationFrame(r=>{if(this.Wm=!1,this.Lm=0,this.Fm!==null){const s=this.Fm;this.Fm=null,this.nw(s,r);for(const n of s.pn())if(n.an===5&&!n.Wt.Tu(r)){this.Qt()._n(n.Wt);break}}}))}ww(){this.Jm()}iw(e){this.$m.removeChild(e.Xf()),e.m()}Jm(){const e=this.ts.$s(),r=e.length,s=this.Am.length;for(let n=r;n<s;n++){const i=bs(this.Am.pop());this.$m.removeChild(i.Xf()),i.Kv().u(this),i.Xv().u(this),i.m();const a=this.zm.pop();a!==void 0&&this.iw(a)}for(let n=s;n<r;n++){const i=new Db(this,e[n]);if(i.Kv().i(this.bw.bind(this,i),this),i.Xv().i(this.Sw.bind(this,i),this),this.Am.push(i),n>0){const a=new Gee(this,n-1,n);this.zm.push(a),this.$m.insertBefore(a.Xf(),this.Xm.Xf())}this.$m.insertBefore(i.Xf(),this.Xm.Xf())}for(let n=0;n<r;n++){const i=e[n],a=this.Am[n];a.hp()!==i?a.zv(i):a.Av()}this.Qm(),this.pw()}xw(e,r,s,n){var h;const i=new Map;e!==null&&this.ts.js().forEach(f=>{const m=f.Xs().Fr(e);m!==null&&i.set(f,m)});let a;if(e!==null){const f=(h=this.ts.Et().ss(e))==null?void 0:h.originalTime;f!==void 0&&(a=f)}const l=this.Qt().hc(),c=l!==null&&l.n_ instanceof Mx?l.n_:void 0,d=l!==null&&l.e_!==void 0?l.e_.Kn:void 0,u=this.Cw(n);return{Pw:a,Re:e??void 0,kw:r??void 0,yw:u!==-1?u:void 0,Tw:c,Rw:i,Dw:d,Vw:s??void 0}}Cw(e){let r=-1;if(e)r=this.Am.indexOf(e);else{const s=this.Qt()._c().Us();s!==null&&(r=this.Qt().$s().indexOf(s))}return r}bw(e,r,s,n){this.Sv.p(()=>this.xw(r,s,n,e))}Sw(e,r,s,n){this.xv.p(()=>this.xw(r,s,n,e))}Km(e,r,s){var n;this.cw(((n=this.Qt().hc())==null?void 0:n.h_)??null),this.Ku.p(()=>this.xw(e,r,s))}Qm(){const e=this.Ps.timeScale.visible?"":"none";this.Xm.Xf().style.display=e}ow(){return this.Am[0].hp().Wo().N().visible}_w(){return this.Am[0].hp().Ho().N().visible}Zm(){return"ResizeObserver"in window&&(this.Hm=new ResizeObserver(e=>{const r=e[e.length-1];r&&this.Gm(r.contentRect.width,r.contentRect.height)}),this.Hm.observe(this.Rp,{box:"border-box"}),!0)}sw(){this.Hm!==null&&this.Hm.disconnect(),this.Hm=null}}function ug(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function ite(t){return t.open===void 0&&t.value===void 0}function ate(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function g4(t,e,r,s){const n=r.value,i={Re:e,wt:t,Wt:[n,n,n,n],Pw:s};return r.color!==void 0&&(i.R=r.color),i}function ote(t,e,r,s){const n=r.value,i={Re:e,wt:t,Wt:[n,n,n,n],Pw:s};return r.lineColor!==void 0&&(i.vt=r.lineColor),r.topColor!==void 0&&(i.mr=r.topColor),r.bottomColor!==void 0&&(i.wr=r.bottomColor),i}function lte(t,e,r,s){const n=r.value,i={Re:e,wt:t,Wt:[n,n,n,n],Pw:s};return r.topLineColor!==void 0&&(i.gr=r.topLineColor),r.bottomLineColor!==void 0&&(i.Mr=r.bottomLineColor),r.topFillColor1!==void 0&&(i.br=r.topFillColor1),r.topFillColor2!==void 0&&(i.Sr=r.topFillColor2),r.bottomFillColor1!==void 0&&(i.Cr=r.bottomFillColor1),r.bottomFillColor2!==void 0&&(i.Pr=r.bottomFillColor2),i}function cte(t,e,r,s){const n={Re:e,wt:t,Wt:[r.open,r.high,r.low,r.close],Pw:s};return r.color!==void 0&&(n.R=r.color),n}function dte(t,e,r,s){const n={Re:e,wt:t,Wt:[r.open,r.high,r.low,r.close],Pw:s};return r.color!==void 0&&(n.R=r.color),r.borderColor!==void 0&&(n.Ht=r.borderColor),r.wickColor!==void 0&&(n.vr=r.wickColor),n}function ute(t,e,r,s,n){const i=bs(n)(r),a=Math.max(...i),l=Math.min(...i),c=i[i.length-1],d=[c,a,l,c],{time:u,color:h,...f}=r;return{Re:e,wt:t,Wt:d,Pw:s,se:f,R:h}}function jd(t){return t.Wt!==void 0}function v4(t,e){return e.customValues!==void 0&&(t.Iw=e.customValues),t}function ro(t){return(e,r,s,n,i,a)=>function(l,c){return c?c(l):ite(l)}(s,a)?v4({wt:e,Re:r,Pw:n},s):v4(t(e,r,s,n,i),s)}function y4(t){return{Candlestick:ro(dte),Bar:ro(cte),Area:ro(ote),Baseline:ro(lte),Histogram:ro(g4),Line:ro(g4),Custom:ro(ute)}[t]}function b4(t){return{Re:0,Bw:new Map,Hh:t}}function w4(t,e){if(t!==void 0&&t.length!==0)return{Ew:e.key(t[0].wt),Aw:e.key(t[t.length-1].wt)}}function k4(t){let e;return t.forEach(r=>{e===void 0&&(e=r.Pw)}),bs(e)}class hte{constructor(e){this.zw=new Map,this.Lw=new Map,this.Ow=new Map,this.Nw=[],this.o_=e}m(){this.zw.clear(),this.Lw.clear(),this.Ow.clear(),this.Nw=[]}Fw(e,r){let s=this.zw.size!==0,n=!1;const i=this.Lw.get(e);if(i!==void 0)if(this.Lw.size===1)s=!1,n=!0,this.zw.clear();else for(const c of this.Nw)c.pointData.Bw.delete(e)&&(n=!0);let a=[];if(r.length!==0){const c=r.map(m=>m.time),d=this.o_.createConverterToInternalObj(r),u=y4(e.Rr()),h=e.da(),f=e.pa();a=r.map((m,x)=>{const p=d(m.time),g=this.o_.key(p);let v=this.zw.get(g);v===void 0&&(v=b4(p),this.zw.set(g,v),n=!0);const b=u(p,v.Re,m,c[x],h,f);return v.Bw.set(e,b),b})}s&&this.Ww(),this.Hw(e,a);let l=-1;if(n){const c=[];this.zw.forEach(d=>{c.push({timeWeight:0,time:d.Hh,pointData:d,originalTime:k4(d.Bw)})}),c.sort((d,u)=>this.o_.key(d.time)-this.o_.key(u.time)),l=this.Uw(c)}return this.$w(e,l,function(c,d,u){const h=w4(c,u),f=w4(d,u);if(h!==void 0&&f!==void 0)return{qw:!1,zh:h.Aw>=f.Aw&&h.Ew>=f.Ew}}(this.Lw.get(e),i,this.o_))}Ec(e){return this.Fw(e,[])}Yw(e,r,s){const n=r;(function(g){g.Pw===void 0&&(g.Pw=g.time)})(n),this.o_.preprocessData(r);const i=this.o_.createConverterToInternalObj([r])(r.time),a=this.Ow.get(e);if(!s&&a!==void 0&&this.o_.key(i)<this.o_.key(a))throw new Error(`Cannot update oldest data, last time=${a}, new time=${i}`);let l=this.zw.get(this.o_.key(i));if(s&&l===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const c=l===void 0;l===void 0&&(l=b4(i),this.zw.set(this.o_.key(i),l));const d=y4(e.Rr()),u=e.da(),h=e.pa(),f=d(i,l.Re,r,n.Pw,u,h);l.Bw.set(e,f),s?this.jw(e,f,l.Re):this.Kw(e,f);const m={zh:jd(f),qw:s};if(!c)return this.$w(e,-1,m);const x={timeWeight:0,time:l.Hh,pointData:l,originalTime:k4(l.Bw)},p=Oc(this.Nw,this.o_.key(x.time),(g,v)=>this.o_.key(g.time)<v);this.Nw.splice(p,0,x);for(let g=p;g<this.Nw.length;++g)hg(this.Nw[g].pointData,g);return this.o_.fillWeightsForPoints(this.Nw,p),this.$w(e,p,m)}Kw(e,r){let s=this.Lw.get(e);s===void 0&&(s=[],this.Lw.set(e,s));const n=s.length!==0?s[s.length-1]:null;n===null||this.o_.key(r.wt)>this.o_.key(n.wt)?jd(r)&&s.push(r):jd(r)?s[s.length-1]=r:s.splice(-1,1),this.Ow.set(e,r.wt)}jw(e,r,s){const n=this.Lw.get(e);if(n===void 0)return;const i=Oc(n,s,(a,l)=>a.Re<l);jd(r)?n[i]=r:n.splice(i,1)}Hw(e,r){r.length!==0?(this.Lw.set(e,r.filter(jd)),this.Ow.set(e,r[r.length-1].wt)):(this.Lw.delete(e),this.Ow.delete(e))}Ww(){for(const e of this.Nw)e.pointData.Bw.size===0&&this.zw.delete(this.o_.key(e.time))}Uw(e){let r=-1;for(let s=0;s<this.Nw.length&&s<e.length;++s){const n=this.Nw[s],i=e[s];if(this.o_.key(n.time)!==this.o_.key(i.time)){r=s;break}i.timeWeight=n.timeWeight,hg(i.pointData,s)}if(r===-1&&this.Nw.length!==e.length&&(r=Math.min(this.Nw.length,e.length)),r===-1)return-1;for(let s=r;s<e.length;++s)hg(e[s].pointData,s);return this.o_.fillWeightsForPoints(e,r),this.Nw=e,r}Xw(){if(this.Lw.size===0)return null;let e=0;return this.Lw.forEach(r=>{r.length!==0&&(e=Math.max(e,r[r.length-1].Re))}),e}$w(e,r,s){const n={Oo:new Map,Et:{ou:this.Xw()}};if(r!==-1)this.Lw.forEach((i,a)=>{n.Oo.set(a,{se:i,Zw:a===e?s:void 0})}),this.Lw.has(e)||n.Oo.set(e,{se:[],Zw:s}),n.Et.Gw=this.Nw,n.Et.Jw=r;else{const i=this.Lw.get(e);n.Oo.set(e,{se:i||[],Zw:s})}return n}}function hg(t,e){t.Re=e,t.Bw.forEach(r=>{r.Re=e})}function fte(t,e){return t.wt<e}function mte(t,e){return e<t.wt}function xte(t,e,r){const s=e.Uh(),n=e.bi(),i=Oc(t,s,fte),a=AT(t,n,mte);if(!r)return{from:i,to:a};let l=i,c=a;return i>0&&i<t.length&&t[i].wt>=s&&(l=i-1),a>0&&a<t.length&&t[a-1].wt<=n&&(c=a+1),{from:l,to:c}}class Lb{constructor(e,r,s){this.Qw=!0,this.tg=!0,this.ig=!0,this.sg=[],this.ng=null,this.Jn=e,this.Qn=r,this.eg=s}kt(e){this.Qw=!0,e==="data"&&(this.tg=!0),e==="options"&&(this.ig=!0)}Tt(){return this.Jn.Vt()?(this.rg(),this.ng===null?null:this.hg):null}ag(){this.sg=this.sg.map(e=>({...e,...this.Jn.Rh().Dr(e.wt)}))}lg(){this.ng=null}rg(){this.tg&&(this.og(),this.tg=!1),this.ig&&(this.ag(),this.ig=!1),this.Qw&&(this._g(),this.Qw=!1)}_g(){const e=this.Jn.Ft(),r=this.Qn.Et();if(this.lg(),r.Ki()||e.Ki())return;const s=r.Pe();if(s===null||this.Jn.Xs().zr()===0)return;const n=this.Jn.zt();n!==null&&(this.ng=xte(this.sg,s,this.eg),this.ug(e,r,n.Wt),this.cg())}}class pte{constructor(e,r){this.dg=e,this.Yi=r}nt(e,r,s){this.dg.draw(e,this.Yi,r,s)}}class gte extends Lb{constructor(e,r,s){super(e,r,!1),this.sh=s,this.hg=new pte(this.sh.renderer(),n=>{const i=e.zt();return i===null?null:e.Ft().Nt(n,i.Wt)})}fa(e){return this.sh.priceValueBuilder(e)}va(e){return this.sh.isWhitespace(e)}og(){const e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(r=>({wt:r.Re,_t:NaN,...e.Dr(r.Re),fg:r.se}))}ug(e,r){r._u(this.sg,oh(this.ng))}cg(){this.sh.update({bars:this.sg.map(vte),barSpacing:this.Qn.Et().vu(),visibleRange:this.ng},this.Jn.N())}}function vte(t){return{x:t._t,time:t.wt,originalData:t.fg,barColor:t.cr}}const yte={color:"#2196f3"},bte=(t,e,r)=>{const s=ka(r);return new gte(t,e,s)};function Ib(t){const e={value:t.Wt[3],time:t.Pw};return t.Iw!==void 0&&(e.customValues=t.Iw),e}function _4(t){const e=Ib(t);return t.R!==void 0&&(e.color=t.R),e}function wte(t){const e=Ib(t);return t.vt!==void 0&&(e.lineColor=t.vt),t.mr!==void 0&&(e.topColor=t.mr),t.wr!==void 0&&(e.bottomColor=t.wr),e}function kte(t){const e=Ib(t);return t.gr!==void 0&&(e.topLineColor=t.gr),t.Mr!==void 0&&(e.bottomLineColor=t.Mr),t.br!==void 0&&(e.topFillColor1=t.br),t.Sr!==void 0&&(e.topFillColor2=t.Sr),t.Cr!==void 0&&(e.bottomFillColor1=t.Cr),t.Pr!==void 0&&(e.bottomFillColor2=t.Pr),e}function LT(t){const e={open:t.Wt[0],high:t.Wt[1],low:t.Wt[2],close:t.Wt[3],time:t.Pw};return t.Iw!==void 0&&(e.customValues=t.Iw),e}function _te(t){const e=LT(t);return t.R!==void 0&&(e.color=t.R),e}function Nte(t){const e=LT(t),{R:r,Ht:s,vr:n}=t;return r!==void 0&&(e.color=r),s!==void 0&&(e.borderColor=s),n!==void 0&&(e.wickColor=n),e}function pv(t){return{Area:wte,Line:_4,Baseline:kte,Histogram:_4,Bar:_te,Candlestick:Nte,Custom:jte}[t]}function jte(t){const e=t.Pw;return{...t.se,time:e}}const Ete={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},Ste={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},Cte={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:kT,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},fg={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},Tte={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function N4(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:Cte,crosshair:Ete,grid:Ste,overlayPriceScales:{...fg},leftPriceScale:{...fg,visible:!1},rightPriceScale:{...fg,visible:!0},timeScale:Tte,localization:{locale:Lc?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class IT{constructor(e,r,s){this.Wf=e,this.pg=r,this.vg=s??0}applyOptions(e){this.Wf.Qt().lc(this.pg,e,this.vg)}options(){return this.Yi().N()}width(){return Fx(this.pg)?this.Wf.lw(this.pg):0}setVisibleRange(e){this.setAutoScale(!1),this.Yi().Wl(new ss(e.from,e.to))}getVisibleRange(){const e=this.Yi().Qe();return e===null?null:{from:e.$e(),to:e.qe()}}setAutoScale(e){this.applyOptions({autoScale:e})}Yi(){return we(this.Wf.Qt().oc(this.pg,this.vg)).Ft}}class Ate{constructor(e,r,s,n){this.Wf=e,this.Pt=s,this.mg=r,this.wg=n}getHeight(){return this.Pt.$t()}setHeight(e){const r=this.Wf.Qt(),s=r.Hc(this.Pt);r.fc(s,e)}getStretchFactor(){return this.Pt.Io()}setStretchFactor(e){this.Pt.Bo(e),this.Wf.Qt().Bh()}paneIndex(){return this.Wf.Qt().Hc(this.Pt)}moveTo(e){const r=this.paneIndex();r!==e&&(kr(e>=0&&e<this.Wf.Uf().length,"Invalid pane index"),this.Wf.Qt().mc(r,e))}getSeries(){return this.Pt.Oo().map(e=>this.mg(e))??[]}getHTMLElement(){const e=this.Wf.Uf();return e&&e.length!==0&&e[this.paneIndex()]?e[this.paneIndex()].Xf():null}attachPrimitive(e){this.Pt.ua(e),e.attached&&e.attached({chart:this.wg,requestUpdate:()=>this.Pt.Qt().Bh()})}detachPrimitive(e){this.Pt.ca(e)}priceScale(e){if(this.Pt.Do(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new IT(this.Wf,e,this.paneIndex())}setPreserveEmptyPane(e){this.Pt.zo(e)}preserveEmptyPane(){return this.Pt.Lo()}addCustomSeries(e,r={},s=0){return this.wg.addCustomSeries(e,r,s)}addSeries(e,r={}){return this.wg.addSeries(e,r,this.paneIndex())}}const Fte={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class j4{constructor(e){this.ir=e}applyOptions(e){this.ir.hr(e)}options(){return this.ir.N()}gg(){return this.ir}}class Pte{constructor(e,r,s,n,i,a){this.Mg=new Gt,this.Jn=e,this.bg=r,this.Sg=s,this.o_=i,this.wg=n,this.xg=a}m(){this.Mg.m()}priceFormatter(){return this.Jn.ra()}priceToCoordinate(e){const r=this.Jn.zt();return r===null?null:this.Jn.Ft().Nt(e,r.Wt)}coordinateToPrice(e){const r=this.Jn.zt();return r===null?null:this.Jn.Ft().Ts(e,r.Wt)}barsInLogicalRange(e){if(e===null)return null;const r=new ac(new gu(e.from,e.to)).k_(),s=this.Jn.Xs();if(s.Ki())return null;const n=s.Fr(r.Uh(),1),i=s.Fr(r.bi(),-1),a=we(s.Lr()),l=we(s.Ks());if(n!==null&&i!==null&&n.Re>i.Re)return{barsBefore:e.from-a,barsAfter:l-e.to};const c={barsBefore:n===null||n.Re===a?e.from-a:n.Re-a,barsAfter:i===null||i.Re===l?l-e.to:l-i.Re};return n!==null&&i!==null&&(c.from=n.Pw,c.to=i.Pw),c}setData(e){this.o_,this.Jn.Rr(),this.bg.Cg(this.Jn,e),this.Pg("full")}update(e,r=!1){this.Jn.Rr(),this.bg.kg(this.Jn,e,r),this.Pg("update")}dataByIndex(e,r){const s=this.Jn.Xs().Fr(e,r);return s===null?null:pv(this.seriesType())(s)}data(){const e=pv(this.seriesType());return this.Jn.Xs().Hr().map(r=>e(r))}subscribeDataChanged(e){this.Mg.i(e)}unsubscribeDataChanged(e){this.Mg._(e)}applyOptions(e){this.Jn.hr(e)}options(){return ki(this.Jn.N())}priceScale(){return this.Sg.priceScale(this.Jn.Ft().wa(),this.getPane().paneIndex())}createPriceLine(e){const r=Ts(ki(Fte),e),s=this.Jn.Oh(r);return new j4(s)}removePriceLine(e){this.Jn.Nh(e.gg())}priceLines(){return this.Jn.Fh().map(e=>new j4(e))}seriesType(){return this.Jn.Rr()}attachPrimitive(e){this.Jn.ua(e),e.attached&&e.attached({chart:this.wg,series:this,requestUpdate:()=>this.Jn.Qt().Bh(),horzScaleBehavior:this.o_})}detachPrimitive(e){this.Jn.ca(e),e.detached&&e.detached(),this.Jn.Qt().Bh()}getPane(){const e=this.Jn,r=we(this.Jn.Qt().Hn(e));return this.xg(r)}moveToPane(e){this.Jn.Qt().Oc(this.Jn,e)}seriesOrder(){const e=this.Jn.Qt().Hn(this.Jn);return e===null?-1:e.Oo().indexOf(this.Jn)}setSeriesOrder(e){const r=this.Jn.Qt().Hn(this.Jn);r!==null&&r.Qo(this.Jn,e)}Pg(e){this.Mg.v()&&this.Mg.p(e)}}class Mte{constructor(e,r,s){this.yg=new Gt,this.z_=new Gt,this.wm=new Gt,this.ts=e,this.uh=e.Et(),this.Xm=r,this.uh.Du().i(this.Tg.bind(this)),this.uh.Vu().i(this.Rg.bind(this)),this.Xm.Pm().i(this.Dg.bind(this)),this.o_=s}m(){this.uh.Du().u(this),this.uh.Vu().u(this),this.Xm.Pm().u(this),this.yg.m(),this.z_.m(),this.wm.m()}scrollPosition(){return this.uh.wu()}scrollToPosition(e,r){r?this.uh.yu(e,1e3):this.ts.fn(e)}scrollToRealTime(){this.uh.ku()}getVisibleRange(){const e=this.uh.su();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const r={from:this.o_.convertHorzItemToInternal(e.from),to:this.o_.convertHorzItemToInternal(e.to)},s=this.uh.hu(r);this.ts.zc(s)}getVisibleLogicalRange(){const e=this.uh.iu();return e===null?null:{from:e.Uh(),to:e.bi()}}setVisibleLogicalRange(e){kr(e.from<=e.to,"The from index cannot be after the to index."),this.ts.zc(e)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.Eu()}logicalToCoordinate(e){const r=this.ts.Et();return r.Ki()?null:r.qt(e)}coordinateToLogical(e){return this.uh.Ki()?null:this.uh.uu(e)}timeToIndex(e,r){const s=this.o_.convertHorzItemToInternal(e);return this.uh.J_(s,r)}timeToCoordinate(e){const r=this.timeToIndex(e,!1);return r===null?null:this.uh.qt(r)}coordinateToTime(e){const r=this.ts.Et(),s=r.uu(e),n=r.ss(s);return n===null?null:n.originalTime}width(){return this.Xm.Zf().width}height(){return this.Xm.Zf().height}subscribeVisibleTimeRangeChange(e){this.yg.i(e)}unsubscribeVisibleTimeRangeChange(e){this.yg._(e)}subscribeVisibleLogicalRangeChange(e){this.z_.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.z_._(e)}subscribeSizeChange(e){this.wm.i(e)}unsubscribeSizeChange(e){this.wm._(e)}applyOptions(e){this.uh.hr(e)}options(){return{...ki(this.uh.N()),barSpacing:this.uh.vu()}}Tg(){this.yg.v()&&this.yg.p(this.getVisibleRange())}Rg(){this.z_.v()&&this.z_.p(this.getVisibleLogicalRange())}Dg(e){this.wm.p(e.width,e.height)}}function Rte(t){if(t===void 0||t.type==="custom")return;const e=t;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(r){if(r>=1)return 0;let s=0;for(;s<8;s++){const n=Math.round(r);if(Math.abs(n-r)<1e-8)return s;r*=10}return s}(e.minMove))}function E4(t){return function(e){if(W0(e.handleScale)){const s=e.handleScale;e.handleScale={axisDoubleClickReset:{time:s,price:s},axisPressedMouseMove:{time:s,price:s},mouseWheel:s,pinch:s}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:s,axisDoubleClickReset:n}=e.handleScale;W0(s)&&(e.handleScale.axisPressedMouseMove={time:s,price:s}),W0(n)&&(e.handleScale.axisDoubleClickReset={time:n,price:n})}const r=e.handleScroll;W0(r)&&(e.handleScroll={horzTouchDrag:r,vertTouchDrag:r,mouseWheel:r,pressedMouseMove:r})}(t),t}class Dte{constructor(e,r,s){this.Vg=new Map,this.Ig=new Map,this.Bg=new Gt,this.Eg=new Gt,this.Ag=new Gt,this.$u=new WeakMap,this.zg=new hte(r);const n=s===void 0?ki(N4()):Ts(ki(N4()),E4(s));this.Lg=r,this.Wf=new nte(e,n,r),this.Wf.Kv().i(a=>{this.Bg.v()&&this.Bg.p(this.Og(a()))},this),this.Wf.Xv().i(a=>{this.Eg.v()&&this.Eg.p(this.Og(a()))},this),this.Wf.uc().i(a=>{this.Ag.v()&&this.Ag.p(this.Og(a()))},this);const i=this.Wf.Qt();this.Ng=new Mte(i,this.Wf.tw(),this.Lg)}remove(){this.Wf.Kv().u(this),this.Wf.Xv().u(this),this.Wf.uc().u(this),this.Ng.m(),this.Wf.m(),this.Vg.clear(),this.Ig.clear(),this.Bg.m(),this.Eg.m(),this.Ag.m(),this.zg.m()}resize(e,r,s){this.autoSizeActive()||this.Wf.Gm(e,r,s)}addCustomSeries(e,r={},s=0){const n=(i=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...yte,...i.defaultOptions()},Fg:bte,Wg:i}))(ka(e));return this.Hg(n,r,s)}addSeries(e,r={},s=0){return this.Hg(e,r,s)}removeSeries(e){const r=bs(this.Vg.get(e)),s=this.zg.Ec(r);this.Wf.Qt().Ec(r),this.Ug(s),this.Vg.delete(e),this.Ig.delete(r)}Cg(e,r){this.Ug(this.zg.Fw(e,r))}kg(e,r,s){this.Ug(this.zg.Yw(e,r,s))}subscribeClick(e){this.Bg.i(e)}unsubscribeClick(e){this.Bg._(e)}subscribeCrosshairMove(e){this.Ag.i(e)}unsubscribeCrosshairMove(e){this.Ag._(e)}subscribeDblClick(e){this.Eg.i(e)}unsubscribeDblClick(e){this.Eg._(e)}priceScale(e,r=0){return new IT(this.Wf,e,r)}timeScale(){return this.Ng}applyOptions(e){this.Wf.hr(E4(e))}options(){return this.Wf.N()}takeScreenshot(){return this.Wf.hw()}addPane(e=!1){const r=this.Wf.Qt().Uc();return r.zo(e),this.$g(r)}removePane(e){this.Wf.Qt().dc(e)}swapPanes(e,r){this.Wf.Qt().vc(e,r)}autoSizeActive(){return this.Wf.uw()}chartElement(){return this.Wf.tp()}panes(){return this.Wf.Qt().$s().map(e=>this.$g(e))}paneSize(e=0){const r=this.Wf.fw(e);return{height:r.height,width:r.width}}setCrosshairPosition(e,r,s){const n=this.Vg.get(s);if(n===void 0)return;const i=this.Wf.Qt().Hn(n);i!==null&&this.Wf.Qt().Tc(e,r,i)}clearCrosshairPosition(){this.Wf.Qt().Rc(!0)}horzBehaviour(){return this.Lg}Hg(e,r={},s=0){kr(e.Fg!==void 0),Rte(r.priceFormat),e.type==="Candlestick"&&function(c){c.borderColor!==void 0&&(c.borderUpColor=c.borderColor,c.borderDownColor=c.borderColor),c.wickColor!==void 0&&(c.wickUpColor=c.wickColor,c.wickDownColor=c.wickColor)}(r);const n=Ts(ki(bT),ki(e.defaultOptions),r),i=e.Fg,a=new Mx(this.Wf.Qt(),e.type,n,i,e.Wg);this.Wf.Qt().Ic(a,s);const l=new Pte(a,this,this,this,this.Lg,c=>this.$g(c));return this.Vg.set(l,a),this.Ig.set(a,l),l}Ug(e){const r=this.Wf.Qt();r.Dc(e.Et.ou,e.Et.Gw,e.Et.Jw),e.Oo.forEach((s,n)=>n.ht(s.se,s.Zw)),r.Et().j_(),r.pu()}qg(e){return bs(this.Ig.get(e))}Og(e){const r=new Map;e.Rw.forEach((n,i)=>{const a=i.Rr(),l=pv(a)(n);if(a!=="Custom")kr(ate(l));else{const c=i.pa();kr(!c||c(l)===!1)}r.set(this.qg(i),l)});const s=e.Tw!==void 0&&this.Ig.has(e.Tw)?this.qg(e.Tw):void 0;return{time:e.Pw,logical:e.Re,point:e.kw,paneIndex:e.yw,hoveredSeries:s,hoveredObjectId:e.Dw,seriesData:r,sourceEvent:e.Vw}}$g(e){let r=this.$u.get(e);return r||(r=new Ate(this.Wf,s=>this.qg(s),e,this),this.$u.set(e,r)),r}}function Ote(t){if(Vh(t)){const e=document.getElementById(t);return kr(e!==null,`Cannot find element in DOM with id=${t}`),e}return t}function Lte(t,e,r){const s=Ote(t),n=new Dte(s,e,r);return e.setOptions(n.options()),n}function Ite(t,e){return Lte(t,new c4,c4.ad(e))}class Bte extends Lb{constructor(e,r){super(e,r,!0)}ug(e,r,s){r._u(this.sg,oh(this.ng)),e.$l(this.sg,s,oh(this.ng))}Yg(e,r){return{wt:e,gt:r,_t:NaN,ut:NaN}}og(){const e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(r=>{const s=r.Wt[3];return this.jg(r.Re,s,e)})}}class $te extends Lb{constructor(e,r){super(e,r,!1)}ug(e,r,s){r._u(this.sg,oh(this.ng)),e.Yl(this.sg,s,oh(this.ng))}yM(e,r,s){return{wt:e,qh:r.Wt[0],Yh:r.Wt[1],jh:r.Wt[2],Kh:r.Wt[3],_t:NaN,jl:NaN,Kl:NaN,Xl:NaN,Zl:NaN}}og(){const e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(r=>this.jg(r.Re,r,e))}}class zte extends gl{constructor(){super(...arguments),this.Yt=null,this.SM=0}ht(e){this.Yt=e}et(e){if(this.Yt===null||this.Yt.Xs.length===0||this.Yt.lt===null)return;const{horizontalPixelRatio:r}=e;this.SM=function(i,a){if(i>=2.5&&i<=4)return Math.floor(3*a);const l=1-.2*Math.atan(Math.max(4,i)-4)/(.5*Math.PI),c=Math.floor(i*l*a),d=Math.floor(i*a),u=Math.min(c,d);return Math.max(Math.floor(a),u)}(this.Yt.vu,r),this.SM>=2&&Math.floor(r)%2!=this.SM%2&&this.SM--;const s=this.Yt.Xs;this.Yt.TM&&this.RM(e,s,this.Yt.lt),this.Yt.Mi&&this._v(e,s,this.Yt.lt);const n=this.DM(r);(!this.Yt.Mi||this.SM>2*n)&&this.VM(e,s,this.Yt.lt)}RM(e,r,s){if(this.Yt===null)return;const{context:n,horizontalPixelRatio:i,verticalPixelRatio:a}=e;let l="",c=Math.min(Math.floor(i),Math.floor(this.Yt.vu*i));c=Math.max(Math.floor(i),Math.min(c,this.SM));const d=Math.floor(.5*c);let u=null;for(let h=s.from;h<s.to;h++){const f=r[h];f.pr!==l&&(n.fillStyle=f.pr,l=f.pr);const m=Math.round(Math.min(f.jl,f.Zl)*a),x=Math.round(Math.max(f.jl,f.Zl)*a),p=Math.round(f.Kl*a),g=Math.round(f.Xl*a);let v=Math.round(i*f._t)-d;const b=v+c-1;u!==null&&(v=Math.max(u+1,v),v=Math.min(v,b));const y=b-v+1;n.fillRect(v,p,y,m-p),n.fillRect(v,x+1,y,g-x),u=b}}DM(e){let r=Math.floor(1*e);this.SM<=2*r&&(r=Math.floor(.5*(this.SM-1)));const s=Math.max(Math.floor(e),r);return this.SM<=2*s?Math.max(Math.floor(e),Math.floor(1*e)):s}_v(e,r,s){if(this.Yt===null)return;const{context:n,horizontalPixelRatio:i,verticalPixelRatio:a}=e;let l="";const c=this.DM(i);let d=null;for(let u=s.from;u<s.to;u++){const h=r[u];h.dr!==l&&(n.fillStyle=h.dr,l=h.dr);let f=Math.round(h._t*i)-Math.floor(.5*this.SM);const m=f+this.SM-1,x=Math.round(Math.min(h.jl,h.Zl)*a),p=Math.round(Math.max(h.jl,h.Zl)*a);if(d!==null&&(f=Math.max(d+1,f),f=Math.min(f,m)),this.Yt.vu*i>2*c)KJ(n,f,x,m-f+1,p-x+1,c);else{const g=m-f+1;n.fillRect(f,x,g,p-x+1)}d=m}}VM(e,r,s){if(this.Yt===null)return;const{context:n,horizontalPixelRatio:i,verticalPixelRatio:a}=e;let l="";const c=this.DM(i);for(let d=s.from;d<s.to;d++){const u=r[d];let h=Math.round(Math.min(u.jl,u.Zl)*a),f=Math.round(Math.max(u.jl,u.Zl)*a),m=Math.round(u._t*i)-Math.floor(.5*this.SM),x=m+this.SM-1;if(u.cr!==l){const p=u.cr;n.fillStyle=p,l=p}this.Yt.Mi&&(m+=c,h+=c,x-=c,f-=c),h>f||n.fillRect(m,h,x-m+1,f-h+1)}}}class Ute extends $te{constructor(){super(...arguments),this.hg=new zte}jg(e,r,s){return{...this.yM(e,r,s),...s.Dr(e)}}cg(){const e=this.Jn.N();this.hg.ht({Xs:this.sg,vu:this.Qn.Et().vu(),TM:e.wickVisible,Mi:e.borderVisible,lt:this.ng})}}const Vte={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Fg:(t,e)=>new Ute(t,e)};class Wte extends gl{constructor(){super(...arguments),this.Yt=null,this.IM=[]}ht(e){this.Yt=e,this.IM=[]}et({context:e,horizontalPixelRatio:r,verticalPixelRatio:s}){if(this.Yt===null||this.Yt.ot.length===0||this.Yt.lt===null)return;this.IM.length||this.BM(r);const n=Math.max(1,Math.floor(s)),i=Math.round(this.Yt.EM*s)-Math.floor(n/2),a=i+n;for(let l=this.Yt.lt.from;l<this.Yt.lt.to;l++){const c=this.Yt.ot[l],d=this.IM[l-this.Yt.lt.from],u=Math.round(c.ut*s);let h,f;e.fillStyle=c.cr,u<=i?(h=u,f=a):(h=i,f=u-Math.floor(n/2)+n),e.fillRect(d.Uh,h,d.bi-d.Uh+1,f-h)}}BM(e){if(this.Yt===null||this.Yt.ot.length===0||this.Yt.lt===null)return void(this.IM=[]);const r=Math.ceil(this.Yt.vu*e)<=1?0:Math.max(1,Math.floor(e)),s=Math.round(this.Yt.vu*e)-r;this.IM=new Array(this.Yt.lt.to-this.Yt.lt.from);for(let i=this.Yt.lt.from;i<this.Yt.lt.to;i++){const a=this.Yt.ot[i],l=Math.round(a._t*e);let c,d;if(s%2){const u=(s-1)/2;c=l-u,d=l+u}else{const u=s/2;c=l-u,d=l+u-1}this.IM[i-this.Yt.lt.from]={Uh:c,bi:d,AM:l,ne:a._t*e,wt:a.wt}}for(let i=this.Yt.lt.from+1;i<this.Yt.lt.to;i++){const a=this.IM[i-this.Yt.lt.from],l=this.IM[i-this.Yt.lt.from-1];a.wt===l.wt+1&&a.Uh-l.bi!==r+1&&(l.AM>l.ne?l.bi=a.Uh-r-1:a.Uh=l.bi+r+1)}let n=Math.ceil(this.Yt.vu*e);for(let i=this.Yt.lt.from;i<this.Yt.lt.to;i++){const a=this.IM[i-this.Yt.lt.from];a.bi<a.Uh&&(a.bi=a.Uh);const l=a.bi-a.Uh+1;n=Math.min(l,n)}if(r>0&&n<4)for(let i=this.Yt.lt.from;i<this.Yt.lt.to;i++){const a=this.IM[i-this.Yt.lt.from];a.bi-a.Uh+1>n&&(a.AM>a.ne?a.bi-=1:a.Uh+=1)}}}class Hte extends Bte{constructor(){super(...arguments),this.hg=new Wte}jg(e,r,s){return{...this.Yg(e,r),...s.Dr(e)}}cg(){const e={ot:this.sg,vu:this.Qn.Et().vu(),lt:this.ng,EM:this.Jn.Ft().Nt(this.Jn.N().base,we(this.Jn.zt()).Wt)};this.hg.ht(e)}}const Yte={type:"Histogram",isBuiltIn:!0,defaultOptions:{color:"#26a69a",base:0},Fg:(t,e)=>new Hte(t,e)};({...bT});const qte=w.forwardRef(({symbol:t,timeframe:e,data:r,className:s,height:n=400,onCrosshairMove:i},a)=>{const l=w.useRef(null),c=w.useRef(null),d=w.useRef(null),u=w.useRef(null),[h,f]=w.useState(!0),[m,x]=w.useState(null),[p,g]=w.useState(null),[v,b]=w.useState(null);w.useImperativeHandle(a,()=>({updatePrice:E=>{N(E)},updateRealtimePrice:E=>{y(E)},addRealtimeCandle:(E,j)=>{k(E,j)}}));const y=E=>{if(!(!d.current||!r.length))try{b(E);const j=r[r.length-1];if(!j)return;const S=(P=>{switch(P){case"M1":return 60;case"M5":return 300;case"M15":return 900;case"M30":return 1800;case"H1":return 3600;case"H4":return 14400;case"D1":return 86400;default:return 300}})(e),C=Math.floor(Date.now()/1e3),F=Math.floor(C/S)*S;if(F>j.time){const P={time:F,open:E,high:E,low:E,close:E};g(P),d.current.update(P),console.log("📊 Nueva vela creada:",{symbol:t,time:new Date(F*1e3).toISOString(),price:E,candle:P})}else{const P={time:(p==null?void 0:p.time)||F,open:(p==null?void 0:p.open)||j.close,high:Math.max((p==null?void 0:p.high)||j.close,E),low:Math.min((p==null?void 0:p.low)||j.close,E),close:E};g(P),d.current.update(P),console.log("📊 Vela actualizada:",{symbol:t,price:E,candle:P})}}catch(j){console.error("Error actualizando precio en tiempo real:",j)}},k=(E,j)=>{if(d.current)try{const _=Math.floor(Date.now()/1e3),S={time:_,open:v||E,high:E,low:E,close:E};g(S),d.current.update(S),j&&u.current&&u.current.update({time:_,value:j,color:"#10b98150"}),console.log("📊 Nueva vela agregada:",S)}catch(_){console.error("Error agregando vela en tiempo real:",_)}},N=E=>{if(d.current)try{const j={time:Math.floor(E.time),open:E.open,high:E.high,low:E.low,close:E.close};d.current.update(j),E.volume&&u.current&&u.current.update({time:Math.floor(E.time),value:E.volume,color:E.close>=E.open?"#10b98150":"#ef444450"})}catch(j){console.error("Error actualizando vela:",j)}};return w.useEffect(()=>{if(l.current){try{const E=Ite(l.current,{width:l.current.clientWidth,height:n,layout:{background:{type:uv.Solid,color:"transparent"},textColor:"#d1d5db"},grid:{vertLines:{color:"#374151"},horzLines:{color:"#374151"}},crosshair:{mode:1,vertLine:{width:1,color:"#6b7280",style:2},horzLine:{width:1,color:"#6b7280",style:2}},rightPriceScale:{borderColor:"#374151",textColor:"#d1d5db"},timeScale:{borderColor:"#374151",timeVisible:!0,secondsVisible:e==="M1"||e==="M5"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0},handleScale:{axisPressedMouseMove:!0,mouseWheel:!0,pinch:!0}}),j=E.addSeries(Vte,{upColor:"#10b981",downColor:"#ef4444",borderDownColor:"#ef4444",borderUpColor:"#10b981",wickDownColor:"#ef4444",wickUpColor:"#10b981",priceLineVisible:!1,lastValueVisible:!0}),_=E.addSeries(Yte,{color:"#6b7280",priceFormat:{type:"volume"},priceScaleId:"volume"});E.priceScale("volume").applyOptions({scaleMargins:{top:.8,bottom:0}}),E.subscribeCrosshairMove(S=>{if(i){const C=S.seriesPrices.get(j);i(C?C.close:null)}}),c.current=E,d.current=j,u.current=_,x(null)}catch(E){console.error("Error creando gráfico:",E),x("Error al inicializar el gráfico")}return()=>{c.current&&c.current.remove()}}},[n,e,i]),w.useEffect(()=>{var E;if(!d.current||!u.current||!r.length){f(!1);return}try{const j=r.map(S=>({time:S.time,open:S.open,high:S.high,low:S.low,close:S.close})).sort((S,C)=>S.time-C.time),_=r.filter(S=>S.volume!==void 0).map(S=>({time:S.time,value:S.volume,color:S.close>=S.open?"#10b98150":"#ef444450"})).sort((S,C)=>S.time-C.time);d.current.setData(j),_.length>0&&u.current.setData(_),(E=c.current)==null||E.timeScale().fitContent(),f(!1),x(null)}catch(j){console.error("Error actualizando datos del gráfico:",j),x("Error al cargar los datos del gráfico"),f(!1)}},[r]),w.useEffect(()=>{const E=()=>{c.current&&l.current&&c.current.applyOptions({width:l.current.clientWidth})};return window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]),w.useEffect(()=>{window.updateTradingChart=N},[]),m?o.jsx("div",{className:je("relative bg-secondary-900 rounded-lg overflow-hidden flex items-center justify-center",s),children:o.jsxs("div",{className:"text-center text-white",children:[o.jsx("div",{className:"text-red-500 mb-2",children:"⚠️"}),o.jsx("div",{className:"text-sm",children:m}),o.jsx("div",{className:"text-xs text-secondary-400 mt-2",children:"Usando gráfico simulado como respaldo"}),o.jsx("div",{className:"text-4xl font-bold mt-4",children:r.length>0?r[r.length-1].close.toFixed(5):"1.08500"}),o.jsxs("div",{className:"text-sm text-secondary-400",children:[t," • ",e]})]})}):o.jsxs("div",{className:je("relative bg-secondary-900 rounded-lg overflow-hidden",s),children:[o.jsx("div",{className:"absolute top-0 left-0 z-10 p-4 bg-gradient-to-r from-secondary-900/90 to-transparent",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-white",children:t}),o.jsx("span",{className:"px-2 py-1 bg-primary-600 text-white text-xs rounded",children:e}),h&&o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full animate-pulse"}),o.jsx("span",{className:"text-xs text-secondary-400",children:"Cargando..."})]}),o.jsxs("div",{className:"text-xs text-green-400",children:["📊 Finage Data • ",r.length," velas"]})]})}),o.jsx("div",{ref:l,className:"w-full",style:{height:`${n}px`}}),h&&o.jsx("div",{className:"absolute inset-0 bg-secondary-900/50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-8 h-8 border-2 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-secondary-400",children:"Cargando datos de Finage..."})]})})]})});class Gte{constructor(e){_e(this,"ws",null);_e(this,"options");_e(this,"reconnectAttempts",0);_e(this,"maxReconnectAttempts",3);_e(this,"reconnectInterval",1e4);_e(this,"isConnecting",!1);_e(this,"subscribedSymbols",new Set);_e(this,"reconnectTimer",null);_e(this,"pingTimer",null);_e(this,"isAuthenticated",!1);_e(this,"lastDataReceived",0);_e(this,"dataValidationTimer",null);_e(this,"isDestroyed",!1);_e(this,"rateLimitBackoff",0);this.options=e,this.lastDataReceived=Date.now(),this.startDataValidation()}connect(){var r,s,n,i;if(this.isDestroyed){console.log("🚫 Servicio destruido, no se puede conectar");return}if(this.isConnecting||this.ws&&this.ws.readyState===WebSocket.CONNECTING){console.log("🔄 Ya hay una conexión en progreso...");return}if(this.ws&&this.ws.readyState===WebSocket.OPEN){console.log("✅ WebSocket ya está conectado y funcionando");return}if(this.rateLimitBackoff>Date.now()){const a=Math.ceil((this.rateLimitBackoff-Date.now())/1e3);console.log(`⏳ Rate limit activo, esperando ${a} segundos`),setTimeout(()=>this.connect(),a*1e3);return}if(this.ws&&(this.ws.close(),this.ws=null),this.isConnecting=!0,!this.options.socketKey||this.options.socketKey==="YOUR_FINAGE_SOCKET_KEY_HERE"){console.error("❌ Socket Key de Finage no válida"),(s=(r=this.options).onError)==null||s.call(r,"Socket Key no configurada correctamente"),this.isConnecting=!1;return}const e=`${{}.VITE_FINAGE_WS_URL}?token=${this.options.socketKey}`;console.log("🔌 Estableciendo conexión persistente a Finage WebSocket..."),console.log("🔗 URL de conexión:",e.replace(this.options.socketKey,"***TOKEN***"));try{this.ws=new WebSocket(e),this.ws.onopen=()=>{var a,l,c;console.log("✅ Conexión WebSocket PERSISTENTE establecida con Finage"),console.log("🔍 Estado de conexión:",(a=this.ws)==null?void 0:a.readyState),this.isConnecting=!1,this.reconnectAttempts=0,this.rateLimitBackoff=0,this.isAuthenticated=!0,this.lastDataReceived=Date.now(),(c=(l=this.options).onConnect)==null||c.call(l),setTimeout(()=>{var d;this.ws&&this.ws.readyState===WebSocket.OPEN?(console.log("📡 Iniciando suscripciones a símbolos...",this.options.symbols),this.subscribeToSymbols(this.options.symbols)):console.error("❌ WebSocket no está abierto para suscripciones:",(d=this.ws)==null?void 0:d.readyState)},500),this.startPing()},this.ws.onmessage=a=>{try{const l=JSON.parse(a.data);if(this.lastDataReceived=Date.now(),l.status_code===400&&l.message&&l.message.includes("banned")){console.warn("⚠️ Rate limit detectado de Finage"),this.rateLimitBackoff=Date.now()+60*1e3;return}this.handleMessage(l)}catch(l){console.error("❌ Error parsing WebSocket message:",l)}},this.ws.onerror=a=>{var c,d,u;console.error("❌ WebSocket error detallado:",a),console.error("❌ Estado de la conexión:",(c=this.ws)==null?void 0:c.readyState),console.error("❌ URL utilizada:",e.replace(this.options.socketKey,"***TOKEN***")),this.isConnecting=!1;const l="Error de conexión WebSocket - Verificar credenciales y URL";(u=(d=this.options).onError)==null||u.call(d,l)},this.ws.onclose=a=>{var l,c;console.log(`🔌 WebSocket desconectado: ${a.code} - ${a.reason}`),console.log("🔍 Detalles del cierre:",{code:a.code,reason:a.reason,wasClean:a.wasClean}),this.isConnecting=!1,this.isAuthenticated=!1,this.clearTimers(),(c=(l=this.options).onDisconnect)==null||c.call(l),!this.isDestroyed&&this.shouldReconnect(a.code)?(console.log("🔄 Programando reconexión para mantener conexión persistente..."),this.scheduleReconnect()):console.log("🛑 No se reconectará automáticamente")}}catch(a){console.error("❌ Error creando WebSocket:",a),this.isConnecting=!1;const l=a instanceof Error?a.message:"Error al crear conexión WebSocket";(i=(n=this.options).onError)==null||i.call(n,l)}}shouldReconnect(e){const r=[1006,1011,1012,1013,1014];return[1e3,1001,1005,4e3].includes(e)?(console.log(`🛑 Cierre normal (${e}) - NO reconectar`),!1):r.includes(e)?this.reconnectAttempts>=this.maxReconnectAttempts?(console.error("❌ Máximo número de reconexiones alcanzado, manteniendo conexión cerrada"),!1):(console.log(`🔄 Error de red detectado (${e}) - SÍ reconectar`),!0):(console.log(`🤔 Código de cierre desconocido (${e}) - NO reconectar por seguridad`),!1)}startDataValidation(){this.dataValidationTimer=setInterval(()=>{var s,n;const e=Date.now(),r=e-this.lastDataReceived;this.isAuthenticated&&r>12e4&&(console.info("ℹ️ Sin datos nuevos por 2 minutos (normal en mercados cerrados)"),(n=(s=this.options).onMessage)==null||n.call(s,{type:"no_data",data:"Sin datos recientes - puede ser normal",timestamp:e,isRealData:!1}))},6e4)}startPing(){this.pingTimer=setInterval(()=>{this.ws&&this.ws.readyState===WebSocket.OPEN&&(this.ws.send(JSON.stringify({action:"ping"})),console.log("🏓 Ping enviado para mantener conexión viva"))},45e3)}clearTimers(){this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.pingTimer&&(clearInterval(this.pingTimer),this.pingTimer=null),this.dataValidationTimer&&(clearInterval(this.dataValidationTimer),this.dataValidationTimer=null)}cleanup(){this.clearTimers(),this.subscribedSymbols.clear(),this.isAuthenticated=!1,this.reconnectAttempts=0}handleMessage(e){var r,s,n,i;try{console.log("📨 Mensaje recibido del WebSocket:",e);const a=this.validateRealData(e);if(e.s){const l=e.s,c=e.a||e.ap||0,d=e.b||e.bp||0,u=e.p||(c+d)/2||c||d,h={type:"price",symbol:l,data:{symbol:l,price:parseFloat(u.toString()),bid:parseFloat(d.toString()),ask:parseFloat(c.toString()),askSize:e.as?parseFloat(e.as):void 0,bidSize:e.bs?parseFloat(e.bs):void 0,tradeSize:e.q?parseFloat(e.q):void 0,volume:e.v?parseFloat(e.v):void 0,timestamp:e.t||Date.now(),change:e.dd?parseFloat(e.dd):0,changePercent:e.dc?parseFloat(e.dc):0,spread:c&&d?parseFloat((c-d).toFixed(5)):0,prePostMarket:e.ppms||!1},timestamp:Date.now(),isRealData:a};console.log("💰 Precio procesado para",l,":",{bid:h.data.bid,ask:h.data.ask,price:h.data.price,spread:h.data.spread,change:h.data.change,changePercent:h.data.changePercent,timestamp:new Date(h.data.timestamp).toLocaleTimeString()}),a||console.warn("⚠️ Datos recibidos podrían no ser en tiempo real:",l),this.lastDataReceived=Date.now(),(s=(r=this.options).onMessage)==null||s.call(r,h)}else e.status==="success"&&e.message?console.log("✅ Mensaje del servidor:",e.message):e.status==="error"?(console.error("❌ Error del servidor:",e.message),(i=(n=this.options).onError)==null||i.call(n,e.message)):e.action==="pong"?console.log("🏓 Pong recibido del servidor"):console.log("📋 Mensaje no procesado:",e)}catch(a){console.error("❌ Error procesando mensaje WebSocket:",a)}}validateRealData(e){if(!e||!e.s)return!1;const r=e.a||e.ap||0,s=e.b||e.bp||0,n=e.p||0;if(!r&&!s&&!n)return console.warn("⚠️ No hay precios válidos en los datos:",e.s),!1;const i=Date.now(),a=e.t||i;return Math.abs(i-a)>3e5?(console.warn("⚠️ Datos con timestamp antiguo:",e.s,new Date(a)),!1):[r,s,n].filter(d=>d>0).length===0?(console.warn("⚠️ Todos los precios son inválidos:",e.s),!1):!0}subscribeToSymbols(e){var r;if(!this.ws||this.ws.readyState!==WebSocket.OPEN||!this.isAuthenticated){console.warn("⚠️ No se puede suscribir: WebSocket no conectado o no autenticado"),console.log("🔍 Estado WebSocket:",(r=this.ws)==null?void 0:r.readyState,"Autenticado:",this.isAuthenticated);return}console.log("📈 Iniciando suscripciones a símbolos:",e),e.forEach(s=>{if(this.subscribedSymbols.has(s))console.log(`ℹ️ Ya suscrito a ${s}`);else{const n={action:"subscribe",symbols:s};console.log(`📈 Enviando suscripción para ${s}:`,JSON.stringify(n));try{this.ws.send(JSON.stringify(n)),this.subscribedSymbols.add(s),console.log(`✅ Suscrito a ${s}`)}catch(i){console.error(`❌ Error enviando suscripción para ${s}:`,i)}}}),console.log("📊 Total símbolos suscritos:",this.subscribedSymbols.size)}scheduleReconnect(){var i,a;if(this.reconnectTimer||this.isConnecting||this.isDestroyed)return;if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("❌ Máximo número de intentos de reconexión alcanzado"),(a=(i=this.options).onError)==null||a.call(i,"Conexión perdida permanentemente");return}this.reconnectAttempts++;const e=this.reconnectInterval,r=Math.min(e*Math.pow(2,this.reconnectAttempts-1),6e4),s=Math.random()*5e3,n=r+s;console.log(`🔄 Reconexión programada en ${Math.round(n/1e3)}s (intento ${this.reconnectAttempts}/${this.maxReconnectAttempts})`),this.reconnectTimer=setTimeout(()=>{this.reconnectTimer=null,!this.isDestroyed&&!this.isConnected()&&(console.log("🔄 Ejecutando reconexión programada..."),this.connect())},n)}subscribe(e){this.options.symbols.push(e),this.ws&&this.ws.readyState===WebSocket.OPEN&&this.isAuthenticated&&this.subscribeToSymbols([e])}unsubscribe(e){const r=this.options.symbols.indexOf(e);if(r>-1&&this.options.symbols.splice(r,1),this.subscribedSymbols.has(e)&&this.ws&&this.ws.readyState===WebSocket.OPEN){const s={action:"unsubscribe",symbols:e};this.ws.send(JSON.stringify(s)),this.subscribedSymbols.delete(e),console.log(`📉 Desuscrito de ${e}`)}}disconnect(){console.log("🔌 Desconectando WebSocket SOLO por solicitud explícita..."),this.isDestroyed=!0,this.cleanup(),this.ws&&(this.ws.close(1e3,"User initiated disconnect"),this.ws=null)}keepAlive(){console.log("💓 Manteniendo conexión WebSocket viva..."),this.ws&&this.ws.readyState===WebSocket.OPEN?this.ws.send(JSON.stringify({action:"ping"})):!this.isConnecting&&!this.isDestroyed&&(console.log("🔄 Conexión perdida, reconectando automáticamente..."),this.connect())}isConnected(){return this.ws!==null&&this.ws.readyState===WebSocket.OPEN&&this.isAuthenticated}getConnectionStatus(){if(!this.ws)return"disconnected";switch(this.ws.readyState){case WebSocket.CONNECTING:return"connecting";case WebSocket.OPEN:return this.isAuthenticated?"connected":"authenticating";case WebSocket.CLOSING:return"disconnecting";case WebSocket.CLOSED:return"disconnected";default:return"unknown"}}getLastDataTime(){return this.lastDataReceived}}function Kte(t){const[e,r]=w.useState(!1),[s,n]=w.useState("disconnected"),[i,a]=w.useState(null),[l,c]=w.useState({}),[d,u]=w.useState(!1),[h,f]=w.useState(null),m=w.useRef(null),x=w.useRef(!1),p=w.useRef(!1),g=w.useCallback(N=>{a(N),N.type==="price"&&N.symbol&&N.data?(c(E=>({...E,[N.symbol]:N.data})),N.isRealData&&(u(!0),f(null))):(N.type==="error"||N.type==="no_data")&&(f(N.data),u(!1))},[]);w.useEffect(()=>{if(x.current)return;const N={}.VITE_FINAGE_SOCKET_KEY;if(!N||N==="YOUR_FINAGE_SOCKET_KEY_HERE"){console.error("❌ Socket Key de Finage no configurada. Por favor configura VITE_FINAGE_SOCKET_KEY en tu archivo .env"),f("Socket Key de Finage no configurada correctamente");return}return console.log("🔌 Inicializando conexión WebSocket PERMANENTE para Finage"),x.current=!0,m.current=new Gte({socketKey:N,symbols:t,onMessage:g,onConnect:()=>{r(!0),n("connected"),f(null),console.log("✅ Hook: Conectado a Finage WebSocket - CONEXIÓN PERMANENTE")},onDisconnect:()=>{r(!1),n("disconnected"),u(!1),console.log("❌ Hook: Desconectado de Finage WebSocket")},onError:E=>{const j=typeof E=="string"?E:"Error de conexión WebSocket";f(j),u(!1),console.error("❌ Hook: Error en WebSocket:",j)}}),m.current.connect(),()=>{console.log("🔌 Componente desmontándose - MANTENIENDO conexión WebSocket"),p.current=!0,x.current=!1}},[]),w.useEffect(()=>{m.current&&x.current&&!p.current&&t.forEach(N=>{var E;(E=m.current)==null||E.subscribe(N)})},[t.join(",")]),w.useEffect(()=>{const N=setInterval(()=>{if(m.current&&x.current&&!p.current){const E=m.current.getConnectionStatus();n(E),r(m.current.isConnected())}},15e3);return()=>clearInterval(N)},[]);const v=w.useCallback(N=>{var E;(E=m.current)==null||E.subscribe(N)},[]),b=w.useCallback(N=>{var E;(E=m.current)==null||E.unsubscribe(N)},[]),y=w.useCallback(()=>{m.current&&(console.log("🔄 Reconectando manualmente por solicitud del usuario..."),m.current.disconnect(),setTimeout(()=>{var N;(N=m.current)==null||N.connect()},1e3))},[]),k=w.useCallback(()=>{m.current&&(console.log("🛑 Desconexión FORZADA por usuario"),p.current=!0,m.current.disconnect(),m.current=null,x.current=!1)},[]);return{connected:e,connectionStatus:s,prices:l,candles:{},hasRealData:d,connectionError:h,lastMessage:i,subscribe:v,unsubscribe:b,reconnect:y,forceDisconnect:k,service:m.current}}function Xte({symbols:t,onPriceUpdate:e,onChartUpdate:r}){const[s,n]=w.useState({}),[i,a]=w.useState(Date.now()),{connected:l,prices:c,hasRealData:d,connectionError:u}=Kte(t),h=w.useCallback((v,b)=>{e==null||e(v,b)},[e]),f=w.useCallback((v,b)=>{r==null||r(v,b)},[r]);w.useEffect(()=>{c&&Object.keys(c).length>0&&n(v=>{const b={...v};let y=!1;return Object.entries(c).forEach(([k,N])=>{var E;if(N&&typeof N=="object"){const j=((E=v[k])==null?void 0:E.price)||0,_=N.price||N.ask||N.bid||0,S=N.bid||_,C=N.ask||_;if(Math.abs(_-j)<1e-5&&j>0){v[k]&&(b[k]={...v[k],timestamp:N.timestamp||Date.now(),isRealTime:!0},y=!0);return}const F=j>0?_-j:0,P=j>0?F/j*100:0,B={symbol:k,price:_,bid:S,ask:C,change:F,changePercent:P,spread:C-S,timestamp:N.timestamp||Date.now(),isRealTime:!0,priceDirection:F>0?"up":F<0?"down":"neutral"};b[k]=B,y=!0,console.log(`📊 Feed actualizado - ${k}:`,{price:_.toFixed(5),bid:S.toFixed(5),ask:C.toFixed(5),change:F.toFixed(5),changePercent:P.toFixed(2)+"%",direction:B.priceDirection})}}),y&&a(Date.now()),b})},[c]),w.useEffect(()=>{Object.entries(s).forEach(([v,b])=>{b&&(h(v,b),f(v,b.price))})},[s,h,f]);const m=w.useCallback(v=>{var b;return((b=s[v])==null?void 0:b.price)||null},[s]),x=w.useCallback(v=>s[v]||null,[s]),p=w.useCallback(v=>{var b;return((b=s[v])==null?void 0:b.isRealTime)||!1},[s]),g={totalSymbols:Object.keys(s).length,realtimeSymbols:Object.values(s).filter(v=>v.isRealTime).length,lastUpdate:i,isConnected:l,hasData:d,error:u};return{priceFeed:s,feedStats:g,isConnected:l,hasRealData:d,connectionError:u,getCurrentPrice:m,getSymbolData:x,hasRealtimeData:p,lastUpdateTime:i}}function Qte(){var re,W,K,Z,M,X,V,Y;const{user:t,isAuthenticated:e}=ll(),[r,s]=w.useState("EURUSD"),[n,i]=w.useState("M5"),[a,l]=w.useState({Forex:!0,Crypto:!1,Commodities:!1,Indices:!1}),[c,d]=w.useState(!1),[u,h]=w.useState("buy"),[f,m]=w.useState(null),x=w.useRef(null),p=["EURUSD","GBPUSD","USDJPY","AUDUSD","USDCAD","USDCHF","NZDUSD","EURGBP","EURJPY","GBPJPY"],{priceFeed:g,isConnected:v,hasRealData:b,connectionError:y,getCurrentPrice:k,hasRealtimeData:N}=Xte({symbols:p,onPriceUpdate:(H,ie)=>{if(console.log(`🔄 Precio actualizado en WebTrader - ${H}:`,{price:ie.price,bid:ie.bid,ask:ie.ask,change:ie.change,isRealTime:ie.isRealTime,timestamp:new Date(ie.timestamp).toLocaleTimeString()}),Math.abs(ie.change)>1e-4&&H===r){const de=ie.change>0?"📈":"📉";me(`${de} ${H}: ${Q(ie.price,5)}`,{duration:2e3,position:"top-right",style:{background:ie.change>0?"#10B981":"#EF4444",color:"white",fontSize:"12px"}})}},onChartUpdate:(H,ie)=>{H===r&&x.current&&x.current.updateRealtimePrice(ie)}});w.useEffect(()=>{console.log("📊 Estado del feed de precios:",{totalSymbols:Object.keys(g).length,symbols:Object.keys(g),finageConnected:v,hasRealData:b,connectionError:y})},[g,v,b,y]),w.useEffect(()=>{v&&b?(console.log("🟢 Finage WebSocket activo - Datos reales"),me.success("Conectado a datos en tiempo real",{duration:3e3,icon:"🟢"})):y?(console.warn("⚠️ Error en conexión Finage:",y),(!f||f!==y)&&me.error("Error de conexión a datos en tiempo real",{duration:5e3,icon:"⚠️"})):v&&!b&&(console.warn("⚠️ Conectado pero sin datos reales"),me.loading("Esperando datos en tiempo real...",{duration:3e3,icon:"⏳"}))},[v,b,y,f]),w.useEffect(()=>{let H=null;return!v&&!y&&(H=me.error("Desconectado del servidor de datos",{duration:4e3,icon:"🔌"})),()=>{H&&me.dismiss(H)}},[v,y]);const{data:E}=Ke({queryKey:["instruments"],queryFn:()=>Qa.getInstruments(),staleTime:10*60*1e3}),{data:j}=Ke({queryKey:["prices"],queryFn:()=>Qa.getPrices(),refetchInterval:1e3});Ke({queryKey:["candles",r,n],queryFn:()=>Qa.getCandles(r,n,100),refetchInterval:3e4,enabled:!!r});const{data:_}=Ke({queryKey:["orders"],queryFn:()=>Qa.getOrders(1),refetchInterval:2e3}),{data:S}=Ke({queryKey:["account-info"],queryFn:()=>Qa.getAccountInfo(1),refetchInterval:5e3}),C=ot({mutationFn:H=>Qa.createOrder(H),onSuccess:()=>{me.success("Orden creada exitosamente",{duration:4e3,icon:"✅"}),d(!1),setTimeout(()=>{},1e3)},onError:H=>{var ie,de;console.error("Error creando orden:",H),me.error(((de=(ie=H.response)==null?void 0:ie.data)==null?void 0:de.message)||"Error al crear la orden",{duration:5e3,icon:"❌"})}}),F=ot({mutationFn:H=>Qa.closeOrder(H),onSuccess:()=>{me.success("Orden cerrada exitosamente",{duration:4e3,icon:"✅"}),setTimeout(()=>{},1e3)},onError:H=>{var ie,de;console.error("Error cerrando orden:",H),me.error(((de=(ie=H.response)==null?void 0:ie.data)==null?void 0:de.message)||"Error al cerrar la orden",{duration:5e3,icon:"❌"})}}),P=()=>{if(console.log("🔍 getDisplayPrices - Estado actual:",{realtimePricesCount:Object.keys(g).length,realtimePricesKeys:Object.keys(g),hasApiPrices:!!(j!=null&&j.data),apiPricesKeys:j!=null&&j.data?Object.keys(j.data):[]}),Object.keys(g).length>0){const H={};return Object.entries(g).forEach(([ie,de])=>{de&&typeof de=="object"&&(H[ie]={bid:de.bid||de.price||0,ask:de.ask||de.price||0,price:de.price||de.bid||de.ask||0,change:de.change||0,changePercent:de.changePercent||0,spread:de.spread||0,timestamp:de.timestamp||Date.now(),isRealTime:!0})}),console.log("✅ Usando precios en tiempo real:",{symbolsCount:Object.keys(H).length,symbols:Object.keys(H)}),{data:H}}return console.log("⚠️ Usando fallback a API prices"),j},B=H=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(H),Q=(H,ie=5)=>H.toFixed(ie),D=H=>{h(H),d(!0)},I=H=>{window.confirm("¿Estás seguro de que quieres cerrar esta orden?")&&F.mutate(H)},te=H=>{l(ie=>{const de={...ie};return ie[H]?de[H]=!1:Object.keys(de).forEach(xe=>{de[xe]=xe===H}),de})};return w.useEffect(()=>{y?(m(y),me.error(`Error WebSocket: ${y}`)):m(null)},[y]),w.useEffect(()=>{if(N(r)&&x.current){const H=k(r);H&&(x.current.updateRealtimePrice(H),console.log("📊 Actualizando gráfico con precio en tiempo real:",{symbol:r,price:H,timestamp:new Date().toLocaleTimeString()}))}},[r,N,k,g]),w.useEffect(()=>{if(!N(r))return;const H=setInterval(()=>{const ie=k(r);ie&&x.current&&(x.current.addRealtimeCandle(ie,100),console.log("🕐 Nueva vela generada cada minuto:",{symbol:r,price:ie,time:new Date().toLocaleTimeString()}))},6e4);return()=>clearInterval(H)},[r,N,k]),o.jsxs("div",{className:"min-h-screen w-full bg-secondary-50 dark:bg-secondary-900 flex flex-col",children:[o.jsx("div",{className:"bg-white dark:bg-secondary-800 border-b border-secondary-200 dark:border-secondary-700 px-4 sm:px-6 lg:px-8 py-3",children:o.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[o.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-secondary-900 dark:text-white",children:"WebTrader"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:je("w-3 h-3 rounded-full transition-all duration-300",v&&b?"bg-green-500 animate-pulse shadow-lg shadow-green-500/50":v?"bg-yellow-500 animate-pulse":"bg-red-500")}),o.jsx("span",{className:je("text-xs sm:text-sm font-medium transition-colors duration-300",v&&b?"text-green-600 dark:text-green-400":v?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"),children:v&&b?"🟢 LIVE - Datos en tiempo real":v?"🟡 Conectado - Esperando datos":"🔴 Desconectado"}),y&&o.jsx(Qs,{className:"w-4 h-4 text-red-500",title:y}),v&&b&&o.jsx("div",{className:"hidden sm:block bg-green-100 dark:bg-green-900 px-2 py-1 rounded-full",children:o.jsxs("span",{className:"text-xs font-bold text-green-800 dark:text-green-200",children:[Object.keys(g).length," símbolos activos"]})})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-xs sm:text-sm text-secondary-600 dark:text-secondary-400",children:"Timeframe:"}),o.jsx("div",{className:"flex bg-secondary-100 dark:bg-secondary-700 rounded-lg p-1",children:[{value:"M1",label:"1m"},{value:"M5",label:"5m"},{value:"M15",label:"15m"},{value:"M30",label:"30m"},{value:"H1",label:"1h"},{value:"H4",label:"4h"},{value:"D1",label:"1d"}].map(H=>o.jsx("button",{onClick:()=>i(H.value),className:je("px-2 sm:px-3 py-1 text-xs font-medium rounded transition-all duration-200",n===H.value?"bg-primary-600 text-white shadow-sm":"text-secondary-600 dark:text-secondary-400 hover:bg-secondary-200 dark:hover:bg-secondary-600"),children:H.label},H.value))})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-4 sm:space-y-0 sm:space-x-6",children:[e&&o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 sm:gap-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-xs sm:text-sm text-secondary-500 dark:text-secondary-400",children:"Balance"}),o.jsx("div",{className:"font-semibold text-sm sm:text-base text-secondary-900 dark:text-white",children:B(((re=S==null?void 0:S.data)==null?void 0:re.balance)||1e4)})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-xs sm:text-sm text-secondary-500 dark:text-secondary-400",children:"Equity"}),o.jsx("div",{className:"font-semibold text-sm sm:text-base text-secondary-900 dark:text-white",children:B(((W=S==null?void 0:S.data)==null?void 0:W.equity)||1e4)})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-xs sm:text-sm text-secondary-500 dark:text-secondary-400",children:"Margen"}),o.jsx("div",{className:"font-semibold text-sm sm:text-base text-secondary-900 dark:text-white",children:B(((K=S==null?void 0:S.data)==null?void 0:K.margin)||0)})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-xs sm:text-sm text-secondary-500 dark:text-secondary-400",children:"P&L"}),o.jsxs("div",{className:je("font-semibold text-sm sm:text-base",(((Z=S==null?void 0:S.data)==null?void 0:Z.profit_loss)||0)>=0?"text-success-600 dark:text-success-400":"text-danger-600 dark:text-danger-400"),children:[(((M=S==null?void 0:S.data)==null?void 0:M.profit_loss)||0)>=0?"+":"",B(((X=S==null?void 0:S.data)==null?void 0:X.profit_loss)||0)]})]})]}),!e&&o.jsxs("div",{className:"border-l border-secondary-200 dark:border-secondary-700 pl-4 sm:pl-6 flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[o.jsxs("button",{onClick:()=>window.open("/login","_blank"),className:"bg-primary-600 hover:bg-primary-700 text-white font-semibold px-3 sm:px-4 py-2 rounded-lg transition-all duration-200 hover:shadow-lg transform hover:scale-105 flex items-center justify-center space-x-2 text-sm",children:[o.jsx(or,{className:"w-4 h-4"}),o.jsx("span",{children:"Login"})]}),o.jsxs("button",{onClick:()=>window.open("/auth/register","_blank"),className:"bg-secondary-600 hover:bg-secondary-700 text-white font-semibold px-3 sm:px-4 py-2 rounded-lg transition-all duration-200 hover:shadow-lg transform hover:scale-105 flex items-center justify-center space-x-2 text-sm",children:[o.jsx(sS,{className:"w-4 h-4"}),o.jsx("span",{children:"Registrarse"})]})]}),e&&t&&o.jsx("div",{className:"border-l border-secondary-200 dark:border-secondary-700 pl-4 sm:pl-6",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center",children:o.jsxs("span",{className:"text-white text-sm font-semibold",children:[(V=t.first_name)==null?void 0:V[0],(Y=t.last_name)==null?void 0:Y[0]]})}),o.jsxs("div",{className:"hidden sm:block",children:[o.jsxs("div",{className:"text-sm font-semibold text-secondary-900 dark:text-white",children:[t.first_name," ",t.last_name]}),o.jsx("div",{className:"text-xs text-secondary-500 dark:text-secondary-400",children:t.email})]})]})})]})]})}),o.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[o.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden",children:[o.jsxs("div",{className:"w-full lg:w-80 bg-white dark:bg-secondary-800 border-b lg:border-b-0 lg:border-r border-secondary-200 dark:border-secondary-700 flex flex-col max-h-96 lg:max-h-none",children:[o.jsx("div",{className:"flex-1 overflow-y-auto p-2 sm:p-4 space-y-3",children:Object.entries((E==null?void 0:E.data)||{}).map(([H,ie])=>o.jsx("div",{children:o.jsxs("div",{className:"mb-2",children:[o.jsxs("button",{onClick:()=>te(H),className:je("w-full flex items-center justify-between p-3 rounded-lg transition-all duration-200 hover:shadow-sm",a[H]?"bg-primary-100 dark:bg-primary-900 text-primary-900 dark:text-primary-100 border-2 border-primary-300 dark:border-primary-700":"bg-secondary-100 dark:bg-secondary-700 hover:bg-secondary-200 dark:hover:bg-secondary-600 border-2 border-transparent"),children:[o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"text-sm font-semibold",children:H}),o.jsxs("div",{className:"text-xs opacity-75",children:[Object.keys(ie||{}).length," instrumentos"]})]}),o.jsx("div",{className:je("transition-transform duration-200",a[H]?"rotate-180":"rotate-0"),children:o.jsx(vi,{className:"w-5 h-5"})})]}),a[H]&&ie&&o.jsx("div",{className:"ml-4 space-y-1 animate-in slide-in-from-top-2 duration-200",children:Object.entries(ie).map(([de,xe])=>{var ze;const le=xe,he=P(),A=((ze=he==null?void 0:he.data)==null?void 0:ze[de])||null,Ce=de===r,be=N(de);return o.jsx("div",{className:"space-y-2",children:o.jsxs("div",{onClick:()=>s(de),className:je("p-3 rounded-lg cursor-pointer transition-all duration-200 hover:shadow-sm relative",Ce?"bg-primary-50 dark:bg-primary-900 border-2 border-primary-300 dark:border-primary-700":"bg-secondary-50 dark:bg-secondary-700 hover:bg-secondary-100 dark:hover:bg-secondary-600 border-2 border-transparent"),children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-sm text-secondary-900 dark:text-white",children:(le==null?void 0:le.name)||de}),o.jsxs("div",{className:"text-xs text-secondary-500 dark:text-secondary-400 flex items-center gap-1",children:[de,be&&o.jsx("span",{className:"text-green-500 text-xs",children:"●"})]})]}),A&&o.jsxs("div",{className:"text-right space-y-1",children:[o.jsxs("div",{className:"flex flex-col items-end space-y-0.5",children:[o.jsxs("div",{className:je("text-sm font-bold transition-all duration-300 flex items-center gap-1",be?"text-green-600 dark:text-green-400":"text-secondary-900 dark:text-white"),children:[Q(A.bid||A.price||0,(le==null?void 0:le.digits)||5),be&&o.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"})]}),A.ask&&A.bid&&o.jsxs("div",{className:"text-xs text-secondary-500 dark:text-secondary-400",children:["Ask: ",Q(A.ask,(le==null?void 0:le.digits)||5)]})]}),o.jsxs("div",{className:je("text-xs font-medium flex items-center justify-end gap-1 transition-all duration-300",(A.change||0)>=0?"text-success-600 dark:text-success-400":"text-danger-600 dark:text-danger-400"),children:[(A.change||0)>=0?o.jsx(Ql,{className:"w-3 h-3"}):o.jsx(Xl,{className:"w-3 h-3"}),o.jsxs("span",{children:[(A.change||0)>=0?"+":"",(A.change||0).toFixed(5)]})]}),A.ask&&A.bid&&o.jsxs("div",{className:"text-xs text-secondary-400 dark:text-secondary-500",children:["Spread: ",((A.ask-A.bid)*Math.pow(10,(le==null?void 0:le.digits)||5)).toFixed(1)," pips"]})]})]}),Ce&&o.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-1 duration-300",children:[o.jsxs("div",{className:je("relative overflow-hidden rounded-xl p-5 mb-4 border transition-all duration-500 transform hover:scale-[1.02]",be?"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 border-emerald-500/30 shadow-2xl shadow-emerald-500/20":"bg-gradient-to-br from-slate-100 to-slate-200 dark:from-secondary-800 dark:to-secondary-900 border-secondary-300 dark:border-secondary-600"),children:[be&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-emerald-500/5 to-transparent animate-shimmer"}),o.jsxs("div",{className:"relative z-10 flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:je("text-xl font-black tracking-tight",be?"text-white":"text-secondary-900 dark:text-white"),children:de}),be&&o.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 bg-emerald-500/20 rounded-full border border-emerald-500/30",children:[o.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse shadow-lg shadow-emerald-400/50"}),o.jsx("span",{className:"text-xs text-emerald-300 font-bold tracking-wide",children:"LIVE"})]})]}),o.jsx("div",{className:je("text-xs font-medium px-2 py-1 rounded-lg",be?"bg-slate-700/50 text-slate-300":"bg-secondary-200 dark:bg-secondary-700 text-secondary-600 dark:text-secondary-400"),children:new Date((A==null?void 0:A.timestamp)||Date.now()).toLocaleTimeString()})]}),o.jsxs("div",{className:"relative z-10 flex items-center justify-between mb-4",children:[o.jsxs("div",{className:je("text-4xl font-black tracking-tight transition-all duration-300 relative",A!=null&&A.change&&A.change>0?be?"text-emerald-300":"text-green-600 dark:text-green-400":A!=null&&A.change&&A.change<0?be?"text-red-300":"text-red-600 dark:text-red-400":be?"text-white":"text-secondary-900 dark:text-white"),children:[Q((A==null?void 0:A.price)||(A==null?void 0:A.ask)||(A==null?void 0:A.bid)||0,(le==null?void 0:le.digits)||5),be&&(A==null?void 0:A.change)&&o.jsx("div",{className:je("absolute inset-0 rounded-lg animate-ping opacity-20",A.change>0?"bg-emerald-400":"bg-red-400")})]}),(A==null?void 0:A.change)!==void 0&&o.jsxs("div",{className:je("flex items-center space-x-2 px-4 py-2 rounded-xl font-bold text-sm shadow-lg transition-all duration-300 transform hover:scale-105",(A.change||0)>=0?"bg-gradient-to-r from-emerald-500 to-green-500 text-white shadow-emerald-500/30":"bg-gradient-to-r from-red-500 to-rose-500 text-white shadow-red-500/30"),children:[(A.change||0)>=0?o.jsx(Ql,{className:"w-4 h-4 animate-bounce"}):o.jsx(Xl,{className:"w-4 h-4 animate-bounce"}),o.jsxs("span",{children:[(A.change||0)>=0?"+":"",(A.change||0).toFixed(5)]}),o.jsxs("span",{className:"text-xs opacity-80",children:["(",(Math.abs(A.change||0)/((A==null?void 0:A.price)||1)*100).toFixed(2),"%)"]})]})]}),A&&o.jsxs("div",{className:"relative z-10 grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:je("text-center p-3 rounded-lg border",be?"bg-slate-800/50 border-slate-600/30 text-slate-300":"bg-secondary-50 dark:bg-secondary-700/50 border-secondary-200 dark:border-secondary-600 text-secondary-700 dark:text-secondary-300"),children:[o.jsx("div",{className:"text-xs font-medium opacity-70 mb-1",children:"BID"}),o.jsx("div",{className:"font-bold text-sm",children:Q(A.bid||A.price||0,(le==null?void 0:le.digits)||5)})]}),o.jsxs("div",{className:je("text-center p-3 rounded-lg border",be?"bg-slate-800/50 border-slate-600/30 text-slate-300":"bg-secondary-50 dark:bg-secondary-700/50 border-secondary-200 dark:border-secondary-600 text-secondary-700 dark:text-secondary-300"),children:[o.jsx("div",{className:"text-xs font-medium opacity-70 mb-1",children:"ASK"}),o.jsx("div",{className:"font-bold text-sm",children:Q(A.ask||A.price||0,(le==null?void 0:le.digits)||5)})]}),o.jsxs("div",{className:je("text-center p-3 rounded-lg border",be?"bg-slate-800/50 border-slate-600/30 text-slate-300":"bg-secondary-50 dark:bg-secondary-700/50 border-secondary-200 dark:border-secondary-600 text-secondary-700 dark:text-secondary-300"),children:[o.jsx("div",{className:"text-xs font-medium opacity-70 mb-1",children:"SPREAD"}),o.jsxs("div",{className:"font-bold text-sm",children:[((A.ask-A.bid)*Math.pow(10,(le==null?void 0:le.digits)||5)).toFixed(1)," pips"]})]})]})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsxs("button",{onClick:Be=>{Be.stopPropagation(),D("buy")},className:je("group flex-1 relative overflow-hidden font-bold text-sm py-4 px-6 rounded-xl transition-all duration-300 hover:shadow-2xl transform hover:scale-105 flex flex-col items-center justify-center border-2",be?"bg-gradient-to-br from-emerald-600 via-emerald-700 to-green-700 hover:from-emerald-500 hover:to-green-600 text-white border-emerald-400/50 shadow-xl shadow-emerald-500/30":"bg-gradient-to-br from-green-600 to-green-700 hover:from-green-500 hover:to-green-600 text-white border-green-500/50 shadow-lg"),children:[be&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-shimmer"}),o.jsxs("div",{className:"relative z-10 flex items-center space-x-2 mb-1",children:[o.jsx(Ql,{className:je("w-5 h-5 transition-transform duration-300",be?"group-hover:animate-bounce":"")}),o.jsx("span",{className:"font-black tracking-wide",children:"COMPRAR"}),be&&o.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-ping shadow-lg"})]}),((A==null?void 0:A.ask)||(A==null?void 0:A.price))&&o.jsx("div",{className:"relative z-10 text-xs font-bold opacity-90 bg-black/20 px-2 py-1 rounded-lg",children:Q(A.ask||A.price||0,(le==null?void 0:le.digits)||5)}),be&&o.jsx("div",{className:"absolute top-2 right-2 w-3 h-3 bg-white/30 rounded-full animate-pulse"})]}),o.jsxs("button",{onClick:Be=>{Be.stopPropagation(),D("sell")},className:je("group flex-1 relative overflow-hidden font-bold text-sm py-4 px-6 rounded-xl transition-all duration-300 hover:shadow-2xl transform hover:scale-105 flex flex-col items-center justify-center border-2",be?"bg-gradient-to-br from-red-600 via-red-700 to-rose-700 hover:from-red-500 hover:to-rose-600 text-white border-red-400/50 shadow-xl shadow-red-500/30":"bg-gradient-to-br from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 text-white border-red-500/50 shadow-lg"),children:[be&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-shimmer group-hover:animate-none"}),o.jsxs("div",{className:"relative z-10 flex items-center space-x-2 mb-1",children:[o.jsx(Xl,{className:je("w-5 h-5 transition-transform duration-300",be?"group-hover:animate-bounce":"")}),o.jsx("span",{className:"font-black tracking-wide",children:"VENDER"}),be&&o.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-ping shadow-lg"})]}),((A==null?void 0:A.bid)||(A==null?void 0:A.price))&&o.jsx("div",{className:"relative z-10 text-xs font-bold opacity-90 bg-black/20 px-2 py-1 rounded-lg",children:Q(A.bid||A.price||0,(le==null?void 0:le.digits)||5)}),be&&o.jsx("div",{className:"absolute top-2 right-2 w-3 h-3 bg-white/30 rounded-full animate-pulse"})]})]})]})]})},de)})})]})},H))}),o.jsx("div",{className:"flex-1 bg-white dark:bg-secondary-800 min-h-96",children:o.jsx(qte,{ref:x,symbol:r,timeframe:n,data:[],className:"w-full h-full"})})]}),o.jsx("div",{className:"h-auto lg:h-48 bg-white dark:bg-secondary-800 border-t border-secondary-200 dark:border-secondary-700",children:o.jsxs("div",{className:"p-2 sm:p-4",children:[o.jsx("h3",{className:"text-base sm:text-lg font-semibold text-secondary-900 dark:text-white mb-4",children:"Órdenes Activas"}),o.jsx("div",{className:"space-y-2 overflow-y-auto max-h-32 lg:max-h-32",children:_!=null&&_.data&&_.data.length>0?_.data.map(H=>o.jsxs("div",{className:"bg-secondary-50 dark:bg-secondary-700 p-2 sm:p-3 rounded-lg",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start mb-2 space-y-2 sm:space-y-0",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:je("w-2 h-2 rounded-full",H.type==="buy"?"bg-success-500":"bg-danger-500")}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-sm text-secondary-900 dark:text-white",children:H.symbol}),o.jsxs("div",{className:je("text-xs font-medium",H.type==="buy"?"text-success-600 dark:text-success-400":"text-danger-600 dark:text-danger-400"),children:[H.type.toUpperCase()," ",H.volume]})]})]}),o.jsx("button",{onClick:()=>I(H.id),className:"text-danger-500 hover:text-danger-700 p-1 self-end sm:self-auto",children:o.jsx(Wt,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-xs",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-secondary-500 dark:text-secondary-400",children:"Precio:"}),o.jsx("span",{className:"text-secondary-900 dark:text-white",children:Q(H.open_price||0)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-secondary-500 dark:text-secondary-400",children:"P&L:"}),o.jsxs("span",{className:je("font-medium",(H.profit||0)>=0?"text-success-600 dark:text-success-400":"text-danger-600 dark:text-danger-400"),children:[(H.profit||0)>=0?"+":"",B(H.profit||0)]})]})]})]},H.id)):o.jsxs("div",{className:"text-center text-secondary-500 dark:text-secondary-400 py-8",children:[o.jsx("p",{className:"text-sm",children:"No hay órdenes activas"}),o.jsx("p",{className:"text-xs",children:"Selecciona un símbolo y haz clic en BUY o SELL"})]})})]})})]}),o.jsx(Zte,{isOpen:c,onClose:()=>d(!1),symbol:r,type:u,currentPrice:(()=>{var le;const H=P(),ie=(le=H==null?void 0:H.data)==null?void 0:le[r];if(!ie)return;const de=ie.bid||0,xe=ie.ask||0;return{bid:de,ask:xe,spread:ie.spread||xe-de,change:ie.change||0,timestamp:ie.timestamp||Date.now(),previousPrice:ie.previousPrice||0}})(),onSubmit:H=>{C.mutate(H)},isLoading:C.isPending})]})]})}function Zte({isOpen:t,onClose:e,symbol:r,type:s,currentPrice:n,onSubmit:i,isLoading:a}){const[l,c]=w.useState({order_type:"market",volume:.01,price:(n==null?void 0:n.ask)||0,stop_loss:"",take_profit:""}),d=u=>{u.preventDefault();const h={account_id:1,symbol:r,type:s,order_type:l.order_type,volume:l.volume};l.order_type!=="market"&&(h.price=l.price),l.stop_loss&&(h.stop_loss=parseFloat(l.stop_loss)),l.take_profit&&(h.take_profit=parseFloat(l.take_profit)),i(h)};return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-secondary-800 rounded-lg p-6 w-full max-w-md mx-4",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:["Nueva Orden ",s.toUpperCase()," - ",r]}),o.jsx("button",{onClick:e,className:"text-secondary-400 hover:text-secondary-600",children:o.jsx(Wt,{className:"w-5 h-5"})})]}),o.jsxs("form",{onSubmit:d,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Tipo de Orden"}),o.jsxs("select",{value:l.order_type,onChange:u=>c({...l,order_type:u.target.value}),className:"input",children:[o.jsx("option",{value:"market",children:"Market"}),o.jsx("option",{value:"limit",children:"Limit"}),o.jsx("option",{value:"stop",children:"Stop"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Volumen"}),o.jsx("input",{type:"number",step:"0.01",min:"0.01",value:l.volume,onChange:u=>c({...l,volume:parseFloat(u.target.value)}),className:"input",required:!0})]}),l.order_type!=="market"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Precio"}),o.jsx("input",{type:"number",step:"0.00001",value:l.price,onChange:u=>c({...l,price:parseFloat(u.target.value)}),className:"input",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Stop Loss"}),o.jsx("input",{type:"number",step:"0.00001",value:l.stop_loss,onChange:u=>c({...l,stop_loss:u.target.value}),className:"input",placeholder:"Opcional"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Take Profit"}),o.jsx("input",{type:"number",step:"0.00001",value:l.take_profit,onChange:u=>c({...l,take_profit:u.target.value}),className:"input",placeholder:"Opcional"})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-secondary-200 dark:border-secondary-700",children:[o.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:a,className:je("btn",s==="buy"?"btn-success":"btn-danger"),children:s==="buy"?"COMPRAR":"VENDER"})]})]})]})}):null}const Jte=[{value:"blue",label:"Azul",class:"bg-blue-500"},{value:"green",label:"Verde",class:"bg-green-500"},{value:"yellow",label:"Amarillo",class:"bg-yellow-500"},{value:"red",label:"Rojo",class:"bg-red-500"},{value:"purple",label:"Morado",class:"bg-purple-500"},{value:"indigo",label:"Índigo",class:"bg-indigo-500"},{value:"pink",label:"Rosa",class:"bg-pink-500"},{value:"gray",label:"Gris",class:"bg-gray-500"}];function ere(){var F,P,B,Q;const[t,e]=w.useState("states"),[r,s]=w.useState(!1),[n,i]=w.useState(!1),[a,l]=w.useState(null),[c,d]=w.useState(null),[u,h]=w.useState({name:"",color:"blue",icon:"",description:"",is_active:!0}),[f,m]=w.useState({from_state_id:0,to_state_id:0,name:"",description:"",requires_comment:!1,is_active:!0}),x=os(),{data:p,isLoading:g}=Ke({queryKey:["desk-states"],queryFn:async()=>{const D=await fetch("/api/states.php",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!D.ok)throw new Error("Error al cargar estados");return D.json()}}),{data:v,isLoading:b}=Ke({queryKey:["state-transitions"],queryFn:async()=>{const D=await fetch("/api/state-transitions.php",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!D.ok)throw new Error("Error al cargar transiciones");return D.json()}}),y=ot({mutationFn:async D=>{const I=a?`/api/states.php?id=${a.id}`:"/api/states.php",re=await fetch(I,{method:a?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(D)});if(!re.ok)throw new Error("Error al guardar estado");return re.json()},onSuccess:()=>{me.success(a?"Estado actualizado":"Estado creado"),s(!1),j(),x.invalidateQueries({queryKey:["desk-states"]})},onError:D=>{me.error(D.message||"Error al guardar estado")}}),k=ot({mutationFn:async D=>{const I=await fetch(`/api/states.php?id=${D}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!I.ok)throw new Error("Error al eliminar estado");return I.json()},onSuccess:()=>{me.success("Estado eliminado"),x.invalidateQueries({queryKey:["desk-states"]})},onError:D=>{me.error(D.message||"Error al eliminar estado")}}),N=ot({mutationFn:async D=>{const I=c?`/api/state-transitions.php?id=${c.id}`:"/api/state-transitions.php",re=await fetch(I,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(D)});if(!re.ok)throw new Error("Error al guardar transición");return re.json()},onSuccess:()=>{me.success(c?"Transición actualizada":"Transición creada"),i(!1),_(),x.invalidateQueries({queryKey:["state-transitions"]})},onError:D=>{me.error(D.message||"Error al guardar transición")}}),E=ot({mutationFn:async D=>{const I=await fetch(`/api/state-transitions.php?id=${D}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!I.ok)throw new Error("Error al eliminar transición");return I.json()},onSuccess:()=>{me.success("Transición eliminada"),x.invalidateQueries({queryKey:["state-transitions"]})},onError:D=>{me.error(D.message||"Error al eliminar transición")}}),j=()=>{h({name:"",color:"blue",icon:"",description:"",is_active:!0}),l(null)},_=()=>{m({from_state_id:0,to_state_id:0,name:"",description:"",requires_comment:!1,is_active:!0}),d(null)},S=D=>{l(D),h({name:D.name,color:D.color,icon:D.icon||"",description:D.description||"",is_active:D.is_active}),s(!0)},C=D=>{d(D),m({from_state_id:D.from_state_id,to_state_id:D.to_state_id,name:D.name,description:D.description||"",requires_comment:D.requires_comment,is_active:D.is_active}),i(!0)};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsxs("h1",{className:"text-2xl font-bold text-secondary-900 dark:text-white flex items-center",children:[o.jsx(ZE,{className:"w-8 h-8 mr-3 text-primary-600"}),"Gestión de Estados Dinámicos"]}),o.jsx("p",{className:"text-secondary-600 dark:text-secondary-400 mt-1",children:"Configura los estados y transiciones para tu mesa de trabajo"})]})}),o.jsx("div",{className:"border-b border-secondary-200 dark:border-secondary-700",children:o.jsxs("nav",{className:"-mb-px flex space-x-8",children:[o.jsx("button",{onClick:()=>e("states"),className:je("py-2 px-1 border-b-2 font-medium text-sm transition-colors",t==="states"?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-secondary-500 hover:text-secondary-700 hover:border-secondary-300 dark:text-secondary-400 dark:hover:text-secondary-300"),children:"Estados"}),o.jsx("button",{onClick:()=>e("transitions"),className:je("py-2 px-1 border-b-2 font-medium text-sm transition-colors",t==="transitions"?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-secondary-500 hover:text-secondary-700 hover:border-secondary-300 dark:text-secondary-400 dark:hover:text-secondary-300"),children:"Transiciones"})]})}),t==="states"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Estados Configurados"}),o.jsxs("button",{onClick:()=>{j(),l(null),s(!0)},className:"btn btn-primary",children:[o.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Nuevo Estado"]})]}),g?o.jsx("div",{className:"flex justify-center py-8",children:o.jsx(Zd,{className:"w-6 h-6 animate-spin text-secondary-400"})}):((F=p==null?void 0:p.data)==null?void 0:F.length)>0?o.jsx("div",{className:"grid gap-4",children:p.data.map(D=>o.jsx("div",{className:"bg-white dark:bg-secondary-800 rounded-lg border border-secondary-200 dark:border-secondary-700 p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:je("w-4 h-4 rounded-full",`bg-${D.color}-500`)}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-secondary-900 dark:text-white",children:D.name}),D.description&&o.jsx("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:D.description})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("span",{className:je("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",D.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"),children:[D.is_active?o.jsx(qa,{className:"w-3 h-3 mr-1"}):o.jsx(JE,{className:"w-3 h-3 mr-1"}),D.is_active?"Activo":"Inactivo"]}),o.jsx("button",{onClick:()=>S(D),className:"p-1 text-secondary-400 hover:text-secondary-600",children:o.jsx(qo,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>k.mutate(D.id),className:"p-1 text-red-400 hover:text-red-600",children:o.jsx(Go,{className:"w-4 h-4"})})]})]})},D.id))}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(rL,{className:"w-12 h-12 text-secondary-300 dark:text-secondary-600 mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400",children:"No hay estados configurados"})]})]}),t==="transitions"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-lg font-semibold text-secondary-900 dark:text-white",children:"Transiciones Configuradas"}),o.jsxs("button",{onClick:()=>{_(),d(null),i(!0)},className:"btn btn-primary",children:[o.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Nueva Transición"]})]}),b?o.jsx("div",{className:"flex justify-center py-8",children:o.jsx(Zd,{className:"w-6 h-6 animate-spin text-secondary-400"})}):((P=v==null?void 0:v.data)==null?void 0:P.length)>0?o.jsx("div",{className:"grid gap-4",children:v.data.map(D=>o.jsx("div",{className:"bg-white dark:bg-secondary-800 rounded-lg border border-secondary-200 dark:border-secondary-700 p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(rD,{className:"w-5 h-5 text-secondary-400"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-secondary-900 dark:text-white",children:D.name}),o.jsxs("p",{className:"text-sm text-secondary-500 dark:text-secondary-400",children:["Estado ",D.from_state_id," → Estado ",D.to_state_id]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[D.requires_comment&&o.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",children:"Requiere comentario"}),o.jsx("span",{className:je("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",D.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"),children:D.is_active?"Activa":"Inactiva"}),o.jsx("button",{onClick:()=>C(D),className:"p-1 text-secondary-400 hover:text-secondary-600",children:o.jsx(qo,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>E.mutate(D.id),className:"p-1 text-red-400 hover:text-red-600",children:o.jsx(Go,{className:"w-4 h-4"})})]})]})},D.id))}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Zd,{className:"w-12 h-12 text-secondary-300 dark:text-secondary-600 mx-auto mb-4"}),o.jsx("p",{className:"text-secondary-500 dark:text-secondary-400",children:"No hay transiciones configuradas"})]})]}),r&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsx("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow-xl max-w-md w-full mx-4",children:o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white mb-4",children:a?"Editar Estado":"Nuevo Estado"}),o.jsxs("form",{onSubmit:D=>{D.preventDefault(),y.mutate({...u,...a&&{id:a.id}})},className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Nombre *"}),o.jsx("input",{type:"text",value:u.name,onChange:D=>h({...u,name:D.target.value}),className:"w-full px-3 py-2 border border-secondary-300 dark:border-secondary-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-secondary-700 dark:text-white",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Color"}),o.jsx("div",{className:"grid grid-cols-4 gap-2",children:Jte.map(D=>o.jsxs("button",{type:"button",onClick:()=>h({...u,color:D.value}),className:je("p-3 rounded-md border-2 transition-all",u.color===D.value?"border-primary-500 ring-2 ring-primary-200":"border-secondary-200 dark:border-secondary-600"),children:[o.jsx("div",{className:je("w-6 h-6 rounded-full mx-auto",D.class)}),o.jsx("span",{className:"text-xs mt-1 block",children:D.label})]},D.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Descripción"}),o.jsx("textarea",{value:u.description,onChange:D=>h({...u,description:D.target.value}),className:"w-full px-3 py-2 border border-secondary-300 dark:border-secondary-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-secondary-700 dark:text-white",rows:3})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"is_active",checked:u.is_active,onChange:D=>h({...u,is_active:D.target.checked}),className:"rounded border-secondary-300 text-primary-600 focus:ring-primary-500"}),o.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm text-secondary-700 dark:text-secondary-300",children:"Estado activo"})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>s(!1),className:"btn btn-ghost",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:y.isPending,className:"btn btn-primary",children:y.isPending?"Guardando...":"Guardar"})]})]})]})})}),n&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsx("div",{className:"bg-white dark:bg-secondary-800 rounded-lg shadow-xl max-w-md w-full mx-4",children:o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-secondary-900 dark:text-white mb-4",children:c?"Editar Transición":"Nueva Transición"}),o.jsxs("form",{onSubmit:D=>{D.preventDefault(),N.mutate({...f,...c&&{id:c.id}})},className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Estado Origen *"}),o.jsxs("select",{value:f.from_state_id,onChange:D=>m({...f,from_state_id:Number(D.target.value)}),className:"w-full px-3 py-2 border border-secondary-300 dark:border-secondary-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-secondary-700 dark:text-white",required:!0,children:[o.jsx("option",{value:0,children:"Seleccionar estado origen"}),(B=p==null?void 0:p.data)==null?void 0:B.map(D=>o.jsx("option",{value:D.id,children:D.name},D.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Estado Destino *"}),o.jsxs("select",{value:f.to_state_id,onChange:D=>m({...f,to_state_id:Number(D.target.value)}),className:"w-full px-3 py-2 border border-secondary-300 dark:border-secondary-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-secondary-700 dark:text-white",required:!0,children:[o.jsx("option",{value:0,children:"Seleccionar estado destino"}),(Q=p==null?void 0:p.data)==null?void 0:Q.map(D=>o.jsx("option",{value:D.id,children:D.name},D.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Nombre de la Transición *"}),o.jsx("input",{type:"text",value:f.name,onChange:D=>m({...f,name:D.target.value}),className:"w-full px-3 py-2 border border-secondary-300 dark:border-secondary-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-secondary-700 dark:text-white",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2",children:"Descripción"}),o.jsx("textarea",{value:f.description,onChange:D=>m({...f,description:D.target.value}),className:"w-full px-3 py-2 border border-secondary-300 dark:border-secondary-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-secondary-700 dark:text-white",rows:3})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"requires_comment",checked:f.requires_comment,onChange:D=>m({...f,requires_comment:D.target.checked}),className:"rounded border-secondary-300 text-primary-600 focus:ring-primary-500"}),o.jsx("label",{htmlFor:"requires_comment",className:"ml-2 text-sm text-secondary-700 dark:text-secondary-300",children:"Requiere comentario obligatorio"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"transition_active",checked:f.is_active,onChange:D=>m({...f,is_active:D.target.checked}),className:"rounded border-secondary-300 text-primary-600 focus:ring-primary-500"}),o.jsx("label",{htmlFor:"transition_active",className:"ml-2 text-sm text-secondary-700 dark:text-secondary-300",children:"Transición activa"})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>i(!1),className:"btn btn-ghost",children:"Cancelar"}),o.jsx("button",{type:"submit",disabled:N.isPending,className:"btn btn-primary",children:N.isPending?"Guardando...":"Guardar"})]})]})]})})})]})}function tre(){const{user:t,isLoading:e,isAuthenticated:r}=ll(),{theme:s}=cx();return typeof document<"u"&&document.documentElement.classList.toggle("dark",s==="dark"),console.log("App render - user:",t,"isLoading:",e,"isAuthenticated:",r),e?(console.log("Mostrando loading spinner..."),o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-secondary-50 dark:bg-secondary-900",children:o.jsx(St,{size:"lg"})})):(console.log("Renderizando rutas principales..."),o.jsx("div",{className:"min-h-screen bg-secondary-50 dark:bg-secondary-900",children:o.jsxs(yP,{children:[o.jsx(Rt,{path:"/webtrader",element:o.jsx(Qte,{})}),o.jsxs(Rt,{path:"/auth",element:o.jsx(NL,{}),children:[o.jsx(Rt,{path:"login",element:o.jsx(T7,{})}),o.jsx(Rt,{path:"register",element:o.jsx(F7,{})}),o.jsx(Rt,{index:!0,element:o.jsx(u0,{to:"/auth/login",replace:!0})})]}),t?o.jsx(o.Fragment,{children:o.jsxs(Rt,{path:"/",element:o.jsx(jL,{}),children:[o.jsx(Rt,{index:!0,element:o.jsx(u0,{to:"/dashboard",replace:!0})}),o.jsx(Rt,{path:"dashboard",element:o.jsx(Pz,{})}),o.jsx(Rt,{path:"employee-summary",element:o.jsx(hQ,{})}),o.jsx(Rt,{path:"leads",element:o.jsx(XX,{})}),o.jsx(Rt,{path:"leads/:id",element:o.jsx(eQ,{})}),o.jsx(Rt,{path:"leads/import",element:o.jsx(tQ,{})}),o.jsx(Rt,{path:"leads/wizard",element:o.jsx(iQ,{})}),o.jsx(Rt,{path:"users",element:o.jsx(pQ,{})}),o.jsx(Rt,{path:"roles",element:o.jsx(gQ,{})}),o.jsx(Rt,{path:"desks",element:o.jsx(vQ,{})}),o.jsx(Rt,{path:"/states",element:o.jsx(ere,{})}),o.jsx(Rt,{path:"trading",element:o.jsx(_J,{})}),o.jsx(Rt,{path:"deposits-withdrawals",element:o.jsx(AJ,{})})]})}):window.location.pathname.startsWith("/webtrader")?null:o.jsx(Rt,{path:"*",element:o.jsx(u0,{to:"/auth/login",replace:!0})}),o.jsx(Rt,{path:"*",element:o.jsx(u0,{to:window.location.pathname==="/webtrader"?"/webtrader":t?"/dashboard":"/auth/login",replace:!0})})]})}))}const rre=new ZP({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:5*60*1e3}}});mg.createRoot(document.getElementById("root")).render(o.jsx(Ie.StrictMode,{children:o.jsx(EP,{children:o.jsx(JP,{client:rre,children:o.jsx(P8,{children:o.jsxs(F8,{children:[o.jsx(tre,{}),o.jsx(ZM,{position:"top-right",toastOptions:{duration:4e3,style:{background:"var(--toast-bg)",color:"var(--toast-color)",border:"1px solid var(--toast-border)"},success:{iconTheme:{primary:"#10b981",secondary:"#ffffff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#ffffff"}}}})]})})})})}));
//# sourceMappingURL=index-3d42eb83.js.map
